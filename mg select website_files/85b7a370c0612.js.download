//15.174.2-es2019 2026-01-29T15:40:46.475Z (85b7a370c0612)
var CS_CONF={"collectionEnabled":true,"projectId":364804,"status":1,"hostnames":["https://www.mgmotor.co.in/","mgmotor.co.in","mgselect.co.in"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":100,"validationRate":10,"lastTrackingDraw":null,"trackerDomain":"c.az.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"malkaQuotaServiceDomain":"q-eu1.az.contentsquare.net","malkaRecordingDomain":"k-eu1.az.contentsquare.net","ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"jsErrorsEnabled":1,"customErrorsEnabled":1,"customErrors":{"consoleMessageLogLevels":[]},"jsCustomErrorsEnabled":0,"apiErrorsEnabled":1,"customHashIdEnabled":1,"recordingEncryptionEnabled":1,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":null,"whitelistedAttributes":null,"replayRecordingUnmaskedUrlRegex":"","replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":"","anonymisationMethod":null,"anonymizeDigits":null,"tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":0,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"taskSchedulerOptions":{"enabled":1},"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"staticResourceManagerDomain":"srm.aa.contentsquare.net","useStaticResourceManager":1,"performanceTimingOptions":{"withNavigation":true,"withResource":true},"replayConsentRequiredForSession":0,"displayAdOptions":null,"voc":{"siteId":null,"enabled":0},"eventsApiEnabled":0,"dynamicConfDomain":"t.contentsquare.net/settings","collectHierarchy":0,"collectSubmit":0,"collectTargetText":1,"tagVerificationDomain":"tcvsapi.contentsquare.com","startMode":1,"apiErrors":{"collectStandardHeaders":0,"collectionRules":[]}};
(()=>{var fu=Object.defineProperty;var pu=(s,r,t)=>r in s?fu(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var _e=(s,r,t)=>pu(s,typeof r!="symbol"?r+"":r,t);var me={};me.d=(s,r)=>{for(var t in r)me.o(r,t)&&!me.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:r[t]})};me.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();me.o=(s,r)=>Object.prototype.hasOwnProperty.call(s,r);me.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var ro={};me.r(ro);me.d(ro,{getRequestParameters:()=>Ip});function Ns(s,r){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(r)]),t!=null?t:s[r]}var lt=(()=>{let s;return function(r){r.debug="debug",r.warn="warn",r.implementation="implementation",r.error="error",r.critical="critical"}(s||(s={})),s})();function Wt(s){return Q(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function bs(s){return s===parseInt(s,10)}function G(s){return Q(s)&&(typeof s=="string"||s instanceof csString)}function fr(s){return typeof s=="boolean"}function Ts(s){return typeof s=="object"}function Q(s){return typeof s!="undefined"}function Mt(s){return Q(s)&&s!==null}function pc(s){return typeof s=="object"&&s!==null}function gu(s,r,t){return bs(s)&&s>=r&&s<=t}function Cn(s){for(let r in s)return!1;return!0}function os(s){return typeof s=="function"}function Rr(s){return s instanceof Element}function Pe(s){return s instanceof Error}function no(s){let r=s.length;for(let t=0;t<r;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}var qr={[lt.debug]:0,[lt.warn]:1,[lt.implementation]:1,[lt.error]:2,[lt.critical]:3},nt={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function mu(s){nt=s}var x=s=>(r,t,e)=>{let i=(t==null?void 0:t.toString())||"",n=s||`${r.constructor&&r.constructor.name}.${i}`;if(e){let o=e.value;e.value=function(...c){return Rs(n,o.bind(this))(...c)}}};function Rs(s,r){return function(...t){try{let e=r.apply(this,t);return Q(self.Promise)&&e instanceof self.Promise?e.then(i=>i,i=>nt.error(Pe(i)?i:new Error(i),s)):e}catch(e){try{nt.error(Pe(e)?e:new Error(e),s)}catch{}}}}function ht(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}var Ci=typeof window=="undefined";function yu(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof me.g!="undefined"?me.g:typeof process!="undefined"?process:Function("return this")()}var rt=yu();function oo(s){let r=new ArrayBuffer(s.length),t=new Uint8Array(r);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return r}function In(s){let r=new Uint8Array(s),t="";for(let e=0;e<r.byteLength;e+=1)t+=csString.fromCodePoint(r[e]);return t}function gc(s){let r=rt.atob(s);return oo(r)}function Pn(s){let r=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(r,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function Zo(s){let r=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=r?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!r&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(o){nt.warn(`${o}, calling decodeURIComponent on: ${e[1]}`)}let n=r?gc(e[1]):oo(e[1]);return new Blob([n],{type:csString.prototype.replace.call(e[0],"data:","")})}var mc=typeof performance!="undefined"&&!!performance.now,ta=mc?()=>performance.now():()=>csDate.now(),Eu=(()=>{var s,r;return mc?(r=(s=performance.timing)===null||s===void 0?void 0:s.navigationStart)!==null&&r!==void 0?r:Math.floor(performance.timeOrigin):0})(),ao=34164e6,P={now(){return Math.round(ta()+Eu)},elapsed(){return ta()}};function ea(){return Math.floor(P.now()/1e3)}function yc(){return typeof rt.Promise=="function"}function vu(){var s;return typeof crypto!="undefined"&&os((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function sa(){var s,r;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((r=window.navigation)===null||r===void 0?void 0:r.removeEventListener)=="function"}function Dt(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function Ii(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var Su=Number.MAX_SAFE_INTEGER||9007199254740991,Cs={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=Su){return Math.floor(Math.random()*s)}};function pr(s,r){let t,e,i,n,o,c=null,l=u=>{let f=P.elapsed();if(!u&&c!==null){let m=r-(f-c);if(m>=1){i=rt.csSetTimeout(l,m);return}}let y=f-n;i=null,c=null,n=null,o=s.apply(t,[y,...e])},h=function(){if(t=this,e=arguments,n){c=P.elapsed();return}return n=P.elapsed(),i=rt.csSetTimeout(l,r),o};return h.flushPending=()=>{i&&(rt.csClearTimeout(i),l(!0))},h.cancel=()=>{c=null,n=null,i&&(rt.csClearTimeout(i),i=null)},h}var ee=(()=>{class s{static setGlobalService(t){s.globalService=t}static KE(t){this.JE.test(t)||nt.error(`Invalid metric name: "${t}". Must contain only letters with optional hyphens or dots between words.`)}static validateParameterName(t){!/^https?:\/\/.+/.test(t)&&!this.QE.test(t)&&nt.error(`Invalid parameter name: "${t}". Must start with letters and can contain letters or numbers after hyphens, dots, or colons.`)}constructor(t){this.name=t,this.values={},s.KE(t)}reset(){this.values={}}flush(t=""){if(!s.globalService)return!1;let e=this.values,i=Object.keys(e);if(!i.length)return!1;let n=csArray.prototype.map.call(i,o=>({name:this.name,parameter:`${t===""?"":`${t}.`}${o}`,value:Math.round(e[o])}));return s.globalService.push(n),this.reset(),n.length>0}}return s.globalService=null,s.JE=/^[a-zA-Z]+([-.][a-zA-Z]+)*$/,s.QE=/^[a-zA-Z]+([-.:_][a-zA-Z0-9]+)*$/,ht([x()],s.prototype,"flush",null),s})(),Et=(()=>{class s extends ee{constructor(t,e=100){super(t),this.ZE=e,this.values={},e&&(this.debouncedFlush=pr(()=>this.flush(),this.ZE))}count(t,e=1){ee.globalService&&(this.values[t]||ee.validateParameterName(t),this.values[t]=(this.values[t]||0)+e,this.debouncedFlush())}}return s})(),tr=(()=>{class s extends ee{constructor(t,e=["max","average","total","count"]){super(t),this.collecting=e,this.values={average:0,count:0,max:0,total:0}}get average(){return this.values.average}get count(){return this.values.count}get max(){return this.values.max}get total(){return this.values.total}flush(t=""){if(this.count===0)return!1;let e=Object.keys(this.values);return csArray.prototype.forEach.call(csArray.prototype.filter.call(e,i=>!csArray.prototype.some.call(this.collecting,n=>i===n)),i=>{delete this.values[i]}),super.flush(t)}push(t){this.values.count++,this.values.total+=t,this.values.max=Math.max(this.values.max,t),this.values.average=this.values.total/this.values.count}reset(){this.values={count:0,total:0,max:0,average:0}}}return s})(),er=(()=>{class s extends ee{constructor(t,e=["max","average","total","count"]){super(t),this.collecting=e}flush(t=""){let e=Object.keys(this.values);return csArray.prototype.forEach.call(csArray.prototype.filter.call(e,i=>!csArray.prototype.some.call(this.collecting,n=>csString.prototype.endsWith.call(i,`.${n}`))),i=>{delete this.values[i]}),super.flush(t)}add(t,e){var i,n,o,c,l,h,u;if(!ee.globalService)return;this.values[`${t}.count`]||ee.validateParameterName(t);let f=y=>this.values[`${t}.${y}`];(i=(c=this.values)[l=`${t}.count`])!==null&&i!==void 0||(c[l]=0),(n=(h=this.values)[u=`${t}.total`])!==null&&n!==void 0||(h[u]=0),this.values[`${t}.count`]++,this.values[`${t}.total`]+=e,this.values[`${t}.max`]=Math.max((o=f("max"))!==null&&o!==void 0?o:0,e),this.values[`${t}.average`]=f("total")/f("count")}}return s})(),_u=(()=>{class s extends ee{constructor(){super(...arguments),this.values={}}set(t,e="flags"){var i,n;ee.globalService&&(this.values[e]||ee.validateParameterName(e),(i=(n=this.values)[e])!==null&&i!==void 0||(n[e]=0),this.values[e]|=t,this.flush())}}return s})(),wu=(()=>{class s extends ee{constructor(t,e={iterations:10,interval:2e3}){super(t),this.hf=e,this.oa=0,this.Be=null,this.aa=[],this.values={}}push(t){document.visibilityState!=="hidden"&&(this.oa+=t,this.Be||this.sv())}sv(){this.Be=window.csSetInterval(()=>{csArray.prototype.push.call(this.aa,this.oa),this.oa=0,this.aa.length>=this.hf.iterations&&this.Be&&csClearInterval(this.Be)},this.hf.interval)}flush(t){return this.Be&&(csClearInterval(this.Be),this.Be=null),csArray.prototype.forEach.call(this.aa,(e,i)=>{this.values[`interval.${i+1}`]=e}),this.aa=[],this.oa=0,super.flush(t)}}return s})(),j={counters:{commandsFromIntegrations:new Et("commands-from-integrations"),commandsFromCSTC:new Et("commands-from-cstc"),commandsFromIframe:new Et("commands-from-iframe"),commandApplied:new Et("command-applied"),commandError:new Et("command-error"),commandMisuse:new Et("command-misuse"),CSTCSnippetUsed:new Et("cstc-snippet-used"),redactedPII:new Et("redacted-pii"),pageAnonymisation:new Et("page-anonymisation"),patchedNativeFunctions:new Et("patched-native-functions"),pureWindowState:new Et("pure-window-state"),sensitiveElements:new Et("sensitive-elements"),cspErrors:new Et("csp-errors"),networkRequests:new Et("network-requests"),webVitalsErrors:new Et("web-vitals-errors"),trackedFeatures:new Et("tracked-features"),longTasks:new tr("long-tasks"),errors:new Et("errors"),methodPerformance:new er("perf"),transferSize:new tr("transfer-size",["max","average"]),downloadTime:new tr("download-time",["average"]),blockingTime:new tr("blocking-time"),inpContribution:new er("inp-contribution"),tasks:new er("tasks"),availableFeatures:new _u("available-features"),dom:new er("dom",["total"]),mutations:new wu("mutations"),requestTimeouts:new Et("request-timeouts")},setService(s){ee.setGlobalService(s)}},Pi=(()=>{class s{constructor(){this.ca=0}get length(){return this.ca}get isEmpty(){return!this.Zs}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this.ca++,this.An?this.An=this.An[1]=[t,void 0]:this.An=this.Zs=[t,void 0]}pop(){if(!this.Zs)return null;this.ca--;let t=this.Zs[0];return this.Zs=this.Zs[1],this.Zs||(this.An=void 0),t}forEach(t){let e=this.Zs;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.ca=0,this.Zs=this.An=void 0}}return s})(),On=0,co=s=>{On++,csQueueMicrotask(()=>Ms(()=>{try{s()}finally{On--}},[ye.MicroTask,"queueMicrotask"]))},gr=new Pi,mr=new Pi;function Yt(s,r="high"){gr.isEmpty&&mr.isEmpty&&Ec(Au),r==="high"?mr.push(ia(s)):gr.push(ia(s))}function Ec(s,r=10){r===0?co(s):csQueueMicrotask(()=>Ec(s,r-1))}function Au(){for(;!mr.isEmpty;)mr.pop()();for(;!gr.isEmpty;)gr.pop()()}async function vc(s=1){for(let r=0;r<s;r++)await new Promise(t=>Yt(t))}function ia(s){return function(){try{s.apply(window,arguments)}catch(r){nt.critical(r)}}}var ur="null",Qe=null,Sc=[],bu=()=>{var s;return Ci||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!Ci&&bu()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],Qe=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{Nn({type:"UXA_EVENT",event:s.detail})}),Qe.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===ur)return;ur=s.data.sessionId,csArray.prototype.forEach.call(Sc,r=>r()),Qe==null||Qe.postMessage({type:"CONNECTED",sessionId:ur})}}));function Tu(s){Ci||(ur!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(Sc,s)))}function Nn(s){Qe==null||Qe.postMessage(s)}function Js(s){var r;let t=(r=s.length)!==null&&r!==void 0?r:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function ss(s,r){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=r(s[i]);return e}function Ru(s,r,t){let e=[],i=0;for(let n=0;n<s.length;n+=1){let o=r(s[n]);for(let c=0;c<o.length;c++)t(o[c],i++)}return e}function _c(s,r){let t=[];return Ru(s,r,e=>csArray.prototype.push.call(t,e)),t}function Z(s,r){if(Cu(s)){let t=s.length;for(let e=0;e<t;e++)r(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)r(e.value,t++),e=s.next()}}function Cu(s){return s.length>=0}function Zs(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return s[e]}function Mn(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return!0;return!1}function Iu(s,r){let t=s.length;for(let e=0;e<t;e++)if(!r(s[e],e))return!1;return!0}function lo(s,r){let t=s.length,e=[];for(let i=0;i<t;i+=1){let n=s[i];r(n)&&csArray.prototype.push.call(e,n)}return e}function Pu(s,r,t){let e=s.length+r.length+((t==null?void 0:t.length)||0),i=new csArray(e),n=0;for(let o=0;o<s.length;o++)i[n++]=s[o];for(let o=0;o<r.length;o++)i[n++]=r[o];if(!t)return i;for(let o=0;o<t.length;o++)i[n++]=t[o];return i}function ra(s,r){for(let t=0;t<s.length;t++)csArray.prototype.push.call(r,s[t])}function as(s){let r=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,r?[i,e]:e)),t}function Ou(s){return csArray.isArray(s)&&s.length>0}var Oi=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),we=(()=>{class s extends Oi{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var na=(()=>{class s extends Oi{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),Ae=(()=>{class s extends Oi{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Max: {max}ms<br/>Total: {total}ms"),this.total=0,this.count=0,this.max=0}get average(){return this.count?this.total/this.count:0}elapsed(t){return this.count++,this.max=Math.max(this.max,t),this.total+=t,t}measure(t){let e=P.elapsed();t(),this.count++;let i=P.elapsed()-e;return this.max=Math.max(this.max,i),this.total+=i,i}asyncMeasure(){let t=P.elapsed();return()=>{this.count++;let e=P.elapsed()-t;return this.max=Math.max(this.max,e),this.total+=e,e}}getData(){return{total:this.total,count:this.count,average:this.average,max:this.max}}}return s})(),Nu=(()=>{class s extends Oi{constructor(){super("INP","Value: {value}")}getData(){return{value:Bt.tasks.eventListener.max}}}return s})(),Bt={general:{category:"General",nbEvents:new we("Nb of Events"),pendingTasks:new we("Pending Tasks"),pendingEvents:new we("Pending Tasks"),nbOfMutationObservers:new na("Nb of Mutation Observers"),inp:new Nu},mutations:{category:"Mutations",initialDOM:new Ae("Initial DOM"),pendingMutations:new we("Nb of Mutations scheduled"),serializedMutations:new Ae("Serialized Mutations"),count:new we("Mutation Count"),elementMutationObserved:new na("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new Ae("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new we("Nb of Hidden Elements "),nbElements:new we("Nb of  Elements")},tasks:{category:"Tasks",tasks:new we("Tasks"),errors:new we("Errors"),timer:new Ae("Timers"),microtask:new Ae("Microtasks"),mutationObserver:new Ae("MutationObserver"),monkeyPatch:new Ae("MonkeyPatch"),eventListener:new Ae("EventListener"),intersectionObserver:new Ae("Intersection")}};function Mu(){let s=null;Tu(()=>{let r=n=>Object.keys(n),t=csArray.prototype.map.call(r(Bt),n=>Bt[n]),e=csArray.prototype.map.call(t,n=>csArray.prototype.filter.call(csArray.prototype.map.call(r(n),o=>n[o]),o=>o instanceof Oi));Nn({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(t,(n,o)=>({category:n.category,performanceCounters:csArray.prototype.map.call(e[o],c=>({name:c.name,format:c.format}))}))}),!s&&(s=csSetInterval(()=>{Ms(()=>{let n=_c(ss(e,o=>ss(o,c=>c.getData())),o=>o);Nn({type:"UXA_PERFORMANCE_COUNTER",event:n})},[ye.Timer,"performance-counter-interval"])},1e3))})}var ye=(()=>{let s;return function(r){r.Timer="timer",r.MonkeyPatch="monkeyPatch",r.MutationObserver="mutationObserver",r.EventListener="eventListener",r.IntersectionObserver="intersectionObserver",r.MicroTask="microtask"}(s||(s={})),s})(),Ht=null,Du=["click","tap","keyup","keydown","pointerup","pointerdown"];async function Ms(s,r,t=null){if(Ht&&r[0]!==ye.MicroTask)return s();t&&(Ht=t),Ht||(Ht={type:r[0],elapsed:0},Bt.tasks.tasks.increase());try{Ht.elapsed+=ku(s)}catch(e){Bt.tasks.errors.increase(),nt.critical(new Error(`Task error:  ${r}/${s.name}.
${e.message}
${e.stack}`,e),"TASK_ERROR")}finally{On<=0&&(Bt.tasks[Ht.type].elapsed(Ht.elapsed),Ht.elapsed>50&&(j.counters.longTasks.push(Ht.elapsed),j.counters.blockingTime.push(Ht.elapsed-50)),j.counters.tasks.add(r[0],Ht.elapsed),csArray.prototype.includes.call(Du,r[1])&&j.counters.inpContribution.add(r[1],Ht.elapsed),Ht=null)}}function ku(s){let r=P.elapsed();return s(),P.elapsed()-r}var Wr,xu="cs-native-frame";var $e={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild","nodeType"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};function wc(s,r){let t=Ns(window,s);return function(e,i){return t(()=>Ms(e,[r,s]),i)}}window.csSetTimeout=wc("setTimeout",ye.Timer);window.csSetInterval=wc("setInterval",ye.Timer);window.csQueueMicrotask=(Wr=Ns(window,"queueMicrotask"))!==null&&Wr!==void 0?Wr:setTimeout;window.csClearTimeout=Ns(window,"clearTimeout");window.csClearInterval=Ns(window,"clearInterval");window.csFileReader=Ns(window,"FileReader");(()=>{var s;let r=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++r}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function Lu(){let s=document.createElement("iframe");s.id=xu,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let r=document.createElement("cs-native-frame-holder");if(r.setAttribute("hidden",""),document.body.appendChild(r),!!Element.prototype.attachShadow){let e=r.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return r.innerHTML=s.outerHTML,r.firstElementChild.contentWindow}function Vu(s,r){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,r));)e=Object.getPrototypeOf(e);return t}function Uu(s,r,t){let e=Vu(s,r);if(!e)return function(){return this[r]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function Ac(s){var r,t;Object.keys($e.constructors).forEach(i=>{window[$e.constructors[i]]=s[i]instanceof Function&&s[i].prototype==null?s[i].bind(window):s[i]}),Bu(s);let e=s.MutationObserver;("Prototype"in window||Hu())&&(e=(t=(r=Ns(window,"MutationObserver"))!==null&&r!==void 0?r:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),window.csIntersectionObserver=oa(window.IntersectionObserver,ye.IntersectionObserver),window.csMutationObserver=oa(e,ye.MutationObserver),Fs("csNode",$e.nodeProperties,s.Node.prototype,"get"),Fs("csElement",$e.elementProperties,s.Element.prototype,"get"),Fs("csElement",$e.elementPropertiesValues,s.Element.prototype,"value",!1),Fs("csHTMLImageElement",$e.imageProperties,s.HTMLImageElement.prototype,"set"),Fs("csEvent",$e.eventProperties,s.Event.prototype,"get"),Fs("csNavigator",$e.navigatorProperties,s.navigator,"value")}function Fs(s,r,t,e,i=!0){r.forEach(n=>{let o=typeof n!="string"&&"binding"in n,c=o?n.propertyName:n;(i||c in t)&&(window[`${s+c}`]=Uu(t,c,e),o&&(window[`${s+c}`]=window[`${s+c}`].bind(n.binding)))})}function ho(s,r){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=r}function ju(){try{let s=Lu();return s?(window.CSPureWindow=s,Ac(window.CSPureWindow),!0):!1}catch(s){return ho("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!ju())try{Ac(rt)}catch(s){ho("Critical",`failed to copy references from window: ${s.message}`)}function Hu(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Bu(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}function oa(s,r){try{let t=function(e,i){return new s((o,c)=>{Ms(()=>e(o,c),[r,s.name])},i)};return t.base=s,t}catch{return ho("Warning",`failed to extends ${s.name}`),s}}var K=(()=>{let s;return function(r){r.ELLIPSIS="\u2026";function t(o){return csString.prototype.replace.call(o,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(o){return csString.prototype.replace.call(o,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}r.escapeInvalidCharacters=e;function i(o,c,l){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(o,c,l);let h=new csRegExp(t(c),"g");return csString.prototype.replace.call(o,h,l)}r.stringReplaceAll=i;function n(o,c,l=""){return o.length<=c?o:csString.prototype.slice.call(o,0,c-l.length)+l}r.truncate=n}(s||(s={})),s})();function Dn(s){return K.escapeInvalidCharacters(csString.prototype.toLowerCase.call(s.localName))}function Fu(s){let r=s.getAttribute("id");return r&&K.escapeInvalidCharacters(r)}function ct(s){return csNodenodeType.apply(s)===1}function Qs(s){return csNodenodeType.apply(s)===3}function bc(s){return csNodenodeType.apply(s)===8}function Tc(s){return ct(s)&&s.localName==="link"}function $u(s){return ct(s)&&s.localName==="source"}function Rc(s){return ct(s)&&s.localName==="a"}function uo(s){return Tc(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function zu(s){return ct(s)&&s.localName==="img"}function Cr(s){return ct(s)&&s.localName==="style"}function Ni(s){return ct(s)&&s.localName==="input"}function Ir(s){return ct(s)&&s.localName==="textarea"}function Pr(s){return ct(s)&&s.localName==="script"}function Gu(s){return ct(s)&&s.localName==="button"}function ti(s){return ct(s)&&"ownerSVGElement"in s}function fo(s){return ct(s)&&s.localName==="select"}function qu(s){return ct(s)&&s.localName==="details"}function Wu(s){return ct(s)&&s.localName==="summary"}function Yu(s){return ti(s)&&s.localName==="image"}function Xu(s){return ti(s)&&s.localName==="use"}function Ku(s){return ti(s)&&s.localName==="feImage"}function Ju(s){switch(csNodenodeType.apply(s)){case 9:case 11:return!0;default:return!1}}function Qu(s){switch(csNodenodeType.apply(s)){case 9:case 11:case 1:return!0;default:return!1}}function yr(s){return csNodenodeType.apply(s)===9}function vi(s){return Ju(s)&&"host"in s&&"mode"in s}function Cc(s){return ct(s)&&!!csElementshadowRoot.apply(s)&&vi(csElementshadowRoot.apply(s))}var Zu=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function td(s){return ct(s)&&Mt(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(Zu,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var Mi="detached";function Ic(s){let r=s,t=[r];for(;csNodeparentNode.apply(r)!==null;)r=csNodeparentNode.apply(r),csArray.prototype.push.call(t,r);return Er(r)&&csArray.prototype.push.call(t,Mi),{ancestors:t,selectionRoot:r}}function ed(s){let r=s,t=[r],e=null;for(;csNodeparentNode.apply(r)!==null;)e===null&&Rc(r)&&(e=r),csArray.prototype.push.call(t,csNodeparentNode.apply(r)),r=csNodeparentNode.apply(r);return Er(r)&&csArray.prototype.push.call(t,Mi),{firstAnchorParent:e,ancestors:t,selectionRoot:r}}function Er(s){return is.isValidElement(s)}var ys=(()=>{var s,r;return(r=(s=rt.Element)===null||s===void 0?void 0:s.prototype)!==null&&r!==void 0?r:{}})(),Ft=ys.matches||ys.matchesSelector||ys.mozMatchesSelector||ys.msMatchesSelector||ys.oMatchesSelector||ys.webkitMatchesSelector,aa=ys.closest,Pc=9;function sd(s,r){return r?csArray.prototype.some.call(r,t=>Ft.call(s,t)):!1}function id(s,r,t){if(s===Mi||csNodenodeType.apply(s)===Pc)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(r.localName)),n=Dn(r),o=0,c=r.previousElementSibling;for(;c;)(Dn(c)===n||i&&(e!=null&&e.test(c.localName)))&&!sd(c,t.reliableSelectors)&&(o+=1),c=c.previousElementSibling;return o}function rd(s,r,t){if(s===Mi||csNodenodeType.apply(s)===Pc)return 0;let e=0,i=r.previousElementSibling;for(;i;)Ft.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var nd=[/\d{4}/,/^ember\d+$/],od="@",po="data-cs-override-id",ad="data-cs-dynamic-id";function Oc(s,r,t,e){let i=e.dynamicIdRegex||null,n=e.dynamicElementNameRegex,o=Dn(s);if(n&&n.test(s.localName)&&(o=csString.prototype.replace.call(o,n,`$1${od}`)),hd(s,t)){let y=go(s);return{hasUniqueIdentifier:!0,elementSelector:`${o}[${po}="${y}"]`}}let c=yd(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=cd(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UCS[${l}]`};let h=Fu(s);if(dd(s,h,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${o}#${h}`};let u=ld(s,e);if(u){let y=rd(r,s,u);return{hasUniqueIdentifier:!1,elementSelector:`${o}[${u}](${y})`}}let f=id(r,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${o}:eq(${f})`}}function cd(s,r,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(Ft.call(s,e)&&md(e,r))return e}}function ld(s,r){if(r.reliableSelectors){for(let t of r.reliableSelectors)if(Ft.call(s,t))return t}}function hd(s,r){let t=go(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&mo(po,t,r)}function ud(s){return go(s)!==null}function go(s){return s.getAttribute(po)}function dd(s,r,t,e){return r&&!ud(s)&&!fd(s,r,e)&&gd(r,t)}function fd(s,r,t){return s.hasAttribute(ad)||pd(r,t)}function pd(s,r){let t=!1;return s&&r&&(t=r.test(s)),s&&(csArray.prototype.some.call(nd,e=>e.test(s))||t)}function gd(s,r){return s&&mo("id",s,r)}function mo(s,r,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${r}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function md(s,r){try{return window.csquerySelectorAll[r.nodeType].call(r,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function yd(s,r,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&mo(e,i,r))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var kn=11;function vr(s,r,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return ca(e,t);let i=e,n=s[0],{elementSelector:o,hasUniqueIdentifier:c}=Oc(i,n,r,t);if(!t.fullPath&&c){let h=s[s.length-1];return`${ca(h,t)}${o}`}let l=vr(s,r,t);return`${l?`${l}>`:""}${o}`}function ca(s,r){if(s===Mi)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=Ic(s.host);return`${vr(t,e,r)}|shadow-root|`}return csNodenodeType.apply(s)===kn?"|fragment|":""}var Nc=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),Ed=(()=>{class s extends Nc{constructor(){super(...arguments),this.ha=!1,this.ua=!1,this.rl=!1}iv(t,e){return this.ha&&!(e===null&&Er(t))&&csNodenodeType.apply(t)!==kn&&!t.host}rv(t){return!t.localName}serializeElement(t,e,i){var n;if((n=this.path)!==null&&n!==void 0||(this.path=""),this.iv(t,e))return;let o=!1;e===null&&Er(t)&&(o=!0,this.done=!0);let c=this.ua&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.rl=!0,this.ha=!1,this.ua=!1),!l&&e===null&&csNodenodeType.apply(t)===kn){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this.rv(t))return;let h=e!=null?e:"detached",{elementSelector:u,hasUniqueIdentifier:f}=Oc(t,h,i,this.options);f&&(this.ua=!0,this.ha=!this.options.fullPath);let y=`${o?`|detached|${c}`:""}${this.ha&&!f?"":u}`,v=!f&&this.ua&&!this.options.fullPath?"":this.path&&!this.rl?">":"";this.rl=!1,this.path=`${y}${v}${this.path}`}}return s})(),yt=(()=>{let s;return function(r){function t(){let f=[i()];return document.documentElement&&csArray.prototype.push.call(f,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(f,document.body.scrollHeight,document.body.offsetHeight),Math.max(...f)}r.documentHeight=t;function e(){return document.documentElement.scrollWidth}r.documentWidth=e;function i(){return window.innerHeight}r.windowHeight=i;function n(){return window.innerWidth}r.windowWidth=n;function o(){let f=window.csScreen.width;return bs(f)&&f>0?f:window.screen.width}r.screenWidth=o;function c(){let f=window.csScreen.height;return bs(f)&&f>0?f:window.screen.height}r.screenHeight=c;function l(){return window.pageXOffset}r.windowOffsetX=l;function h(){return window.pageYOffset}r.windowOffsetY=h;function u(){return{dw:`${e()}`,dh:`${t()}`,ww:`${n()}`,wh:`${i()}`,sw:`${o()}`,sh:`${c()}`}}r.getRequestParameters=u}(s||(s={})),s})();function se(s,r=xt.SHOW_ALL){let t=r|xt.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=la(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let n=null;return{root:s,nextNode(){if(i){let o=i;return i=null,o}for(;e.length>0;){if(n){let h=n;return n=null,h}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=la(c);if(r&xt.SHOW_DOCUMENT_FRAGMENT&&l&&(n=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(Xr[csNodenodeType.apply(c)]&r)!==0)return c}return null},visitAll(o){Xr[csNodenodeType.apply(s)]&r&&o(s);let c=this.nextNode();for(;c;){if((Xr[csNodenodeType.apply(c)]&r)===0){c=this.nextNode();continue}o(c),c=this.nextNode()}},find(o){let c;return this.visitAll(l=>o(l)&&(c=l)),c},collectAll(o){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,o?o(l):l)),c}}}function la(s){return s&&Cc(s)?s.shadowRoot:null}var Yr=(()=>{var s;return(s=rt.Node)!==null&&s!==void 0?s:{}})(),xt=(()=>{var s;return(s=rt.NodeFilter)!==null&&s!==void 0?s:{}})(),Xr={2:xt.SHOW_ATTRIBUTE,4:xt.SHOW_CDATA_SECTION,8:xt.SHOW_COMMENT,11:xt.SHOW_DOCUMENT_FRAGMENT,9:xt.SHOW_DOCUMENT,10:xt.SHOW_DOCUMENT_TYPE,1:xt.SHOW_ELEMENT,[Yr.ENTITY_NODE]:xt.SHOW_ENTITY,[Yr.ENTITY_REFERENCE_NODE]:xt.SHOW_ENTITY_REFERENCE,[Yr.NOTATION_NODE]:xt.SHOW_NOTATION,7:xt.SHOW_PROCESSING_INSTRUCTION,3:xt.SHOW_TEXT},Mc=!1,xn=5,sr=50;function vd(s=5){Mc=nt.isPerfLoggingActive(),xn=s}function Ds(s,r){return function(){if(!Mc)return s.apply(this,arguments);let t=P.elapsed(),e=s.apply(this,arguments);if(e!=null&&e.then)e.then(()=>{let i=P.elapsed()-t;i>=xn&&j.counters.methodPerformance.add(r,i),i>sr&&j.counters.blockingTime.push(i-sr)});else{let i=P.elapsed()-t;i>=xn&&j.counters.methodPerformance.add(r,i),i>sr&&j.counters.blockingTime.push(i-sr)}return e}}var jt=function(s){return function(r,t,e){let i=e.value;e.value=Ds(i,s)}},ws=(()=>{let s;return function(r){function t(){return!!Element.prototype.attachShadow}r.isSupported=t;function e(n){return n&&Cc(n)?n.shadowRoot:null}r.getShadowRoot=e;function i(n){return se(n,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(o=>o.host)}r.getAllShadowHosts=Ds(i,"getAllShadowHosts")}(s||(s={})),s})(),Kr=(()=>{var s;return(s=rt.Node)!==null&&s!==void 0?s:Object})(),ft=(()=>{let s;return function(r){let t="isConnected"in Kr.prototype?_=>_.isConnected:_=>!_.ownerDocument||!(_.ownerDocument.compareDocumentPosition(_)&_.DOCUMENT_POSITION_DISCONNECTED);function e(_,L){for(let U=_;U;U=csNodenextSibling.apply(U))L(_)}r.forEachChild=e;function i(_){return t(_)}r.isConnected=i;function n(_,L){let U=[];for(let z of l(_,L))csArray.prototype.push.call(U,z);return U}r.getAncestors=n;let o=(_,L)=>{var U;return(U=csNodeparentNode.apply(_))!==null&&U!==void 0?U:L&&vi(_)?_.host:null};function c(_,L,U=!1){let z=_;for(;z;){if(L(z))return z;let ut=o(z,U);if(ut&&ut!==z)z=ut;else break}return null}r.findAncestor=c;function*l(_,L=!1){let U=_;for(;U;){yield U;let z=o(U,L);if(z&&z!==U)U=z;else break}}r.walkUp=l;function h(_,L){if(_===L||L.contains(_))return!0;let U=r.getParentElement(_);return U&&U!==_?h(U,L):!1}r.isDescendantOf=h;function u(_){var L;return _.parentElement?_.parentElement:r.getRootNode(_)?(L=r.getRootNode(_))===null||L===void 0?void 0:L.host:null}r.getParentElement=u;function f(_,L=document){let U=Js(window.csquerySelectorAll[L.nodeType].call(L,_)),z=ws.getAllShadowHosts(L);for(let ut of z){let At=ws.getShadowRoot(ut);if(!At)continue;let Se=Js(window.csquerySelectorAll[At.nodeType].call(At,_));csArray.prototype.push.call(U,...Se)}return U}r.findAllElements=f,r.getRootNode=(()=>{if("getRootNode"in Kr.prototype)return(U,z)=>U.getRootNode(z);function _(U){let z=L(U);return vi(z)?_(z.host):z}function L(U){return csNodeparentNode.apply(U)!=null?L(csNodeparentNode.apply(U)):U}return(U,z)=>typeof z=="object"&&!!z.composed?_(U):L(U)})();function y(_){return _==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(_)}function m(_){let L=_.getBoundingClientRect();return L.right+yt.windowOffsetX()<0||L.bottom+yt.windowOffsetY()<0}function v(_){var L,U;if(((L=_.checkVisibility)===null||L===void 0?void 0:L.call(_,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!_.offsetParent){if(!_.getBoundingClientRect)return nt.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${_ instanceof Kr} Ctor: ${(U=_==null?void 0:_.constructor)===null||U===void 0?void 0:U.name}`),!1;let At=_.getBoundingClientRect();if(At.width===0&&At.height===0)return!0}let z=window.getComputedStyle(_);return z?z.display==="none"||z.visibility==="hidden"||z.visibility==="collapse"||z.opacity==="0"||z.filter==="opacity(0)"||z.width==="0px"&&z.height==="0px"||y(z.color):!0}r.isHiddenByCSS=v;function T(_){if(v(_))return!0;let U=u(_);return U!=null&&T(U)}r.areAncestorsHiddenByCSS=T;function C(_){let L=null,U=_;do if(v(U))L=U;else break;while(U=u(U));return L}r.getTopAncestorHiddenByCSS=C;function w(_){let L=b(_);return L!==null&&!_.contains(L)&&!L.contains(_)}function b(_){let L=_.getBoundingClientRect(),U=L.left+.5*L.width,z=L.top+.5*L.height;return O(document,U,z)}r.getTopElement=b;function k(_){if(!_.getBoundingClientRect)return null;let L=_.getBoundingClientRect(),U=L.x+L.width/2,z=L.y+L.height/2;return r.getTopElementFromPoint(document,U,z)}r.getElementOnTop=k;function O(_,L,U){let z=_.elementFromPoint(L,U);if(!z)return null;let ut=ws.getShadowRoot(z);return ut&&ut!==r.getRootNode(document.body)&&ut!==_?O(ut,L,U):z}r.getTopElementFromPoint=O;function S(_){return!m(_)&&!v(_)&&!w(_)}r.isVisibleInDocument=S;function V(_){return v(_)?!1:H(_)}r.isVisibleInViewportInForeground=V;function H(_){let L=b(_);return L===null?!1:_===L?!0:kt(_)?_.textContent!==""&&L.contains(_):_.contains(L)}r.isInViewPort=H;function X(_,L,U){let z=_.getAttributeNS(L,U);return z===""?_.hasAttributeNS(L,U)?z:null:z}r.getAttributeNS=X;function pt(_){return!!(_.hasAttribute("tabIndex")||_.getAttribute("contentEditable")==="true"||Rc(_)&&_.hasAttribute("href")||(fo(_)||Ir(_)||Ni(_)||Gu(_))&&!_.hasAttribute("disabled")||qu(_)||Wu(_))}r.isElementFocusable=pt;function kt(_){return _.localName==="span"||_.localName==="a"||_.localName==="b"||_.localName==="i"||_.localName==="button"||_.localName==="input"||_.localName==="label"||_.localName==="cite"||_.localName==="small"||_.localName==="strong"||_.localName==="code"||_.localName==="abbr"||_.localName==="em"||_.localName==="dfn"||_.localName==="time"||_.localName==="output"||_.localName==="object"||_.localName==="sub"}r.isInlineElement=kt;function ie(_){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>_(),{once:!0}):csSetTimeout(_)}r.onDocumentLoaded=ie}(s||(s={})),s})(),Sd=(()=>{class s{constructor(t){this.nv=t}run(t){let e=[...this.nv],i=ft.getAncestors(t,!1),n=i[i.length-1];for(;e.length>0&&i.length>0;){let o=csArray.prototype.shift.call(i),c=i[0]||null;if(this.ov(e,o,c,n),this.av(e),e.length===0)break;i.length===0&&o.host&&(i=ft.getAncestors(o.host,!1),n=i[i.length-1])}}ov(t,e,i,n){for(let o of t)o.serializeElement(e,i,n)}av(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),_d=(()=>{class s extends Nc{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.cv(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}cv(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.lv(t.id),t.classList&&(e+=this.hv(csArray.from(t.classList))),t.attributes&&(e+=this.uv(t)),e}lv(t){return t?`#${t};`:""}hv(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}fv(t,e){var i,n;return((n=(i=this.options).isAttributeSensitive)===null||n===void 0?void 0:n.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||ti(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||Ni(t)&&e==="value"}pv(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}gv(t){let e={};for(let i of csArray.from(t.attributes))this.fv(t,i.name)||(e[i.name]=i.value);return e}uv(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let n=Object.entries(this.gv(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(n,([o])=>o.length<this.options.attrMaxLength),([o,c])=>this.pv(o,c)?`[${o}]`:`[${o}=${c}]`)),";")+(n.length>0?";":"")}}return s})(),is=(()=>{let s;return function(r){r.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}r.isValidElement=t;function e(c,l,h={fullPath:!1,dynamicIdRegex:null}){let u=o(c);if(u===document)return{path:"",hierarchy:""};if(!t(u))return{path:r.INVALID_ELEMENT,hierarchy:r.INVALID_ELEMENT};let f=new Ed(h),y=new _d(l);return new Sd([f,y]).run(u),{path:f.getPath(),hierarchy:y.getPath()}}r.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return"";if(!t(h))return r.INVALID_ELEMENT;let{ancestors:u,selectionRoot:f}=Ic(h);return vr(u,f,l)}r.getElementPath=i;function n(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return{path:"",firstAnchorParent:null};if(!t(h))return{path:r.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:u,ancestors:f,selectionRoot:y}=ed(h);return{path:vr(f,y,l),firstAnchorParent:u}}r.getElementPathAndFirstAnchorParent=n;function o(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||is;var Dc=["t.contentsquare.net","clicktale"],wd=s=>{var r;if(typeof s.filename=="string"&&csArray.prototype.some.call(Dc,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(r=s.error)===null||r===void 0?void 0:r.stack,F.critical(t)}};window.addEventListener("error",wd);var F=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(Dc,t)}static setStrategy(t){s.yr=t}static computeIsActive(t){s.Ye=Cs.boolean(t),s.Ye?s.nl=Cs.boolean(10):s.nl=!1}static isLoggingActive(){return s.Ye}static getStrategy(){return s.yr}static debug(t,e=""){s.Ye&&this.yr.send(t,e,lt.debug)}static warn(t,e=!0,i=""){var n;j.counters.errors.count("warning"),s.Ye&&e&&this.yr.send(t,i,lt.warn),(n=window.UXAnalytics.Console)===null||n===void 0||n.warn(t)}static implementation(t,e=""){j.counters.errors.count("implementation"),s.Ye&&this.yr.send(t,e,lt.implementation)}static error(t,e=""){var i;j.counters.errors.count("error"),s.Ye&&this.yr.send(t,e,lt.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){j.counters.errors.count("critical"),this.yr.send(t,e,lt.critical)}static tryToExecute(t,e){return function(...i){try{let n=e.apply(this,i);return Q(rt.Promise)&&n instanceof rt.Promise?n.then(o=>o,o=>s.error(Pe(o)?o:new Error(o),t)):n}catch(n){try{s.error(Pe(n)?n:new Error(n),t)}catch{}}}}static isPerfLoggingActive(){return s.nl}}return s.Ye=!1,s.nl=!1,s})();var Ln=!1;function Ad(){Ln=!0}function It(){return(s,r,t)=>{if(t){let e=t.value;t.value=function(i,n){(i==null?void 0:i.isTrusted)===!1&&Ln||e.call(this,i,n)}}else{let e=s[r];if(typeof e!="function")return;s[r]=function(i,...n){(i==null?void 0:i.isTrusted)===!1&&Ln||e.call(this,i,n)}}}}function bd(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}var Td=(()=>{class s{constructor(t,e){this.da=t,this.uf=e}init(){this.df=this.da!==this.da.top,this.ff=this.uf.isWebView&&this.da===this.da.top,this.uf.iframesTracking&&this.df||this.ff?this.pf=!1:this.pf=!0}isInIframeContext(){return this.df}isTopWindowTracker(){return this.pf}isInWebViewContext(){return this.ff}}return s})(),Ct=!Ci&&document.createElement("a"),Rd=/(:443|:80)$/;function ce(s){return Ct?(Ct.href=s,Ct.href):""}function Cd(s,r){return new csURL(s,r).href}function Id(s,r){return csArray.prototype.some.call(r,t=>Ii(s,`.${t}`)||s===t||t==="")}function Pd(s){return s[0]==="/"?s:`/${s}`}function ha(s){return csString.prototype.replace.call(s,Rd,"")}function kc(s){return!Ct||!Dt(s,"http://")&&!Dt(s,"https://")?null:(Ct.href=s,{hash:Ct.hash,host:ha(Ct.host),hostname:Ct.hostname,href:Ct.href,origin:Ct.origin?Ct.origin:ha(`${Ct.protocol}//${Ct.host}`),pathname:Pd(Ct.pathname),port:Ct.port,protocol:Ct.protocol,search:Ct.search})}var Rt=(()=>{let s;return function(r){r.Discovery="discovery",r.Stop="stop",r.RecordingContext="recordingContext",r.SensitiveStatus="sensitiveStatus",r.RecordingEvent="recordingEvent",r.EndOfBufferedMessages="endOfBufferedMessages",r.ChildLogMessage="childLogMessage",r.AnalysisEvent="analysisEvent",r.JavascriptError="javascriptError",r.ApiError="apiError",r.Assets="assets",r.DetailedApiError="detailedApiError",r.EmerchandisingMessage="emerchandisingMessage",r.Commands="commands",r.IntegrationCallback="integrationCallback",r.StaticResource="staticResource",r.TrackingContextResultMessage="trackingContextResultMessage",r.TrackingContextRequestMessage="trackingContextRequestMessage",r.CustomError="customError"}(s||(s={})),s})();var Od=(()=>{class s{setContext(t,e){this.M=t,this.C=e}getVisitorService(){return this.M}getSessionService(){return this.C}}return s})();function Sr(){}function _r(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function Nd(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var Jr=csSymbol("cachedJson");function Md(s){if(s[Jr])return s[Jr];if(csArray.isArray(s)){if(s.length===0)return"[]";let r="["+Is(s[0]);for(let t=1;t<s.length;t++)r+=","+Is(s[t]);return r+="]"}return s[Jr]=csJSON.stringify(s)}var Is=typeof window.Symbol!="undefined"?Md:csJSON.stringify;var Si=(()=>{let s;return function(r){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}r.toQuery=t}(s||(s={})),s})(),xc=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),_i=(()=>{class s extends xc{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.ol(t);let e=Si.toQuery(t);this.mv(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}mv(t){let e=new window.Image(1,1);e.onload=Sr,e.onerror=Sr,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}ol(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})(),Dd=(()=>{class s{constructor(t,e){this.Rs=t,this.yv=e}init(){this.Cs=new _i(this.Rs.getLoggerUri()),this.Cs.setRequestParametersProviders(this,this.yv)}send(t){this.fa=t,this.Cs.send()}getRequestParameters(){return{a:this.fa.app,l:this.fa.level,m:this.fa.message,s:this.fa.stacktrace}}}return s})(),kd=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,xd=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,Ld="CS_ANONYMIZED_EMAIL",Qr="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",Vd=new csRegExp(`(ey${Qr}\\.ey${Qr}\\.${Qr})`,"g"),Ud="CS_ANONYMIZED_JWT",jd=/[0-9]{4}/,Hd=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,Bd="CS_ANONYMIZED_PII",Fd="\u2022",$d=/\d/g,zd=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,Gd=/(?:\d{1,3}\.){3}\d{1,3}/,qd=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,ze=(()=>{let s;return function(r){function t(u){return csString.prototype.replace.call(u,kd,Ld)}r.replaceEmail=t;function e(u){return csString.prototype.replace.call(u,Vd,Ud)}r.replaceJWT=e;function i(u,f){return csString.prototype.replace.call(u,Hd,f)}r.replaceCreditCardNumber=i;function n(u){return csString.prototype.replace.call(u,$d,Fd)}r.replaceDigits=n;function o(u){return Gd.test(u)||qd.test(u)}r.mayHaveIPAddress=o;function c(u){return zd.test(u)}r.mayHaveNumberSequence=c;function l(u){return jd.test(u)}r.mayHaveCreditCardNumber=l;function h(u){return xd.test(u)}r.mayHaveEmail=h}(s||(s={})),s})(),ei=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.Ev(this.al(t));return e===!0?i=this.vv(i):e===!1&&(i=this.Sv(i)),i}anonymizePII(t){return this.al(t)}anonymizeJwt(t){return ze.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this.al(t[i])}),t}al(t){if(ze.mayHaveEmail(t)){let e=ze.replaceEmail(t);return e!==t&&j.counters.redactedPII.count("email"),e}return t}vv(t){return ze.replaceDigits(t)}Sv(t){return ze.mayHaveNumberSequence(t)?ze.replaceDigits(t):t}Ev(t){return ze.mayHaveCreditCardNumber(t)?ze.replaceCreditCardNumber(t,(e,i,n,o,c)=>{if(csString.prototype.indexOf.call(n,"*")===-1){let h=o.length?csArray.prototype.join.call(csString.prototype.split.call(n,o),""):n;if(!this._v(h))return e;j.counters.redactedPII.count("cc")}else j.counters.redactedPII.count("cc-partial");return`${i}${Bd}${c}`}):t}_v(t){let e=parseInt(t[t.length-1]),i=0;for(let n=t.length-2;n>=0;n--){let o=parseInt(t[n]);n%2===0&&(o*=2),i+=Math.floor(o/10)+o%10}return 10-i%10===e}}return s})(),Lc="15.174.2";function yo(){return{v:Lc}}var Wd=(()=>{class s{constructor(t,e){this.E=t,this.D=e}getRequestParameters(){return{d:`${P.now()}`,p:this.D.anonymizePII(window.location.href),...this.E.getRequestParameters(),...yo()}}}return s})(),Yd="uxa",ua=5,Xd="No stacktrace",Vc="snippet-",Uc="implementation-snippet-",da=(()=>{let s;return function(r){r.IMPLEMENTATION="implementation",r.DYNAMIC="dynamic"}(s||(s={})),s})(),Kd=(()=>{class s{constructor(t,e,i){this.Er=e,this.D=new ei,this.gf=qr[lt.warn],this.gf=qr[t.minLogLevel||lt.warn],this.Cs=i||new Dd(t,new Wd(t,this.D)),this.mf={[lt.debug]:[],[lt.warn]:[],[lt.implementation]:[],[lt.error]:[],[lt.critical]:[]},this.pa={implementation:{},dynamic:{}},this.Cs.init()}send(t,e="",i=lt.warn){if(!this.wv(i,e))return;csArray.prototype.push.call(this.mf[i],e||"");let n={message:this.Av(t,e),stacktrace:this.bv(t),app:Yd,level:i};this.Cs.send(n)}Av(t,e){let i=Pe(t)?this.D.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}bv(t){return Pe(t)?`${t.stack||Xd} ${this.yf()}`:this.yf()}yf(){let t=this.Er.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.Er.getSessionService(),n=i&&i.getSession(),o={userId:e.id,sessionNumber:e.visitsCount,pageNumber:n&&n.pageNumber};return csJSON.stringify(o)}wv(t,e){if(qr[t]<this.gf)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,Uc,0))===0)return this.Ef(e,da.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,Vc,0))===0)return this.Ef(e,da.DYNAMIC);let i=this.mf[t];return i.length>=ua?!1:!(e&&csArray.prototype.some.call(i,n=>n===e))}Ef(t,e){return t in this.pa[e]?this.pa[e][t]>=ua?!1:(this.pa[e][t]+=1,!0):(this.pa[e][t]=1,!0)}}return s})();var Jd=(()=>{let s;return function(r){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}r.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let H=window.CSJavascriptBridge.getVersion();if(Wt(H))return H}catch{F.warn("an error occurred when calling getVersion")}return null}r.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}r.notifyIsReadyForTracking=i;function n(H,X){window.CSJavascriptBridge.identify&&window.CSJavascriptBridge.identify(H,csJSON.stringify(X))}r.identify=n;function o(){window.CSJavascriptBridge.resetIdentity&&window.CSJavascriptBridge.resetIdentity()}r.resetIdentity=o;function c(H){window.CSJavascriptBridge.addUserProperties&&window.CSJavascriptBridge.addUserProperties(csJSON.stringify(H))}r.addUserProperties=c;function l(H){window.CSJavascriptBridge.addEventProperties&&window.CSJavascriptBridge.addEventProperties(csJSON.stringify(H))}r.addEventProperties=l;function h(H){window.CSJavascriptBridge.removeEventProperty&&window.CSJavascriptBridge.removeEventProperty(H)}r.removeEventProperty=h;function u(){window.CSJavascriptBridge.clearEventProperties&&window.CSJavascriptBridge.clearEventProperties()}r.clearEventProperties=u;function f(H){window.CSJavascriptBridge.addPageviewProperties&&window.CSJavascriptBridge.addPageviewProperties(csJSON.stringify(H))}r.addPageviewProperties=f;function y(H){window.CSJavascriptBridge.removePageviewProperty&&window.CSJavascriptBridge.removePageviewProperty(H)}r.removePageviewProperty=y;function m(){window.CSJavascriptBridge.clearPageviewProperties&&window.CSJavascriptBridge.clearPageviewProperties()}r.clearPageviewProperties=m;function v(H){window.CSJavascriptBridge.sendEvent(csJSON.stringify(H))}r.sendAnalysisEvent=v;function T(H){if(window.CSJavascriptBridge.sendSREvent)for(let X of H.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(X))}r.sendSREvent=T;function C(H){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(H))}r.sendLog=C;function w(){window.CSJavascriptBridge.optIn()}r.sendOptIn=w;function b(){window.CSJavascriptBridge.optOut()}r.sendOptOut=b;function k(H,X){window.CSJavascriptBridge.sendDynamicVar(H,X)}r.sendDynamicVariable=k;function O(H,X,pt){window.CSJavascriptBridge.sendTransaction(H,X,pt)}r.sendTransaction=O;function S(H,X){if(window.CSJavascriptBridge.sendAssets){let pt=csJSON.stringify(H);window.CSJavascriptBridge.sendAssets(pt,X||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(H,pt=>pt.assetId))}r.sendAssets=S;function V(H){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(H))}r.sendNativeSREvent=V}(s||(s={})),s})(),Qd=(()=>{class s{constructor(){}send(t,e,i=lt.warn){let n={message:t,errorCode:e,level:i};Jd.sendLog(n)}}return s})();function Jt(s){return Dt(s,"data:")}function Zd(s){return Dt(s,"#")}function tf(s){return!!s&&(Ii(s,".css")||Dt(s,"https://fonts.googleapis.com/css"))}var fa=/\bhttps?:\/\/[^\s<>"')\]]*[^\s<>"'),.;:\])]/gi;function ef(s){fa.lastIndex=0;let r,t=0,e=[];for(;(r=fa.exec(s))!==null;){let i=r.index,n=r.index+r[0].length;if(i>t){let c=csString.prototype.slice.call(s,t,i);csArray.prototype.push.call(e,{content:c,isUrl:!1})}let o=csString.prototype.slice.call(s,i,n);csArray.prototype.push.call(e,{content:o,isUrl:!0}),t=n}if(t<s.length){let i=csString.prototype.slice.call(s,t);csArray.prototype.push.call(e,{content:i,isUrl:!1})}return e}var sf=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],Eo=s=>{let r=new Set(sf);return csArray.prototype.forEach.call(s,t=>{r.add(t)}),r},rf=["svg","slot"],nf=(s,r,t)=>t==="radio"&&s==="input"&&r==="name"||csArray.prototype.indexOf.call(rf,s)>-1,jc={href:new Set(["a"]),src:new Set(["iframe"])},of=s=>jc.hasOwnProperty(s),af=(s,r,t)=>{var e;return((e=jc[r])===null||e===void 0?void 0:e.has(s))&&!Jt(t)},cf=(s,r,t)=>(t==="submit"||t==="button")&&s==="input"&&r==="value";function Zr(s){return s?lf(s):null}function lf(s){try{let r=/^\/(.*)\/([gim]*)$/.exec(s);if(r){let[,t,e]=r;return new csRegExp(`^${t}$`,e)}return new csRegExp(`^${s}$`)}catch{return null}}var hf=/^\d+\.\d+(?:\.\d+)?$/,uf=s=>{if(!hf.test(s))return;let[r,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:r,minor:t,patch:!e||Number.isNaN(e)?0:e}},df=(s,r)=>s.major!==r.major?s.major-r.major:s.minor!==r.minor?s.minor-r.minor:s.patch-r.patch,ff=(s,r)=>df(s,r)>=0,pf=1,Vn=(()=>{let s;return function(r){r[r.Disabled=0]="Disabled",r[r.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",r[r.Enabled=2]="Enabled"}(s||(s={})),s})(),wr=(()=>{let s;return function(r){r[r.Automatic=1]="Automatic",r[r.Manual=2]="Manual"}(s||(s={})),s})(),gf=(()=>{class s{constructor(t){var e,i,n,o,c,l,h,u,f,y,m,v,T;this.isChild=!1,this.useFastDOM=!!t.useFastDOM,this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.settingsFileUri=t.settingsFileUri,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||ao,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.collectionEnabled=!!(!((o=(i=t.collectionEnabled)!==null&&i!==void 0?i:(n=t.smbConfig)===null||n===void 0?void 0:n.record)!==null&&o!==void 0)||o),this.apiErrors={enabled:(c=t.apiErrorsEnabled)!==null&&c!==void 0?c:0,...t.apiErrors},this.customErrors={enabled:(l=t.customErrorsEnabled)!==null&&l!==void 0?l:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=Zr(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=Zr(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=Zr(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.recordingUrlRules=(h=t.recordingUrlRules)!==null&&h!==void 0?h:[],this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((u=t.uxaDomain)===null||u===void 0?void 0:u.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),this.vocData=t.vocData,t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(f=t.anonymizeDigits)!==null&&f!==void 0?f:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(y=t.recordTargetingRules)!==null&&y!==void 0?y:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!==!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(m=t.collectTargetText)!==null&&m!==void 0?m:Vn.Disabled,this.identityEncryptionKey=t.identityEncryptionKey||null,this.tagVerificationDomain=t.tagVerificationDomain,this.tagVerificationEnabled=!!t.tagVerificationEnabled,this.trackingCodeVerified=!!t.trackingCodeVerified,this.quotas=(v=t.quotas)!==null&&v!==void 0?v:null,this.startMode=(T=t.startMode)!==null&&T!==void 0?T:wr.Automatic,this.eventEnricher=t.eventEnricher||null}getTrackerUri(){return`${this.ti()}://${this.trackerDomain}`}getRecordingUri(){return`${this.ti()}://${this.malkaRecordingDomain}`}getLoggerUri(){return`${this.ti()}://${this.loggerDomain}`}getMetricsUri(){return`${this.ti()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.ti()}://${this.staticResourceManagerDomain}`}getVerificationEndpoint(){return`${this.ti()}://${this.tagVerificationDomain}`}getSettingsFileUri(){return this.settingsFileUri?this.settingsFileUri:`${this.ti()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB||this.quotas!==null}getPaProxyDomainUri(){return`${this.ti()}://${this.paProxyDomainUri}`}ti(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===pf}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[n,o]=i;this.Tv(n,o)}})}Tv(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e),t==="dynamicConfDomain"&&(this.dynamicConfDomain=e),t==="paProxyDomainUri"&&(this.paProxyDomainUri=e),t==="startMode"&&bs(e)&&csArray.prototype.includes.call(Object.values(wr),e)&&(this.startMode=e)}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.vf()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.vf())return!0;let t=uf(this.getHeapVersion()||"");if(t&&t.major===4&&ff(t,{major:4,minor:23,patch:5}))return!0}return!1}vf(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,n,o,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((n=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||n===void 0?void 0:n.version)||((c=(o=window.heap)===null||o===void 0?void 0:o.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}getHeapStorageLocation(){var t,e;return(e=(t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_storage_location)!==null&&e!==void 0?e:null}getHeapWebAppUri(){return this.getHeapStorageLocation()==="eu-west-1"?"https://eu.heapanalytics.com":"https://heapanalytics.com"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==Vn.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasRecordingUrlRules(){var t;return!!(!((t=this.recordingUrlRules)===null||t===void 0)&&t.length)}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}getHeapEnvId(){return this.heapEnvironment?this.heapEnvironment.env_id:""}}return s})();function B(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function mf(){let s=new MutationObserver(r=>{r.forEach(t=>{Z(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&(j.counters.pureWindowState.count("iframe-deletion"),nt.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function pa(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function yf(){(!pa(MutationObserver)||!pa(MutationObserver.prototype.observe))&&j.counters.patchedNativeFunctions.count("MutationObserver")}function Ef(){try{window.CSPureWindow&&mf(),yf()}catch{}}var gt=(()=>{let s;return function(r){r.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let u=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return u?decodeURIComponent(u[2]):null}r.get=t;function e(l,h,u,f,y,m){let v=encodeURIComponent(`${h}`),T=u===r.CURRENT_DOMAIN?void 0:u,C=i(f),w=C?`;expires=${C.toUTCString()}`:"",b=";path=/",k=Mt(T)?`;domain=${T}`:"",O=`${l}=${v}${w}${b}${k}`;return Q(y)&&y!==Ze.NotSet&&(O=`${O};SameSite=${y}`),Q(m)&&m===fe.Yes&&(O=`${O};Secure`),document.cookie=O,!0}r.set=e;function i(l){return Wt(l)?new csDate(P.now()+l):l}r.toExpireDate=i;function n(l,h){t(l)&&e(l,"",h,new csDate(0)),t(l)&&e(l,"",h,new csDate(0),Ze.None,fe.Yes)}r.remove=n;function o(){return document.cookie.length>0}r.isCookiePresent=o;function c(l,h){let u="_cs_root-domain",f=t(u);if(f!==null&&f!=="1")return f;let y=csString.prototype.split.call(window.location.hostname,"."),m=csArray.prototype.pop.call(y);for(;y.length&&(f===null||f==="1");)m=csArray.prototype.join.call([csArray.prototype.pop.call(y),m],"."),e(u,m,m,void 0,l,h),f=t(u);return n(u,m),m}r.getRootDomain=c}(s||(s={})),s})(),vf=(()=>{let s;return function(r){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}r.browserIsSafariV12=t}(s||(s={})),s})(),Ze=(()=>{let s;return function(r){r.None="None",r.Lax="Lax",r.NotSet="X"}(s||(s={})),s})(),fe=(()=>{let s;return function(r){r[r.Yes=1]="Yes",r[r.No=0]="No"}(s||(s={})),s})(),Or=(()=>{class s{constructor(t,e,i){this.E=t,this.A=e,this.Di=i,this.cl=!1,this.Sf=Ze.NotSet,this.ll=fe.No}getSameSiteFlag(){return this.Sf}getSecureFlag(){return this.ll}getDomain(){return this.ul}getRootDomain(){return this._f}init(){if(this.E.cookielessTrackingEnabled)return;let t=this.Rv(),e=this.Cv();this.cl=this.Iv(t,e),this.cl?(this.Sf=t,this.ll=e):this.E.secureCookiesEnabled&&this.A.getUrlProtocol()==="https:"&&(this.ll=fe.Yes),this._f=this.Pv(),this.ul=this.Ov(this._f)}Iv(t,e){return vf.browserIsSafariV12()?!1:(gt.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),gt.get(s.COOKIE_TEST_FOR_SAME_SITE)?(gt.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}Rv(){return this.A.getUrlProtocol()==="http:"?Ze.Lax:this.Di.isSameSiteNoneSecureNeeded()||this.E.crossDomainTracking?Ze.None:Ze.Lax}Cv(){return this.A.getUrlProtocol()==="http:"?fe.No:this.E.secureCookiesEnabled||this.E.crossDomainTracking||this.Di.isSameSiteNoneSecureNeeded()?fe.Yes:fe.No}isSameSiteSupported(){return this.cl}set(t,e,i,n){let o=gt.toExpireDate(i),c=n?fe.Yes:this.getSecureFlag();gt.set(t,e,this.ul,o,this.getSameSiteFlag(),c)}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.ul;gt.remove(t,i)}Pv(){let t=this.Di.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?Ze.None:void 0,i=t?fe.Yes:void 0;return gt.getRootDomain(e,i)}Ov(t){return this.E.allowSubdomains?t:gt.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),$s="_cs_t",ga="1",Sf=(()=>{class s{constructor(t,e){this.Ct=t,this.E=e,this.ga=!1,this.ma=!1}init(){if(!this.E.cookielessTrackingEnabled&&this.Ct.isTopWindowTracker()&&"cookie"in document){if(!this.Ct.isInIframeContext()&&gt.isCookiePresent()){this.ga=!0,this.ma=!1;return}if(gt.set($s,ga,gt.CURRENT_DOMAIN),gt.get($s)!==null){this.ga=!0,this.ma=!1,gt.remove($s,gt.CURRENT_DOMAIN);return}gt.set($s,ga,gt.CURRENT_DOMAIN,void 0,Ze.None,fe.Yes),gt.get($s)!==null&&(this.ga=!0,this.ma=!0,gt.remove($s,gt.CURRENT_DOMAIN))}}areCookiesEnabled(){return this.ga}isSameSiteNoneSecureNeeded(){return this.ma}}return s})();function _f(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var wf=(()=>{class s{constructor(t,e){this.E=t,this.Di=e}canTrack(){return this.E.isProjectActive()&&this.Nv()&&this.wf()&&this.Mv()}canTrackInChild(){return this.E.isProjectActive()&&this.Dv()&&(this.wf()||this.kv()||this.xv())}Mv(){return this.E.cookielessTrackingEnabled?_f():this.Di.areCookiesEnabled()}wf(){return Id(window.location.hostname,this.E.hostnames)}Nv(){return!this.Af()&&this.Lv()}Dv(){return!this.Af()&&this.Uv()}kv(){return window.location.protocol==="about:"&&window.location.hostname===""}Af(){return"visibilityState"in document&&document.visibilityState==="prerender"}Lv(){return this.bf()&&this.jv()}Uv(){return this.bf()}jv(){try{return!!window.localStorage}catch{return!1}}bf(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}xv(){return this.E.isWebView&&window.location.protocol==="file:"&&window.location.hostname===""}}return s})(),Hc=":";function ma(s){let r=[],t=Af(s),e=csString.prototype.split.call(t,"/");for(let i of e)Dt(i,Hc)?csArray.prototype.push.call(r,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(r,{key:i,value:null});return r}function Af(s){let r=s;return Dt(s,"/")&&(r=csString.prototype.substring.call(r,1)),Ii(s,"/")&&(r=csString.prototype.slice.call(r,0,-1)),r}var bf=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,Tf="$1CS_ANONYMIZED_NAME",Rf=(()=>{class s{constructor(t){this.D=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],n=e.partialMaskingPatterns||[],o=this.D.anonymizePII(t);if(o=this.D.anonymizeJwt(o),e.maskNames){let h=o;o=this.bn(o),o!==h&&(j.counters.redactedPII.count("name"),j.counters.redactedPII.count("name-in-url"))}let c=this.Hv(o,i);if(c!==o)return j.counters.redactedPII.count("url"),c;let l=this.Bv(o,n);return l!==o&&j.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.dl(t);return i!==""?`${e}?`:e}dl(t){let e=csString.prototype.indexOf.call(t,"?"),i,n="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),n=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:n}}Hv(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.dl(t),o=csString.prototype.split.call(i,"/");for(let c of e){let l=this.Fv(o,c);if(l!==null)return`${l}${n}`}return t}Fv(t,e){if(t.length<e.length)return null;let i=[];for(let n=0;n<t.length;n++){let o=t[n];if(n>=e.length){csArray.prototype.push.call(i,o);continue}let c=e[n].key;if(this.Tf(c)){let l=e[n].value;csArray.prototype.push.call(i,l);continue}if(o===c){csArray.prototype.push.call(i,o);continue}return null}return csArray.prototype.join.call(i,"/")}Bv(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.dl(t),o=csString.prototype.split.call(i,"/");for(let c of e)o=this.$v(o,c);return`${csArray.prototype.join.call(o,"/")}${n}`}$v(t,e){let i=[],n=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let h=t[l],u=e[n].key;if(this.Tf(u)&&l>=c){let f=e[n].value;csArray.prototype.push.call(i,h.length>0?f:""),n++,n===e.length&&(n=0);continue}if(h===u){csArray.prototype.push.call(i,h),n++,n===e.length&&(n=0);continue}for(let f=0;f<n;f++){let y=l-n+f;i[y]=t[y]}n=0,csArray.prototype.push.call(i,h)}for(let l=0;l<n;l++){let h=t.length-n+l;i[h]=t[h]}return i}Tf(t){return Dt(t,Hc)}bn(t){return csString.prototype.replace.call(t,bf,Tf)}}return s})(),Cf="spki",ya="RSA-OAEP",If="SHA-256",Ea="AES-CTR",Pf="SHA-1",va=190,vt=(()=>{let s;return function(r){var t;let e=!1,i=null,n,o=typeof TextEncoder!="undefined"?new TextEncoder:null,c;r.crypto=(t=rt.crypto)===null||t===void 0?void 0:t.subtle,r.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}r.isKeyImported=l;function h(){return i}r.getCryptoKey=h;function u(){var O,S;return((S=(O=rt.self.crypto)===null||O===void 0?void 0:O.subtle)===null||S===void 0?void 0:S.encrypt)!=null&&rt.self.CryptoKey!=null}r.isSupported=u;async function f(O){n=r.crypto.importKey(Cf,gc(O),{name:ya,hash:If},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await n,n=void 0,i||nt.warn(`Fail to import public key '${O}'`)}r.importKey=f;async function y(O){if(!u()||e)return null;await n;let S=oo(O);S.byteLength>va&&(S=S.slice(0,va));try{let V=await r.crypto.encrypt({name:ya},i,S);return In(V)}catch{return null}}r.asymmetricEncrypt=y;async function m(O,S){if(!u()||e)return null;let V={counter:S.initializationVector,name:Ea,length:64},H=o.encode(O);try{let X=await r.crypto.encrypt(V,S.cryptoKey,H);return In(X)}catch{return null}}r.symmetricEncrypt=m;async function v(O){let S=await T(O);if(!S)throw new Error("Export secret failed");let V=await y(S);if(!V)throw new Error("Encrypt secret failed");return V}r.encryptSecret=v;async function T(O){var S;if(!u())return null;try{return(S=(await r.crypto.exportKey("jwk",O)).k)!==null&&S!==void 0?S:null}catch{return null}}async function C(){if(!u()||e)return null;try{return{cryptoKey:await r.crypto.generateKey({name:Ea,length:128},!0,["encrypt","decrypt"]),initializationVector:rt.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}r.generateSymmetricKey=C;function w(O){c=O}r.setDigestSalt=w;async function b(O){O=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(O)),c&&(O=`${O}:${c}`);let S=o.encode(O);try{let V=await r.crypto.digest(Pf,S);return Pn(V)}catch{return null}}r.digest=b;function k(){return rt.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}r.generateKeyPair=k}(s||(s={})),s})(),be=(()=>{let s;return function(r){r.REGEX="regex",r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),Ge=(()=>{let s;return function(r){r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),gs=(()=>{let s;return function(r){r.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",r.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",r.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",r.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(s||(s={})),s})(),vo=(()=>{class s{constructor(){this.pl=[]}setRegexRules(t){this.pl=csArray.prototype.filter.call(csArray.prototype.map.call(t,e=>this.zv(e)),e=>e!==null)}evaluateUrl(t){return csArray.prototype.some.call(this.pl,e=>this.Rf(t,e))}getMatchingRules(t){return csArray.prototype.map.call(csArray.prototype.filter.call(this.pl,e=>this.Rf(t,e)),e=>e.ruleInput)}Rf(t,e){var i,n;let o=this.Gv(t,e);return!this.qv(e)||!this.Wv(e)?!1:!!(e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(o)):!((n=e.regex)===null||n===void 0)&&n.test(o))}qv(t){let e=new csDate,i=t.startDate&&t.startDate>e,n=t.endDate&&t.endDate<e;return!i&&!n}Wv(t){let e=t.samplingRate!==100,i=e&&Cs.boolean(t.samplingRate);return!e||i}ya(t){return!Dt(t,"http://")&&!Dt(t,"https://")?`https://${t}`:t}Gv(t,e){let i=kc(this.ya(t));return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}Ea(t){return t!=null&&t.ignoreCaseSensitivity?"i":""}zv(t){let e=null,i=!1;switch(t.operator){case Ge.NOT_START:case be.NOT_START:i=!0;case Ge.START:case be.START:e=new csRegExp(`^${t.value}`,this.Ea(t));break;case Ge.NOT_END:case be.NOT_END:i=!0;case Ge.END:case be.END:e=new csRegExp(`${t.value}$`,this.Ea(t));break;case Ge.NOT_CONTAIN:case be.NOT_CONTAIN:i=!0;case Ge.CONTAIN:case be.CONTAIN:case be.REGEX:e=new csRegExp(`${t.value}`,this.Ea(t));break;case Ge.NOT_EXACT:case be.NOT_EXACT:i=!0;case Ge.EXACT:case be.EXACT:e=new csRegExp(`^${t.value}$`,this.Ea(t));break;default:nt.warn(`compileRegexRule, unknown operator: ${t.operator}`)}if(e===null)return null;let n=t.startDate?this.Cf(t.startDate):void 0,o=t.endDate?this.Cf(t.endDate):void 0;return{regex:e,ignoreQueryParams:t.ignoreQueryParams,ignoreURIFragments:t.ignoreURIFragments,notOperator:i,samplingRate:t.samplingRate!==void 0?t.samplingRate:100,startDate:n,endDate:o,ruleInput:t}}Cf(t){let e=new csDate(t);return isNaN(e.getTime())?void 0:e}}return s})(),W=(()=>{let s;return function(r){r[r.RESIZE=0]="RESIZE",r[r.SCROLL=1]="SCROLL",r[r.MOUSEMOVE=2]="MOUSEMOVE",r[r.MOUSEDOWN=3]="MOUSEDOWN",r[r.MOUSEUP=4]="MOUSEUP",r[r.CLICK=5]="CLICK",r[r.MOUSEOVER=6]="MOUSEOVER",r[r.MOUSEOUT=7]="MOUSEOUT",r[r.CHANGE=10]="CHANGE",r[r.FOCUSIN=11]="FOCUSIN",r[r.FOCUSOUT=12]="FOCUSOUT",r[r.TAP=14]="TAP",r[r.KEYDOWN=15]="KEYDOWN",r[r.KEYUP=16]="KEYUP",r[r.COMMAND=17]="COMMAND",r[r.PERFORMANCE=19]="PERFORMANCE",r[r.DRAG=20]="DRAG",r[r.FLICK=21]="FLICK",r[r.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",r[r.ZOOM=23]="ZOOM",r[r.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",r[r.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",r[r.DEAD_CLICK=30]="DEAD_CLICK",r[r.DEAD_ZOOM=31]="DEAD_ZOOM",r[r.PAGE_RELOAD=32]="PAGE_RELOAD",r[r.THRASHED_CURSOR=33]="THRASHED_CURSOR",r[r.BLANK_PAGE=34]="BLANK_PAGE",r[r.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",r[r.SUBMIT=36]="SUBMIT",r[r.CUSTOM_EVENT=37]="CUSTOM_EVENT"}(s||(s={})),s})(),Re=(()=>{let s;return function(r){r.APPCUES="appcues",r.CHAMELEON="chameleon",r.CONTENTSQUARE="contentsquare",r.SEGMENT="segment",r.SHOPIFY="shopify",r.WEB="web"}(s||(s={})),s})();function Of(s){return s.tgtHM!==void 0}function Bc(s){return s.tgt!==void 0}function Nf(s){return s.tgtLk!==void 0}function Mf(s){return s.x!==void 0&&s.y!==void 0}function Df(s){return s===Re.APPCUES||s===Re.CHAMELEON||s===Re.CONTENTSQUARE||s===Re.SEGMENT||s===Re.SHOPIFY||s===Re.WEB}var kf=Math.pow(2,31);function xf(s,r=0){let l=r>>>0,h=s.length;for(let m=0;m<h-3;m+=4){let v=(csString.prototype.charCodeAt.call(s,m)&255|(csString.prototype.charCodeAt.call(s,m+1)&255)<<8|(csString.prototype.charCodeAt.call(s,m+2)&255)<<16|(csString.prototype.charCodeAt.call(s,m+3)&255)<<24)>>>0;v=Math.imul(v,3432918353),v=v<<15|v>>>17,v=Math.imul(v,461845907),l^=v,l=l<<13|l>>>19,l=Math.imul(l,5)+3864292196}let u=0,f=h&3,y=h-f;switch(f){case 3:u^=(csString.prototype.charCodeAt.call(s,y+2)&255)<<16;case 2:u^=(csString.prototype.charCodeAt.call(s,y+1)&255)<<8;case 1:u^=csString.prototype.charCodeAt.call(s,y)&255,u=Math.imul(u,3432918353),u=u<<15|u>>>17,u=Math.imul(u,461845907),l^=u}return l^=h,l^=l>>>16,l=Math.imul(l,2246822507),l^=l>>>13,l=Math.imul(l,3266489909),l^=l>>>16,l>>>0}function Fc(s){return xf(s)+kf>>>0}var So=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),gi="|iframe|",Lf=(()=>{class s extends So{constructor(t,e,i,n){super(),this.Yv=t,this.Xv=e,this.Kv=i,this.Jv=n}emitIframeEvent(t,e,i){if(this.Qv(e)&&t===null){F.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case Rt.ChildLogMessage:this.Zv(i);break;case Rt.AnalysisEvent:{let n=i,o=this.Yv.transformEvent(t,n);o.isUserEvent?this.tS(o.event):this.eS(o.event);break}case Rt.RecordingEvent:{let n=i,o=this.Jv.transformEvents(t,n);if(o.events.length===0)return;o.containsUserEvent?this.sS(o.events):this.iS(o.events);break}case Rt.JavascriptError:this.rS(i);break;case Rt.ApiError:this.nS(i);break;case Rt.DetailedApiError:this.oS(i);break;case Rt.CustomError:this.aS(i);break;case Rt.EmerchandisingMessage:{let n=this.Kv.transformEvent(t,i);this.cS(n);break}case Rt.Commands:{let n=this.Xv.transformEvent(t,i);this.lS(n);break}case Rt.IntegrationCallback:this.hS(i);break;case Rt.StaticResource:this.uS(i);break;case Rt.TrackingContextRequestMessage:this.dS(i);break;default:F.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}Qv(t){let e=[Rt.AnalysisEvent,Rt.RecordingEvent,Rt.EmerchandisingMessage,Rt.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}Zv(t){let{message:e,errorCode:i,level:n}=t;switch(n){case lt.debug:F.debug(e,i);break;case lt.warn:F.warn(e,!0,i);break;case lt.implementation:F.implementation(e,i);break;case lt.error:F.error(e,i);break;case lt.critical:F.critical(e,i);break}}tS(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}eS(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}sS(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}iS(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}rS(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}nS(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}oS(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}cS(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}lS(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}hS(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}uS(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}dS(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}aS(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),Vf=(()=>{class s{constructor(t,e,i){this.et=t,this.If=e,this.Pf=i}transformEvent(t,e){this.fS(t,e.event);let i=this.et.getElementPath(t);return this.pS(i,e.event),this.gS(e.event),e}fS(t,e){if(Mf(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+yt.windowOffsetX()),e.y=Math.round(i.top+e.y+yt.windowOffsetY())}}pS(t,e){Bc(e)&&(e.tgt=`${t}${gi}${e.tgt}`),Of(e)&&(e.tgtHM=`${t}${gi}${e.tgtHM}`,this.If||(e.tgtHMH=Fc(e.tgtHM))),Nf(e)&&(e.tgtLk=`${t}${gi}${e.tgtLk}`)}gS(t){!this.If&&this.Pf&&this.Pf.enhanceAnalysisEvent(null,t)}}return s})(),Uf=(()=>{class s{constructor(t){this.et=t}transformEvent(t,e){let i=this.et.getElementPath(t);return{iframePath:e.iframePath?`${i}${gi}${e.iframePath}`:i,commands:e.commands}}}return s})(),jf=(()=>{class s{constructor(t){this.et=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.et.getElementPath(t),n=csArray.prototype.map.call(e.products,o=>({...o,targetPath:`${i}${gi}${o.targetPath}`}));return{...e,products:n}}}return s})(),Hf=1,Sa=csSymbol("nodeIdentifier");function q(s){let r=s[Sa];return r!=null?r:s[Sa]=Hf++}var M=(()=>{let s;return function(r){r[r.MUTATION_INSERT=1]="MUTATION_INSERT",r[r.MUTATION_REMOVE=2]="MUTATION_REMOVE",r[r.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",r[r.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",r[r.INITIAL_DOM=5]="INITIAL_DOM",r[r.SCROLL=6]="SCROLL",r[r.CLICK=8]="CLICK",r[r.RESIZE=9]="RESIZE",r[r.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",r[r.INPUT_SELECT=11]="INPUT_SELECT",r[r.INPUT_TEXT=12]="INPUT_TEXT",r[r.HASH_CHANGE=13]="HASH_CHANGE",r[r.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",r[r.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",r[r.MOUSE_OVER=16]="MOUSE_OVER",r[r.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",r[r.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",r[r.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",r[r.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",r[r.ATTACH_SHADOW=22]="ATTACH_SHADOW",r[r.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",r[r.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",r[r.PAGE_EVENT=27]="PAGE_EVENT",r[r.API_ERROR=28]="API_ERROR",r[r.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",r[r.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",r[r.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",r[r.KEY_DOWN=32]="KEY_DOWN",r[r.KEY_UP=33]="KEY_UP",r[r.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",r[r.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",r[r.USER_IDENTIFIER=38]="USER_IDENTIFIER",r[r.TOUCH_START=41]="TOUCH_START",r[r.TOUCH_MOVE=42]="TOUCH_MOVE",r[r.TOUCH_END=43]="TOUCH_END",r[r.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",r[r.POINTER_DOWN=47]="POINTER_DOWN",r[r.POINTER_MOVE=48]="POINTER_MOVE",r[r.POINTER_UP=49]="POINTER_UP",r[r.CUSTOM_ERROR=50]="CUSTOM_ERROR",r[r.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",r[r.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",r[r.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",r[r.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",r[r.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",r[r.SCREEN_RESIZE=65]="SCREEN_RESIZE",r[r.RESOURCE_HASHES=66]="RESOURCE_HASHES",r[r.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",r[r.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",r[r.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",r[r.TEXT_REF=73]="TEXT_REF",r[r.TOUCH_CANCEL=74]="TOUCH_CANCEL",r[r.MUTATION_MOVE=75]="MUTATION_MOVE",r[r.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",r[r.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",r[r.VIDEO_PLAY=78]="VIDEO_PLAY",r[r.VIDEO_PAUSE=79]="VIDEO_PAUSE",r[r.VIDEO_SEEK=80]="VIDEO_SEEK",r[r.ADOPTED_STYLESHEET_DISABLED=98]="ADOPTED_STYLESHEET_DISABLED",r[r.STYLESHEET_DISABLED=99]="STYLESHEET_DISABLED",r[r.DOM_INITIAL_STATE=102]="DOM_INITIAL_STATE",r[r.DOM_PATCH_STATE=103]="DOM_PATCH_STATE",r[r.DEBUG=999]="DEBUG"}(s||(s={})),s})();var li=(()=>{let s;return function(r){r[r.SWIPE=0]="SWIPE",r[r.PINCH_IN=1]="PINCH_IN",r[r.PINCH_OUT=2]="PINCH_OUT",r[r.LONG_PRESS=3]="LONG_PRESS",r[r.TAP=4]="TAP",r[r.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),Bf=(()=>{class s{constructor(){this.mS={clientX:2,clientY:3},this.yS={clientX:1,clientY:2},this.ES=[M.POINTER_DOWN,M.POINTER_MOVE,M.POINTER_UP],this.vS=[M.TOUCH_START,M.TOUCH_MOVE,M.TOUCH_END]}transformEvents(t,e){if(!ft.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==M.VISIBILITY_CHANGE),e.events.length===0||(F.warn(`IframeRecordingEventsTransformer received event ${Rt.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=q(t),n=null;csArray.prototype.some.call(e.events,c=>this.Of(c)||this.Nf(c))&&(n=t.getBoundingClientRect());for(let c of e.events)this.Of(c)?this.SS(n,c):this.Nf(c)&&this._S(n,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}_S(t,e){this.Mf(this.yS,t,e)}SS(t,e){this.Mf(this.mS,t,e)}Mf(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}Of(t){return csArray.prototype.indexOf.call(this.ES,t.type)!==-1}Nf(t){return csArray.prototype.indexOf.call(this.vS,t.type)!==-1}}return s})(),wt=(()=>{class s extends Error{constructor(t,e){let i=e?`Command misuse: ${t} - ${e}`:`Command misuse: ${t}`;super(i),this.name="MisusedCommandError"}}return s})(),tn;function Ys(s){if(tn||(tn=document.createElement("div")),!(!!s&&G(s)))return nt.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return Ft.call(tn,s),!0}catch{return nt.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function Un(s,r){if(aa)return aa.call(s,r);let t=s;do{if(Ft.call(t,r))return t;t=t==null?void 0:t.parentElement}while(t!==null&&csNodenodeType.apply(t)===1);return null}function ts(s){if(!s)return s;switch(typeof s){case"object":{if(csArray.isArray(s))return csArray.from(s);let r={};for(let t in s)r[t]=ts(s[t]);return r}default:return s}}function $c(s){for(let r in s)if(s[r]!==void 0)return!0;return!1}function zc(s,r){if(csArray.isArray(s)&&csArray.isArray(r))return s.length!==r.length||csArray.prototype.some.call(s,(i,n)=>i!==r[n])?ts(r):void 0;let t={},e=new Set([...Object.keys(s||{}),...Object.keys(r||{})]);for(let i of e){let n=s[i],o=r[i];if(n===o)continue;let c=typeof n;if(c!==typeof o)n===void 0&&o!==void 0?t[i]=o:n!==void 0&&o===void 0&&(t[i]=null);else if(c==="object"&&n&&o){let h=zc(n,o);h!==void 0&&(t[i]=h)}else t[i]=ts(o)}return $c(t)?t:void 0}function Gc(s,r){let t={...s};for(let[e,i]of Object.entries(r))if(i===null)delete t[e];else if(i!==void 0){let n=t[e],o=i;n&&typeof n=="object"&&o&&typeof o=="object"&&!csArray.isArray(n)&&!csArray.isArray(o)?t[e]=Gc(n,o):t[e]=o}return t}function qc(s){let r=null;return t=>t?r=t:r||(r=s())}var Ff=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function $f(s){return csString.prototype.indexOf.call(s,"-")>0&&csString.prototype.indexOf.call(s,":")===-1&&csString.prototype.indexOf.call(s,'"')===-1&&csString.prototype.indexOf.call(s,",")===-1&&!Ff.has(s)}var zs=qc(()=>new WeakMap),en=qc(()=>new Set),rs=(()=>{let s;return function(r){function t(u){return zs().get(u)}r.getAll=t;function e(u,f){var y;return(y=zs().get(u))===null||y===void 0?void 0:y[f]}r.get=e;function i(u,f,y){let m=zs().get(u);m||zs().set(u,m={}),m[f]=y,c(u)}r.set=i;function n(u,f){let y=zs().get(u);y&&(delete y[f],c(u))}r.remove=n;function o(){zs(new WeakMap)}r.reset=o;function c(u){for(let f of en())f(u)}function l(u){en().add(u)}r.subscribe=l;function h(u){en().delete(u)}r.unsubscribe=h}(s||(s={})),s})(),it=(()=>{let s;return function(r){function t(l,h,u){var f;if(typeof Node!="undefined"&&l instanceof Node)rs.set(l,h,u);else{let y=l;(f=y.props)!==null&&f!==void 0||(y.props={}),y.props[h]=u}}r.setProperty=t;function e(l,h){var u;return typeof Node!="undefined"&&l instanceof Node?rs.get(l,h):(u=l.props)===null||u===void 0?void 0:u[h]}r.getProperty=e;function i(l){return typeof Node!="undefined"&&l instanceof Node?rs.getAll(l):l.props}r.getProperties=i;function n(l,h){let u=null;return o(l,(f,y,m)=>h(f)&&(u=f)&&!!m()),u}r.findDescendant=n;function o(l,h){c(l,void 0,h)}r.traverse=o;function c(l,h,u){let f=!1;if(u(l,h,()=>f=!0),f)return;let m=l.shadowRoot;m&&c(m,l,u);let v=l.children;if(v!=null&&v.length){for(let T of v)if(T&&(c(T,l,u),f))break}}}(s||(s={})),s})(),D=(()=>{let s;return function(r){let t;(function(w){w[w.NotMasked=0]="NotMasked",w[w.Parent=1]="Parent",w[w.Child=2]="Child"})(t=r.MaskedElementState||(r.MaskedElementState={})),r.maskedProp="masked",r.maskedAttributeProp="maskedAttribute";function e(w){return Ts(w)&&"Attributes"in w&&"PIISelectors"in w?w.Attributes instanceof Array&&w.PIISelectors instanceof Array:!1}r.isSelectorUserInput=e;function i(w){if(!Ts(w)||w===null)throw new wt("setPIISelectors");return"Attributes"in w||(w.Attributes=[]),"PIISelectors"in w||(w.PIISelectors=[]),w}r.sanitizeSelectorUserInput=i;function n(w){var b,k,O;return"nodeType"in w?(b=it.getProperty(w,r.maskedProp))!==null&&b!==void 0?b:{state:t.NotMasked}:(O=(k=w.metadata)===null||k===void 0?void 0:k[r.maskedProp])!==null&&O!==void 0?O:{state:t.NotMasked}}r.getMaskedElementDetails=n;function o(w){var b,k,O;return"nodeType"in w?(b=it.getProperty(w,r.maskedAttributeProp))!==null&&b!==void 0?b:{attributes:[]}:(O=(k=w.metadata)===null||k===void 0?void 0:k[r.maskedAttributeProp])!==null&&O!==void 0?O:{attributes:[]}}r.getMaskedAttributeDetails=o;function c(w){let b=it.getProperty(w,r.maskedProp);return(b==null?void 0:b.state)===t.Parent}r.isMaskedElement=c;function l(w){let b=it.getProperty(w,r.maskedProp);return(b==null?void 0:b.state)===t.Child}r.isMaskedElementChild=l;function h(w,b){let k=it.getProperty(w,r.maskedAttributeProp);return((k==null?void 0:k.attributes)==null?void 0:csArray.prototype.indexOf.call(k==null?void 0:k.attributes,b))>-1}r.isMaskedAttribute=h;function u(w,b){it.setProperty(w,r.maskedProp,b)}r.setMaskedElementProperty=u;function f(w){it.setProperty(w,r.maskedProp,void 0)}r.unsetMaskedElementProperty=f;function y(w,b){it.setProperty(w,r.maskedAttributeProp,b)}r.setMaskedAttributeProperty=y;function m(w,b){let k=csArray.prototype.filter.call(w.PIISelectors,V=>Ys(V));b.elementSelector.length>0&&csArray.prototype.push.call(k,...csString.prototype.split.call(b.elementSelector,","));let O=C([...k]),S={elementSelector:csArray.prototype.join.call(O,","),attrSelector:b.attrSelector,attrSelectors:b.attrSelectors};return csArray.prototype.forEach.call(w.Attributes,V=>{V!=null&&V.attrName&&(V!=null&&V.selector)&&Ys(V.selector)&&!v(S.attrSelectors,V)&&csArray.prototype.push.call(S.attrSelectors,V)}),S.attrSelector=T(S.attrSelectors),S}r.getComputedSelectorSettings=m;function v(w,b){return csArray.prototype.some.call(w,k=>k.selector===b.selector&&k.attrName===b.attrName)}function T(w){let b="";return csArray.prototype.forEach.call(w,k=>{let O=csString.prototype.split.call(k.selector,",");csArray.prototype.forEach.call(O,S=>{Ys(S)&&(b&&(b+=","),b+=S)})}),b}function C(w){if(w.length<=1)return w;let b=[];for(let k of w){let O=csString.prototype.split.call(k,",");for(let S of O)csArray.prototype.indexOf.call(b,S)===-1&&csArray.prototype.push.call(b,S)}return b}}(s||(s={})),s})(),zf=(()=>{class s{constructor(){this.va={elementSelector:"",attrSelector:"",attrSelectors:[]},this.gl={elementSelector:"",attrSelector:"",attrSelectors:[]},this.wS=window.top===window?"pii-migration":"pii-migration-iframe",this.Df=!1}onAfterNaturalPageView(){this.kf()}onParentSensitiveStatusChange(t){t.started&&!this.Df&&(this.Df=!0,t.maskedElementSettings&&(this.va=t.maskedElementSettings),this.kf())}kf(){var t,e;let i=this.xf(this.va),n=this.xf(this.gl),o=csArray.prototype.filter.call(n.elementSelectors,l=>csArray.prototype.indexOf.call(i.elementSelectors,l)===-1&&l!=="[data-cs-mask]"),c={};for(let[l,h]of Object.entries(n.attrSelectors)){let u=i.attrSelectors[l]||[],f=csArray.prototype.filter.call(h,y=>csArray.prototype.indexOf.call(u,y)===-1);f.length>0&&(c[l]=f)}(o.length>0||Object.keys(c).length>0)&&(F.computeIsActive(100),F.warn(csJSON.stringify({selectors:o,attrs:c}),!0,this.wS),F.computeIsActive((e=(t=window.CS_CONF)===null||t===void 0?void 0:t.validationRate)!==null&&e!==void 0?e:10))}xf(t){let e=csString.prototype.trim.call(t.elementSelector).length>0?csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(t.elementSelector,","),n=>csString.prototype.trim.call(n)),n=>n.length>0):[],i={};for(let n of t.attrSelectors)i[n.attrName]=csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(n.selector,","),o=>csString.prototype.trim.call(o)),o=>o.length>0);return{elementSelectors:e,attrSelectors:i}}markClicktalePIIInUse(t){this.gl=D.getComputedSelectorSettings(t,this.gl)}markPIIMaskingTemplateInUse(t){let e=D.sanitizeSelectorUserInput(t);this.va=D.getComputedSelectorSettings(e,this.va)}}return B([x()],s.prototype,"markPIIMaskingTemplateInUse",null),s})(),Gf=(()=>{class s{constructor(t,e){this.S=t,this.gt=e}init(){this.gt.addListener(this.S)}onOptout(){this.S.stop()}onBeforeSessionRenewal(){this.S.stop()}}return s})();var Pt=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})(),qf=(()=>{let s;return function(r){r.UXA="_uxa",r.WVT="cs_wvt"}(s||(s={})),s})(),Wf=(()=>{class s extends Pt{constructor(t,e){super(),this.ml=t,this.yl=e,this.hs={}}register(t,e,i){for(let n of t){let o=(...c)=>{try{let l=e(...c);return j.counters.commandApplied.count(n),l}catch(l){l instanceof wt?(j.counters.commandMisuse.count(n),F.warn(`Misused Command: ${n}; Args: ${csJSON.stringify(c)}; Error: ${Pe(l)?l.stack:l}`)):(j.counters.commandError.count(n),F.error(`Command Error - ${n}: ${Pe(l)?l.stack:l}`))}};this.hs[n]={callback:o,configuration:i},this.hs}}onStart(){this.AS(),this.bS()}onStop(){for(let t of this.ml)window[t]=[]}applyFromIntegration(t,e,i){this.Lf(t,e,`Commands.apply.from.integration: ${i}`),j.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){var n;this.Lf(t,e,`Commands.apply.from.implementation: ${i}`),j.counters.commandsFromCSTC.count(t),i==="PIIMaskingTemplate"&&((n=this.yl)===null||n===void 0||n.markPIIMaskingTemplateInUse(e[0]))}onIframeCommands(t){for(let e of t.commands)this.TS(e.name,e.params,t.iframePath),j.counters.commandsFromIframe.count(e.name)}Lf(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}F.tryToExecute(i,()=>{if(this.hs[t])return this.hs[t].callback(...e)})()}TS(t,e,i){F.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.hs[t])return this.hs[t].callback(...e)})()}AS(){for(let t of this.ml)window[t].forEach(([e,...i])=>this.Vf(e,i,!1))}bS(){for(let t of this.ml)window[t]={push:([e,...i])=>this.Vf(e,i,!0)}}Vf(t,e,i){var n,o;if(this.hs[t]){if(((n=this.hs[t].configuration)===null||n===void 0?void 0:n.disableApplyPending)&&!i||((o=this.hs[t].configuration)===null||o===void 0?void 0:o.disableApplyImmediate)&&i)return;try{return this.hs[t].callback(...e)}catch(l){F.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})(),Yf=(()=>{class s extends So{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:W.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})();function Xf(s){return csNodenodeType.apply(s)===1}function St(s){let r=csEventtarget.apply(s);return r&&Xf(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}function Kf(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function Jf(){return(s,r,t)=>{let e=t.value;return e&&(t.value=function(i){if(St(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}var Qf=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],Zf=1024,tp=1024,ep=(()=>{class s{constructor(t,e){this.vt=t,this.E=e}getEventTargetPathAndHierarchy(t,e){let i=St(t),n={isNodeSensitive(o){return D.isMaskedElement(o)||D.isMaskedElementChild(o)},isAttributeSensitive(o,c){return D.isMaskedAttribute(o,c)},allWhitelistedAttributes:Eo(this.E.whitelistedAttributes),attributeIgnoreTokens:Qf,useAnonymization:e,attrMaxLength:tp,hierarchyMaxLength:Zf};return this.vt.getElementPathAndHierarchy(i,n,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}getEventTargetPath(t){let e=St(t);return this.vt.getElementPath(e,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=St(t),{path:i,firstAnchorParent:n}=this.vt.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules}),o=this.RS(n)?n.href:"";return{path:i,targetLink:o}}hasValidEventTarget(t){let e=St(t);return this.vt.isValidElement(e)}getElementPath(t){return this.vt.getElementPath(t,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}RS(t){var e;return t!==null&&t.hasAttribute("href")&&!_r((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})();function Nr(s,r){typeof r=="number"&&(r={wait:r});let t=r.wait,e=r.mode||"leading",i,n=[],o=null,c=0,l,h=()=>{c=P.now(),o=null,l=s.apply(i,n),n=[],i=null},u=function(...f){if(i=this!==null&&this!==void 0?this:rt,n=[...f],e==="trailing")return o||(o=rt.csSetTimeout(h,t)),l;let y=P.now(),m=t-(y-c);return m<=0||m>t?(c=y,l=s.apply(i,n),o?(rt.csClearTimeout(o),o=null):n=[]):o||(o=rt.csSetTimeout(h,m)),l};return u.cancel=()=>{o&&(rt.csClearTimeout(o),c=0,o=null,n=[])},u.flushPending=()=>{o&&(rt.csClearTimeout(o),h())},u}var Mr=s=>(r,t,e)=>{e.value=Nr(e.value,s)};var Ar=".",_o="__DOT__",sp=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,Wc="x";function ip(s){let[r,t,e,i,n,o,c,l,h]=cp(s);return{id:r,creationTimestamp:Number(t),visitsCount:Number(e),hitTimestamp:Number(i),lastVisitTimestamp:Number(n),appliedTrackingDraw:Number(o),expires:Number(c),allowSubdomains:l===void 0?void 0:!!Number(l),identityPrint:h===void 0||h===Wc?null:h}}function rp(s){var r;return csArray.prototype.join.call(csArray.prototype.map.call(csArray.prototype.map.call([s.id,s.creationTimestamp,s.visitsCount,s.hitTimestamp,s.lastVisitTimestamp,s.appliedTrackingDraw,s.expires,s.allowSubdomains?1:0,(r=s.identityPrint)!==null&&r!==void 0?r:Wc],csString),op),Ar)}function np(s){return sp.test(s)}function op(s){return csString.prototype.replace.call(s,/\./g,_o)}function ap(s){return csString.prototype.replace.call(s,new csRegExp(_o,"g"),Ar)}function cp(s){return csString.prototype.indexOf.call(s,_o)!==-1?csArray.prototype.map.call(csString.prototype.split.call(s,Ar),ap):csString.prototype.split.call(s,Ar)}var N=(()=>{let s;return function(r){r.QUOTA_REACHED="X",r.RECORDING_RULES_TARGETING="8",r.ANALYTICS_ONLY_RULES_TARGETING="9",r.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING="P",r.ANALYTICS_ONLY="0",r.RECORDING_GLOBAL_SAMPLING="5",r.RECORDING_TEMPORARILY="T",r.RECORDING_URL_SAMPLING="6",r.RECORDING_ETR_SAMPLING="7",r.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",r.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})();function lp(s){return s===N.RECORDING_TEMPORARILY||s===N.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING}function Yc(s){return s===N.RECORDING_GLOBAL_SAMPLING||s===N.RECORDING_RULES_TARGETING||s===N.RECORDING_URL_SAMPLING||s===N.RECORDING_ETR_SAMPLING}var hp={[N.RECORDING_RULES_TARGETING]:N.RECORDING_GLOBAL_SAMPLING},Zt=(()=>{let s;return function(r){r.ETR_OFF="0",r.ETR_ON="1"}(s||(s={})),s})(),ns=(()=>{let s;return function(r){r.ETR_LEGACY="0",r.ETR_SESSION="1",r.ETR_PAGE="2"}(s||(s={})),s})(),qt=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),jn=(()=>{let s;return function(r){r.UNNECESSARY="U",r.NOT_EXPRESSED="N",r.WITHDRAWN="W",r.GRANTED="G"}(s||(s={})),s})(),Xc=/^(\d+\.[01356789TBWXP](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,Kc=".";function up(s){return csArray.prototype.join.call([s.pageNumber,s.collectState,s.replayConsent,s.etrStatus],Kc)}function dp(s){if(!wo(s))return null;let r=Hn(s);return r!==null?Jc(r):null}function Jc(s){var r,t;let[e,i,n,o]=csString.prototype.split.call(s,Kc);return{collectState:i,replayConsent:(r=n)!==null&&r!==void 0?r:jn.UNNECESSARY,etrStatus:(t=o)!==null&&t!==void 0?t:qt.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(e,10)}}function wo(s){return Xc.test(s)}function Hn(s){if(!s)return null;let r=(()=>{var t;return(t=csString.prototype.match.call(s,Xc))===null||t===void 0?void 0:t[1]})();return r!=null?r:null}var Te="_cs_ex",_a=2592e6,fp=/^[0-9]+$/,pp=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.J=i}onCookieToSet(t){this.ki=t}onCookieToRemove(t){this.xi=t}get(){return this.E.cookielessTrackingEnabled?Number(this.J.getItem(Te)):Number(this.O.get(Te))}set(t){var e;this.E.cookielessTrackingEnabled?this.J.setItem(Te,t):(this.O.set(Te,t,_a),(e=this.ki)===null||e===void 0||e.call(this,Te,t,_a))}remove(){var t;this.E.cookielessTrackingEnabled?this.J.removeItem(Te):(this.O.delete(Te),(t=this.xi)===null||t===void 0||t.call(this,Te))}static isValidExclusionString(t){return fp.test(t)}}return s})(),qe="_cs_cvars",gp=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.J=i}onCookieToSet(t){this.ki=t}onCookieToRemove(t){this.xi=t}get(){return this.E.cookielessTrackingEnabled?this.J.getItem(qe):this.O.get(qe)}set(t){var e;this.E.cookielessTrackingEnabled?this.J.setItem(qe,t):(this.O.set(qe,t),(e=this.ki)===null||e===void 0||e.call(this,qe,t))}remove(){var t;this.E.cookielessTrackingEnabled?this.J.removeItem(qe):(this.O.delete(qe),(t=this.xi)===null||t===void 0||t.call(this,qe))}static isValidCustomVarString(t){return typeof t=="string"}}return s})();var mp=(()=>{class s{constructor(t,e,i,n,o,c,l){this.w=t,this.S=e,this.Al=i,this.bl=n,this.us=o,this.MS=c,this.Rn=l}start(){this.w.addListener(this.MS),this.w.addListener(this.Rn),this.w.addListener(this.Al),this.Rn.init(),this.bl.init(),this.us.init(),!this.us.isActive()&&this.S.start()}}return s})(),yp=(()=>{class s{constructor(t){this.Is=t}onOptout(){this.Is.removeExclusion()}}return s})(),Ep=(()=>{class s{constructor(t,e){this.Dt=t,this.mt=e}exclude(t){this.mt.set(csString(t.lastTrackingDraw))}removeExclusion(){this.mt.remove()}isExcluded(){return this.DS()||this.kS()}DS(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.mt.get()}kS(){return csString.prototype.indexOf.call(this.Dt.href,Te)>0}}return s})(),vp=["excludeURLforReplay"],Sp=(()=>{class s{constructor(t,e){this.Is=t,this.S=e}init(){this.S.register(vp,t=>{if(G(t))this.Is.setExcludeUrlForSessionReplay(t);else throw new wt("excludeURLforReplay")})}}return s})(),sn=(()=>{let s;return function(r){r.SessionReplay="SR",r.None=""}(s||(s={})),s})(),_p=".^",wp=".*",Ap=(()=>{class s{constructor(t){this.A=t,this.Tl=new csRegExp(`${_p}`)}setExcludeUrlForSessionReplay(t){try{this.Tl=new csRegExp(t)}catch{F.warn(`excludeURLforReplay - invalid regex '${t}'`),this.Tl=new csRegExp(`${wp}`)}}Wf(){return this.Tl.test(this.A.getAnonymizedUrl())?sn.SessionReplay:sn.None}isUrlExcludedForSessionReplay(){return this.Wf()===sn.SessionReplay}getRequestParameters(){return{ex:this.Wf()}}}return s})();var{toString:v_}=Object.prototype;function Qc(s,r){if(typeof s!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");let t=function(...e){let i=r?r.apply(this,e):e[0],{cache:n}=t;if(n.has(i))return n.get(i);let o=s.apply(this,e);return t.cache=n.set(i,o)||n,o};return t.cache=new(Qc.Cache||Map),t}Qc.Cache=Map;var{hasOwnProperty:S_}=Object.prototype;var bp=(()=>{class s extends Pt{constructor(t,e,i,n,o){super(),this.yt=t,this.kl=e,this._t=i,this.pe=n,this.V=o,this.wa=[],this.ni=0}init(){this.yt.init()}initStates(){this.xl(),this.wa=[],this.ni=0,this.Ll()}Ll(){this.ds=P.now()}Li(){return P.now()-this.ds}onStart(){this.yt.subscribe(s.Ht,t=>this.Z(t))}onStop(){this.yt.unsubscribe(s.Ht)}onIframeApiError(t){this.Z(t)}Z(t){this.isStarted&&this.ni<s.Cn&&this.V.isSessionValid()&&(t.relativeTime=this.Li(),csArray.prototype.push.call(this.wa,this.pe.anonymize(t)),this.In(),j.counters.networkRequests.count("collected"))}xl(){this.kl.removeQueryParams(),this.kl.setQueryParams(this._t.getRequestParameters())}In(){this.kl.send({errors:this.wa}),this.wa=[],this.ni+=1}}return s.Ht="ApiErrorsService",s.Cn=20,s})(),Tp="api-errors",wa=["api-errors:maskUrl"],Rp=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.yt=t,this.pe=e,this.E=i,this._t=n,this.gt=o,this.S=c,this.Ot=l,this.V=h}init(){let t=this.Ot.create(`${this.E.getTrackerUri()}/${Tp}`);this.Os=new bp(this.yt,t,this._t,this.pe,this.V),this.Os.init(),this.gt.addListener(this.Os),this.ft()}ft(){this.S.register(wa,t=>{if(!G(t))throw new wt(wa[0]);this.pe.addUrlMaskingPattern(t)})}onStartTracking(){this.Os.start()}onAfterNaturalPageView(){this.Os.initStates()}onArtificialPageViewEnd(t){t&&this.Os.stop()}onAfterArtificialPageView(t){this.Os.initStates(),t&&this.Os.start()}onBeforeSessionRenewal(){this.Os.stop()}onOptout(){this.Os.stop()}}return s})();var wi=(()=>{class s{constructor(...t){this.Jf=t}addProvider(t){csArray.prototype.push.call(this.Jf,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.Jf,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),Cp=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function Ip(){return{la:Cp}}var Di=(()=>{let s;return function(r){r.UNCOMPRESSED="0",r.GZIP="2"}(s||(s={})),s})(),Zc=(()=>{class s{}return s})();function Pp(s){if(typeof Object.values=="function")return Object.values(s);let r=[];for(let t in s)s.hasOwnProperty(t)&&csArray.prototype.push.call(r,s[t]);return r}function Op(s,r){if(Object.keys(s).length<=r)return s;let t={},e=0;for(let[i,n]of Object.entries(s)){if(e>=r)break;t[i]=n,e++}return t}var Np=(()=>{let s;return function(r){function e(i,n,o,c){let l={...i,...n,...o,...c};return Op(l,200)}r.mergeAndLimitProperties=e}(s||(s={})),s})(),Es=(()=>{let s;return function(r){r.Artificial="a",r.Renewal="r",r.Natural="n"}(s||(s={})),s})(),Ss=(()=>{let s;return function(r){r.Natural="Natural",r.Artificial="Artificial",r.Renewal="Renewal"}(s||(s={})),s})(),Mp=(()=>{class s extends Pt{constructor(t,e,i,n,o,c,l,h,u,f){super(),this.E=t,this.w=e,this.Y=i,this.Vi=n,this.A=o,this.fs=c,this.zS=l,this.Wt=h,this.Yt=u,this.Vl=f,this.Ns=null}init(){this.Ul()}onStart(t=Ss.Natural){switch(t){case Ss.Natural:this.jl();break;case Ss.Artificial:this.Hl();break;case Ss.Renewal:this.Bl();break}}onStop(){}triggerArtificialPageView(t,e){this.isStarted?(this.w.emitArtificialPageViewEnd(),this.Ui(t,e)):(Mt(t)&&this.A.overridePath(t,e),this.Y.emitTargetingRulesArtificialPageview(this.A.getUrl()),this.E.hasTargetingRules()&&this.A.cleanupOverrideLifespan())}jl(){this.fs.setPageViewType(Es.Natural);let t=this.A.getAnonymizedUrl();this.w.emitBeforeNaturalPageView(t),this.Fl(),this.A.cleanupOverrideLifespan(),this.w.emitAfterNaturalPageView(Es.Natural),this.Ns=t}Bl(){this.fs.setPageViewType(Es.Renewal);let t=this.A.getAnonymizedUrl();this.w.emitBeforeNaturalPageView(t),this.Fl(),this.w.emitAfterNaturalPageView(Es.Renewal),this.Ns=t}Ui(t,e,i=!1){Mt(t)&&this.A.overridePath(t,e);let n=this.A.getAnonymizedUrl();this.w.emitBeforeArtificialPageView(this.Ns,n),this.fs.setPageViewType(Es.Artificial),this.Fl(),this.A.cleanupOverrideLifespan(),this.w.emitAfterArtificialPageView(i),this.Ns=n}Hl(){this.Ui(null,void 0,!0)}Ul(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&(this.w.emitArtificialPageViewEnd(),this.Ui())})}GS(){var t,e,i;let n=(t=this.Vl)===null||t===void 0?void 0:t.getProperties(document,"pageview",this.A.getPath()),o=Np.mergeAndLimitProperties((e=this.Wt)===null||e===void 0?void 0:e.getProperties(),(i=this.Yt)===null||i===void 0?void 0:i.getProperties(),n!=null?n:void 0,void 0);if(Object.keys(o).length>0)return o}Fl(){let t=this.GS(),e=t?{properties:t}:void 0;this.Vi.removeQueryParams(),this.Vi.setQueryParams({...this.zS.getRequestParameters(),...e?{}:{ct:Di.UNCOMPRESSED}}),this.Vi.send(e)}}return s})(),Dp=99999,kp=(()=>{class s{constructor(t){this.C=t,this.qS=this.WS()&&window.CSCurrentScript}YS(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.XS(e)?null:Math.round(e.responseEnd-e.fetchStart)}XS(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.qS||this.KS()!==1)return{};let t=this.YS();return t===null?{}:{dt:`${Math.min(t,Dp)}`}}KS(){var t;return((t=this.C.getSession())===null||t===void 0?void 0:t.pageNumber)||null}WS(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),xp=["trackPageview"],Aa=["setPath"],ba=["setQuery"],Ta=["referrer:maskUrl"],Lp=["referrer:removeQueryString"],Vp=["referrer:keepQueryString"],Up="pageview",rn=s=>Ts(s)&&s!==null,jp=(s,r,t,e)=>{s.register(xp,(i,n)=>{if(!G(i)){r.triggerArtificialPageView();return}rn(n)?r.triggerArtificialPageView(i,n):r.triggerArtificialPageView(i)}),s.register(Aa,(i,n)=>{if(!G(i))throw new wt(Aa[0]);rn(n)?t.overridePath(i,n):t.overridePath(i)}),s.register(ba,(i,n)=>{if(!G(i))throw new wt(ba[0]);rn(n)?t.overrideQuery(i,n):t.overrideQuery(i)}),e&&(s.register(Ta,i=>{if(!G(i))throw new wt(Ta[0]);e.addUrlMaskingPattern(i)}),s.register(Lp,()=>e.enableRemoveQueryString()),s.register(Vp,()=>e.disableRemoveQueryString()))},Hp=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,f,y,m,v,T,C,w,b,k,O){this.E=t,this.S=e,this.w=i,this.Fe=n,this.M=o,this.C=c,this.Ms=l,this.It=h,this.Tt=u,this.A=f,this.Xt=y,this.fs=m,this.Y=v,this.Ot=T,this.Xe=C,this.vr=w,this.Wt=b,this.Yt=k,this.Vl=O}init(){let t=this.Ot.create(`${this.E.getTrackerUri()}/${Up}`,"base64"),e=new wi(this.Fe,this.M,yt,this.Ms,this.A,this.It,ro,this.Tt,this.fs,new kp(this.C),this.Xt);this.Pn=new Mp(this.E,this.w,this.Y,t,this.A,this.fs,e,this.Wt,this.Yt,this.Vl),this.Pn.init(),this.Xe&&e.addProvider(this.Xe),this.vr&&e.addProvider(this.vr);let i=this.E.isCsCrosswritingHeap();if(i||this.E.isCsSideloadingHeap()||this.E.isHeapSideloadsCs()){let n=this.E.getHeapEnvId()||void 0;e.addProvider({getRequestParameters(){let o={cw:i?"1":"2"};return n&&(o.happid=n),o}})}jp(this.S,this.Pn,this.A,this.Ms)}start(t){this.Pn.start(t)}stop(){this.Pn.stop()}onBeforeSessionRenewal(){this.Pn.stop()}}return s})();var Ao=["trackError"];var tl=["setCustomVariable"],Bp=(()=>{class s{constructor(t,e){this.S=t,this.Tt=e}init(){this.S.register(tl,(t,e,i,n)=>{this.Tt.set(t,e,i,n)})}onAfterArtificialPageView(){this.Tt.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this.Tt.deleteNextPageOnlyCustomVariables()}onOptout(){this.Tt.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this.Tt.removeCustomVariablesSession(),this.Tt.removeCustomVariablesPage()}}return s})();var el=["setEncryptionSelectors"],sl=["setPIISelectors"],Fp=["setCapturedElementsSelector"],$p=(()=>{class s{constructor(t,e,i,n,o,c,l){this.w=t,this.S=e,this.ht=i,this.Kt=n,this.Jt=o,this.ut=c,this.Sr=l}init(){var t,e;this.Sr&&this.ut&&((t=this.Sr)===null||t===void 0||t.addSelector((e=this.ut)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ft()}onBeforeNaturalPageView(t){this.Kt.start(),this.w.emitSensitiveStatusChange()}onStartTracking(t){this.Kt.start(),this.w.emitSensitiveStatusChange()}onAfterArtificialPageView(){this.Kt.stop(),this.Kt.start(),this.w.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this.Kt.stop(),this.w.emitSensitiveStatusChange()}onOptout(){this.Kt.stop(),this.w.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.w.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.w.emitSensitiveStatusChange()}ft(){this.S.register(sl,t=>{this.ht.setMaskedElementSettingsFromCommand(t),this.w.emitSensitiveStatusChange()}),this.S.register(Fp,t=>{this.Jt.setWhitelistedElementsSelector(t),this.w.emitSensitiveStatusChange()}),this.S.register(el,t=>{var e,i;(e=this.ut)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.Sr)===null||i===void 0||i.addSelector(t)})}}return s})();var zp=512,Gp=255,nn=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,zp),this.value=G(e)?csString.prototype.slice.call(e,0,Gp):e}static isKeyValid(t){return G(t)}static isValueValid(t){return G(t)||bs(t)}}return s})(),qp=(()=>{class s extends Pt{constructor(t,e){super(),this.Qt=t,this.D=e,this.zl=[]}onStart(){csArray.prototype.forEach.call(this.zl,t=>this.Qf(t.key,t.value)),this.zl=[]}onStop(){}Qf(t,e){let i=this.D.anonymizePII(t),n=bs(e)?e:this.D.anonymizePII(e);this.Qt.add(new nn(i,n))}trackDynamicVariable(t,e){if(nn.isKeyValid(t)&&nn.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.zl,{key:t,value:e});return}this.Qf(t,e)}else throw new wt(il[0])}}return s})(),Wp=(()=>{class s{constructor(t){this.ge=t,this.Qt=[]}add(t){csArray.prototype.push.call(this.Qt,t),this.setBatchReadyCall()}clear(){this.Qt=[]}onBatchReady(t){this.QS=t}getRequestParameters(){let t={};for(let e of this.Qt)t[e.key]=e.value;return{dv:this.ge.compressSync(csJSON.stringify(t),"base64"),ct:this.ge.algorithm}}setBatchReadyCall(){this.QS()}}return B([Mr({wait:0,mode:"trailing"}),x("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),Yp="dvar",il=["trackDynamicVariable"],Xp=(()=>{class s{constructor(t,e,i,n,o,c){this.S=t,this.C=e,this.E=i,this.Fe=n,this.ge=o,this.D=c,this.Cs=new _i(this.E.getTrackerUri(),Yp),this.Qt=new Wp(this.ge),this.Is=new qp(this.Qt,this.D)}init(){this.Cs.setRequestParametersProviders(this.Fe,this.Qt),this.C.setDynamicVariablesService(this.Is),this.Qt.onBatchReady(()=>this.Cs.send()),this.Cs.after(()=>this.Qt.clear()),this.S.register(il,({key:t,value:e}={})=>{this.Is.trackDynamicVariable(t,e)})}onStartTracking(){this.Is.start()}onArtificialPageViewEnd(t){t&&this.Is.stop()}onAfterArtificialPageView(t){t&&this.Is.start()}}return s})();var rl=100,Kp=100,Jp=(()=>{class s extends Pt{constructor(t,e){super(),this.t_=t,this.V=e,this.Ne=null,this.Gl=[]}onStart(){csArray.prototype.forEach.call(this.Gl,t=>{this.Ne=t,this.Zf()}),this.Gl=[]}onStop(){}addToCart(t){let e={};G(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,Kp)),G(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,rl)),(e.sku||e.merchant)&&(this.Ne=e,this.Zf())}getCartItem(){return this.Ne}Zf(){if(!this.isStarted&&this.Ne!==null){csArray.prototype.push.call(this.Gl,this.Ne),this.clear();return}this.V.refreshSession(),this.V.isSessionValid()&&this.t_.send()}clear(){this.Ne=null}getRequestParameters(){if(!this.Ne)return{};let t={};return G(this.Ne.sku)&&this.Ne.sku.length>0&&(t.sku=this.Ne.sku),G(this.Ne.merchant)&&this.Ne.merchant.length>0&&(t.me=this.Ne.merchant),t}}return s})(),Ra=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),G(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return Mt(t)&&Wt(t.revenue)&&G(t.currency)&&t.currency.length<=10&&(!Mt(t.id)||G(t.id))}}return s})(),Qp=(()=>{class s{constructor(t,e,i,n){this.id=t,this.name=e,this.price=i,this.quantity=n}static from(t){if(!s.ql(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return Q(t.sku)&&(e.sku=t.sku),Q(t.category)&&(e.category=t.category),Q(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,rl)),e}static ql(t){return Mt(t)&&G(t.id)&&G(t.name)&&Wt(parseFloat(t.price))&&bs(parseInt(t.quantity,10))&&(!Q(t.sku)||G(t.sku))&&(!Q(t.category)||G(t.category))&&(!Q(t.merchant)||G(t.merchant))}}return s})(),Zp=(()=>{class s extends Pt{constructor(t,e,i){super(),this.D=t,this.tp=e,this.V=i,this.Wl=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.Wl,t=>{this.ye=t.transaction,this.Nn=t.transactionItems,this.sendTransaction()}),this.Wl=[]}onStop(){}addTransaction(t){let e=this.D.anonymizeFields(t,["id"]);this.ye=Ra.from(e)}getTransaction(){return this.ye}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.Wl,{transaction:this.ye,transactionItems:[...this.Nn]}),this.clear();return}if(!(this.tp===null||this.V===null)&&(this.V.refreshSession(),!!this.V.isSessionValid())){if(!this.ye.hasValidRevenue()){F.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.tp.send()}}addItem(t){if(os(t))throw new wt(nl[1]);let e=this.D.anonymizeFields(t,["id","name","sku","category"]),i=Qp.from(e);i!==null&&csArray.prototype.push.call(this.Nn,i)}getItems(){return this.Nn}clear(){this.ye=Ra.from({revenue:NaN}),this.Nn=[]}getRequestParameters(){let t={id:this.ye.id?`${this.ye.id}`:"",revenue:`${this.ye.revenue}`};return Q(this.ye.tax)&&(t.tax=`${this.ye.tax}`),Q(this.ye.shipping)&&(t.shipping=`${this.ye.shipping}`),Q(this.ye.currency)&&(t.cu=`${this.ye.currency}`),t.items=window.csJSON.stringify(this.Nn),t}}return s})(),tg=["ecommerce:addToCart","ec:cart:add"],eg=["ecommerce:addTransaction","ec:transaction:create"],nl=["ecommerce:addItem","ec:transaction:items:add"],sg=["ecommerce:send","ec:transaction:send"],ig=(()=>{class s{constructor(t,e,i,n,o,c,l){this.E=t,this._t=e,this.M=i,this.S=n,this.D=o,this.V=c,this.A=l}init(){let t=new _i(this.E.getTrackerUri(),"transaction"),e=new _i(this.E.getTrackerUri(),"addtocart");this.$e=new Zp(this.D,t,this.V),this._r=new Jp(e,this.V);let i=new wi(this._t,this.M,this.A,this.$e);t.setRequestParametersProviders(i),t.after(()=>{this.$e.clear()});let n=new wi(this._t,this.M,this.A,this._r);e.setRequestParametersProviders(n),e.after(()=>{this._r.clear()}),this.S.register(eg,o=>{this.$e.addTransaction(o)}),this.S.register(nl,o=>this.$e.addItem(o)),this.S.register(sg,()=>this.$e.sendTransaction()),this.S.register(tg,o=>{this._r.addToCart(o)})}onStartTracking(){this.$e.start(),this._r.start()}onArtificialPageViewEnd(t){t&&(this.$e.stop(),this._r.stop())}onAfterArtificialPageView(t){t&&(this.$e.start(),this._r.start())}}return s})();var Ps;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(Ps||(Ps={}));var Ca=(()=>{let s;return function(r){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}r.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}r.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}r.triggerLogicalPageView=i;function n(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}r.sendPageEvent=n;function o(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}r.sendEventTriggerRecording=o}(s||(s={})),s})();function Bn(s){return s.tagDeploymentMode===Ps.DualCollectionReview||s.tagDeploymentMode===Ps.DualCollection}function rg(s){return Bn(s)||s.tagDeploymentMode===Ps.LoadClicktalePtc}var ng="@ETP@",Ia="@user-identifier@",og=(()=>{class s extends Pt{constructor(t,e,i,n){super(),this.E=t,this.i_=e,this.ge=i,this.Y=n,this.Yl=[],this.ji=[]}onStart(){csArray.prototype.forEach.call(this.Yl,t=>this.ep(t)),this.Yl=[],csArray.prototype.forEach.call(this.ji,t=>this.sp(t)),this.ji=[]}onStop(){}ep(t){this.r_(t)?vt.isSupported()&&this.n_(t):this.o_(t)}trackPageEvent(t){if(!s.ip(t))throw new wt(ol[0]);this.isStarted?this.ep(t):csArray.prototype.push.call(this.Yl,t)}r_(t){return _r(t,Ia)}async n_(t){if(!this.E.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,Ia.length);if(e.length>vt.MAX_DIGEST_INPUT_SIZE){F.warn("UserIdentifier event: invalid user identifier");return}let i=await vt.digest(e);i?(this.wr={eventName:i,isETR:!1,isCustomHashId:!0},this.ba()):F.warn("Page event: unable to compute customHashId"),this.E.encryptionEnabled&&this.Y.emitUserIdentifierEvent(e)}o_(t){this.Y.emitPageEvent(t),this.wr={eventName:t,isETR:!1,isCustomHashId:!1},this.ba(),this.E.tagDeploymentMode===Ps.LoadClicktalePtc&&Ca.sendPageEvent(t)}sp(t){this.E.malkaEtrEnabled?this.a_(t):this.c_(t)}trackEventTriggerRecording(t){if(!s.ip(t))throw new wt(al[0]);this.isStarted?this.sp(t):csArray.prototype.push.call(this.ji,t)}a_(t){_r(t,ng)?this.Y.emitEventTriggerRecording(t,ns.ETR_PAGE):this.Y.emitEventTriggerRecording(t,ns.ETR_SESSION),this.wr={eventName:t,isETR:!0,isCustomHashId:!1},this.ba()}c_(t){rg(this.E)&&(this.Y.emitEventTriggerRecording(t,ns.ETR_LEGACY),this.wr={eventName:t,isETR:!0,isCustomHashId:!1},this.ba(),this.E.tagDeploymentMode===Ps.LoadClicktalePtc&&Ca.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.ge.compressSync(this.wr.eventName,"base64"),ct:this.ge.algorithm,isETR:`${this.wr.isETR}`,isCustomHashId:`${this.wr.isCustomHashId}`}}ba(){this.i_.send()}static ip(t){return G(t)&&!!csString.prototype.trim.call(t)}}return s})(),ol=["trackPageEvent"],al=["trackEventTriggerRecording"],ag=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.S=e,this.ge=i,this.Fe=n,this.Y=o}init(){let t=new _i(this.E.getTrackerUri(),"pageEvent");this.Ar=new og(this.E,t,this.ge,this.Y),t.setRequestParametersProviders(this.Ar,this.Fe),this.S.register(ol,e=>{this.Ar.trackPageEvent(e)}),this.S.register(al,e=>{this.Ar.trackEventTriggerRecording(e)})}onStartTracking(){this.Ar.start()}onArtificialPageViewEnd(t){t&&this.Ar.stop()}onAfterArtificialPageView(t){t&&this.Ar.start()}}return s})();var cg=["networkRequest:maskUrls"],lg=["networkRequest:maskUrls:reset"],hg=(()=>{class s{constructor(t,e){this.rp=t,this.pt=e}init(){this.rp.register(cg,t=>{if(G(t)){this.pt.addPartialUrlMaskingPattern(t);return}if(csArray.isArray(t))for(let e of t)G(e)&&this.pt.addPartialUrlMaskingPattern(e)}),this.rp.register(lg,()=>this.pt.resetPartialUrlMaskingPatterns())}}return s})();function Oe(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}var fi=s=>s instanceof HTMLFormElement?"form":s.localName,Pa=new Map,on=!Ci&&document.implementation.createHTMLDocument("");function cl(s){var r,t;return(t=(r=s.sheet)===null||r===void 0?void 0:r.href)!==null&&t!==void 0?t:s.getAttribute("href")}function ug(s){if(!Cr(s))return null;let r=ll(s);if(r===null||r.length===0)return null;let t="";if(no(s.textContent))Z(r,e=>t+=e.cssText);else{let e=dg(s);if(e===r.length||e>r.length)return null;let i=new csArray(r.length-e);for(let n=e,o=0;n<r.length;n+=1,o+=1)i[o]=r[n];Z(i,n=>t+=n.cssText)}return t}function dg(s){if(!on)return 0;let r=Pa.get(s.textContent);if(r)return r;let t=s.cloneNode(!0);t.textContent=s.textContent,on.head.appendChild(t);let e=ll(t);return r=e?e.length:0,Pa.set(s.textContent,r),on.head.removeChild(t),r}function ll(s){try{if(s.disabled)return null;let r=s.sheet;return r?r.cssRules||r.rules:null}catch(r){if(r.name!=="SecurityError"&&r.name!=="InvalidAccessError")throw r;return null}}var te={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,STYLESHEET:50};var ks=(()=>{class s{constructor(t){this.csId=q(t),this.props=rs.getAll(t)}}return s})(),hl=(()=>{class s extends ks{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),Ie=(()=>{class s extends ks{constructor(t){var e,i,n;super(t),this.attributes=[],this.nodeType=te.ELEMENT_NODE,this.localName=fi(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let o=ug(t);if(o){this.children=new csArray(csNodechildNodes.apply(t).length);let c=document.createTextNode(o),l=new hl(c);csArray.prototype.push.call(this.children,l)}(Cr(t)||uo(t))&&(this.disabledSheet=(n=(i=t.sheet)===null||i===void 0?void 0:i.disabled)!==null&&n!==void 0?n:!1)}static isElement(t){return t.nodeType===te.ELEMENT_NODE}static getAttribute(t,e){return Zs(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})();function fg(s,r){let t=!1,e=function(){if(!t)return s.apply(r,arguments)};return e.cancel=()=>t=!0,e}function pg(){let s=new Error,r=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(r.length===0)return"";let t=mg(r);return t===""||(r=yg(r,t),r.length===0)?"":ul(r[0])}function gg(s){return csString.prototype.indexOf.call(s,"@")!==-1}function mg(s){return s.length>0?ul(s[0]):""}function yg(s,r){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,r)===-1)}function ul(s){let r="",t;gg(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(r=e[1]),r}var Eg=s=>s;function vg(s,r,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,r,{get(){var n;if(this[i])return this[i];let o=(n=t.get)===null||n===void 0?void 0:n.apply(this);return typeof o!="object"?o:(typeof Proxy=="function"?this[i]=new Proxy(o,{get(c,l){let h=Reflect.get(c,l);return typeof h=="function"?h.bind(c):h},set:(c,l,h)=>{let u=c[l],f=Reflect.set(c,l,h);return e.forEach(y=>y(this,h,u,"subproperty")),f}}):this[i]=o,this[i])},set(){var n;let o=arguments,c=this[r],l=(n=t.set)===null||n===void 0?void 0:n.apply(this,o);delete this[i];try{e.forEach(h=>h(this,o[0],c,"property"))}catch(h){nt.error(h)}return l}})}function Sg(s,r,t){let e=_g(s,r);if(!e)return null;let i=(n,o,c,l)=>t(n,o,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function _g(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,vg(s,r,i,e),e):(nt.warn(`Cannot intercept non configurable property '${csString(r)}' of object '${s}'`),null):(nt.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null)}function wg(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,r);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return nt.warn(`Cannot intercept read only function '${csString(r)}' of object '${s}'`),null;let i=new Set;s[t]=i;let n=s[r];if(typeof n=="function"){let o=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call(as(i),u=>u(c))}catch(u){nt.critical(u)}let h=n.apply(this,c);return Ms(()=>{let u={result:h,context:this,args:c};csArray.prototype.forEach.call(l,f=>f(u))},[ye.MonkeyPatch,`${csString(r)}`]),h};Tg(o,n),s[r]=o}return i}function ae({target:s,methodName:r,hook:t,hookPrepareArgs:e=Eg,options:i}){let n=wg(s,r);if(!n)return null;let o=c=>{let l=e(c),h=i!=null&&i.withCallerName?{callerName:pg()}:{};return u=>t({...u,...h,args:l})};return{activate:()=>{n.add(o)},deactivate:()=>{n.delete(o)}}}function Ag(s,r){return dl(s,r,!1)}function dl(s,r,t=!0){let e=csSymbol.for(r);if(t?s[e]:s.hasOwnProperty(e))return s[e];let i=new Set,n=Object.getOwnPropertyDescriptor(s,r);if(!n)return nt.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null;if(!n.configurable)return nt.warn(`Cannot intercept read only property '${csString(r)}' of object '${s}'`),null;s[e]=i;let o=`${csString(r)}-setter`;return Object.defineProperty(s,r,{set(){var c;let l=this[r],h=arguments;return Ms(()=>{i.forEach(u=>u(this,h[0],l,"property"))},[ye.MonkeyPatch,o]),(c=n.set)===null||c===void 0?void 0:c.apply(this,h)}}),i}function bg(s,r,t){return Ai(s,r,t,!0)}function Ai(s,r,t,e=!1){let i=e?Ag(s,r):dl(s,r);if(!i)return null;let n=(o,c,l)=>t(o,c,l,"property");return{activate:()=>{i.add(n)},deactivate:()=>{i.delete(n)}}}function Tg(s,r){s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()})}var Dr=(()=>{class s{constructor(){this.set=new Set}add(t){this.set.add(t),this.set.size===1&&csSetTimeout(()=>{this.set.clear()})}has(t){return this.set.has(t)}del(t){this.set.delete(t)}clear(){this.set.clear()}values(){return as(this.set)}get count(){return this.set.size}}return s})(),Rg=(()=>{class s extends Dr{constructor(t="high"){super(),this.l_=t}add(t){this.set.add(t),this.set.size===1&&Yt(()=>{this.set.clear()},this.l_)}}return s})();function kr(s,r=!1){let t=new Dr;return{push(e){t.count===0&&(r?Yt:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}var Ce=csSymbol(),bo=(()=>{class s{constructor(t){var e,i,n,o,c,l,h,u,f,y,m,v,T;this.R=t,this.Xl=null,this.Kl=null,this.Jl=null,this.Ql=null,this.Zl=null,this.h_=kr(C=>this.processUpdateRulesInATick(C)),this.th=null,this.eh=null,this.ih=null,this.R=C=>Yt(()=>t(C)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.Xl=ae({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:C,args:w})=>{this.processInsertRule(C,w)}})),typeof((o=(n=window.CSSStyleSheet)===null||n===void 0?void 0:n.prototype)===null||o===void 0?void 0:o.deleteRule)=="function"&&(this.Kl=ae({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:C,args:w})=>{this.processDeleteRule(C,w)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.Jl=ae({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:C})=>this.processUpdateRule(C)})),typeof((u=(h=window.CSSGroupingRule)===null||h===void 0?void 0:h.prototype)===null||u===void 0?void 0:u.deleteRule)=="function"&&(this.Ql=ae({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:C})=>this.processUpdateRule(C)})),!((f=window.StyleSheet)===null||f===void 0)&&f.prototype&&"disabled"in window.StyleSheet.prototype&&(this.Zl=Ai(window.StyleSheet.prototype,"disabled",(C,w,b)=>{w!==b&&this.u_(C,w)})),typeof((m=(y=window.CSSStyleDeclaration)===null||y===void 0?void 0:y.prototype)===null||m===void 0?void 0:m.setProperty)=="function"&&(this.th=ae({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:C})=>{let w=C.parentRule;w instanceof CSSStyleRule&&this.processUpdateRule(w)}})),typeof((T=(v=window.CSSStyleDeclaration)===null||v===void 0?void 0:v.prototype)===null||T===void 0?void 0:T.removeProperty)=="function"&&(this.eh=ae({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:C})=>{let w=C.parentRule;w instanceof CSSStyleRule&&this.processUpdateRule(w)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.ih=Sg(window.CSSStyleRule.prototype,"style",C=>{this.processUpdateRule(C)}))}observe(){var t,e,i,n,o,c,l,h;(t=this.Xl)===null||t===void 0||t.activate(),(e=this.Kl)===null||e===void 0||e.activate(),(i=this.Jl)===null||i===void 0||i.activate(),(n=this.Ql)===null||n===void 0||n.activate(),(o=this.Zl)===null||o===void 0||o.activate(),(c=this.th)===null||c===void 0||c.activate(),(l=this.eh)===null||l===void 0||l.activate(),(h=this.ih)===null||h===void 0||h.activate()}disconnect(){var t,e,i,n,o,c,l,h;(t=this.Xl)===null||t===void 0||t.deactivate(),(e=this.Kl)===null||e===void 0||e.deactivate(),(i=this.Jl)===null||i===void 0||i.deactivate(),(n=this.Ql)===null||n===void 0||n.deactivate(),(o=this.Zl)===null||o===void 0||o.deactivate(),(c=this.th)===null||c===void 0||c.deactivate(),(l=this.eh)===null||l===void 0||l.deactivate(),(h=this.ih)===null||h===void 0||h.deactivate()}processInsertRule(t,[e,i]){if(t[Ce]==null&&!t.ownerNode)return;let n={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.R(n)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.h_.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,n=csArray.prototype.indexOf.call(Js(i.cssRules),e);if(n===-1)return;let o={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:n};this.R(o)}}processDeleteRule(t,[e]){if(t[Ce]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.R(i)}u_(t,e){if(t[Ce]==null&&!t.ownerNode)return;let i={type:"cssStyleSheetDisabled",sheet:t,disabled:e};this.R(i)}}return ht([x()],s.prototype,"observe",null),ht([x()],s.prototype,"disconnect",null),ht([x()],s.prototype,"processInsertRule",null),ht([x()],s.prototype,"processUpdateRule",null),ht([x()],s.prototype,"processUpdateRulesInATick",null),ht([x()],s.prototype,"processDeleteRule",null),s})(),xs=(()=>{var s;class r{static d_(e){this.Ds.forEach(i=>{e(i,"initial")})}static Mn(e){if(this.U||(this.U=new csMutationObserver(i=>{for(let n of i)n.target.isConnected&&Z(n.addedNodes,this.f_),Z(n.removedNodes,this.p_)})),csArray.prototype.push.call(this.Me,e),!this.X){this.X=!0,this.U.observe(document,this.Dn);for(let i of ws.getAllShadowHosts(document)){let n=csElementshadowRoot.apply(i);this.Ds.add(n),this.U.observe(n,this.Dn)}this.rh||(this.rh=ae({target:Element.prototype,methodName:"attachShadow",hook:i=>this.br(i.result)&&this.np(i.result)})),this.rh.activate()}this.d_(e)}static br(e){return e.isConnected&&e.ownerDocument===document}static kn(e){var i,n;this.Me=csArray.prototype.filter.call(this.Me,o=>o!==e),this.Me.length===0&&(this.Me=[],this.X=!1,(i=this.U)===null||i===void 0||i.disconnect(),(n=this.rh)===null||n===void 0||n.deactivate(),this.Ds.clear())}constructor(e){this.R=e,this.R=Rs("DocumentShadowRootObserver:callback",(i,n)=>e(i,n))}get shadowRoots(){return as(s.Ds)}static get shadowRootsCount(){if(s.X)return as(s.Ds).length}takeRecords(){var e,i;return(i=(e=s.U)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){ws.isSupported()&&s.Mn(this.R)}disconnect(){ws.isSupported()&&s.kn(this.R)}}return s=r,r.Me=[],r.Ds=new Set,r.X=!1,r.Dn={childList:!0,subtree:!0},r.np=t=>{s.Ds.has(t)||(s.U.observe(t,s.Dn),s.Ds.add(t),Z(s.Me,e=>e(t,"added")))},r.f_=t=>{se(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.np)},r.p_=t=>{t.isConnected||se(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.Ds.has(e)&&(s.Ds.delete(e),Z(s.Me,i=>i(e,"removed")))})},ht([x()],r.prototype,"observe",null),ht([x()],r.prototype,"disconnect",null),r})(),Cg=(()=>{class s{constructor(t){this.g_=1,this.Ta=new Set,this.nh=null,this.oh=null,this.ah=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.m_=e=>{let i=e.sheet;if(this.Ta.has(i)){if(e.type==="cssRuleInserted"){let n={type:"adoptedStyleSheetRuleInserted",sheetId:i[Ce],rule:e.rule,index:e.index};this.R(n)}else if(e.type==="cssRuleDeleted"){let n={type:"adoptedStyleSheetRuleDeleted",sheetId:i[Ce],index:e.index};this.R(n)}else if(e.type==="cssRuleUpdated"){let n={type:"adoptedStyleSheetRuleUpdated",sheetId:i[Ce],rule:e.rule,index:e.index};this.R(n)}else if(e.type==="cssStyleSheetDisabled"){let n={type:"adoptedStyleSheetDisabled",sheetId:i[Ce],disabled:e.disabled};this.R(n)}}},this.R=e=>Yt(async()=>{await vc(2),t(e)}),this.Ee=new xs(this.ah),"adoptedStyleSheets"in Document.prototype&&(this.nh=Ai(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.oh=Ai(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.op=new bo(this.m_)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.Ee.observe(),(t=this.nh)===null||t===void 0||t.activate(),(e=this.oh)===null||e===void 0||e.activate(),this.op.observe()}disconnect(){var t,e;this.Ta.clear(),this.Ee.disconnect(),(t=this.nh)===null||t===void 0||t.deactivate(),(e=this.oh)===null||e===void 0||e.deactivate(),this.op.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.y_(e);let i=ss(e,o=>o[Ce]),n={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.R(n)}y_(t){Z(t,e=>{if(this.Ta.has(e))return;let i=this.g_++;e[Ce]=i,this.Ta.add(e);let n=this.E_(e),o={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:n,disabled:e==null?void 0:e.disabled};this.R(o)})}E_(t){let e=[];try{e=ss(t.cssRules,i=>i.cssText)}catch{}return e}}return ht([x()],s.prototype,"observe",null),ht([x()],s.prototype,"disconnect",null),ht([x()],s.prototype,"setStyleSheets",null),s})(),Ig=Ds(Mg,"optimizeMutations"),Pg=csSymbol.for("ignoreNextSerialization");function Og(){let s=new Set,r=new Set,t=new Set,e=new Set,i=new Map,n=new Map,o=new Map,c=new Set,l=new Set,h=new Map,u=new Set;return{isMovedNode(f){return s.has(f)},markAsMovedNode(f){u.delete(f),s.add(f)},isDetachedMove(f){return!!ft.findAncestor(f,y=>u.has(y),!0)},isAddedNode(f){let y=ft.findAncestor(f,m=>r.has(m)||l.has(m)||s.has(m),!0);return!!y&&!s.has(y)},isMovedNodeIntoAddedNode(f){return s.has(f)&&!!ft.findAncestor(f,y=>r.has(y)||l.has(y),!0)},markAsAddedNode(f){u.delete(f),l.delete(f),r.add(f)},markAsPendingInsert(f){l.add(f)},isPendingInsert(f){return l.has(f)},isRemovedNode(f){return!!ft.findAncestor(f,y=>t.has(y),!0)},markAsRemovedNode(f){t.add(f)},isUselessNode(f){return e.has(f)},markAsUselessNode(f){e.add(f)},getPlaceholder(f,y){let m=y==="previous"?n:i;return f&&m.has(f)?m.get(f)||null:f},getSiblings(f){let y=f.addedNodes.length,m=this.getPlaceholder(f.previousSibling,"previous"),v=this.getPlaceholder(f.nextSibling,"next");if(y){let T=m,C=v,w=f.previousSibling!==m,b=f.nextSibling!==v;for(let k=0;k<y;k++){let O=f.addedNodes[k],S=f.addedNodes[y-k-1];this.isLatestNodeMutation(O,f)?(n.delete(O),f.previousSibling&&w&&(i.set(f.previousSibling,O),w=!1),T=O):n.set(O,T),this.isLatestNodeMutation(S,f)?(i.delete(S),f.nextSibling&&b&&(n.set(f.nextSibling,S),b=!1),C=S):i.set(S,C)}}else f.previousSibling&&f.previousSibling!==m&&i.set(f.previousSibling,v),f.nextSibling&&f.nextSibling!==v&&n.set(f.nextSibling,m);return{previousSibling:m,nextSibling:v}},setAttributeMutation(f,y){let m=o.get(f)||new Set;m.add(y),o.set(f,m)},isAttributeMutated(f,y){var m;return!!(!((m=o.get(f))===null||m===void 0)&&m.has(y))},setLatestNodeMutation(f,y){h.set(f,y)},isLatestNodeMutation(f,y){return h.get(f)===y},markAsFutureAddedNode(f){h.has(f)||u.add(f)},isTextMutated(f){return c.has(f)},setTextMutated(f){return c.add(f)}}}function Ng(s,r){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];r.markAsFutureAddedNode(e),r.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];r.setLatestNodeMutation(e,s)}}function Mg(s){let r=Og(),t=[];for(let e of s)e.type==="childList"&&Ng(e,r);for(let e of s)switch(e.type){case"attributes":kg(e,r,t);break;case"characterData":Dg(e,r,t);break;case"childList":Vg(e,r,t);break}return t}function Dg(s,r,t=[]){let e=s.target;return ft.isConnected(e)&&!r.isTextMutated(e)&&!r.isAddedNode(e)&&!Lg(e,"characterData")&&(r.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function kg(s,r,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return ft.isConnected(e)&&!r.isAttributeMutated(e,i)&&!r.isAddedNode(e)&&(r.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var xg=30;function Lg(s,r,t){let e=csSymbol.for(t?`${r}:${t}`:r),i=P.now(),n=s[e];return n&&i<n?!0:(s[e]=i+xg,!1)}function Vg(s,r,t=[]){let e=ft.isConnected(s.target),i=!e&&r.isRemovedNode(s.target),n=e&&r.isAddedNode(s.target),o=r.getSiblings(s),c=o.nextSibling,l=o.previousSibling,h=null,u=()=>{if(h){let{childListType:m,movedNodes:v,...T}=h;csArray.prototype.push.call(t,m==="added"?T:{...T,movedNodes:v}),h=null}},f=m=>m===(h==null?void 0:h.childListType)?h:(u(),{childListType:m,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let m=0;m<s.addedNodes.length;m++){let v=s.addedNodes[m];r.isLatestNodeMutation(v,s)?(r.isMovedNode(v)?(h=f("moved"),csArray.prototype.push.call(h.movedNodes,v)):(r.markAsAddedNode(v),n||(h=f("added"),csArray.prototype.push.call(h.addedNodes,v))),l=v):ft.isConnected(v)?r.isMovedNode(v)||r.markAsPendingInsert(v):r.markAsUselessNode(v)}u()}let y=lo(s.removedNodes,m=>{if(ft.isConnected(m)){if(!i&&!r.isPendingInsert(m)){if(r.isDetachedMove(m))return!0;r.markAsMovedNode(m),r.isMovedNodeIntoAddedNode(m)&&(m[Pg]=!0)}return!1}return r.isUselessNode(m)?!1:(r.markAsRemovedNode(m),!0)});return y.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:y,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var Oa={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},Ne=(()=>{var s;class r{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static ch(e){if(s.shadowRootFilters.length>0&&vi(e))for(let i=0;i<s.shadowRootFilters.length;i++){let n=s.shadowRootFilters[i];if(n(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,Oa)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,Yt(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(n=>{this.mutationObserver.observe(n,Oa)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(ws.getAllShadowHosts(document),n=>i(csElementshadowRoot.apply(n),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.ch(document),this.shadowRootObserver=new xs(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,Z(this.shadowRootObserver.shadowRoots,n=>{this.ch(n)}))}static disconnect(e,i){var n,o;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(n=this.shadowRootObserver)===null||n===void 0||n.disconnect(),(o=this.mutationObserver)===null||o===void 0||o.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.R=e,this.ap=i;let n=kr(o=>e(o,this),!0);this.R=Rs("DocumentMutationObserver:callback",o=>{Z(o,c=>n.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),n=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&n.length?Pu(i,n):i!=null?i:n}observe(){s.observe(this.R,this.ap)}disconnect(){s.disconnect(this.R,this.ap)}}return s=r,r.callbacks=[],r.shadowRootCallbacks=[],r.started=!1,r.observedTargets=new Set,r.shadowRootFilters=[],r.mutationCallback=t=>{Bt.mutations.count.increase(t.length),j.counters.mutations.push(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},r.onShadowRoot=(t,e)=>{Z(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.ch(t):s.disconnectShadowRoot(t)},r.isRefreshing=!1,ht([x()],r.prototype,"observe",null),ht([x()],r.prototype,"disconnect",null),r})(),Ug=(()=>{class s{constructor(t){this.R=t,this.lh=!1,this.v_=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.R({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.R({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"?this.R({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssStyleSheetDisabled"&&this.R({type:e.type,target:e.sheet.ownerNode,disabled:e.disabled}))},this.R=e=>Yt(()=>t(e)),this.cp=new bo(e=>Yt(async()=>{await vc(),this.v_(e)})),"adoptedStyleSheets"in Document.prototype&&(this.lp=new Cg(t))}observe(){var t;this.lh=!1,this.U=new Ne(e=>this.S_(e),(e,i)=>{i==="added"&&this.__(e)}),this.U.observe(),this.cp.observe(),(t=this.lp)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.U)===null||t===void 0||t.disconnect(),this.cp.disconnect(),(e=this.lp)===null||e===void 0||e.disconnect(),this.lh=!0}S_(t){if(this.lh)return;let e=Ig(t);for(let i=0;i<e.length;i++){let n=e[i];if(!n){nt.error("processRawMutations: empty record");continue}switch(n.type){case"attributes":this.processAttributeChanged(n);break;case"characterData":this.processCharacterDataChanged(n);break;case"childList":this.processChildListChanged(n);break;default:nt.error(`processRawMutations: unknown record type '${n.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:ft.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.R(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.R(e)}processChildListChanged(t){var e,i,n;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let o={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.R(o)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let o={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:Js(t.addedNodes)};this.R(o)}if(!((n=t.removedNodes)===null||n===void 0)&&n.length){let o={type:"nodesRemoved",target:t.target,nodes:ss(t.removedNodes,c=>c)};this.R(o)}}__(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.R(e)}}return ht([x()],s.prototype,"processAttributeChanged",null),ht([x()],s.prototype,"processCharacterDataChanged",null),ht([x()],s.prototype,"processChildListChanged",null),s})(),jg=(()=>{class s extends ks{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),Hg=(()=>{class s extends ks{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),Bg=(()=>{class s extends ks{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),Fg=(()=>{class s extends ks{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),$g=(()=>{class s extends ks{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),zg=(()=>{class s{constructor(t,e,i){var n;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(n=t.namespaceURI)!==null&&n!==void 0?n:"")}static create(t){let e=t.attributes,i=new csArray(e.length);for(let n=0;n<i.length;n++){let o=e[n];i[n]=new s(o.name,o.value,o.namespaceURI),o.name==="href"&&uo(t)&&(i[n].value=cl(t))}return i}}return s})(),Na={workTime:40,async:!0,initialDOM:!0};var mi=csSymbol("InitialDom"),Ma=csSymbol.for("ignoreNextSerialization");function fl(s){return s[Ma]?(delete s[Ma],!0):!1}function Gg(s=Na){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=Na.workTime);let n=Rs("serialize:callback",y=>e(y)),o=new Pi,c=(y,m)=>{y.hasChildNodes()&&o.push({node:y,serializedNode:m});let v=y instanceof Element&&csElementshadowRoot.apply(y);if(v){let T=m.shadowRoot=yi(v);s.async&&s.initialDOM&&it.setProperty(v,mi,!0),c(v,T)}},l,h=!0,u=8,f=Rs("work",()=>{var y;if(h)l=yi(t),s.async&&s.initialDOM&&it.setProperty(t,mi,!0),c(t,l),h=!1;else if(o.isEmpty)return;let m=Yg(100);for(;!o.isEmpty;){if(s.async&&m.elapsed()>=s.workTime){--u<=0&&csSetTimeout(f);return}let{node:v,serializedNode:T}=o.pop(),C=(y=T.children)!==null&&y!==void 0?y:[];if(Pr(v))continue;let w=0;for(let b=csNodefirstChild.apply(v);b;b=csNodenextSibling.apply(b)){if(fl(b))continue;let k=yi(b);s.async&&s.initialDOM&&it.setProperty(b,mi,!0),C[w++]=k,c(b,k)}}s.async?csSetTimeout(()=>n(l)):e(l)});if(!s.async)s.workTime=1/0,f();else for(let y=0;y<u;y++)csSetTimeout(f,1)}}function qg(s){let r=yi(s),t=r;if(Pr(s))return r;let e=0;for(let n=csNodefirstChild.apply(s);n;n=csNodenextSibling.apply(n))fl(n)||(t.children[e++]=Fn(n));let i=s.shadowRoot;return i&&(t.shadowRoot=Fn(i)),r}var Fn=Ds(qg,"serializeSync");function yi(s){let r,t;switch(csNodenodeType.apply(s)){case 1:t=r=new Ie(s),r.attributes=Xg(s);break;case 3:t=new hl(s);break;case 4:t=new jg(s);break;case 8:t=new Hg(s);break;case 10:t=new Bg(s);break;case 9:t=new Fg(s);break;case 11:t=new $g(s);break;default:throw new Error("Node type not supported: "+csNodenodeType.apply(s))}return t}function Wg(){mi=csSymbol("InitialDom")}function Yg(s){if(s<1)throw new Error("Precision should be >= 1");let r=0,t=P.elapsed();return{started:t,elapsed(){return++r%s===0&&(t=P.elapsed()),t-this.started}}}function Xg(s){return Pr(s)?[]:zg.create(s)}var bi=(()=>{class s{constructor(t){this.type="asyncEvent",this.hh=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.hh)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.oi=t,this.hh=!0,this.R&&this.R(this.oi)}complete(t){this.hh&&t(this.oi),this.R=t}wait(){return new Promise(t=>this.complete(t))}}return s})(),le=(()=>{class s{constructor(){this.Pt=[],this.isStarted=!1}async produceEvent(t){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:P.now(),t.timestamp==null&&(t.timestamp=P.now()),csArray.prototype.forEach.call(this.Pt,i=>i(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.Pt=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.Pt,t),()=>{let e=csArray.prototype.indexOf.call(this.Pt,t);csArray.prototype.splice.call(this.Pt,e,1)}}}return s})(),Kg=Gg(),Jg=(()=>{class s extends le{constructor(){super(...arguments),this.Ra=!1}onStart(){this.Ra=!0,this.R=fg(this.w_,this),this.G=new Ug(this.R),this.G.observe();let t=Bt.mutations.initialDOM.asyncMeasure(),e=()=>{this.Ra=!1,Wg(),t()};this.produceEvent(new bi(i=>Kg(document,n=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:n})})))}onStop(){var t,e;this.Ra=!1,(t=this.R)===null||t===void 0||t.cancel(),(e=this.G)===null||e===void 0||e.disconnect()}Zt(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=q(e.target),i.targetProps=it.getProperties(e.target)),[e,i]}w_(t){if(!this.A_(t))switch(t.type){case"attributeChanged":{let[e,i]=this.Zt(t.type,t);i.attribute=e.attribute,i.isSvg=ti(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=fi(e.target),i.linkRel=Tc(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?fi(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.Zt(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=csNodenodeType.apply(e.target),i.parentLocalName=e.target.parentElement?fi(e.target.parentElement):null,i.parentProps=e.target.parentElement?it.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.Zt(t.type,t);i.targetLocalName=ct(e.target)?fi(e.target):null,i.nextSibling=e.nextSibling?q(e.nextSibling):null,i.previousSibling=e.previousSibling?q(e.previousSibling):null,Bt.mutations.serializedMutations.measure(()=>{i.nodes=ss(e.nodes,Fn)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.Zt(t.type,t);i.previousSibling=e.previousSibling?q(e.previousSibling):null,i.nextSibling=e.nextSibling?q(e.nextSibling):null,i.nodesIds=ss(e.nodes,q),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.Zt(t.type,t);i.nodesIds=ss(e.nodes,q),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.Zt(t.type,t);i.shadowRoot=yi(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.Zt(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.Zt(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.Zt(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"cssStyleSheetDisabled":{let[e,i]=this.Zt(t.type,t);i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.Zt(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.Zt(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.Zt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.Zt(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.Zt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetDisabled":{let[e,i]=this.Zt(t.type,t);i.sheetId=e.sheetId,i.disabled=e.disabled,this.produceEvent(i);break}}}Ca(t){return this.Ra&&!it.getProperty(t,mi)}A_(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this.Ca(t.target)||D.isMaskedElement(t.target)||D.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this.Ca(e)||D.isMaskedElement(e)||D.isMaskedElementChild(e))}case"attributeChanged":return this.Ca(t.target)||D.isMaskedElementChild(t.target)||D.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":case"cssStyleSheetDisabled":return this.Ca(t.target)||D.isMaskedElementChild(t.target);default:return!1}}}return s})(),cs=(()=>{let s;return function(r){function t(i){return i.type==="DomEvent"}r.isDOMEvent=t;function e(i){return i.domEvent==="attributeChanged"}r.isAttributeChangedEvent=e}(s||(s={})),s})(),Ls=(()=>{class s{constructor(){this.Pt=[]}start(){}stop(){this.Pt.length=0,this.Pt=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.Pt;csSetTimeout(()=>{let n=Rs("Processor:processEvent",o=>this.processEvent(o))(t);n!=null&&csArray.prototype.forEach.call(e,o=>o(n)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.Pt,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.Pt,t),()=>{this.Pt=csArray.prototype.filter.call(this.Pt,e=>e!==t)}}emitEvent(t){Yt(()=>csArray.prototype.forEach.call(this.Pt,e=>e(t)))}}return s.pendingEvents=0,s})(),Qg=(()=>{class s extends Ls{isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||cs.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.processFastDOM(t),t;let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let n of i){if(n instanceof Ie){let c=D.getMaskedAttributeDetails(n);n.attributes=this.Ia(n,c)}if(D.getMaskedElementDetails(n).state===D.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==n);continue}it.traverse(n,c=>{if(c instanceof Ie){let l=D.getMaskedAttributeDetails(c);c.attributes=this.Ia(c,l);let h=D.getMaskedElementDetails(c);h.state===D.MaskedElementState.Parent&&(this.Pa(c,h),e++)}})}return e>0&&j.counters.sensitiveElements.count("masked-elements",e),t}processFastDOM(t){var e;let{MaskedElementState:i}=D,n=t.type==="DOM_PATCH"?t.diff:t.state,o=t.state;for(let c in n){let l=n[c],h=o[c],u=D.getMaskedElementDetails(h);if(u.state===i.Child){delete n[c];continue}else if(h.type!==1)continue;let f=D.getMaskedAttributeDetails(h);for(let y of(e=f.attributes)!==null&&e!==void 0?e:[])l.attributes&&delete l.attributes[y];u.state===i.Parent&&this.Pa(l,u)}}Ia(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}Pa(t,e){var i;let n=`width: ${e.width}px !important; height: ${e.height}px !important;`;"nodeType"in t?(t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:n,namespaceURI:""}),Ie.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})):((i=t.attributes)!==null&&i!==void 0||(t.attributes={}),delete t.firstChild,delete t.shadowRoot,t.attributes.style=n,t.attributes["data-cs-mask"]||(t.attributes["data-cs-mask"]=""))}}return Oe([jt("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})(),pe=(()=>{let s;return function(r){r.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",r.WHITELISTED_STATUS="whitelisted";function t(n){return it.getProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP)===r.WHITELISTED_STATUS}r.isWhitelistedElement=t;function e(n){it.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,r.WHITELISTED_STATUS)}r.whitelistElement=e;function i(n){it.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,void 0)}r.removeWhitelistElement=i}(s||(s={})),s})(),Zg=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,tm="\uFF41",em=/[^\s]/g,sm="a";function _s(s){let r=csString.prototype.replace.call(s,Zg,tm);return csString.prototype.replace.call(r,em,sm)}function pl(s,r){let t=r==="number"?"0":"\u2022";return csString.prototype.replace.call(s,/\S/g,t)}var im=(()=>{class s{constructor(t,e,i,n=null,o=!1){this.ps=t,this.xn=e,this.D=i,this.Oa=n,this.b_=o,this.Ln=Eo(this.xn)}sanitize(t,e){return it.traverse(t,(i,n)=>{if(i.anonymized=this.ps,i.nodeType===te.TEXT_NODE){let o=i,{anonymizedValue:c,withAnonymization:l}=this.getAnonymizedValue(o.data,n?n==null?void 0:n.localName:e==null?void 0:e.targetLocalName,n?it.getProperties(n):e==null?void 0:e.targetProps);i.anonymized=l,o.data=c;return}if(Ie.isElement(i))return this.T_(i);if(i.nodeType===te.CDATA_SECTION_NODE){let o=i;o.data=this.ps?_s(o.data):this.D.checkAndAnonymizePII(o.data,this.Oa);return}}),t}setAnonymization(t){this.ps=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let n=(i==null?void 0:i[pe.ANONYMIZED_TEXT_STATUS_PROP])===pe.WHITELISTED_STATUS;return this.ps&&!n?{anonymizedValue:_s(t),withAnonymization:!0}:{anonymizedValue:this.D.checkAndAnonymizePII(t,this.Oa),withAnonymization:!1}}T_(t){let e=Zs(t.attributes,n=>n.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,n=>(n.anonymized=this.ps,n.value=this.getAnonymizedAttributeValue(t.namespaceURI,t.localName,n.name,n.value,i),n))}getAnonymizedAttributeValue(t,e,i,n,o){if(t==="http://www.w3.org/2000/svg"||t==="svg"||this.R_(e,i,o))return n;if(of(i))return af(e,i,n)?this.D.anonymizePII(n):n;let c=this.b_&&i==="placeholder";return this.ps&&(cf(e,i,o)||c)?_s(n):this.ps?"":this.D.checkAndAnonymizePII(n,null)}R_(t,e,i){return nf(t,e,i)||this.Ln.has(e)}}return s})();var rm=()=>(s,r,t)=>{t.value=nm(t.value)};function nm(s){let r=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var n;let o=(n=this)!==null&&n!==void 0?n:e;if(t=arguments,o[r])return;o[r]=!0,co(()=>{o[r]=!1,s.apply(o,t)})};return i.oncePerTickSymbol=r,i}rm.isScheduled=(s,r)=>{let t=r.oncePerTickSymbol;return s[t]};var ge=(()=>{let s;return function(r){r.ENCRYPTED_NODE_PROP="encrypted";function t(n){return it.getProperty(n,r.ENCRYPTED_NODE_PROP)===!0}r.shouldEncrypt=t;function e(n){it.setProperty(n,r.ENCRYPTED_NODE_PROP,!0)}r.markEncryptedNode=e;function i(n){it.setProperty(n,r.ENCRYPTED_NODE_PROP,void 0)}r.unmarkEncryptedNode=i}(s||(s={})),s})(),Je=(()=>{let s;return function(r){r.EDITABLE_NODE_PROP="editableNode";function t(n){var o;return"nodeType"in n?it.getProperty(n,r.EDITABLE_NODE_PROP)===!0:((o=n.metadata)===null||o===void 0?void 0:o[r.EDITABLE_NODE_PROP])===!0}r.isEditableNode=t;function e(n){it.setProperty(n,r.EDITABLE_NODE_PROP,!0)}r.markEditableNode=e;function i(n){it.setProperty(n,r.EDITABLE_NODE_PROP,void 0)}r.unmarkEditableNode=i}(s||(s={})),s})();var Da=(()=>{let s;return function(r){function t(e){return e.type==="TextVisibility"}r.isTextVisibilityEvent=t}(s||(s={})),s})();function br(s){var r;let t=(r=s.attributes)===null||r===void 0?void 0:r.type;if(t!=null)return csString.prototype.trim.call(csString.prototype.toLowerCase.call(t))}var om=(()=>{class s extends Ls{constructor(t,e,i=new ei,n=null,o=!1){super(),this.D=i,this.Oa=n,this.captureAnonymizedPlaceholders=o,this.Tr=new im(t,e,i,n,o)}setAnonymization(t){this.Tr.setAnonymization(t)}isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||Da.isTextVisibilityEvent(t)||cs.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||cs.isAttributeChangedEvent(t)&&typeof t.newValue=="string"||t.domEvent==="characterDataChanged")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.M_(t);if(Da.isTextVisibilityEvent(t))return t.text=this.D.checkAndAnonymizePII(t.text,this.Oa),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.yh(t);break;case"attributeChanged":this.D_(t);break;case"characterDataChanged":this.k_(t);break}return t}M_(t){var e,i;let n=t.type==="DOM_PATCH"?t.diff:t.state,o=t.state;for(let c in n){let l=o[c],h=o[l.parent];switch(l.type){case te.TEXT_NODE:case te.COMMENT_NODE:{let u=n[c];if(Q(u.data)){if(h.localName==="script"){u.data="";continue}}else continue;let{anonymizedValue:f,withAnonymization:y}=this.Tr.getAnonymizedValue((e=u.data)!==null&&e!==void 0?e:"",h.localName,h.metadata);u.anonymized=y,u.data=f;break}case te.ELEMENT_NODE:{let u=n[c];if(u.attributes)for(let f in u.attributes){let y=u.attributes[f],m=br(l);u.attributes[f]=this.Tr.getAnonymizedAttributeValue(l.namespaceURI,l.localName,f,y,m)}!((i=u.state)===null||i===void 0)&&i.value&&(u.state.value=pl(u.state.value,br(l)));break}}}return t}yh(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let n of e)this.Tr.sanitize(n,i)}D_(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this.Tr.getAnonymizedAttributeValue(t.namespace,t.localName,t.attribute,t.newValue,t.inputType)}}k_(t){t.newValue=this.Tr.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return Oe([jt("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();function am(s){let r=s.localName,t=br(s);return r==="textarea"||r==="input"&&t!=="number"&&t!=="checkbox"&&t!=="radio"&&t!=="password"}var cm=(()=>{class s extends Ls{constructor(t){super(),this.gp=t}isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||cs.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){var e;if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.x_(t);switch(t.domEvent){case"initialDOM":case"nodesAdded":this.yh(t);break;case"characterDataChanged":if(!((e=t.targetProps)===null||e===void 0)&&e[ge.ENCRYPTED_NODE_PROP])return this.Eh(t.timestamp,t.target,t.newValue,t),null}return t}mp(t){var e;return!!(!((e=t.metadata)===null||e===void 0)&&e[ge.ENCRYPTED_NODE_PROP])}x_(t){var e;let i=0,n=t.type==="DOM_PATCH"?t.diff:t.state;for(let[o,c]of Object.entries(n)){let l=+o,h=t.state[l];switch(h.type){case te.TEXT_NODE:{let u=c,f=u.data;if(typeof f!="string")break;let y=h.parent?t.state[h.parent]:void 0;if((y==null?void 0:y.localName)==="style")break;this.mp(h)&&(u.data=_s(f),this.Eh(t.timestamp,l,f),i++);break}case te.ELEMENT_NODE:{let u=c;if(!(!((e=u.state)===null||e===void 0)&&e.value))break;let f=u.state.value;am(h)&&this.mp(h)&&this.L_(t.timestamp,l,f,pl(f,br(h)));break}}}return i>0&&j.counters.sensitiveElements.count("encrypted-text-elements",i),t}yh(t){let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let n of i)it.traverse(n,(o,c)=>{if(ge.shouldEncrypt(o)&&(o.nodeType===te.TEXT_NODE||o.nodeType===te.COMMENT_NODE)){let l=o;this.Eh(t.timestamp,o.csId,l.data),l.data=_s(l.data),e++}});e>0&&j.counters.sensitiveElements.count("encrypted-text-elements",e)}Eh(t,e,i,n){if(!(i!=null&&i.length))return;let o=new bi(async c=>{let l=await vt.asymmetricEncrypt(i);if(l)c({timestamp:t,type:"encryptedCharacterDataChanged",target:e,rawData:_s(i),encryptedData:l,encryptionMetadata:this.gp});else if(n)n.newValue=_s(n.newValue),c(n);else{let h={type:"warning",message:`Failed to encrypt data of length ${i.length}`,timestamp:t};c(h)}});this.emitEvent(o)}L_(t,e,i,n){if(!(i!=null&&i.length))return;let o=new bi(async c=>{let l=await vt.asymmetricEncrypt(i);if(l)c({timestamp:t,type:"inputEncryptedText",target:e,value:n,encryptedData:l,encryptionMetadata:this.gp});else{let h={type:"warning",message:`Failed to encrypt input value of length ${i.length}`,timestamp:t};c(h)}});this.emitEvent(o)}}return s})(),et=(()=>{let s;return function(r){r[r.ELEMENT_NODE=1]="ELEMENT_NODE",r[r.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",r[r.TEXT_NODE=3]="TEXT_NODE",r[r.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",r[r.COMMENT_NODE=8]="COMMENT_NODE",r[r.DOCUMENT_NODE=9]="DOCUMENT_NODE",r[r.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",r[r.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",r[r.CSS_STYLESHEET_NODE=50]="CSS_STYLESHEET_NODE"}(s||(s={})),s})();function To(s){let r=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=lm(r);return e?(Ii(t,",")||(e=hm(e)),[ka(t),...To(e)]):[ka(t)]}function lm(s){return csString.prototype.split.call(s,/\s(.+)/)}function ka(s){return csString.prototype.split.call(s,/,$/)[0]}function hm(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var um=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\)(?!\\))/g;function dm(s,r){return csString.prototype.replace.call(s,um,(...e)=>{let i=e[3]||e[4],n=e[9]||e[10]||e[11],o=pm((i||n).trim()),c=i?"@import ":"",l=r(o)||o;return`${c}url(${fm(l)})`})}function fm(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function Ei(s){let r=new Set;return dm(s,t=>{var e,i;return r.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),as(r)}function pm(s){let r=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,r,(t,e,i,n)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(n)return n;let o=parseInt(i,16);return 55296<=o&&o<=57343||o===0||o>1114111?"\uFFFD":csString.fromCodePoint(o)})}var xa=(()=>{class s{static async toStaticResourceEvent(t,e,i){let n=await s.V_(t);if(!n)return null;let o=await s.yp(n),c=Jt(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:o,data:n}};return c&&(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,n){let o=await s.U_(t,n),c=ce(t),l=o.get(c);if(!l)return null;let h={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return o.delete(c),o.size&&(h.nestedResources=[],o.forEach(u=>{u&&csArray.prototype.push.call(h.nestedResources,{hash:u.hash,data:u.data})})),h}static async yp(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.Ep,e);return Pn(i)}static async V_(t){let e;if(!Jt(t))e=await(await window.fetch(t)).blob();else{let i=Zo(t);if(!i)return null;e=i}return e}static async U_(t,e){let i=new Map,n=ce(t),c=[{resourceRawPath:t,resourceAbsolutePath:n}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!Jt(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let m=await fetch(l.resourceAbsolutePath);l.data=await m.text()}l.nestedResources||(l.nestedResources=Ei(l.data));let f=!1,y=!1;for(let m of l.nestedResources){let v=Jt(m)?m:l.resourceAbsolutePath?Cd(m,l.resourceAbsolutePath):ce(m),T=i.get(v);if(T!==void 0){if(T!==null){let w=s.j_(T,m);l.data=K.stringReplaceAll(l.data,m,w)}continue}Zs(c,w=>w.resourceAbsolutePath===v)!==void 0||(f=!0,y||(csArray.prototype.push.call(c,l),y=!0),csArray.prototype.push.call(c,{resourceRawPath:m,resourceAbsolutePath:v}))}if(!f){let m=await s.H_(l.data);i.set(l.resourceAbsolutePath,{hash:m.hash,data:m.data})}}else{let f;if(!Jt(l.resourceAbsolutePath))f=await(await fetch(l.resourceAbsolutePath)).blob();else{let m=Zo(l.resourceAbsolutePath);if(!m){i.set(l.resourceAbsolutePath,null);continue}f=m}let y=await s.yp(f);i.set(l.resourceAbsolutePath,{hash:y,data:f})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static j_(t,e){let i=`cs://resources/${t.hash}`;return Jt(e)||(i+=`?${s.vh}=${e}`),i}static async H_(t){let e=new Blob([t],{type:"text/css"}),i=await e.arrayBuffer(),n=await crypto.subtle.digest(s.Ep,i);return{data:e,hash:Pn(n)}}}return s.Ep="SHA-256",s.vh="original-resource-name",s})(),$n=(()=>{class s extends Ls{get busy(){return this.Sh>0}constructor(){super(),this.B_="cssrm://",this.F_=1,this.gs=!1,this.Sh=0}isListening(t){if(s.isSupported()){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return!0;if(!cs.isDOMEvent(t))return!1}else return!1;return t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){if(t.type!=="DomEvent")return this.$_(t);switch(t.domEvent){case"initialDOM":case"nodesAdded":this.z_(t);break;case"attributeChanged":this.G_(t);break;case"characterDataChanged":this.q_(t);break}return t}disableOnlineAssets(){this.gs=!1}enableOnlineAssets(){this.gs=!0}isOnlineAssetsActivated(){return this.gs}$_(t){var e;let i=t.type==="DOM_PATCH"?t.diff:t.state;for(let n in i){let o=i[n],c=t.state[n],l=t.state[c.parent];switch(c.type){case et.TEXT_NODE:this.vp(o,l==null?void 0:l.localName);break;case et.CSS_STYLESHEET_NODE:{if(o=o,o.cssRules)for(let h in o.cssRules){let u=o.cssRules[h],f=this.Rr(u);f!==null&&(o.cssRules[h]=f)}break}case et.ELEMENT_NODE:{o=o;let h=o.attributes;if(!h)continue;if(h.style&&(h.style=this.Rr(h.style)),(this.Sp(c.localName)||this._p(c.localName,l==null?void 0:l.localName))&&("src"in h&&(h.src=this._h(h.src)),"srcset"in h&&(h.srcset=this.Ah(h.srcset))),this.gs&&c.localName==="link"&&(!((e=h.href)===null||e===void 0)&&e.length)&&h.rel==="stylesheet"){let u=this.Hi(ce(h.href),!0);h["data-cs-original-href"]=h.href,h.href=u}}}}return t}z_(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)it.traverse(i,(n,o)=>{if(n.nodeType===te.TEXT_NODE&&o){this.vp(n,o.localName);return}if(!Ie.isElement(n))return;let c=Ie.getAttribute(n,"style");if(c!=null&&c.value&&(c.value=this.Rr(c.value)),this.Sp(n.localName)||this._p(n.localName,o==null?void 0:o.localName)){let l=Ie.getAttribute(n,"src");l!=null&&l.value&&(l.value=this._h(l.value));let h=Ie.getAttribute(n,"srcset");if(h){h.value=this.Ah(h.value);return}}if(this.W_(n)&&this.gs){let l=Zs(n.attributes,u=>u.name==="href");if(!l||!l.value)return;let h=this.Hi(ce(l.value),!0);csArray.prototype.push.call(n.attributes,{name:"data-cs-original-href",namespaceURI:"",value:l.value}),l.value=h}})}vp(t,e){if(!t||e!=="style")return;let i=this.Rr(t.data);i!==null&&(t.data=i)}q_(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this.Rr(t.newValue);e!==null&&(t.newValue=e)}G_(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this.Rr(t.newValue);return}if(!e&&!i)return;let o=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!o&&!c||(e&&(t.newValue=this._h(t.newValue)),i&&(t.newValue=this.Ah(t.newValue)))}_h(t){return Jt(t)||this.gs?this.Hi(t,!1,P.now()):t}Ah(t){if(!this.gs)return t;let e=t,i=To(t);for(let n of i){let o=this.Hi(ce(n),!1);e=csString.prototype.replace.call(e,n,o)}return e}Rr(t){let e=Ei(t),i=t,n=P.now();for(let o of e){let c=Jt(o);if(!(c||this.gs)||this.Y_(o))continue;let l=tf(o),h=o;c?h=this.Hi(o,!1,n):this.gs&&(l?h=this.Hi(o,!0,n):h=this.Hi(ce(o),!1,n)),i=csString.prototype.replace.call(i,o,h)}return i}Hi(t,e,i=P.now()){let n=this.F_++;this.Sh++;let o=e?xa.toCSSStaticResourceEvent:xa.toStaticResourceEvent,c=new bi(async l=>{try{let h=await o(t,n,i,this.gs);l(h||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(h){l({type:"warning",message:h})}finally{this.Sh--}});return this.emitEvent(c),this.B_+n}Sp(t){return t==="img"}_p(t,e){return t==="source"&&e==="picture"}W_(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return yc()&&vu()&&!!csArray.from}Y_(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return Oe([jt("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),hi=console;var As={debug:(...s)=>hi.debug(...s),log:(...s)=>hi.log(...s),info:(...s)=>hi.info(...s),warn:(...s)=>hi.warn(...s),error:(...s)=>hi.error(...s)},zn=(()=>{class s{push(t){let e={value:t};this.Cr?(this.bh.next=e,this.bh=e):(this.Cr=e,this.bh=e)}pushMany(t){for(let e of t)this.push(e)}shift(){if(!this.Cr)return;let t=this.Cr;return this.Cr=t.next,this.Cr||(this.bh=void 0),t.value}isEmpty(){return!this.Cr}}return s})(),Ti=(()=>{let s;return function(r){r[r.High=0]="High",r[r.Low=1]="Low"}(s||(s={})),s})(),Ro=(()=>{class s{constructor(){this.wp=new zn,this.Ap=new zn,this.length=0}push(t,e=Ti.Low){return e===Ti.High?this.wp.push(t):this.Ap.push(t),this.length+=1}shift(){if(this.length!==0)return this.length-=1,this.wp.shift()||this.Ap.shift()}isEmpty(){return this.length===0}}return s})(),gm=(()=>{class s{get length(){return this.wt.length}constructor(){this.Hn=[],this.wt=new Ro,this.Th=new Set}X_(t){switch(t.type){case"attributes":return`-${t.attributeNamespace}-${t.attributeName}`;default:return""}}K_(t){switch(t.type){case"pointerOverElement":case"customElementRegistration":return}return`${q(t.target)}-${t.type}${this.X_(t)}`}J_(t){switch(t.type){case"state":return Ti.High;default:return Ti.Low}}Q_(t){let e=this.K_(t);if(e){if(this.Th.has(e))return;this.Th.add(e)}return this.wt.push({mutation:t,key:e},this.J_(t))}Z_(){this.Hn.length!==0&&(csArray.prototype.forEach.call(csArray.prototype.flat.call(this.Hn),t=>this.Q_(t)),this.Hn=[])}push(t){csArray.prototype.push.call(this.Hn,t)}shift(){this.Z_();let t=this.wt.shift();if(t)return t.key&&this.Th.delete(t.key),t.mutation}isEmpty(){return this.wt.isEmpty()&&this.Hn.length===0}}return s})(),mm=(()=>{class s{constructor(t){this.ve=t,this.Da=!1,this.ks=new WeakSet,this.ka=e=>{let i=e.getRootNode();i&&this.ks.has(i)&&this.ve(e)}}observe(t){this.ks.has(t)||(this.ks.add(t),this.Da||(rs.subscribe(this.ka),this.Da=!0))}disconnect(){this.Da&&(rs.unsubscribe(this.ka),this.Da=!1),this.ks=new WeakSet}}return s})(),an=new WeakMap,cn=new WeakMap;function La(s,r){if(!s||typeof s!="object"&&typeof s!="function")return s;if(an.has(s))return an.get(s);let t=r();return an.set(s,t),t}function Gn(s,r){return s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()}),s}function ym(s,r,t,e,i){Object.defineProperty(s,r,{set(n){var o;let c=(o=t.set)===null||o===void 0?void 0:o.apply(this,[n]);return e(this,[r],[n],c),c},get(){var n;let o=(n=t.get)===null||n===void 0?void 0:n.apply(this);return La(o,()=>{let c=new Proxy(o,{get(l,h){let u=Reflect.get(l,h);return typeof u!="function"?u:La(u,()=>i&2?Gn(function(...f){let y=cn.get(this)||this,m=Reflect.apply(u,y,f);return e(y,[r,h],f,m),m},u):Gn(function(...f){let y=cn.get(this)||this;return Reflect.apply(u,y,f)},u))},set:i&1?(l,h,u)=>{let f=Reflect.set(l,h,u);return e(l,[r,h],[u],f),f}:Reflect.set});return cn.set(c,o),c})}})}function Em(s,r,t,e){let i={};t.get&&(i.get=t.get),t.set&&(i.set=function(n){let o=t.set.call(this,n);return e(this,[r],[n],o),o}),t.value&&(i.value=Gn(function(...n){let o=Reflect.apply(t.value,this,n);return e(this,[r],n,o),o},t.value),i.writable=t.writable!==!1),t.configurable!==void 0&&(i.configurable=t.configurable),t.enumerable!==void 0&&(i.enumerable=t.enumerable),Object.defineProperty(s,r,i)}function dt(s,r,t,e={}){let i=s&&s.prototype?s.prototype:s;if(!i)return()=>{};let n=csSymbol.for(`fd_spy_${r}`);if(n in i){let h=i[n];return h.add(t),()=>h.delete(t)}let o=i[n]=new Set([t]),c=Object.getOwnPropertyDescriptor(i,r);if(!c)return As.warn(`Could not find descriptor for ${r} on target`,i),()=>o.delete(t);let l=(...h)=>{for(let u of o)try{u(...h)}catch(f){As.warn(`Error in spy hook for ${r} on target`,i,f)}};return e.mode?ym(i,r,c,l,e.mode):Em(i,r,c,l),()=>o.delete(t)}function zt(s,r,t){let e=i=>t(i.target);return s.addEventListener(r,e,{capture:!0,passive:!0}),()=>{s.removeEventListener(r,e,{capture:!0})}}var vm=(()=>{class s{constructor(t){this.ve=t,this.Pt=new WeakMap,this.Se=e=>this.ve({type:"state",target:e}),this.bp=e=>this.ve({type:"setAdoptedStyleSheets",target:e}),this.Ir=e=>this.ve({type:"styleSheetUpdated",target:e}),this.Bn=e=>{var i;let n=(i=this.tw(e))===null||i===void 0?void 0:i.parentStyleSheet;n&&this.Ir(n)},this.ew=e=>this.ve({type:"styleSheetDisabledChanged",target:e}),this.Tp=e=>this.ve({type:"activeElementChanged",target:e.ownerDocument}),this.ka=e=>this.ve({type:"metadataChanged",target:e})}iw(t){return csNodenodeType.apply(t)===et.DOCUMENT_NODE}rw(t){let e=[zt(t,"input",this.Se),zt(t,"change",this.Se),zt(t,"checked",this.Se),zt(t,"scroll",this.Se),zt(t,"toggle",this.Se),zt(t,"focusin",this.Tp),zt(t,"focusout",this.Tp),zt(t,"pointerover",i=>{this.ve({type:"pointerOverElement",target:i.ownerDocument,element:i})}),zt(t,"pointerout",i=>{this.ve({type:"pointerOverElement",target:i.ownerDocument,element:null})}),zt(t,"load",i=>{switch(i.localName){case"iframe":case"link":this.ve({type:"loaded",target:i});break}})];this.xa(t,()=>{csArray.prototype.forEach.call(e,i=>i())})}nw(t){let e=t.defaultView;if(!e)return;let i=[zt(e,"resize",()=>this.Se(t)),zt(t,"visibilitychange",()=>this.Se(t)),zt(t,"fullscreenchange",()=>this.Se(t)),dt(e.Document,"adoptedStyleSheets",this.bp,{mode:2}),dt(e.ShadowRoot,"adoptedStyleSheets",this.bp,{mode:2}),dt(e.Element,"attachShadow",(n,o,c,l)=>{this.ve({type:"attachShadow",target:n,shadowRoot:l})}),dt(e.HTMLInputElement,"value",this.Se),dt(e.HTMLInputElement,"checked",this.Se),dt(e.HTMLSelectElement,"selectedIndex",this.Se),dt(e.CSSStyleSheet,"insertRule",this.Ir),dt(e.CSSStyleSheet,"deleteRule",this.Ir),dt(e.CSSStyleSheet,"replace",this.Ir),dt(e.CSSStyleSheet,"replaceSync",this.Ir),dt(e.CSSStyleSheet,"addRule",this.Ir),dt(e.CSSStyleRule,"style",this.Bn,{mode:1}),dt(e.CSSGroupingRule,"insertRule",this.Bn),dt(e.CSSGroupingRule,"deleteRule",this.Bn),dt(e.CSSStyleDeclaration,"setProperty",this.Bn),dt(e.CSSStyleDeclaration,"removeProperty",this.Bn),dt(e.StyleSheet,"disabled",this.ew),dt(e.HTMLDialogElement,"show",this.Se),dt(e.HTMLDialogElement,"showModal",this.Se),dt(e.HTMLDialogElement,"close",this.Se),dt(e.CustomElementRegistry,"define",(n,o,c)=>{this.ve({type:"customElementRegistration",target:t,name:c[0]})})];this.xa(t,()=>{csArray.prototype.forEach.call(i,n=>n())})}tw(t){for(;t.parentRule!==null;)t=t.parentRule;return t}ow(t){let e=new csMutationObserver(i=>{this.ve(i)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),this.xa(t,()=>{e.disconnect()})}aw(t){let e=new mm(this.ka);e.observe(t),this.xa(t,()=>{e.disconnect()})}xa(t,e){this.Pt.get(t)==null||csArray.prototype.push.call(this.Pt.get(t),e)}observe(t){this.Pt.has(t)||(this.Pt.set(t,[]),this.rw(t),this.iw(t)&&this.nw(t),this.ow(t),this.aw(t))}disconnect(t){let e=this.Pt.get(t)||[];for(let i of e)try{i()}catch(n){As.warn(n)}this.Pt.delete(t)}}return s})(),gl=new Ro,at,Sm=40,_m=10;function wm(s){return csSetTimeout(()=>{let r=0,t=0,e=performance.now(),i=!0;s({get hasTimeLeft(){return r%_m===0&&(t=performance.now(),i=t-e<Sm),r++,i}})},0)}function Va(){var s;let r=(s=at==null?void 0:at.subTasks)===null||s===void 0?void 0:s.shift();return r?(r.subTasks=at==null?void 0:at.subTasks,r):gl.shift()}function ml(){wm(s=>{for(at||(at=Va());s.hasTimeLeft&&at;){at.isRunning=!0;try{at.isEnded=at.run(s)!==!0}catch(r){As.error("Error occurred while running task:",r),at.isEnded=!0}at.isRunning=!1,(at.isEnded||at.isAborted)&&(at=Va())}at&&ml()})}function ui(s,r=Ti.Low){let t={run:s,isAborted:!1,isEnded:!1,abort:()=>{t.isAborted=!0}};return at!=null&&at.isRunning?(at.subTasks=at.subTasks||new Ro,at.subTasks.push(t,r)):gl.push(t,r)===1&&!at&&ml(),t}var Am=40;function Ua(s){return csString.prototype.replace.call(s,/[:\\]/g,"\\$&")}function ln(s){return csString.prototype.replace.call(s,/\\([:\\\\])/g,"$1")}var hn=["nextSibling","firstChild","contentDocument","shadowRoot","sheetId"];function un(s,r){return!!s&&r in s&&!!s[r]}var ja={"http://www.w3.org/1999/xhtml":void 0,"http://www.w3.org/2000/svg":"svg"},qn=(()=>{class s{constructor(t){this.R=t,this.G=new vm(e=>{this.Rh.push(e),this.lw()}),this.Ke={},this.Je=new Map,this.Rh=new gm,this.Fn=new Map,this.processedMutationsCount=0,this.serializedNodeCount=0,this.Rp=0,this.Cp=Am}disconnect(){for(let t of this.Fn.values())this.G.disconnect(t);this.Fn.clear()}observe(t){return this.disconnect(),this.La(t),this}getState(t=!0){let e=this.Ke;return this.Ke={...e},t&&this.Ip(),e}getChanges(){let t={};for(let[i,n]of this.Je){let o=this.Ke[i];if(!(n&&!o))if(o&&!n)t[i]=ts(o);else{let c=zc(n,o);c!==void 0&&(t[i]=c)}}return this.Ip(),$c(t)?t:void 0}setFrameRate(t){return this.Cp=t/1e3,this}onChange(t){return this.R=t,()=>{this.R===t&&(this.R=void 0,this.$n&&(csClearTimeout(this.$n),this.$n=void 0))}}async getStateAsync(t=!0){return await this.Pp(),this.getState(t)}async getChangesAsync(){return await this.Pp(),this.getChanges()}async Pp(){return new Promise(t=>{ui(()=>t())})}Ip(){this.Je.clear()}static*findNodes(t,e){for(let i of Object.values(t))e(i)&&(yield i)}static stringifyAttrKey(t,e){let i=Ua(e);return t?`${Ua(t)}:${i}`:i}static parseAttrKey(t){let e=!1,i=-1;for(let c=0;c<t.length;c++){let l=t[c];if(e)e=!1;else if(l==="\\")e=!0;else if(l===":"){i=c;break}}if(i===-1)return{namespaceURI:null,name:ln(t)};let n=csString.prototype.slice.call(t,0,i),o=csString.prototype.slice.call(t,i+1);return{namespaceURI:ln(n),name:ln(o)}}static apply(t,e,i){let n={...t},o=new Set,c=new Set,l=y=>{c.has(y)?c.delete(y):o.add(y)},h=y=>{o.has(y)?o.delete(y):c.add(y)};function u(y,m){for(let v of hn)v in m&&(un(y,v)&&l(y[v]),un(m,v)&&h(m[v]))}for(let[y,m]of Object.entries(e)){if(m===null)continue;let v=y,T=n[v],C=T===void 0?m:Gc(T,m);u(T,m),n[v]=C}let f=y=>{if(c.has(y))return;let m=n[y];if(m){delete n[y],i==null||i(y);for(let{nodeId:v}of s.nodeRelationsEntries(m))f(v)}};for(let y of o)f(y);return n}static nodeRelationsEntries(t,e=!1){let i=e?hn.filter(o=>o!=="nextSibling"):hn,n=[];for(let o of i)un(t,o)&&csArray.prototype.push.call(n,{key:o,nodeId:t[o]});return n}At(t){if(t in this.Ke&&!this.Je.has(t)){let e=this.Ke[t];this.Je.set(t,ts(e)),this.Ke[t]=ts(e)}return this.Ke[t]}hw(t){try{let e=t.cssRules.length,i={};for(let n=0;n<e;n++){let o=t.cssRules[n];i[n]=o.cssText}return{type:et.CSS_STYLESHEET_NODE,cssRules:i,disabled:t.disabled}}catch{return{type:et.CSS_STYLESHEET_NODE,cssRules:{}}}}uw(t){return csArray.prototype.pop.call(csArray.from(window.csquerySelectorAll[t.nodeType].call(t,":hover")))||void 0}fw(t){let e=rs.getAll(t);switch(csNodenodeType.apply(t)){case et.DOCUMENT_NODE:{let i=t,n=i.activeElement||void 0,o=this.uw(i),c={type:et.DOCUMENT_NODE,baseURI:i.baseURI,activeId:n&&q(n),hoveredId:o&&q(o),...this.Op(t),metadata:e};return i.compatMode==="BackCompat"&&(c.quirksMode=!0),c}case et.DOCUMENT_FRAGMENT_NODE:return{type:et.DOCUMENT_FRAGMENT_NODE,mode:t.mode,metadata:e};case et.COMMENT_NODE:return{type:et.COMMENT_NODE,data:void 0,metadata:e};case et.ELEMENT_NODE:{let i=t,n=i.namespaceURI||"";return{type:et.ELEMENT_NODE,namespaceURI:n in ja?ja[n]:n,localName:i.localName,attributes:this.pw(i),state:this.Np(i),metadata:e}}case et.TEXT_NODE:return{type:et.TEXT_NODE,data:t.data||"",metadata:e};case et.CDATA_SECTION_NODE:return{type:et.CDATA_SECTION_NODE,data:t.data,metadata:e};case et.DOCUMENT_TYPE_NODE:return{type:et.DOCUMENT_TYPE_NODE,name:t.name,publicId:t.publicId,systemId:t.systemId,metadata:e};default:return null}}pw(t){return csArray.prototype.reduce.call(csArray.from(t.attributes),(e,i)=>{let n=e||{};return n[s.stringifyAttrKey(i.namespaceURI,i.name)]=i.value,n},void 0)}Op(t){let e=t.defaultView,i=e==null?void 0:e.visualViewport;return{state:{scrollX:e==null?void 0:e.scrollX,scrollY:e==null?void 0:e.scrollY,visibility:t.visibilityState},viewport:{width:i==null?void 0:i.width,height:i==null?void 0:i.height},screen:{width:e==null?void 0:e.screen.width,height:e==null?void 0:e.screen.height}}}Np(t){let e={};return"value"in t&&t.value&&(e.value=t.value),"selectedIndex"in t&&t.selectedIndex!==void 0&&t.selectedIndex>=0&&(e.selectedIndex=t.selectedIndex),"checked"in t&&t.checked&&(e.checked=t.checked),t.popover&&t.matches(":popover-open")?e.popover=!0:t.localName==="dialog"&&(e.open=t.open),t.scrollLeft&&(e.scrollX=t.scrollLeft),t.scrollTop&&(e.scrollY=t.scrollTop),e}lw(){var t;((t=this.gw)===null||t===void 0?void 0:t.isEnded)!==!1&&(this.gw=ui(e=>(this.Pr(e),this.Mp(),!this.Rh.isEmpty())))}Mp(){if(!this.R||this.$n)return;let t=performance.now()-this.Rp,e=Math.max(0,this.Cp-t);this.$n=csSetTimeout(()=>{this.$n=void 0;let i=this.getChanges();this.Rp=performance.now(),i&&this.R(i,this.getState())},e)}mw(t){for(let e=t==null?void 0:t.previousSibling;e;e=e.previousSibling)if(this.ms(e))return q(e)}yw(t){var e;let i=csNodeparentNode.apply(t)||t.host||((e=t.defaultView)===null||e===void 0?void 0:e.frameElement);if(this.ms(i))return q(i)}La(t){let e=new zn;e.pushMany(this.Dp(t,!1)),!e.isEmpty()&&ui(i=>{let n;for(;i.hasTimeLeft&&(n=e.shift());){e.pushMany(this.Dp(n));let o=csNodenextSibling.apply(n);o&&e.push(o)}return!!n})}Ew(t){switch(t){case et.DOCUMENT_NODE:return"contentDocument";case et.DOCUMENT_FRAGMENT_NODE:return"shadowRoot";default:return"childList"}}Or(t){ui(()=>{let e=t.ownerNode;if(e&&(!this.br(e)||!this.ms(e)))return!1;if(this.ms(t)||!e||e.localName==="style"?this.kp(t):this.Ch(q(t),{type:et.CSS_STYLESHEET_NODE,cssRules:{},disabled:t.disabled}),e&&this.ms(e)){let i=q(e);this.At(i).sheetId=q(t)}return!1})}xp(t){let e=0,i=q(t),n=t.adoptedStyleSheets||[],o=n.length,c={};ui(l=>{if(!this.ms(t)||!this.br(t)||n!==t.adoptedStyleSheets)return!1;for(;l.hasTimeLeft&&e<o;){let u=n[e];c[e]=this.ms(u)?q(u):this.kp(u),e+=1}if(e<o)return!0;let h=this.At(i);return h&&(h.adoptedStyleSheets=c),!1})}kp(t){let e=q(t);return this.Ch(e,this.hw(t)),e}Ch(t,e){this.serializedNodeCount++,this.Ke[t]=e,this.Mp(),this.Je.has(t)||this.Je.set(t,null)}ms(t){return q(t)in this.Ke}Lp(t){var e;if(!s.trackIframeContent||t.localName!=="iframe")return!1;let i=t;try{return!!i.contentDocument&&!!(!((e=i.contentWindow)===null||e===void 0)&&e.document)}catch{return!1}}Vp(t){let e=q(t),i=this.Ke[e];if(!i){As.warn(`No serialized node id ${e}`);return}let n=this.yw(t);if(!n){As.warn("No parent id for node",t);return}let o=this.Ew(i.type);if(o==="childList"){let c=this.mw(t);this.Ih(e,c,n,!0)}else{let c=this.At(n);c[o]=e,i.parent=n}}*Dp(t,e=!0){var i,n,o,c;if(!this.br(t))return;if(this.ms(t)){e&&this.Vp(t);return}let l=q(t),h=this.fw(t);if(!h){As.warn("Node was not serialized",t);return}switch(this.Ch(l,h),e&&this.Vp(t),h.type){case et.DOCUMENT_NODE:case et.DOCUMENT_FRAGMENT_NODE:{let f=t;this.Fn.set(l,f),this.G.observe(f),!((i=f.adoptedStyleSheets)===null||i===void 0)&&i.length&&this.xp(f);break}case et.TEXT_NODE:{((n=t.parentElement)===null||n===void 0?void 0:n.localName)==="style"&&(h.data="");break}case et.ELEMENT_NODE:{let f=t;switch(h.localName){case"iframe":this.Lp(f)&&(yield f.contentDocument);break;case"link":f.rel==="stylesheet"&&f.sheet&&this.Or(f.sheet);break;case"style":{let y=f.sheet;y&&this.Or(y);break}default:$f(h.localName)&&(!((c=(o=t.ownerDocument)===null||o===void 0?void 0:o.defaultView)===null||c===void 0)&&c.customElements.get(h.localName))&&this.Up(q(t.ownerDocument),h.localName),csElementshadowRoot.apply(f)&&(yield csElementshadowRoot.apply(f));break}break}}let u=csNodefirstChild.apply(t);u&&(yield u)}Up(t,e){let i=this.At(t),n=i.customElements||(i.customElements={});n[e]=1}Ph(t){let e=this.At(t);if(e){switch(e.type){case et.DOCUMENT_NODE:case et.DOCUMENT_FRAGMENT_NODE:this.G.disconnect(this.Fn.get(t)),this.Fn.delete(t)}delete this.Ke[t];for(let{nodeId:i}of s.nodeRelationsEntries(e))this.Ph(i)}}Ih(t,e,i,n){let o;if(e){let c=this.At(e);o=c.nextSibling,c.nextSibling=t}else{let c=this.At(i);o=c.firstChild,c.firstChild=t}if(n&&t&&o!==t){let c=this.At(t);if(c.nextSibling=o,o){let l=this.At(o);l.previousSibling=t}}if(t){let c=this.At(t);c.parent=i,c.previousSibling=e}}vw(t){var e;let i=this.At(t),n=new Set;for(let o=i==null?void 0:i.firstChild;o;o=(e=this.At(o))===null||e===void 0?void 0:e.nextSibling)n.add(o);return n}br(t){return"isConnected"in t?t.isConnected:!t.ownerNode||t.ownerNode.isConnected}Sw(t){let e=this.At(t);e&&(e.parent=void 0,e.nextSibling=void 0,e.previousSibling=void 0)}Pr(t){var e,i;let n;for(;t.hasTimeLeft&&(n=this.Rh.shift());){if(this.processedMutationsCount++,!this.ms(n.target)||!this.br(n.target))continue;let o=q(n.target);switch(n.type){case"attachShadow":{this.La(n.shadowRoot),this.At(o).shadowRoot=q(n.shadowRoot);break}case"childList":{let c,l=this.vw(o);for(let u=csNodefirstChild.apply(n.target);u;u=csNodenextSibling.apply(u)){this.ms(u)||this.La(u);let f=q(u);l.delete(f),this.Ih(f,c,o),c=f}this.Ih(void 0,c,o);for(let u of l)this.Sw(u),this.Ph(u);let h=this.At(o);if(h.type===et.ELEMENT_NODE&&h.localName==="style"){let u=n.target.sheet;u&&this.Or(u)}break}case"characterData":{let c=this.At(o);if(c.type===et.TEXT_NODE&&(c.data=n.target.data,((e=n.target.parentElement)===null||e===void 0?void 0:e.localName)==="style")){c.data="";let l=(i=n.target.parentElement)===null||i===void 0?void 0:i.sheet;l&&this.Or(l)}break}case"attributes":{let c=s.stringifyAttrKey(n.attributeNamespace,n.attributeName),l=n.target,h=this.At(o),u=l.getAttributeNS(n.attributeNamespace,n.attributeName);h.attributes=h.attributes||{},u===null?delete h.attributes[c]:h.attributes[c]=u;break}case"state":{let c=this.At(o);c.type===et.DOCUMENT_NODE?Object.assign(c,this.Op(n.target)):c.state=this.Np(n.target);break}case"setAdoptedStyleSheets":{this.xp(n.target);break}case"styleSheetUpdated":{this.Or(n.target);break}case"styleSheetDisabledChanged":{let c=this.At(o);c.disabled=n.target.disabled;break}case"loaded":{switch(n.target.localName){case"link":{let c=n.target;c.rel==="stylesheet"&&c.sheet&&this.Or(c.sheet);break}case"iframe":{let c=n.target,l=this.At(o),h=c.contentDocument,u=h&&q(h);l.contentDocument&&l.contentDocument!==u&&(this.Ph(l.contentDocument),delete l.contentDocument),this.Lp(c)&&this.La(h);break}}break}case"activeElementChanged":{let c=this.At(o),l=n.target.activeElement||void 0;c.activeId=l&&q(l);break}case"pointerOverElement":{let c=this.At(o),l=n.element||void 0;c.hoveredId=l&&q(l);break}case"customElementRegistration":{this.Up(o,n.name);break}case"metadataChanged":{let c=this.At(o);c&&(c.metadata=ts(rs.getAll(n.target)));break}}}}}return s.trackIframeContent=!1,s.cloneDeep=ts,s})(),bm=(()=>{class s extends Ls{constructor(t){super(),this.Q=t}isListening(t){return t.type==="DOM_INITIAL_STATE"||cs.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){if(cs.isDOMEvent(t))t.initialDOM.baseURI=this.Q.anonymizeUrl(t.initialDOM.baseURI);else for(let e of qn.findNodes(t.state,i=>i.type===et.DOCUMENT_NODE))e&&e.type===et.DOCUMENT_NODE&&(e.baseURI=this.Q.anonymizeUrl(e.baseURI));return t}}return Oe([jt("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Tm="textarea",Rm=(()=>{class s extends Ls{isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||cs.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this._w(t),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.Aw(t);break;case"characterDataChanged":this.bw(t);break}return t}_w(t){let e=t.type==="DOM_PATCH"?t.diff:t.state,i=t.state;for(let n in e){let o=e[n],c=i[n];if(!c.parent||!("data"in o)||c.type!==3)continue;let l=i[c.parent];this.jp(o,c.metadata,l.localName)}}Aw(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)it.traverse(i,(n,o)=>{var c;let l=(c=o==null?void 0:o.localName)!==null&&c!==void 0?c:t.targetLocalName,h=n.props;n.nodeType===3&&this.jp(n,h,l)})}jp(t,e,i){this.Hp(i,e)&&(t.data=this.Bp(t.data))}bw(t){this.Hp(t.parentLocalName,t.targetProps)&&(t.newValue=this.Bp(t.newValue))}Bp(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}Hp(t,e){return t===Tm||(e==null?void 0:e[Je.EDITABLE_NODE_PROP])===!0}}return Oe([jt("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Cm=(()=>{class s extends le{async onStart(){this.Nr&&this.Nr.disconnect(),this.Nr=new qn().observe(document);let t=await this.Nr.getStateAsync();this.produceEvent({type:"DOM_INITIAL_STATE",state:qn.cloneDeep(t)}),this.zn=this.Nr.onChange((e,i)=>{this.produceEvent({type:"DOM_PATCH",diff:e,state:i})})}onStop(){var t;(t=this.zn)===null||t===void 0||t.call(this)}destroy(){var t;(t=this.Nr)===null||t===void 0||t.disconnect(),this.Nr=void 0}}return s})(),yl=!0,dr=csSymbol("safe"),Ha=csSymbol("task");function Vt(s,r=yl){var t;(t=s[dr])!==null&&t!==void 0||(s[dr]=function(e){let i=arguments;Ms(()=>(e[Ha]=Ht,s.listener.apply(s.boundElement,i)),[ye.EventListener,s.type],e[Ha])}),s.boundElement.addEventListener(s.type,s[dr],r)}function Ut(s,r=yl){s.boundElement.removeEventListener(s.type,s[dr],r)}var Im=(()=>{class s{constructor(t){this.R=t,this.te={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.R=t}observe(){Vt(this.te),this.Oh()}Oh(){this.resizeListener()}disconnect(){Ut(this.te)}resizeListener(){let t={width:yt.windowWidth(),height:yt.windowHeight()};this.R(t)}}return ht([x("resize")],s.prototype,"resizeListener",null),s})(),Ke=(()=>{let s;return function(r){r.PORTRAIT="Portrait",r.LANDSCAPE="Landscape"}(s||(s={})),s})(),ir=(()=>{let s;return function(r){r.PORTRAIT_PRIMARY="portrait-primary",r.PORTRAIT_SECONDARY="portrait-secondary",r.LANDSCAPE_PRIMARY="landscape-primary",r.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),rr=(()=>{let s;return function(r){r[r.PORTRAIT=0]="PORTRAIT",r[r.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",r[r.LANDSCAPE=-90]="LANDSCAPE",r[r.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),Pm=(()=>{let s;return function(r){let t=null;r.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=rt.screen)===null||c===void 0)&&c.orientation)},r.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in rt;function e(){return Ke.LANDSCAPE}function i(){var c;switch((c=rt.screen.orientation)===null||c===void 0?void 0:c.type){case ir.PORTRAIT_PRIMARY:case ir.PORTRAIT_SECONDARY:return Ke.PORTRAIT;case ir.LANDSCAPE_PRIMARY:case ir.LANDSCAPE_SECONDARY:return Ke.LANDSCAPE;default:return Ke.PORTRAIT}}function n(){switch(window.orientation){case rr.PORTRAIT:case rr.PORTRAIT_REVERSE:return Ke.PORTRAIT;case rr.LANDSCAPE:case rr.LANDSCAPE_REVERSE:return Ke.LANDSCAPE;default:return Ke.PORTRAIT}}function o(){return r.isScreenOrientationApiSupported()?i():r.isDeprecatedScreenOrientationApiSupported()?n():e()}r.getCurrentOrientation=o}(s||(s={})),s})(),Om=(()=>{class s extends le{constructor(){super(...arguments),this.Nh=null,this.Mh=null,this.li=new Im(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=Pm.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.Tw(t);if(e!==this.Nh||i!==this.Mh){this.Nh=e,this.Mh=i;let n={type:"screenResize",width:e,height:i};this.produceEvent(n)}}Tw(t){let e,i,n=yt.screenWidth(),o=yt.screenHeight();return t===Ke.PORTRAIT?(e=n,i=o):(e=Math.max(n,o),i=Math.min(n,o)),{screenWidth:e,screenHeight:i}}onStart(){this.li.observe()}onStop(){this.Nh=null,this.Mh=null,this.li.disconnect()}}return s})();function Nm(s){let r=csEventtarget.apply(s);return r&&ct(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}var Os=(()=>{class s{get selectors(){return this.Qe===""?null:this.Qe}constructor(t,e={closest:!1}){this.R=t,this.Nt=e,this.Qe="",this.Gn=new Dr,this.Pr=Ds(i=>{if(this.Qe==="")return;let n=[];for(let o of _c(i,c=>c.addedNodes)){if(!(Qu(o)||this.Nt.closest&&Qs(o)))continue;let c=this.Nt.closest?this.Rw(o,this.Qe):this.findMatchingElements(o,this.Qe);ra(c,n)}n.length&&this.R(n,"added")},"SelectorObserver.processMutations"),this.Cw=(i,n)=>{if(this.Qe===""||n!=="added")return;let o=this.findMatchingElements(i,this.Qe);o.length&&this.R(o,"added")},this.G=new Ne(this.Pr,this.Cw)}observe(t){this.Qe===""?this.G.observe():this.Qe+=",",this.Qe+=t;let e=this.findMatchingElements(document,t);for(let i of this.G.shadowRoots){let n=this.findMatchingElements(i,t);ra(n,e)}e.length&&(Z(e,i=>{this.Gn.add(i)}),this.R(e,"initial"))}processPendingMutations(){this.Pr(this.G.takeRecords())}disconnect(){this.G.disconnect(),this.Gn.clear(),this.Qe=""}Rw(t,e){let i=[];if(Qs(t)){if(t.parentElement){let n=Un(t.parentElement,e);n&&csArray.prototype.push.call(i,n)}return csArray.prototype.filter.call(i,n=>this.Gn.has(n)===!1)}else{if(Rr(t)){let n=Un(t,e);if(n)return csArray.prototype.push.call(i,n),csArray.prototype.filter.call(i,o=>this.Gn.has(o)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=Js(window.csquerySelectorAll[t.nodeType].call(t,e));return ct(t)&&Ft.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,n=>this.Gn.has(n)===!1)}}return ht([x()],s.prototype,"observe",null),ht([x()],s.prototype,"disconnect",null),ht([jt("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})(),Mm=(()=>{class s extends le{constructor(){super(),this.Fp=t=>{let e=Nm(t);e&&this.Dh(e,t.type)},this.Ee=new xs((t,e)=>{switch(e){case"initial":case"added":this.$p(t);break;case"removed":this.zp(t);break}}),this.W=new Os((t,e)=>{(e==="initial"||e==="added")&&this.Iw(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&ft.isConnected(t)&&!D.isMaskedElement(t)&&!D.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.$p(document),this.Ee.observe(),this.W.observe("video")}onStop(){this.zp(document),this.Ee.disconnect(),this.W.disconnect()}Dh(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let n=q(t),o={type:"VideoEvent",videoEventType:i,nodeId:n};i==="seeked"&&(o.newTimePositionInSec=t.currentTime),co(()=>this.produceEvent(o))}}Iw(t){for(let e of t)this.Dh(e,"seeked"),s.isPlaying(e)&&this.Dh(e,"play")}$p(t){for(let e of["play","pause","seeked"])Vt({type:e,listener:this.Fp,boundElement:t})}zp(t){for(let e of["play","pause","seeked"])Ut({type:e,listener:this.Fp,boundElement:t})}}return s})();function Dm(s){return s.nodeName==="SELECT"}function Co(s){return s.nodeName==="INPUT"}function km(s){return s.nodeName==="TEXTAREA"||Co(s)&&!El(s)&&!vl(s)}function El(s){return Co(s)&&s.type==="number"}function vl(s){return Co(s)&&(s.type==="checkbox"||s.type==="radio")}var xm=(()=>{class s extends le{constructor(t,e=[]){super(),this.ut=t,this.Pw=e,this.kh=new Rg("low"),this.Mr=i=>this.inputHandler(i),this.hi=[],this.xh=new Map,this.Ow(),this.Nw(),this.W=new Os(i=>{for(let n of i){if(n instanceof HTMLInputElement)for(let o of this.Pw)this.Mw(n,o);this.Lh(n)&&Yt(()=>{this.Vh(n,q(n))},"low")}}),this.Ee=new xs((i,n)=>{switch(n){case"initial":case"added":Vt({type:"change",listener:this.Mr,boundElement:i});break;case"removed":Ut({type:"change",boundElement:i,listener:this.Mr});break}})}Mw(t,e){let i=this.xh.get(e);if(!i)i=new WeakSet,this.xh.set(e,i);else if(i.has(t))return;i.add(t);let n=bg(t,e,(o,c,l)=>{l!==c&&ft.isConnected(o)&&this.Gp(o)});n&&(this.isStarted&&n.activate(),csArray.prototype.push.call(this.hi,n))}onStart(){Vt({type:"keyup",boundElement:document,listener:this.Mr}),Vt({type:"change",boundElement:document,listener:this.Mr}),Z(this.hi,t=>t.activate()),this.W.observe(csArray.prototype.join.call(s.Dw,",")),this.Ee.observe()}onStop(){Ut({type:"keyup",boundElement:document,listener:this.Mr}),Ut({type:"change",boundElement:document,listener:this.Mr}),Z(this.hi,t=>t.deactivate()),this.W.disconnect(),this.Ee.disconnect(),this.kh.clear(),this.xh.clear()}Vh(t,e){var i,n,o;if(this.kh.has(t))return;if(this.kh.add(t),Dm(t)){let h={type:"InputEvent",inputType:"select",target:q(t),selectedIndex:t.selectedIndex,timestamp:P.now()};this.produceEvent(h);return}if(vl(t)){let h={type:"InputEvent",inputType:"checkable",target:q(t),checked:t.checked,timestamp:P.now()};this.produceEvent(h);return}let c=km(t),l=El(t);if(c||l){let h=(i=t.value)!==null&&i!==void 0?i:"";if(!((n=this.ut)===null||n===void 0)&&n.shouldEncrypt(t)){(o=this.ut)===null||o===void 0||o.registerInputNodeToEncrypt({targetId:e,targetValue:h,date:P.now()});return}let u=l?"0":"\u2022",f={type:"InputEvent",inputType:"text",target:q(t),value:csString.prototype.replace.call(h,/\S/g,u),timestamp:P.now()};this.produceEvent(f)}}inputHandler(t){if(!this.isStarted)return;let e=St(t),i=q(e);!i||!this.Lh(e)||ft.isConnected(e)&&Yt(()=>{this.Vh(e,i)},"low")}Ow(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}Nw(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let n=Ai(t.prototype,e,(o,c,l)=>{if(l!==c&&ft.isConnected(o)){let h=i?o.parentElement:o;this.Gp(h)}});n&&csArray.prototype.push.call(this.hi,n)}Lh(t){return!D.isMaskedElement(t)&&!D.isMaskedElementChild(t)&&(Ni(t)||fo(t)||Ir(t))}Gp(t){if(this.isStarted&&ft.isConnected(t)){let e=q(t);e&&this.Lh(t)&&Yt(()=>{this.Vh(t,e)},"low")}}}return s.Dw=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],Oe([It()],s.prototype,"inputHandler",null),Oe([x()],s.prototype,"trackChanges",null),s})();var Lm=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.fi=[],this.lt=[],this.kw=t}next(t){this.lt.length===this.kw&&csArray.prototype.shift.call(this.lt),csArray.prototype.push.call(this.lt,t),this.lt.length===1&&csSetTimeout(()=>this.clear());for(let e of this.fi)e(t)}subscribe(t){if(Zs(this.fi,i=>t===i))return()=>{this.fi=csArray.prototype.filter.call(this.fi,i=>i!==t)};csArray.prototype.push.call(this.fi,t);for(let i of this.lt)t(i);return()=>{this.fi=csArray.prototype.filter.call(this.fi,i=>i!==t)}}clear(){this.lt=[]}hasObservers(){return this.fi.length>0}}return s})(),Sl=(()=>{var s;class r{constructor(e){this.R=e}observe(){this.xw=s.qn.subscribe(e=>this.R(e)),s.Va||(s.Va=!0,s.Un.observe(),se(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.xs.add(i),s.qn.next(i)}))}disconnect(){s.Va&&(this.xw(),s.qn.hasObservers()||(s.Va=!1,s.Un.disconnect(),s.qn.clear(),s.xs.clear()))}}return s=r,r.xs=new Dr,r.qn=new Lm,r.Lw=Ds(t=>{Yt(()=>{for(let e of t)e.type==="childList"&&Z(e.addedNodes,i=>{se(i,NodeFilter.SHOW_ELEMENT).visitAll(o=>{s.xs.has(o)||(s.xs.add(o),s.qn.next(o))})})})},"ElementObserver.findAllElements"),r.Va=!1,r.Un=new Ne(s.Lw),ht([x()],r.prototype,"observe",null),ht([x()],r.prototype,"disconnect",null),r})(),Vm=(()=>{class s extends le{constructor(){super(),this.Ls=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.Vw=Rs("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)D.isMaskedElement(i)||D.isMaskedElementChild(i)||td(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=kr(this.Vw);this.Wn=new Sl(e=>t.push(e)),this.ci=new Set}onStart(){this.Ls&&this.Wn.observe()}onStop(){this.ci.clear(),this.Wn.disconnect()}async register(t){this.ci.has(t)||(this.ci.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}return Oe([x()],s.prototype,"register",null),s})(),Ba=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static qp(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.Uw(t))}static Uw(t){let i=t.getEntriesByType("navigation")[0];i&&(this.Bi=i,s.Dr(i))}static Mn(t){this.jw(t),this.Bi&&t(this.Bi),this.ze||this.Hw()}static jw(t){this.Vt.add(t)}static Bw(t){this.Vt.delete(t)}static Hw(){if(this.Yn||(this.Yn=this.qp()),!this.Yn){this.Bi||(this.Bi={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.Dr(this.Bi);return}this.Yn.observe({type:"navigation",buffered:!0}),this.ze=!0}static Dr(t){this.Vt.forEach(e=>e(t))}static kn(t){this.Bw(t),this.Vt.size===0&&this.Xn()}static Xn(){var t;this.ze&&((t=this.Yn)===null||t===void 0||t.disconnect(),this.ze=!1,this.Bi=null,this.Yn=this.qp())}constructor(t){this.R=t}observe(){s.Mn(this.R)}disconnect(){s.kn(this.R)}}return s.ze=!1,s.Vt=new Set,s.Bi=null,s})(),Um=(()=>{class s extends le{constructor(){super(...arguments),this.Ua=null,this.Wp=new Ba(t=>{if(this.Ua)return;let e=this.Fw(t);e&&(this.Ua=e,this.produceEvent(e))})}onStart(){if(this.Ua){this.produceEvent(this.Ua);return}this.Wp.observe()}onStop(){this.Wp.disconnect()}Fw(t){let e=Ba.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:P.now()}}}return s})(),_t=(()=>{let s;return function(r){r[r.TAP=0]="TAP",r[r.LONG_PRESS=1]="LONG_PRESS",r[r.DRAG=2]="DRAG",r[r.FLICK=3]="FLICK",r[r.PINCH_IN=4]="PINCH_IN",r[r.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),nr=(()=>{let s;return function(r){r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r[r.LEFT=3]="LEFT",r[r.RIGHT=4]="RIGHT"}(s||(s={})),s})(),jm=(()=>{class s{compute(t,e){let i=this.pi(e.x)-this.pi(t.x),n=this.pi(e.y)-this.pi(t.y),o=e.time-t.time;return{duration:o,distance:this.Yp(i,n),direction:this.$w(i,n),velocity:this.zw(i,n,o)}}computePinchMetrics(t,e){let i=this.pi(e.x)-this.pi(t.x),n=this.pi(e.y)-this.pi(t.y);return{duration:e.time-t.time,distance:this.Yp(i,n)}}getScale(t,e){return Math.abs(e/t-1)}pi(t){return t/window.devicePixelRatio}Yp(t,e){return Math.round(Math.sqrt(t*t+e*e))}zw(t,e,i){let n=i/1e3,o=t/n,c=e/n;return Math.round(Math.abs(o)+Math.abs(c))}$w(t,e){return Math.abs(t)>Math.abs(e)?t>0?nr.RIGHT:nr.LEFT:e>0?nr.DOWN:nr.UP}}return s})(),_l=typeof performance!="undefined"&&!!performance.now,Fa=_l?()=>performance.now():()=>csDate.now(),Hm=(()=>{var s;return _l?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),or={now(){return Math.round(Fa()+Hm)},elapsed(){return Fa()}};function $a(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var Bm=1e3,Fm=100,$m=.1,Wn=(()=>{class s{constructor(){this.ee={},this.Uh=()=>{},this.ja=new jm,this.De()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.Uh=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.Gw(t))return;this.qw(t)&&this.De();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:or.now()};if(t.touches.length===1)this.ee.startPinchTime=e.time,this.ee.firstTouch=e;else if(t.touches.length===2&&(this.ee.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:or.now()},this.ee.firstTouch&&this.ee.secondTouch)){let i=this.ja.computePinchMetrics(this.ee.firstTouch,this.ee.secondTouch);this.kr=i.distance}csArray.prototype.push.call(this.Kn,e),this.Ha=St(t)}processActionMove(){this.jh=!0}processActionUp(t){if(this.Ww(t)){if(csArray.prototype.push.call(this.Kn,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:or.now()}),this.Yw(t)&&this.ee.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.ee.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:or.now()};this.ee.firstTouch&&(this.ee.firstTouch=e,this.ee.secondTouch=i),this.Xw(t)}this.kr||this.Kw()&&this.Jw(t)}}De(){this.Kn=[],this.Ha=null,this.jh=!1,this.kr=null,this.Jn=!0}Jw(t){let e=this.ja.compute(this.Kn[0],this.Kn[1]);this.Jn=t.isTrusted;let i=this.jh?this.Qw(e):this.Zw(e);if(this.tA(i.type,t.changedTouches)){let n=t.changedTouches[0];i.pageX=$a(n.pageX,1),i.pageY=$a(n.pageY,1)}this.Uh(i,t)}Xw(t){if(!(this.ee.firstTouch&&this.ee.secondTouch))return;let e=this.ja.computePinchMetrics(this.ee.firstTouch,this.ee.secondTouch);this.Jn=t.isTrusted;let i=this.eA(e);i&&this.Uh(i,t)}eA(t){return!this.kr||this.ja.getScale(this.kr,t.distance)<$m?void 0:{type:this.kr>t.distance?_t.PINCH_IN:_t.PINCH_OUT,target:this.Ha,distance:t.distance,isTrusted:this.Jn}}Qw(t){return{type:t.velocity<Fm?_t.DRAG:_t.FLICK,target:this.Ha,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.Jn}}Zw(t){return{type:t.duration<Bm?_t.TAP:_t.LONG_PRESS,target:this.Ha,isTrusted:this.Jn}}tA(t,e){return t===_t.TAP&&e&&e.length===1}qw(t){return t.touches.length===1}Kw(){return this.Kn.length===2}Gw(t){return t.touches.length>0}Ww(t){return t.changedTouches.length>0}Yw(t){return this.jh&&!!this.kr&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),zm="touchstart",Gm="touchmove",qm="touchend",Wm=(()=>{class s{constructor(t){this.R=t}observe(){s.Xp&&s.Hh(this.R)}disconnect(){s.Xp&&s.zn(this.R)}static sA(t,e){csArray.prototype.forEach.call(as(s.Vt),i=>i(t,e))}static Hh(t){s.Vt.has(t)||(s.Vt.add(t),s.Vt.size===1&&(s.Qn.onGesture(s.sA),csArray.prototype.forEach.call(s.gi,e=>Vt(e))))}static zn(t){s.Vt.delete(t),s.Vt.size===0&&csArray.prototype.forEach.call(s.gi,e=>Ut(e))}static Bh(t){if(s.Qn.isValidTouchEvent(t))switch(t.type){case"touchstart":s.Qn.processActionDown(t);break;case"touchmove":s.Qn.processActionMove();break;case"touchend":s.Qn.processActionUp(t);break}}}return s.gi=[{boundElement:rt.document,type:zm,listener:r=>s.Bh(r)},{boundElement:rt.document,type:Gm,listener:r=>s.Bh(r)},{boundElement:rt.document,type:qm,listener:r=>s.Bh(r)}],s.Xp=Wn.isGestureDetectionSupported(),s.Vt=new Set,s.Qn=new Wn,s})(),Ym=(()=>{class s extends le{constructor(){super(),this.Zn=new Wm(this.Fh.bind(this))}onStart(){this.Zn.observe()}onStop(){this.Zn.disconnect()}Fh(t){let e=this.iA(t);e&&this.produceEvent(e)}iA(t){return this.rA(t)?{type:"Gesture",targetId:q(t.target),data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}rA(t){return t.target!==null&&!(ct(t.target)&&D.isMaskedElementChild(t.target))}}return s})(),wl=(()=>{class s{constructor(t){this.R=t,this.mi=!1,this.te={boundElement:rt,type:"error",listener:e=>this.nA(e)}}observe(){Vt(this.te,this.mi)}disconnect(){Ut(this.te,this.mi)}nA(t){this.R(t)}}return s})(),Xm=(()=>{class s extends le{constructor(){super(...arguments),this.Kp=new wl(t=>this.oA(t))}oA({message:t,filename:e,lineno:i,colno:n}){t=t!=null?t:"[NO ERROR MESSAGE]",e=!e||Jt(e)?"":e,this.produceEvent({type:"JSError",message:t,filename:e,lineno:i,colno:n})}onStart(){this.Kp.observe()}onStop(){this.Kp.disconnect()}}return s})(),Km=(()=>{class s extends Ls{constructor(t){super(),this.aA=t,this.$h=1024,this.zh=150}isListening(t){return t.type==="JSError"}processEvent(t){return t.message=K.truncate(t.message,this.$h,K.ELLIPSIS),t.filename=K.truncate(t.filename,this.zh,K.ELLIPSIS),this.aA(t)}}return s})();var qs=[],Yn=!1,Al=Ds(Qm,"executeTasks");function Jm(s){if(csArray.prototype.push.call(qs,s),!Yn){for(let r=0;r<3;r++)csSetTimeout(Al);Yn=!0}}function Qm(){let s=csDate.now();for(let r=0;r<qs.length;r++)if(qs[r](),csDate.now()-s>=35){qs=csArray.prototype.slice.call(qs,r+1),csSetTimeout(Al);return}qs=[],Yn=!1}var We=(()=>{let s;return function(r){r[r.Started=0]="Started",r[r.Stopped=1]="Stopped",r[r.Processing=2]="Processing",r[r.Completed=3]="Completed"}(s||(s={})),s})(),bl=(()=>{class s{constructor(){this.wt=new Pi,this.xt=We.Stopped,this.R=null,this.Qp=t=>{this.xt===We.Stopped||!t||(this.R(t),this.Zp())}}get queueLength(){return this.wt.length}start(t){if(this.R)throw new Error("callback already set");this.xt=We.Started,this.R=t}push(t){this.wt.push(t),this.uA()}stop(){this.R=null,this.xt=We.Stopped,this.wt.clear()}static pipe(t,e){let i=t,n=new csArray;for(let c of e){let l=new s;l.start(h=>{c.pushEvent(h)}),csArray.prototype.push.call(n,l),Z(i,h=>h.subscribe(u=>l.push(u))),i=[c]}let o=new Zm(n);return Z(i,c=>c.subscribe(l=>o.push(l))),o}tg(){return this.xt===We.Stopped}ys(){return this.xt===We.Processing}Zp(){if(!this.tg()){if(this.wt.isEmpty){this.xt=We.Completed;return}this.xt=We.Processing,Jm(()=>{let t=this.wt.pop();t instanceof bi?t.complete(this.Qp):this.Qp(t)})}}uA(){this.tg()||this.ys()||this.Zp()}}return s})(),Zm=(()=>{class s extends bl{constructor(t){super(),this.eg=t}get queueLength(){return csArray.prototype.reduce.call(this.eg,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),Z(this.eg,t=>t.stop())}}return s})(),ty=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.X=!1,this.Vt=[]}get pendingEvents(){var t,e;return(e=(t=this.wt)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.X)throw new Error("Recording is already started.");let t=this.Vt;this.wt=bl.pipe(this.producers,this.processors),this.wt.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),Z(this.producers,e=>e.start()),Z(this.processors,e=>e.start()),this.X=!0}stop(){this.wt.stop(),this.Vt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.X=!1,this.Vt=[]}subscribe(t){if(this.X)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.Vt,t),()=>this.Vt=csArray.prototype.filter.call(this.Vt,e=>e!==t)}}return s})(),ey=2,Io=(()=>{class s{constructor(t){this.dA=t,this.Ba=0}addString(t){this.Ba+=t.length*ey}addArrayBuffer(t){this.Ba+=t.byteLength}isThresholdReached(){return this.Ba>this.dA}reset(){this.Ba=0}}return s})(),sy=(()=>{class s{constructor(t){this.Fa={},this.ke=new Io(t)}save({key:t,metadata:e,events:i}){this.ke.isThresholdReached()||(this.ke.addString(t),typeof i=="string"?this.ke.addString(i):this.ke.addArrayBuffer(i),!this.ke.isThresholdReached()&&(this.Fa[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.fA(),i=>{let n=this.Fa[i];n!==void 0&&(delete n.metadata.datatype,csArray.prototype.push.call(e,n),this.pA(i))}),e.length!==0&&(t(e),this.ke.reset())}fA(){return Object.keys(this.Fa)}pA(t){delete this.Fa[t]}}return s})(),Ye=(()=>{let s;return function(r){r[r.NOT_STARTED=0]="NOT_STARTED",r[r.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",r[r.OPEN_FAILED=2]="OPEN_FAILED",r[r.READY=3]="READY"}(s||(s={})),s})(),iy=(()=>{class s{constructor(t,e,i){this.xr=t,this.gA=i,this.Fi=Ye.NOT_STARTED,this.$a=[],this.Yh=0,this.mA=self.origin,this.xe=typeof window=="object"?"":"worker-",this.ke=new Io(e),this.uh()}async uh(){await this.sg(),this.Fi===Ye.READY?this.yA():this.gA(this.$a)}yA(){csArray.prototype.forEach.call(this.$a,t=>{this.save(t)}),this.$a=[]}async save(t){try{if(this.Fi===Ye.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.$a,t);return}if(this.Fi!==Ye.READY||this.ke.isThresholdReached())return;let{key:e,metadata:i,events:n}=t;if(this.ke.addString(e),typeof n=="string"?this.ke.addString(n):this.ke.addArrayBuffer(n),this.ke.isThresholdReached())return;await this.ae.put(`${this.mA}/${e}`,new Response(n,{headers:i}))}catch{}}async recover(t){!this.ae&&(await this.sg(),this.Fi!==Ye.READY)||this.EA(t)}async sg(){try{this.Fi=Ye.OPEN_IN_PROGRESS,this.ae=await self.caches.open(`${this.xe}${this.xr}`),this.Fi=Ye.READY}catch{this.Fi=Ye.OPEN_FAILED}}async EA(t){try{if(this.Yh++,this.Yh>1)return;let e=await this.ae.keys();if(e.length===0)return;let i=await this.ae.matchAll(),n=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((u,f)=>{l[f]=u}),delete l["content-type"];let h=l.datatype;return delete l.datatype,h==="json"||h==="base64"?c.text().then(u=>({metadata:l,events:u})):c.arrayBuffer().then(u=>({metadata:l,events:u}))}),o=await Promise.all(n);await Promise.all(csArray.prototype.map.call(e,c=>this.ae.delete(c))),t(o),this.ke.reset()}catch{}finally{this.Yh--}}}return s})(),ry=(()=>{class s{constructor(t){try{this.vA(t)}catch{this.Xh()}}vA(t){self.caches?this.SA(t):this.Xh()}save(t){this.za.save(t)}recover(t){this.za.recover(t)}SA(t){this.za=new iy(t,s.ig,e=>{this.Xh(e)})}Xh(t){this.za=new sy(s.ig),t&&csArray.prototype.forEach.call(t,e=>{this.za.save(e)})}}return s.ig=1024*1024*16,s})(),Tl=(()=>{class s{constructor(t){this.rg=[],this.ng=[],this.Ze={},this.to=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.Ze[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.Ze[e]}):this.Ze={}}onBeaconSuccess(t){csArray.prototype.push.call(this.rg,t)}onBeaconFailure(t){csArray.prototype.push.call(this.ng,t)}send(t){let e=Si.toQuery({...this.Ze,ct:Di.UNCOMPRESSED}),i=this._A(e,t);return i?csArray.prototype.forEach.call(this.rg,n=>n()):csArray.prototype.forEach.call(this.ng,n=>n(this.Ze)),i}_A(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.to}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.to}?${t}`,e||"")}}return s})(),ny=(()=>{class s{constructor(t,e){this.w=t,this.C=e,this.eo=qt.ETR_DISABLED,this.Ga=qt.ETR_PENDING,this.Kh=!0}getEtrStatus(t){t===void 0&&(t=this.C.getSession());let e=t==null?void 0:t.etrStatus;return this.og()&&e===qt.ETR_SAVED_SESSION?e:this.eo}onEventTriggerRecording(t,e){switch(e){case ns.ETR_PAGE:this.ag(qt.ETR_SAVED_PAGE);break;case ns.ETR_LEGACY:case ns.ETR_SESSION:this.ag(qt.ETR_SAVED_SESSION);break}}onCollectStateChange(t,e){t===N.RECORDING_TEMPORARILY?this.Kh=!0:this.Kh=!1,t===N.ANALYTICS_ONLY&&e===Zt.ETR_ON?this.cg(this.Ga):this.cg(qt.ETR_DISABLED)}cg(t){this.eo=t,this.Ga=qt.ETR_PENDING,this.lg(t),this.w.emitRecordingContextChange()}ag(t){this.Kh?Number(t)>Number(this.Ga)&&(this.Ga=t):this.og()&&Number(t)>Number(this.eo)&&(this.eo=t,this.lg(t),this.w.emitRecordingContextChange())}lg(t){let e=this.C.getSession();e!==null&&e.etrStatus===qt.ETR_NOT_SAVED_SESSION&&t===qt.ETR_SAVED_SESSION&&(e.etrStatus=t,this.C.setSession(e))}og(){return this.eo!==qt.ETR_DISABLED}}return s})(),oy=(()=>{class s{constructor(t=100){this.wA=t,this.qa={},this.so=null,this.vh="original-resource-name"}onEvent(t){this.AA=t}processEvent(t){this.bA(t.resourceId,t.resource.hash,t.originalResourceName),this.TA(t)}flushEvents(){this.so&&csClearTimeout(this.so),this.hg()}onSendStaticResource(t){this.TA=t}hg(){if(!Object.keys(this.qa).length)return;let t={type:M.RESOURCE_HASHES,date:P.now(),args:[this.qa]};this.so=null,this.qa={},this.AA(t)}bA(t,e,i){let n=e;i&&(n+=`?${this.vh}=${i}`),this.qa[t]=n,!this.so&&(this.so=window.csSetTimeout(()=>this.hg(),this.wA))}}return s})();function ay(s,r,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,n={type:M.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(n);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{r({type:M.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)r({type:M.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{r({type:M.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:n,attribute:o,newValue:c}=s;r({type:M.MUTATION_ATTRIBUTE,date:e,args:[i,n,o,c]});break}case"characterDataChanged":{let{target:i,newValue:n}=s;r({type:M.MUTATION_CHARACTER_DATA,date:e,args:[i,n]});break}case"cssRuleInserted":{let{target:i,rule:n,index:o}=s,c=Q(o)?[i,n,o]:[i,n];r({type:M.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:n}=s;r({type:M.STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"cssRuleUpdated":{let{target:i,rule:n,index:o}=s;r({type:M.STYLESHEET_RULE_UPDATE,date:e,args:[i,n,o]});break}case"cssStyleSheetDisabled":{let{target:i,disabled:n}=s;r({type:M.STYLESHEET_DISABLED,date:e,args:[i,n]});break}case"shadowRootAttached":{let{target:i,shadowRoot:n}=s;r({type:M.ATTACH_SHADOW,date:e,args:[i,n]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:n,disabled:o}=s;r({type:M.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:n,disabled:o}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:n}=s;r({type:M.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:n,index:o}=s,c=Q(o)?[i,n,o]:[i,n];r({type:M.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:n}=s;r({type:M.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:n,index:o}=s,c=[i,n,o];r({type:M.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}case"adoptedStyleSheetDisabled":{let{sheetId:i,disabled:n}=s,o=[i,n];r({type:M.ADOPTED_STYLESHEET_DISABLED,date:e,args:o});break}default:F.error("translateDOMEvent: DOMEvent not supported");break}}function cy(s){let r=ly(s.data);return{type:M.GESTURE_RECOGNITION,args:[s.targetId,r],date:s.timestamp}}function ly(s){let r={type:hy(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(r[t]=e)}return r}function hy(s){switch(s){case _t.DRAG:case _t.FLICK:return li.SWIPE;case _t.LONG_PRESS:return li.LONG_PRESS;case _t.TAP:return li.TAP;case _t.PINCH_IN:return li.PINCH_IN;case _t.PINCH_OUT:return li.PINCH_OUT}}function uy(s){switch(s.inputType){case"text":return{type:M.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:M.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:M.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var dn=(()=>{let s;return function(r){r.REQUEST_START="requestStart",r.DOM_INTERACTIVE="domInteractive",r.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})(),Rl={connectEnd:"ce",connectStart:"cs",decodedBodySize:"dbs",domainLookupEnd:"dle",domainLookupStart:"dls",duration:"d",fetchStart:"fs",initiatorType:"it",name:"n",nextHopProtocol:"nhp",redirectEnd:"re",redirectStart:"rs",requestStart:"rqs",responseEnd:"rse",responseStart:"rss",responseStatus:"rst",secureConnectionStart:"scs",startTime:"st",transferSize:"ts"},dy={...Rl,domComplete:"dc",domContentLoadedEventEnd:"dclee",domContentLoadedEventStart:"dcles",domInteractive:"di",loadEventEnd:"lee",loadEventStart:"les",type:"t"};function fy(s){return{type:M.PERFORMANCE_TIMINGS,args:[{performanceTiming:dn.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:dn.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:dn.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}var py=500,fn=0;function gy(){return{processEvent(s,r){if(s.originalEvent.type===M.PERFORMANCE_RESOURCE_TIMING)return fn>=py?null:(fn+=1,r({...s.originalEvent,date:s.timestamp}));r(s.originalEvent)},reset(){fn=0}}}function za(s){let r=s.type==="DOM_INITIAL_STATE"?s.state:s.diff;for(let t in r){let e=r[t];e&&(delete e.parent,delete e.previousSibling,delete e.metadata)}return s}function my(s,r){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===r.batchSize){this.flush();return}r.autoFlushDelay&&r.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},r.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var yy=20;function Ey(s){return my(r=>{let t={visibleInViewPort:r},e={type:M.TEXT_VISIBILITY,date:P.now(),args:[t]};s(e)},{batchSize:yy,autoFlushDelay:1e3})}function vy(s){switch(s.videoEventType){case"play":return{type:M.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:M.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let r=s;return{type:M.VIDEO_SEEK,args:[r.nodeId,r.newTimePositionInSec],date:s.timestamp}}default:return null}}var Sy=(()=>{class s{get pendingEvents(){return this.Wa.pendingEvents}constructor(t,e,i,n,o){this.Wa=t,this.w=e,this.Le=i,this.Es=n,this.vs=o,this.se=()=>{},this.io=()=>{},this.ug=Ey(c=>this.se(c))}start(){var t,e;this.dg=gy(),this.Wa.subscribe(i=>{var n,o,c,l,h,u,f;let y=i,{timestamp:m}=y;switch(y.type){case"Legacy":{let v=y.eventType==="user"?(n=this.io)!==null&&n!==void 0?n:()=>{}:this.se;this.dg.processEvent(y,v)}break;case"CustomElementRegistration":{this.se({type:M.CUSTOM_ELEMENT_REGISTRATION,date:m,args:[y.tagName]});break}case"DomEvent":{ay(y,this.se,this.w);break}case"InputEvent":{let v=uy(y);(o=this.io)===null||o===void 0||o.call(this,v);break}case"inputEncryptedText":{let{target:v,value:T,encryptedData:C,encryptionMetadata:w}=y;(c=this.io)===null||c===void 0||c.call(this,{type:M.INPUT_ENCRYPTED_TEXT,date:m,args:[v,T,C,w]});break}case"encryptedCharacterDataChanged":{let{target:v,rawData:T,encryptedData:C,encryptionMetadata:w}=y;this.se({type:M.MUTATION_ENCRYPTED_CHARACTER_DATA,date:m,args:[v,T,C,w]});break}case"StaticResource":{let{url:v}=y;this.se({type:M.STATIC_RESOURCE_URL,date:m,args:[v]});break}case"ResizeMaskedElement":{let{target:v,width:T,height:C}=y;this.se({type:M.MUTATION_ATTRIBUTE,date:m,args:[v,"","style",`width:${T}px !important;height:${C}px !important;`]});break}case"Gesture":{let v=cy(i);(l=this.io)===null||l===void 0||l.call(this,v);break}case"TextVisibility":{this.ug.push(y.text);break}case"StaticResourceManagerEvent":{(h=this.Le)===null||h===void 0||h.processEvent(y);break}case"screenResize":{let{width:v,height:T}=y,C={type:M.SCREEN_RESIZE,date:m,args:[v,T]};this.se(C);break}case"viewportResize":{let{width:v,height:T}=y,C={type:M.RESIZE,date:m,args:[v,T]};this.se(C);break}case"PerformanceTiming":{this.se(fy(y));break}case"CustomError":{let v=(u=this.vs)===null||u===void 0?void 0:u.translate(y);v&&this.se(v);break}case"JSError":{let v=(f=this.Es)===null||f===void 0?void 0:f.translate(y);v&&this.se(v);break}case"VideoEvent":{let v=vy(y);v&&this.se(v);break}case"DOM_INITIAL_STATE":{let v=za(y),T={type:M.DOM_INITIAL_STATE,date:m,args:[v.state]};this.w.emitInitialDomDone(T);break}case"DOM_PATCH":{let v=za(y),T={type:M.DOM_PATCH_STATE,date:m,args:[v.diff]};this.se(T);break}case"warning":{F.warn(y.message);break}default:F.error(`WebRecorderEventTranslator: Event not supported (${y.type})`);break}}),this.w.emitInitialDomStart(),(t=this.Es)===null||t===void 0||t.start(),(e=this.vs)===null||e===void 0||e.start(),this.Wa.start()}stop(){var t,e,i;this.reset(),this.flush(),this.Wa.stop(),(t=this.Le)===null||t===void 0||t.flushEvents(),(e=this.Es)===null||e===void 0||e.stop(),(i=this.vs)===null||i===void 0||i.stop()}flush(){this.ug.flush()}onEvent(t,e){var i;this.se=t,this.io=e,(i=this.Le)===null||i===void 0||i.onEvent(n=>this.se(n))}reset(){this.dg.reset()}}return s})(),_y=(()=>{class s{constructor(){this.Cn=20,this.$i=0,this.B=!1}translate(t){if(this.$i>=this.Cn)return null;this.$i+=1;let{message:e,attributes:i,timestamp:n}=t;return{type:M.CUSTOM_ERROR,date:n,args:[{errorType:"customError",message:e,attributes:i}]}}start(){this.B||(this.$i=0,this.B=!0)}stop(){this.B=!1}}return s})(),wy=(()=>{class s{constructor(t){this.Ya=t,this.Cn=20,this.zi=0,this.B=!1}translate(t){if(this.zi>=this.Cn)return this.Ya.stop(),null;this.zi+=1;let{filename:e,message:i,lineno:n,colno:o,timestamp:c}=t;return{type:M.JAVASCRIPT_ERROR,date:c,args:[{errorType:"jsError",message:i,filename:e,lineno:n,colno:o}]}}start(){this.B||(this.zi=0,this.B=!0)}stop(){this.B=!1}}return s})(),Ay=(()=>{class s extends le{constructor(t){super(),this.Ge=t}subscribe(t){return super.subscribe(t)}onStart(){Z(this.Ge,t=>{t.onEvent(e=>{var i;return this.Lr(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),Z(this.Ge,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){Z(this.Ge,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}Lr(t,e){this.produceEvent({timestamp:P.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})(),Cl=(()=>{class s{emit(t,e,i,n=document){let c=`${i!==void 0?`${i}`:`${s.RA}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&n.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.CA();if(i===null)return null;let{bubbles:n=!1,cancelable:o=!1,detail:c}=e;return i.initCustomEvent(t,n,o,c),i}static CA(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.RA="cs.tracking.",s})(),Qt=(()=>{let s;return function(r){r.Visible="visible",r.Hidden="hidden",r.Blur="blur",r.PagehideVisible="pagehideVisible",r.PagehideHidden="pagehideHidden",r.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),Il=(()=>{class s{constructor(){this.B=!1,this.yi=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.ce(Qt.Hidden):this.ce(Qt.Visible);case"pagehide":return document.visibilityState==="hidden"?this.ce(Qt.PagehideHidden):this.ce(Qt.PagehideVisible);case"blur":return this.ce(Qt.Blur);case"navigate":return this.IA(t)?this.ce(Qt.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.B||(this.B=!0,this.Jh(),this.PA(),this.OA(),sa()&&this.NA())}stop(){this.B&&(this.B=!1,this.Qh(),this.MA(),this.DA(),sa()&&this.kA())}onEvent(t){this.ce=t}NA(){window.navigation.addEventListener("navigate",this.yi)}kA(){window.navigation.removeEventListener("navigate",this.yi)}Jh(){document.addEventListener("visibilitychange",this.yi)}Qh(){document.removeEventListener("visibilitychange",this.yi)}PA(){window.addEventListener("pagehide",this.yi)}MA(){window.removeEventListener("pagehide",this.yi)}OA(){window.addEventListener("blur",this.yi)}DA(){window.removeEventListener("blur",this.yi)}IA(t){return t instanceof NavigateEvent?!t.hashChange&&!t.downloadRequest&&!t.formData:!1}}return s})(),Ot=(()=>{let s;return function(r){r[r.Active=0]="Active",r[r.Paused=1]="Paused",r[r.Stopped=2]="Stopped"}(s||(s={})),s})(),by=(()=>{class s{constructor(t,e,i=[]){this.Lr=t,this.Zh=e,this.xA=i,this.Xa=null,this.xt=Ot.Active,this.lt=[]}reset(){this.Xa=null,this.lt=[],this.xt=Ot.Active}disconnect(){this.xt=Ot.Stopped}LA(){this.Zh(Ot.Paused),this.xt=Ot.Paused,csSetTimeout(()=>{this.xt===Ot.Paused&&this.tu()},s.STOP_TIMEOUT)}VA(){this.Zh(Ot.Active),this.xt=Ot.Active,Z(this.lt,this.Lr),this.lt=[]}tu(){this.lt=[],this.Zh(Ot.Stopped),this.xt=Ot.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.Xa=t.date,this.xt!==Ot.Active)){this.VA(),this.Lr(t);return}if(this.UA(t)){this.Lr(t);return}switch(this.xt){case Ot.Active:if(this.jA(t,e)){this.LA(),csArray.prototype.push.call(this.lt,t);return}this.Lr(t);break;case Ot.Paused:csArray.prototype.push.call(this.lt,t);break;case Ot.Stopped:break}}jA(t,e){return!e.isUserEvent&&this.Xa!==null&&t.date-this.Xa>s.INACTIVITY_TIMEOUT}UA(t){return csArray.prototype.indexOf.call(this.xA,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),Ty=2e3,Ry=(()=>{class s extends Pt{constructor(t,e,i,n,o,c,l,h,u,f,y,m,v,T=[],C,w,b,k,O){super(),this.E=t,this.z=e,this.HA=i,this.V=n,this.C=o,this._e=c,this.yt=l,this.pe=h,this.ut=u,this.K=f,this.Ut=y,this.Mt=m,this.qe=v,this.Ge=T,this.fg=C,this.ie=w,this.Vr=b,this.Es=k,this.vs=O,this.ni=0,this.Ei=new Cl,this.Ur={allowFromQuotaService:!0,allowFromSerialization:!0},this.pg=Nr(()=>{this.z.eventsCount()>0&&this.gg()},Ty),this.Vs=S=>this.processBrowserEvent(S),this.ro=S=>this.jt(S),this.Ka=0,this.no=0,this.es=new Il,this.eu=!1,this.mg=50*1024,this.Gi=!1,this.oo=!1,this.ji=[],this.Ja=new by(S=>this.Z(S),S=>{switch(S){case Ot.Active:this.BA();break;case Ot.Stopped:this.FA();break}},[M.RESOURCE_HASHES,M.TEXT_VISIBILITY,M.API_ERROR,M.JAVASCRIPT_ERROR]),this.yg=S=>{this.Ut.removeBatchInProgress(`${S.params.sn}.${S.params.pn}.${S.params.ri}`)}}init(){this.su(),this.K.onLoad(this.yg),this.K.onError(this.yg)}BA(){csArray.prototype.forEach.call(this.fg,t=>t.start())}FA(){csArray.prototype.forEach.call(this.fg,t=>t.stopForInactivity())}su(){var t,e,i;this.qe.onEvent(this.Vs,this.ro),(t=this.ut)===null||t===void 0||t.onInputNodeToEncrypt(this.ro),(e=this.ut)===null||e===void 0||e.onApiErrorToEncrypt(n=>{this.Eg(n)}),(i=this.ut)===null||i===void 0||i.onUserIdentifierToEncrypt(this.Vs),this.es.onEvent(n=>{if(csSetTimeout(()=>this.qi("page-state",n)),n!==Qt.Visible){if(n===Qt.Blur)return this.vg();if(!this.eu)return this.eu=!0,csSetTimeout(()=>{this.eu=!1}),n===Qt.Hidden?this.vg():this.$A()}})}isRecording(){return this.C.hasValidSession()&&this.isStarted}vg(){if(!this.canSendEvents())return;this.qe.flush(),this.Ut.saveBatchesInProgress(),Z(this.Ge,c=>{var l,h;return Z((h=(l=c.getPendingEvents)===null||l===void 0?void 0:l.call(c))!==null&&h!==void 0?h:[],u=>this.z.addEvent(u))});let t=this.z.getEvents();if(t.length===0)return;this.qi("pending-events",this.qe.pendingEvents);let e=this.K.getQueryParams();e.rst=this.getRecordingStartTimestamp(),this.no=t[t.length-1].date,e.let=this.getRecordingLastEventTimestamp();let i=this.z.getCurrentRequestIndex(),n=i.getCurrentIndex();e.ri=n.toString(),this.Mt.removeQueryParams(),this.Mt.setQueryParams(e);let o=this.z.stringifyEvents();if(o.length>this.mg){let c=this.Sg();if(c.length>0){let l=Is(c);this.Mt.send(l)||this.Ut.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}if(this.z.eventsCount()>0){e.ri=i.getCurrentIndex().toString();let l=this.z.stringifyEvents();this.Ut.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}}else this.Mt.send(o)||this.Ut.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:o}),i.increment();this.Mt.removeQueryParams(),this.z.clearEvents()}$A(){if(!this.canSendEvents())return;this.qe.flush();let t=this.K.getQueryParams();this.Ut.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this.Mt.removeQueryParams(),Z(this.Ge,n=>{var o,c;return Z((c=(o=n.getPendingEvents)===null||o===void 0?void 0:o.call(n))!==null&&c!==void 0?c:[],l=>this.z.addEvent(l))});let e=this.z.getEvents();if(e.length===0){delete t.let,delete t.rst,this.Mt.setQueryParams(t),this.Mt.send(),this.Mt.removeQueryParams();return}this.qi("pending-events",this.qe.pendingEvents),this.no=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this.Mt.setQueryParams(t);let i=this.z.stringifyEvents();if(i.length>this.mg){let n=this.Sg();if(n.length>0){let o=Is(n);this.Mt.send(o)||this.Ut.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:o})}else delete t.let,delete t.rst,delete t.ri,this.Mt.removeQueryParams(),this.Mt.setQueryParams(t),this.Mt.send(),this.Mt.removeQueryParams();if(this.z.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let o=this.z.getCurrentRequestIndex(),c=o.getCurrentIndex();t.ri=c.toString();let l=this.z.stringifyEvents();this.Ut.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:l}),o.increment()}}else this.Mt.send(i)||(this.Ut.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:i}),this.z.getCurrentRequestIndex().increment());this.Mt.removeQueryParams(),this.z.clearEvents()}blockSendingEventsFromQuotaService(){this.Ur.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this.Ur.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this.Ur.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this.Ur.allowFromSerialization=!0}canSendEvents(){return this.Ur.allowFromQuotaService&&this.Ur.allowFromSerialization}onIframeJavascriptError(t){var e;if(this._e&&this.Es){(e=this._e)===null||e===void 0||e.anonymize(t);let i=this.Es.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:P.now(),type:"JSError"});i&&this.Vs(i)}}onIframeCustomError(t){if(this.vs){let e=this.vs.translate({...t,timestamp:P.now(),type:"CustomError"});e&&this.Vs(e)}}onIframeDetailedApiError(t){this._g(t)}onIframeRecordingUserEvent(t){for(let e of t)this.jt(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.V.isCurrentPageviewValid()&&this.Ja.pushEvent(t,{isUserEvent:!1})}jt(t){this.V.refreshSession(),this.V.isSessionValid()&&this.Ja.pushEvent(t,{isUserEvent:!0})}Z(t){Bt.general.nbEvents.increase(),this.z.addEvent(t),this.z.isThresholdReached()?this.pushEvents():this.z.isFull()&&this.pg(),this.wg(t)}wg(t){this.E.emitDebugEvents&&this.Ei.emit("recordingEvent",{...t,typeName:M[t.type]})}onStart(){var t;this.qi("tag-version","15.174.2"),this.qi("page-state",document.visibilityState),this.Ja.reset(),this.es.start(),this.initStates(),this.qe.start(),this.yt&&this.pe&&this.yt.subscribe(s.Ht,e=>this._g(e),{detailedEvent:!0}),this.E.emitDebugEvents&&this.Ei.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.ji,e=>this.Ag(e)),this.ji=[],this.Gi&&((t=this.ie)===null||t===void 0||t.enableOnlineAssets(),this.Gi=!1)}onStop(){var t;this.es.stop(),this.yt&&this.yt.unsubscribe(s.Ht),this.qe.stop(),this.Ja.disconnect(),(t=this.ie)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.qe.flush(),this.pg.cancel(),this.pushEvents(),this.K.removeQueryParams()}initStates(){this.Ka=P.now(),this.z.getCurrentRequestIndex().reset(),this.ni=0,this.K.setQueryParams(this.HA.getRequestParameters())}pushEvents(){Z(this.Ge,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.z.eventsCount()>0&&(this.isStarted?this.gg():this.z.clearEvents())}gg(){if(!this.canSendEvents())return;let t=this.z.getOrderedBatchSlots();for(let e of t){let i=e.batch.getEvents();if(!i.length)continue;this.no=i[i.length-1].date;let n=e.metadata.requestIndex,o=n.getCurrentIndex(),c=this.Ka>this.no?i[0].date:this.Ka;this.K.setQueryParams({pn:csString(e.metadata.pageNumber),ri:o.toString(),rst:c.toString(),let:this.getRecordingLastEventTimestamp()});let l=this.K.getQueryParams();this.Ut.addBatchInProgress(`${l.sn}.${l.pn}.${o}`,{...this.K.getQueryParams()},i),this.K.send(i),n.increment(),e.batch.clearEvents(),this.bg&&this.bg()}this.z.clearEmptyBatchSlots()}addInitialDom(t){this.z.addEventByTimestamp(t),this.wg(t)}_g(t){if(this.Vr&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.Vr.truncate(t),this.ut){this.ut.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.Eg(t)}Eg(t){if(this.ni<s.zA){let e={type:M.API_ERROR,date:P.now(),args:[this.pe.anonymize(t)]};this.Vs(e),this.ni=this.ni+1,j.counters.networkRequests.count("collected")}}GA(t){t===ns.ETR_SESSION?this.K.setQueryParams({[s.qA]:s.Tg}):t===ns.ETR_PAGE&&this.K.setQueryParams({[s.WA]:s.Tg})}clearEvents(){this.z.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.Es)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:P.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.Vs(i)}onCustomErrorEvent(t){var e;let i=(e=this.vs)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:P.now(),message:t.message,attributes:t.attributes});i&&this.Vs(i)}onPageEvent(t){this.Rg(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:P.now(),keyId:this.E.encryptionPublicKeyId};(e=this.ut)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.Ag({eventName:t,eventType:e}):csArray.prototype.push.call(this.ji,{eventName:t,eventType:e})}Ag(t){this.GA(t.eventType),this.Rg(t.eventName),this.pushEvents()}Rg(t){let e={type:M.PAGE_EVENT,date:P.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.YA)}]};this.z.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:P.now(),type:M.UNANONYMIZED_CONSENT_GRANTED};this.z.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:P.now(),type:M.UNANONYMIZED_CONSENT_WITHDRAWN};this.z.addEvent(t)}triggerRecordingForSessionGranted(){this.qi("consent-granted")}triggerRecordingForSessionWithdrawn(){this.qi("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.oo=!0}getStaticResourceManagerStatus(){return this.ie?{isStarted:this.E.useStaticResourceManager&&$n.isSupported(),onlineAssets:{activated:this.ie.isOnlineAssetsActivated(),enabledOnNextPageview:this.oo}}:null}resetOnlineAssetsOnPageview(){this.Gi=!1,this.oo=!1}updateOnlineAssetsOnPageview(){this.ie&&this.oo&&(this.Gi=!0,this.oo=!1)}onRecordingRequestSent(t){this.bg=t}getRecordingStartTimestamp(){return this.Ka.toString()}getRecordingLastEventTimestamp(){return this.no.toString()}onOptOut(){Z(this.Ge,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}qi(t,e){if(!this.E.emitRecordInfoEvents)return;let i={date:P.now(),type:M.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.z.addEvent(i)}Sg(){return this.z.extractEvents(M.API_ERROR,M.JAVASCRIPT_ERROR,M.CUSTOM_ERROR,M.TEXT_VISIBILITY,M.POINTER_DOWN)}}return s.Ht="RecordingService",s.YA=255,s.zA=20,s.WA="etrp",s.qA="etrs",s.Tg="1",B([jt("addInitialDom")],s.prototype,"addInitialDom",null),s})(),Cy=(()=>{class s extends Pt{constructor(t,e,i){super(),this.le=t,this.Mt=e,this.K=i,this.iu=!1,this.ao={},this.KA=n=>{if(n.length!==0)for(let o of n){let{metadata:c,events:l}=o;this.JA(c.rt)&&this.K.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.ao={}}onStop(){}recover(){this.le.recover(this.KA)}addBatchInProgress(t,e,i){this.ao[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.ao[t]}blockSendingLastMessage(){this.iu=!1}allowSendingLastMessage(){this.iu=!0}sendLastMessageBeacon(){if(this.iu){let{ri:t,rst:e,let:i,...n}=this.K.getQueryParams();n.hlm="true",this.Mt.setQueryParams(n),this.Mt.send()}}JA(t){return!!t&&csString.prototype.indexOf.call(t,N.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.ao),t=>{let{metadata:e,events:i}=this.ao[t];this.le.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.le.save(t)}}return B([x("RecordingRecovery")],s.prototype,"recover",null),s})(),Iy=(()=>{let s;return function(r){r[r.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),Py=8*1024*1024,Oy=(()=>{class s extends Pt{constructor(t,e,i){super(),this.Le=t,this.Cg=e,this._t=i,this.ru={},this.Ig=new Set,this.ys=!1}initState(){yc()&&(this.Fe=this._t.getRequestParameters(),this.QA=`${this.Cg}/exist?${Si.toQuery(this.Fe)}`,this.ZA=`${this.Cg}/putTag?${Si.toQuery(this.Fe)}`,this.Pg=pr(async()=>{if(this.ys){this.Pg();return}this.ys=!0;try{await this.tb()}finally{this.ys=!1}},300),this.Le.onSendStaticResource(t=>{this.Og(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this.Og(t)}Og(t){this.Ng(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.Ng(e.hash,e.data)})}Ng(t,e){this.Ig.has(t)||(this.Ig.add(t),this.ru[t]=e,this.Pg())}async tb(){let t=this.ru;this.ru={};let e=await this.eb(t);if(!e.length)return;let i=this.sb(e);await Promise.all(csArray.prototype.map.call(i,n=>window.fetch(this.ZA,{method:"POST",body:n})))}async ib(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.Fe.pid,filter:Iy.NOT_EXIST,hashes:e,touch:!0};return await(await window.fetch(this.QA,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async eb(t){let e=[],i=await this.ib(t);return csArray.prototype.forEach.call(i,n=>{let o=t[n];o?csArray.prototype.push.call(e,{hash:n,data:o}):F.warn("SRM: received unknown hash: "+n)}),e}sb(t){let e=0,i=[new FormData];for(let n of t){let{data:o,hash:c}=n,l=i.length-1;if(e=e+o.size,e<Py)i[l].append("",o,c);else{let h=new FormData;h.append("",o,c),e=o.size,csArray.prototype.push.call(i,h)}}return i}}return s})(),Pl=2*1e3*1024,Ny=200,Ga=(()=>{class s{constructor(t=Pl){this.Bt=[],this.nu=new Io(t)}addEvent(t){this.nu.addString(Is(t)),csArray.prototype.push.call(this.Bt,t)}addEventByTimestamp(t){let e=0;for(;e<this.Bt.length&&!(this.Bt[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Bt,e,0,t)}eventsCount(){return this.Bt.length}clearEvents(){this.nu.reset(),this.Bt=[]}isFull(){return this.eventsCount()>=Ny}isThresholdReached(){return this.nu.isThresholdReached()}getEvents(){return this.Bt}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Bt,n=>{csArray.prototype.indexOf.call(t,n.type)!==-1?csArray.prototype.push.call(e,n):csArray.prototype.push.call(i,n)}),this.Bt=i,e}stringifyEvents(){return Is(this.Bt)}GO(t){t.type===M.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return B([jt("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})(),qa=(()=>{class s{constructor(){this.Qa=1}getCurrentIndex(){return this.Qa}increment(){this.Qa+=1}reset(){this.Qa=1}getRequestParameters(){return{ri:`${this.Qa}`}}}return s})(),My=3,Dy=8,ky=(()=>{class s{constructor(t,e=Pl,i=My){this.rb=t,this.Mg=e,this.ou=i,this.Za={}}addEvent(t){this.Dg().addEvent(t)}addEventByTimestamp(t){this.Dg().addEventByTimestamp(t)}eventsCount(){return csArray.prototype.reduce.call(this.Wi(),(t,e)=>t+e.batch.eventsCount(),0)}isFull(){return csArray.prototype.some.call(this.Wi(),t=>t.batch.isFull())}isThresholdReached(){let t=this.Wi();return t.length>=this.ou||csArray.prototype.some.call(t,e=>e.batch.isThresholdReached())}getEvents(){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(t,e)=>csArray.prototype.concat.call(t,e.batch.getEvents()),[])}extractEvents(...t){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(e,i)=>csArray.prototype.concat.call(e,i.batch.extractEvents(...t)),[])}stringifyEvents(){return Is(this.getEvents())}clearEvents(){csArray.prototype.forEach.call(this.Wi(),t=>t.batch.clearEvents())}clearEmptyBatchSlots(){let t=this.getOrderedBatchSlots();for(let e=0;e<t.length-1;e++)t[e].batch.eventsCount()===0&&delete this.Za[t[e].metadata.pageNumber]}Wi(){return Pp(this.Za)}getOrderedBatchSlots(){return csArray.prototype.sort.call(this.Wi(),xy)}kg(){let t=this.rb();if(t<=0)return{batch:new Ga(this.Mg),metadata:{pageNumber:0,requestIndex:new qa}};let e=this.Za[t];if(e)return e;let i={batch:new Ga(this.Mg),metadata:{pageNumber:t,requestIndex:new qa}};return this.Za[t]=i,this.Wi().length>Math.max(this.ou,Dy)&&F.warn(`RecordingBatchGroup: max number of slots overflowed(${this.Wi().length}/${this.ou})`),i}Dg(){return this.kg().batch}getCurrentRequestIndex(){return this.kg().metadata.requestIndex}}return s})();function xy(s,r){return s.metadata.pageNumber-r.metadata.pageNumber}function Nt(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var Ly=(()=>{class s{constructor(t,e){this.Q=t,this.pt=e,this.j=Sr,this.tc=!1,this.ze=!1,this.co=null,this.ss=this.nb()}onEvent(t){this.j=t}start(){this.ss&&(this.ze=!0,this.au())}stop(){this.ze=!1}releaseResources(){this.Xn()}au(){this.tc||(this.tc=!0,this.co=this.ob(),this.co.observe({type:"navigation",buffered:!0}))}ob(){return new window.PerformanceObserver(t=>{this.ze&&csArray.prototype.forEach.call(t.getEntriesByType("navigation"),e=>{let i=this.ab(e);this.j(i)})})}Xn(){this.co&&(this.co.disconnect(),this.co=null)}ab(t){let e={};for(let n in t){let o=dy[n],c=t[n];!o||c instanceof csArray||c instanceof Function||(G(c)?e[o]=c:Wt(c)&&(e[o]=Nt(c,1)))}j.counters.networkRequests.count("collected");let i={...e,n:this.Q.anonymizeUrl(this.Q.removeQueryString(t.name),{maskingPatterns:this.pt.getUrlMaskingPatterns(),partialMaskingPatterns:this.pt.getPartialUrlMaskingPatterns()})};return{date:P.now(),type:M.PERFORMANCE_NAVIGATION_TIMING,args:[i]}}nb(){var t,e;return((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.includes.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation")}}return s})(),Vy=(()=>{class s{constructor(t,e){this.Q=t,this.pt=e,this.ze=!1,this.j=Sr,this.lo=null,this.ss=this.cb()}onEvent(t){this.j=t}start(){this.ss&&(this.ze=!0,this.au())}stop(){this.ze=!1}releaseResources(){this.Xn()}au(){this.tc||(this.tc=!0,this.lo=this.lb(),this.lo.observe({type:"resource",buffered:!0}))}lb(){return new window.PerformanceObserver(t=>{this.hb(t)})}hb(t){if(this.ze){let e=t.getEntries();csArray.prototype.forEach.call(csArray.prototype.map.call(e,i=>this.db(i)),i=>{this.j(i)})}}Xn(){this.lo&&(this.lo.disconnect(),this.lo=null)}db(t){let e={};for(let n in t){let o=Rl[n],c=t[n];!o||c instanceof csArray||c instanceof Function||(typeof c=="string"&&o?e[o]=c:typeof c=="number"&&o&&(e[o]=Nt(c,1)))}j.counters.networkRequests.count("collected");let i={...e,n:this.Q.anonymizeUrl(this.Q.removeQueryString(t.name),{maskingPatterns:this.pt.getUrlMaskingPatterns(),partialMaskingPatterns:this.pt.getPartialUrlMaskingPatterns()})};return{date:P.now(),type:M.PERFORMANCE_RESOURCE_TIMING,args:[i]}}cb(){var t,e;return((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.includes.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"resource")}}return s})(),Uy=(()=>{class s{constructor(t,e){this.Dt=t,this.D=e,this.gi=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.j=t}start(){this.Yi(),this.triggerInitialEvents()}stop(){this.Xi()}Yi(){csArray.prototype.forEach.call(this.gi,t=>Vt(t))}Xi(){csArray.prototype.forEach.call(this.gi,t=>Ut(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:M.HASH_CHANGE,args:[this.D.anonymizePII(this.Dt.href)],date:P.now()};this.j(t)}visibilityChangeListener(){let t={type:M.VISIBILITY_CHANGE,args:[document.visibilityState],date:P.now()};this.j(t)}}return B([x("hashChange")],s.prototype,"hashChangeListener",null),B([x("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})(),Xs=(()=>{let s;return function(r){r[r.COPY=0]="COPY",r[r.CUT=1]="CUT",r[r.PASTE=2]="PASTE"}(s||(s={})),s})(),Y=(()=>{let s;return function(r){r[r.SPACE=0]="SPACE",r[r.ENTER=1]="ENTER",r[r.BACKSPACE=2]="BACKSPACE",r[r.DELETE=3]="DELETE",r[r.ARROWUP=4]="ARROWUP",r[r.ARROWDOWN=5]="ARROWDOWN",r[r.ARROWLEFT=6]="ARROWLEFT",r[r.ARROWRIGHT=7]="ARROWRIGHT",r[r.CAPSLOCK=8]="CAPSLOCK",r[r.SHIFT=9]="SHIFT",r[r.TAB=10]="TAB",r[r.ALPHANUMERICAL=11]="ALPHANUMERICAL",r[r.ESCAPE=12]="ESCAPE",r[r.END=13]="END",r[r.ALT=14]="ALT",r[r.CTRL=15]="CTRL",r[r.META=16]="META"}(s||(s={})),s})();function jy(s){if(!G(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var Wa="data-cs-scroll-container";function Hy(s){try{if(Mt(csEventtarget.apply(s)))return!0}catch{}return!1}var Ks=(()=>{let s;return function(r){function t(i){return!!(Mt(i)&&Hy(i)&&Rr(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(Wa)!==null)}r.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${Wa}]`)}r.getScrollContainer=e}(s||(s={})),s})(),By=33,Fy=(()=>{class s{constructor(){this.eventType="user",this.lu=[],this.fb=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.pb=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.sc=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this.hu=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=jy(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this.hu,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.Ee=new xs((e,i)=>{switch(i){case"initial":case"added":this.Yi(e);break;case"removed":this.Xi(e);break}})}init(){this.gb(),this.mb(),this.du()}onEvent(t){csArray.prototype.push.call(this.lu,t)}he(t,e=!1){csArray.prototype.forEach.call(this.lu,i=>i(t,e))}start(){this.Oh(),this.Yi(document),this.Ee.observe()}stop(){this.Xi(document),this.Ee.disconnect(),this.lu=[]}mb(){this.yb()&&csArray.prototype.push.call(this.sc,...this.fb)}gb(){this.Eb()&&csArray.prototype.push.call(this.sc,...this.pb)}Yi(t){yr(t)?csArray.prototype.forEach.call(this.sc,e=>Vt(e)):csArray.prototype.forEach.call(this.hu,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Vt(i)})}Xi(t){yr(t)?csArray.prototype.forEach.call(this.sc,e=>Ut(e)):csArray.prototype.forEach.call(this.hu,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Ut(i)})}yb(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}Eb(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}Oh(){this.vb()}vb(){let t=Ks.getScrollContainer()||document,e=q(t),i=this.xg(t);if(i.top!==0||i.left!==0){let n={type:M.SCROLL,args:[e,i.left,i.top],date:P.now()};this.he(n,!0)}}xg(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(D.isMaskedElement(t)||D.isMaskedElementChild(t))return;let e=q(t),i=this.xg(t),n={type:M.SCROLL,args:[e,i.left,i.top],date:P.now()};this.he(n)}mouseOverListener(t){if(D.isMaskedElementChild(t.target))return;let e=q(t.target),i={type:M.MOUSE_OVER,args:[e],date:P.now()};this.he(i)}clickListener(t){let e=St(t);if(D.isMaskedElementChild(e))return;let i=q(e),n={type:M.CLICK,args:[i],date:P.now()};this.he(n)}keyUpListener(t){let e=St(t);if(D.isMaskedElementChild(e))return;let i=q(e),n=this.F[t.key];if(n===void 0)return;let o={type:M.KEY_UP,args:[i,n],date:P.now()};this.he(o)}keyDownListener(t){let e=St(t);if(D.isMaskedElementChild(e))return;let i=q(e),n=this.F[t.key];if(n===void 0)return;let o={type:M.KEY_DOWN,args:[i,n],date:P.now()};this.he(o)}copyListener(t){let e=St(t);if(D.isMaskedElementChild(e))return;let i=q(e),n={type:M.CLIPBOARD_COMMAND,args:[i,Xs.COPY],date:P.now()};this.he(n)}cutListener(t){let e=St(t);if(D.isMaskedElementChild(e))return;let i=q(e),n={type:M.CLIPBOARD_COMMAND,args:[i,Xs.CUT],date:P.now()};this.he(n)}pasteListener(t){let e=St(t);if(D.isMaskedElementChild(e))return;let i=q(e),n={type:M.CLIPBOARD_COMMAND,args:[i,Xs.PASTE],date:P.now()};this.he(n)}pointerUpListener(t){let e=St(t);if(D.isMaskedElementChild(e))return;let i=q(e),n={type:M.POINTER_UP,args:[t.pointerId,t.pointerType,Nt(t.clientX,1),Nt(t.clientY,1),i,t.button],date:P.now()};this.he(n)}pointerMoveListener(t){let e={type:M.POINTER_MOVE,args:[t.pointerId,t.pointerType,Nt(t.clientX,1),Nt(t.clientY,1)],date:P.now()};this.he(e)}pointerDownListener(t){let e=St(t);if(D.isMaskedElementChild(e))return;let i=q(e),n={type:M.POINTER_DOWN,args:[t.pointerId,t.pointerType,Nt(t.clientX,1),Nt(t.clientY,1),i,t.button,{pageX:Nt(t.pageX,1),pageY:Nt(t.pageY,1)}],date:P.now()};this.he(n)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:M.TOUCH_START,args:[n.identifier,Nt(n.clientX,1),Nt(n.clientY,1)],date:P.now()};this.he(o)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:M.TOUCH_MOVE,args:[n.identifier,Nt(n.clientX,1),Nt(n.clientY,1)],date:P.now()};this.he(o)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:t.type==="touchend"?M.TOUCH_END:M.TOUCH_CANCEL,args:[n.identifier,Nt(n.clientX,1),Nt(n.clientY,1)],date:P.now()};this.he(o)}}du(){this.F={},this.F[" "]=Y.SPACE,this.F.Spacebar=Y.SPACE,this.F.Backspace=Y.BACKSPACE,this.F.Enter=Y.ENTER,this.F.Delete=Y.DELETE,this.F.ArrowUp=Y.ARROWUP,this.F.ArrowDown=Y.ARROWDOWN,this.F.ArrowLeft=Y.ARROWLEFT,this.F.ArrowRight=Y.ARROWRIGHT,this.F.Up=Y.ARROWUP,this.F.Down=Y.ARROWDOWN,this.F.Left=Y.ARROWLEFT,this.F.Right=Y.ARROWRIGHT,this.F.CapsLock=Y.CAPSLOCK,this.F.Shift=Y.SHIFT,this.F.Tab=Y.TAB,this.F.Escape=Y.ESCAPE,this.F.Esc=Y.ESCAPE,this.F.End=Y.END,this.F.Alt=Y.ALT,this.F.Control=Y.CTRL,this.F.Meta=Y.META}}return B([jt("RecordingPageEvents.start")],s.prototype,"start",null),B([x("scroll")],s.prototype,"scrollListener",null),B([x("mouseOver"),It(),Jf()],s.prototype,"mouseOverListener",null),B([x("click"),It()],s.prototype,"clickListener",null),B([x("Event handler type: keyup")],s.prototype,"keyUpListener",null),B([x("Event handler type: keydown")],s.prototype,"keyDownListener",null),B([x("Event handler type: copy")],s.prototype,"copyListener",null),B([x("Event handler type: cut")],s.prototype,"cutListener",null),B([x("Event handler type: paste")],s.prototype,"pasteListener",null),B([x("Event handler type: pointerup"),It()],s.prototype,"pointerUpListener",null),B([x("Event handler type: pointermove"),It(),Mr({wait:By})],s.prototype,"pointerMoveListener",null),B([x("Event handler type: pointerdown"),It()],s.prototype,"pointerDownListener",null),B([x("Event handler type: touchstart"),It()],s.prototype,"touchStartListener",null),B([x("Event handler type: touchmove"),It()],s.prototype,"touchMoveListener",null),B([x("Event handler type: touchend-cancel"),It()],s.prototype,"touchEndCancelListener",null),s})(),$y=(()=>{class s{constructor(t={maskingEnabled:!0}){this.Sb=t}onScannedAsset(t){this.ic=t}rc(){let t=window.location.href,e=csString.prototype.indexOf.call(t,"#");return e===-1?t:csString.prototype.substring.call(t,0,e)}scanCssString(t){this.fu(Ei(t))}scanElement(t,e){this.Sb.maskingEnabled&&(D.getMaskedElementDetails(t).state!==D.MaskedElementState.NotMasked||e&&D.isMaskedAttribute(t,e))||(Cr(t)?this._b(t):uo(t)?this.wb(t,e):(this.Ab(t,e),this.bb(t,e),this.Tb(t,e)))}wb(t,e){var i;if((!e||e==="href")&&t.href){let o={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:this.rc(),assetRawPath:cl(t)};this.ic({type:"stylesheet",asset:o})}}_b(t){var e;let i=new Set;if(t.textContent)for(let o of Ei(t.textContent))i.add(o);let n;try{n=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(o){o.name==="SecurityError"||o.name==="InvalidAccessError"||F.error(o.message)}if(n)for(let o=0;o<n.length;o++){let c=n.item(o).cssText;for(let l of Ei(c))i.add(l)}this.fu(as(i))}pu(t){return!this.Rb(t)&&!Jt(t)&&!Zd(t)}Ab(t,e){if(zu(t)||$u(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.pu(i)){let n={assetId:t.src,assetRawPath:i,assetBasePath:this.rc()};this.ic({type:"asset",asset:n})}}(!e||e==="srcset")&&t.srcset&&this.Cb(t.srcset)}}bb(t,e){if(csNodenodeType.apply(t)!==1){nt.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${csNodenodeType.apply(t)}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}Cb(t){this.fu(To(t))}Tb(t,e){if((Yu(t)||Xu(t)||Ku(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.pu(i)){let n={assetId:ce(i),assetRawPath:i,assetBasePath:this.rc()};this.ic({type:"asset",asset:n})}}}fu(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.pu(e)),e=>({rawUrl:e,absoluteUrl:ce(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:this.rc(),assetRawPath:e.rawUrl};this.ic({type:"asset",asset:i})})}Rb(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),zy=30,Gy=0,Ol=(()=>{class s{constructor(t,e=zy,i=Gy){this.Ib=t,this.Pb=e,this.Ob=i,this.rs=new Pi,this.Ye=!1,this.gu=0,this.Lg=()=>{for(this.gu=0;this.rs.length;){if(this.gu>=this.Pb){csSetTimeout(this.Lg,this.Ob);return}let n=P.elapsed(),o=this.rs.pop();if(!o)break;this.runTask(o);let c=P.elapsed()-n;this.gu+=c}this.Ye=!1}}schedule(t,e=!1){if(!this.Ib||e){t();return}Bt.general.pendingTasks.increase(),this.rs.push(t),this.Nb()}Nb(){this.Ye||(this.Ye=!0,csSetTimeout(()=>{this.Lg()}))}runTask(t){Bt.general.pendingTasks.decrease(),t()}runPendingTasks(){this.rs.forEach(t=>{this.runTask(t)}),this.rs.clear()}clearQueue(){Bt.general.pendingTasks.clear(),Bt.mutations.pendingMutations.clear(),this.rs.clear()}isEmpty(){return this.rs.length===0}}return B([x("TaskScheduler"),jt("runTask")],s.prototype,"runTask",null),B([jt("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),qy=(()=>{class s{constructor(){this.X=!1,this.Vg=new bo(t=>t.type==="cssRuleInserted"&&this.Mb(t)),this.Db=kr(t=>{this.X&&t.length>0&&this.N.schedule(()=>Z(t,e=>this.ho.scanElement(e)))}),this.kb=({type:t,asset:e})=>{var i,n,o;t==="stylesheet"&&((i=this.xb)===null||i===void 0||i.call(this,e)),(n=this.Lb)===null||n===void 0||n.call(this,e);let c={date:P.now(),type:M.STATIC_RESOURCE_URL,args:[e.assetId]};(o=this.j)===null||o===void 0||o.call(this,c)},this.N=new Ol(!0,30,0),this.Wn=new Sl(t=>this.Vb(t)),this.U=new Ne(t=>this.Pr(t)),this.ho=new $y,this.ho.onScannedAsset(this.kb)}onEvent(t){this.j=t}onAsset(t){this.Lb=t}onStyleSheetFound(t){this.xb=t}start(){this.X||(this.X=!0,this.Vg.observe(),this.Wn.observe(),this.U.observe())}stop(){this.X&&(this.Vg.disconnect(),this.Wn.disconnect(),this.U.disconnect(),this.X=!1)}Mb(t){!t.rule||!this.X||this.ho.scanCssString(t.rule)}Vb(t){this.X&&D.getMaskedElementDetails(t).state===D.MaskedElementState.NotMasked&&this.Db.push(t)}Pr(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.ho.scanElement(e.target,e.attributeName);break;case"characterData":this.Ub(e.target);break;case"childList":}})}Ub(t){Qs(t)&&csNodeparentNode.apply(t)&&Cr(csNodeparentNode.apply(t))&&this.ho.scanCssString(t.data)}}return s})(),Wy="csPersisted",Ya="v2/recording",Yy=["isRecording"],Xy=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],Ky=["replay:resourceManager:getStatus","cssrm:getStatus"],Jy=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,f,y,m,v,T,C,w,b,k,O,S,V,H){this.vi=t,this.C=e,this.E=i,this.Fe=n,this.S=o,this.D=c,this.V=l,this.we=h,this._e=u,this.yt=f,this.pe=y,this.pt=m,this.w=v,this.Si=T,this.Ug=C,this.Xt=w,this.Ot=b,this.Q=k,this.Vr=O,this.it=S,this.qO=V,this.ut=H}init(){var t,e,i;let n=[],o=[];csArray.prototype.push.call(o,new Qg),this.uo=new om(this.it.shouldUseAnonymization(),this.E.whitelistedAttributes,this.D,this.E.anonymizeDigits),this.Ki();let c=new ry(Wy);this.jb(c),this.z=new ky(()=>{var S;return((S=this.C.getSession())===null||S===void 0?void 0:S.pageNumber)||0});let l=new qy;if(csArray.prototype.push.call(n,l),vt.isSupported()&&!!this.E.encryptionPublicKey&&this.E.encryptionPublicKeyId>0){let V=new cm(this.E.encryptionPublicKeyId.toString());csArray.prototype.push.call(o,V)}this.E.useStaticResourceManager&&$n.isSupported()&&(this.ie=new $n,this.Le=new oy,this.jg=new Oy(this.Le,this.E.getStaticResourceManagerUri(),this.Fe),this.Ug.addListener(this.jg),csArray.prototype.push.call(o,this.ie));let h=new wi(this.Fe,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.C.getRecordingTypes(),",")})}),u=new Tl(`${this.E.getRecordingUri()}/${Ya}`);csArray.prototype.push.call(o,this.uo),csArray.prototype.push.call(o,new bm(this.Q)),csArray.prototype.push.call(o,new Rm),this.Ji=new Fy,this.Ji.init(),csArray.prototype.push.call(n,this.Ji),this.Ut=new Cy(c,u,this.K);{let{withResource:S,withNavigation:V}=(t=this.E.performanceTimingOptions)!==null&&t!==void 0?t:{};S&&csArray.prototype.push.call(n,new Vy(this.Q,this.pt)),V&&csArray.prototype.push.call(n,new Ly(this.Q,this.pt))}csArray.prototype.push.call(n,new Uy(window.location,this.D));let f=!1,y=f?new Cm:new Jg,m=f?null:new Om,v=f?null:new Mm,T=f?null:new xm(this.ut,(e=this.E.experimental)===null||e===void 0?void 0:e.trackedCustomInputProperties),C=f?null:new Vm,w=csArray.prototype.filter.call([m,this.we,y,new Ay(csArray.prototype.filter.call(n,S=>S)),C,new Um,new Ym,T,v],Boolean);this.E.jsErrorsEnabled&&(this.Ya=new Xm,this.Bb=new Km(S=>this._e.anonymize(S)),this.Es=new wy(this.Ya),csArray.prototype.push.call(w,this.Ya),csArray.prototype.push.call(o,this.Bb)),!((i=this.E.customErrors)===null||i===void 0)&&i.enabled&&(this.vs=new _y);let b=new ty(w,o),k=new Sy(b,this.w,this.Le,this.Es,this.vs),O=csArray.prototype.filter.call([y,m,v,T,C],Boolean);this.recordingService=new Ry(this.E,this.z,h,this.V,this.C,this._e,this.yt,this.pe,this.ut,this.K,this.Ut,u,k,n,O,this.ie,this.Vr,this.Es,this.vs),this.Si.addListener(this.recordingService),this.Ug.addListener(this.recordingService),this.recordingService.init(),this.S.register(Yy,()=>this.C.isReplayRecorded()&&!this.Xt.isUrlExcludedForSessionReplay()),this.S.register(Xy,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.w.emitRecordingContextChange()}),this.S.register(Ky,()=>this.recordingService.getStaticResourceManagerStatus()),this.fo=new ny(this.w,this.C),this.Si.addListener(this.fo),this.vi.enableRecordingContext(this.recordingService,this.C,this.fo),this.mu()}onAfterNaturalPageView(){var t;this.Xt.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.jg)===null||t===void 0||t.initState()}onStartTracking(){this.Ut.recover(),this.Ki(),this.C.isReplayRecorded()&&!this.Xt.isUrlExcludedForSessionReplay()&&(this.C.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.nc())}onArtificialPageViewEnd(){this.C.isReplayRecorded()&&!this.Xt.isUrlExcludedForSessionReplay()&&!this.C.isTemporarilyRecorded()&&this.Ut.sendLastMessageBeacon(),this.recordingService.clearStates(),this.po()}onAfterArtificialPageView(){this.Ki(),this.C.isReplayRecorded()&&!this.Xt.isUrlExcludedForSessionReplay()?(this.C.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.nc()):this.recordingService.resetOnlineAssetsOnPageview()}onBeforeSessionRenewal(){this.recordingService.clearStates(),this.po()}onOptout(){this.po(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this.Ki(),this.recordingService.triggerUnanonymizationConsentGranted(),this.w.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this.Ki(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.w.emitRecordingContextChange()}onCollectStateChange(t,e){t===N.QUOTA_REACHED||t===N.ANALYTICS_ONLY&&e===Zt.ETR_OFF?(this.recordingService.clearEvents(),this.po()):(this.K.setQueryParams({rt:csArray.prototype.join.call(this.C.getRecordingTypes(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents(),this.fo.onCollectStateChange(t,e))}onTargetingRulesMatched(){this.C.isReplayRecorded()&&!this.Xt.isUrlExcludedForSessionReplay()&&!this.recordingService.isRecording()&&this.nc()}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Ut.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Ut.allowSendingLastMessage(),this.Ji.start(),this.recordingService.pushEvents()}onAfterReplayRecordingConsentGranted(){this.C.isReplayRecorded()&&!this.Xt.isUrlExcludedForSessionReplay()&&(this.C.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.nc(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.po())}mu(){var t,e,i,n,o,c;if(!((i=(e=(t=this.E.experimental)===null||t===void 0?void 0:t.sessionReplay)===null||e===void 0?void 0:e.shadowRoot)===null||i===void 0)&&i.filterByHostSelector){let l=(c=(o=(n=this.E.experimental)===null||n===void 0?void 0:n.sessionReplay)===null||o===void 0?void 0:o.shadowRoot)===null||c===void 0?void 0:c.filterByHostSelector;Z(l,h=>{Ys(h)&&Ne.setShadowRootFilter(u=>{try{return Ft.call(u.host,h)}catch{return!1}})})}}nc(){this.recordingService.start(),this.Ut.start(),this.w.emitRecordingContextChange()}po(){this.recordingService.stop(),this.Ut.stop(),this.w.emitRecordingContextChange()}jb(t){let e="byteArray";this.K=this.Ot.create(`${this.E.getRecordingUri()}/${Ya}`,e,t)}Ki(){var t;let e=this.it.shouldUseAnonymization();this.uo.setAnonymization(e),(t=this.Hb)===null||t===void 0||t.setAnonymization(e)}}return B([jt("Recording.onStartTracking")],s.prototype,"onStartTracking",null),B([jt("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})();var es=(()=>{let s;return function(r){function t(n){return n.replayConsentRequiredForSession}r.isReplayConsentNeeded=t;function e(n){return n.collectState===N.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||n.collectState===N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingBlockedByConsent=e;function i(n){return n.collectState===N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingWithDrawn=i}(s||(s={})),s})(),ar=(()=>{let s;return function(r){r[r.NOT_NEEDED=1]="NOT_NEEDED",r[r.NOT_EXPRESSED=2]="NOT_EXPRESSED",r[r.WITHDRAWN=3]="WITHDRAWN",r[r.GRANTED=4]="GRANTED"}(s||(s={})),s})(),Qy=(()=>{class s{constructor(t,e,i,n){this.M=t,this.C=e,this.E=i,this.fs=n,this.Hg=!1}isNaturalPageViewSent(){return this.Hg}setNaturalPageViewSent(t){this.Hg=t}getTrackingContext(){let t=this.C.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.E.projectId,n=this.E.uxaDomain,o=t.pageNumber,c=this.fs.getPageViewType(),l=this.C.isReplayRecorded(),h=this.Fb(t);return{projectId:i,sessionKey:e,pageNumber:o,pageViewType:c,isRecording:l,uxaDomain:n,recordingConsentState:h,...this.E.smbConfig}}getSessionKey(){let t=this.M.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}Fb(t){return es.isReplayConsentNeeded(this.E)?t.collectState===N.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?ar.NOT_EXPRESSED:t.collectState===N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?ar.WITHDRAWN:ar.GRANTED:ar.NOT_NEEDED}}return s})(),Zy=(()=>{class s{constructor(t){this.Lt=t,this.ue=[]}handleCommand(t){if(os(t)&&(this.go(t),this.Lt.isNaturalPageViewSent())){let e=this.Lt.getTrackingContext();e!==null&&this.Ft(t,e)}}go(t){csArray.prototype.push.call(this.ue,t)}executeRegisteredCallbacks(){let t=this.Lt.getTrackingContext();t!==null&&csArray.prototype.map.call(this.ue,e=>this.Ft(e,t))}Ft(t,e){csSetTimeout(()=>{t(e)})}}return s})(),tE=(()=>{class s{constructor(t){this.Lt=t,this.Qi=[]}handleCommand(t){if(this.Lt.isNaturalPageViewSent())return this.$b(t);this.mo(t)}$b(t){let e=this.Lt.getSessionKey();return this.Bg(t)&&e!==null&&this.Ft(t.callback,e),e}mo(t){this.Bg(t)&&csArray.prototype.push.call(this.Qi,t.callback)}flushPendingCallbacks(){let t=this.Lt.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.Qi,e=>{this.Ft(e,t)}),this.Qi=[]}Bg(t){return t&&typeof t.callback=="function"}Ft(t,e){csSetTimeout(()=>{t(e)})}}return s})();function eE(s,r){let{isRecording:t,pageNumber:e,projectId:i,siteId:n,uxaDomain:o,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),h;if(t&&l){let[,u,f]=l;n?h=`${c}/sites/${n}/player?uu=${u}&sn=${f}&pn=${e}`:h=`${o}/quick-playback/index.html?pid=${i}&uu=${u}&sn=${f}&pvid=${e}&recordingType=cs`,r.withTimestamp&&(h+=`&t=${P.now()-r.recordingStartTimestamp}`)}return{replayLink:h,isRecording:t}}var sE=(()=>{class s{constructor(t){this.Lt=t}handleCommand(t,e){Ts(t)&&os(e)&&this.Ft(t,e)}Ft(t,e){csSetTimeout(()=>{let i=this.Lt.getTrackingContext();if(i){let n=eE(i,t);e(n)}})}}return s})(),iE=(()=>{class s{constructor(){this.ue=new Set}handleCommand(t,e){return!os(t)||this.ue.has(t)?null:(this.ue.add(t),e&&(this.xe=e,this.Fg(t,e)),()=>this.ue.delete(t))}executeCallbacks(t){this.zb(t)&&(this.xe=t,this.ue.forEach(e=>this.Fg(e,t)))}Fg(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}zb(t){let{isRecording:e,recordingStartTimestamp:i,etrState:n,etrStatus:o,collectState:c}=t;return this.xe&&(this.xe.isRecording!==e||this.xe.recordingStartTimestamp!==i||this.xe.etrState!==n||this.xe.etrStatus!==o||this.xe.collectState!==c)}}return s})(),rE=["afterPageView"],nE=["getSessionKey"],oE=["onRecordingContextChange","onRecordingStateChange"],aE=["replay:link:generate"],cE=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.M=t,this.C=e,this.S=i,this.gt=n,this.tt=o,this.E=c,this.fs=l,this.vi=h,this.$g=null}init(){this.Lt=new Qy(this.M,this.C,this.E,this.fs),this.yu=new Zy(this.Lt),this.zg=new tE(this.Lt),this.yo=new iE,this.Gb=new sE(this.Lt),this.S.register(nE,t=>this.zg.handleCommand(t)),this.S.register(rE,t=>this.yu.handleCommand(t)),this.S.register(oE,t=>this.yo.handleCommand(t,this.vi.getRecordingContext())),this.S.register(aE,(t,e)=>{this.jr&&this.Gb.handleCommand({...t,recordingStartTimestamp:this.vi.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){var t;this.Lt.setNaturalPageViewSent(!0),this.zg.flushPendingCallbacks(),this.yu.executeRegisteredCallbacks(),(t=this.$g)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){var t;this.yu.executeRegisteredCallbacks(),(t=this.$g)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this.yo.executeCallbacks(this.vi.getRecordingContext())}setRecordingService(t){this.jr=t}}return B([Mr({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})();var lE=["optout"];var hE=(()=>{class s{constructor(t,e){this.S=t,this.us=e}init(){this.S.register(lE,()=>{this.us.activate()})}}return s})(),pi="_cs_optout",uE=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.St=i}get(){return this.E.cookielessTrackingEnabled?this.St.getItem(pi):this.O.get(pi)}set(t){this.E.cookielessTrackingEnabled?this.St.setItem(pi,t):this.O.set(pi,t,ao)}}return s})(),Xa="1",dE=(()=>{class s{constructor(t,e,i){this.w=t,this.Dt=e,this.mt=i}init(){!this.isActive()&&this.lT()&&this.activate()}isActive(){return this.mt.get()===Xa}activate(){this.w.emitOptout(),this.mt.set(Xa)}lT(){return csString.prototype.indexOf.call(this.Dt.href,pi)>0}}return s})(),fE=(()=>{class s{constructor(){this.Be=null,this.hT=1}startInterval(){this.Be=window.csSetInterval(()=>{let t=this.hT++;if(this.flush(`interval.${t}`),t>=5){this.stopInterval();return}},5e3)}flush(t){j.counters.tasks.flush(t),j.counters.longTasks.flush(t)}clear(){j.counters.tasks.reset(),j.counters.longTasks.reset(),this.stopInterval()}stopInterval(){this.Be&&(csClearInterval(this.Be),this.Be=null)}}return s})(),pE=(()=>{class s{constructor(){this._o=!1,this.wo=null,this.js=new fE}onStartTracking(){this.uT()}uT(){let t=csArray.prototype.filter.call(performance.getEntriesByType("resource"),e=>{var i;if(e.initiatorType!=="script")return!1;let n=csString.prototype.split.call(e.name,"/")[2]||"",o=(i=window.CSCurrentScript)===null||i===void 0?void 0:i.src;return o?o===e.name:n==="t.contentsquare.net"});csArray.prototype.forEach.call(t,e=>{if(e.transferSize===0)return;let i=e.responseEnd-e.responseStart,n=e.transferSize;i>=0&&j.counters.downloadTime.push(i),n>=0&&j.counters.transferSize.push(n)}),j.counters.downloadTime.count>0&&j.counters.downloadTime.flush(),j.counters.transferSize.count>0&&j.counters.transferSize.flush()}im(){let t=xs.shadowRootsCount;t!==void 0&&j.counters.dom.add("shadow-dom",t),j.counters.mutations.flush(),j.counters.dom.flush(),j.counters.blockingTime.flush(),j.counters.inpContribution.flush()}onBeforeArtificialPageView(){this.im(),this.wo&&csClearTimeout(this.wo),this.js.stopInterval(),this._o=!0}onBeforeNaturalPageView(){this.im()}onAfterNaturalPageView(t){t===Es.Natural?(this.js.flush("boot"),this.js.startInterval()):(this.wo&&csClearTimeout(this.wo),this.js.stopInterval(),this._o=!0)}onInitialDomStart(){this._o||this.js.stopInterval()}onInitialDomDone(){this._o||(this._o=!0,this.js.flush("initial-dom"),this.wo=window.csSetTimeout(()=>{this.js.flush("post-initial-dom"),this.js.startInterval()},5e3))}onOptout(){this.js.clear()}}return s})(),gE=(()=>{let s;return function(r){r.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),mE=(()=>{class s{constructor(){}static init(t){(!this.Tu||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.Tu=new Map,i){let n=csString.prototype.split.call(i,".");for(let o=0;o<n.length;o++){let[c,l]=csString.prototype.split.call(n[o],"=");this.Tu.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.Tu)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(gE.COMPRESSION_DISABLED)}static Log(t){return(e,i,n)=>{var o;let c=i.toString(),l=`${(o=e.constructor)===null||o===void 0?void 0:o.name}.${c}`,h=n.value;yE(s.getString("debugLog"),t)&&(n.value=function(...u){return console.log(l,...u),h.bind(this)(...u)})}}}return s})();function yE(s,r){var t;return s==null?!1:s===r||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+r+")(,|$)")))===null||t===void 0)&&t.length)}var EE=(()=>{class s{constructor(t){this.dT=t,this.rm=[],this.Ru={},this.fT=0}static async create(t,e={}){let i=new s(t),n;return csArray.prototype.forEach.call(Object.entries(e),([o,c])=>{e[o]=c,i.register(c)}),await i.Br().catch(o=>{nt.warn("Failed to start worker: "+o.toString()),n=new t}),new Proxy(i,{get(o,c){return c==="__worker"?i.Ae:t.prototype[c]instanceof Function?(...l)=>n?Promise.resolve(n[c](...l)):i.nm(c,l):n?Promise.resolve(n[c]):i.nm(c,[])}})}nm(t,e){let i=++this.fT;return new Promise((n,o)=>{this.Ru[i]=(c,l)=>{delete this.Ru[i],c?o(c):n(l)},this.Ae.postMessage({id:i,command:t,params:e})})}register(t){csArray.prototype.push.call(this.rm,t.toString())}Br(){try{let t=Ka.toString()+`
`+csArray.prototype.join.call(this.rm,`
`)+`

const klass = (${this.dT.toString()});

${Ka.name}()`,e=new Blob([t],{type:"application/javascript"}),i=csURL.createObjectURL(e);this.Ae=new Worker(i),this.Ae.addEventListener("message",n=>{var o,c,l,h,u;if(n.data!=="ping"){if(!((o=n.data)===null||o===void 0)&&o.critical||!n.data.id){nt.error("Worker error:",(l=(c=n.data)===null||c===void 0?void 0:c.critical)!==null&&l!==void 0?l:"No ID");return}(u=(h=this.Ru)[n.data.id])===null||u===void 0||u.call(h,n.data.error,n.data.result)}})}catch(t){return Promise.reject(t)}return new Promise((t,e)=>{this.Ae.onerror=i=>e(new Error(i.message)),this.Ae.onmessage=()=>{this.Ae.onmessage=this.Ae.onerror=null,t()}})}}return s})();function Ka(){let s=new klass;self.postMessage("ping"),self.onmessage=r=>{var t,e,i;if(!(!((t=r.data)===null||t===void 0)&&t.command))return self.postMessage({critical:"Invalid command",id:(e=r.data)===null||e===void 0?void 0:e.id,command:(i=r.data)===null||i===void 0?void 0:i.command});Promise.resolve().then(()=>{let n=s[r.data.command];return typeof n=="function"?n.apply(s,r.data.params):n}).then(n=>{var o;self.postMessage({result:n,id:r.data.id,command:(o=r.data)===null||o===void 0?void 0:o.command})},n=>{var o,c;self.postMessage({error:n,id:(o=r.data)===null||o===void 0?void 0:o.id,command:(c=r.data)===null||c===void 0?void 0:c.command})})}}function Xn(){function i(a){let p=a.length;for(;--p>=0;)a[p]=0}let n=0,o=1,c=2,l=3,h=258,u=29,f=256,y=f+1+u,m=30,v=19,T=2*y+1,C=15,w=16,b=7,k=256,O=16,S=17,V=18,H=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),X=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),pt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),kt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ie=512,_=new Array((y+2)*2);i(_);let L=new Array(m*2);i(L);let U=new Array(ie);i(U);let z=new Array(h-l+1);i(z);let ut=new Array(u);i(ut);let At=new Array(m);i(At);function Se(a,p,g,E,d){this.static_tree=a,this.extra_bits=p,this.extra_base=g,this.elems=E,this.max_length=d,this.has_stree=a&&a.length}let ls,Vs,Us;function Me(a,p){this.dyn_tree=a,this.max_code=0,this.stat_desc=p}let De=a=>a<256?U[a]:U[256+(a>>>7)],re=(a,p)=>{a.pending_buf[a.pending++]=p&255,a.pending_buf[a.pending++]=p>>>8&255},bt=(a,p,g)=>{a.bi_valid>w-g?(a.bi_buf|=p<<a.bi_valid&65535,re(a,a.bi_buf),a.bi_buf=p>>w-a.bi_valid,a.bi_valid+=g-w):(a.bi_buf|=p<<a.bi_valid&65535,a.bi_valid+=g)},Xt=(a,p,g)=>{bt(a,g[p*2],g[p*2+1])},Vi=(a,p)=>{let g=0;do g|=a&1,a>>>=1,g<<=1;while(--p>0);return g>>>1},Lr=a=>{a.bi_valid===16?(re(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)},Vr=(a,p)=>{let g=p.dyn_tree,E=p.max_code,d=p.stat_desc.static_tree,R=p.stat_desc.has_stree,A=p.stat_desc.extra_bits,I=p.stat_desc.extra_base,tt=p.stat_desc.max_length,$,$t,Fe,ot,ps,Bs,Zi=0;for(ot=0;ot<=C;ot++)a.bl_count[ot]=0;for(g[a.heap[a.heap_max]*2+1]=0,$=a.heap_max+1;$<T;$++)$t=a.heap[$],ot=g[g[$t*2+1]*2+1]+1,ot>tt&&(ot=tt,Zi++),g[$t*2+1]=ot,!($t>E)&&(a.bl_count[ot]++,ps=0,$t>=I&&(ps=A[$t-I]),Bs=g[$t*2],a.opt_len+=Bs*(ot+ps),R&&(a.static_len+=Bs*(d[$t*2+1]+ps)));if(Zi!==0){do{for(ot=tt-1;a.bl_count[ot]===0;)ot--;a.bl_count[ot]--,a.bl_count[ot+1]+=2,a.bl_count[tt]--,Zi-=2}while(Zi>0);for(ot=tt;ot!==0;ot--)for($t=a.bl_count[ot];$t!==0;)Fe=a.heap[--$],!(Fe>E)&&(g[Fe*2+1]!==ot&&(a.opt_len+=(ot-g[Fe*2+1])*g[Fe*2],g[Fe*2+1]=ot),$t--)}},Ui=(a,p,g)=>{let E=new Array(C+1),d=0,R,A;for(R=1;R<=C;R++)E[R]=d=d+g[R-1]<<1;for(A=0;A<=p;A++){let I=a[A*2+1];I!==0&&(a[A*2]=Vi(E[I]++,I))}},Ur=()=>{let a,p,g,E,d,R=new Array(C+1);for(g=0,E=0;E<u-1;E++)for(ut[E]=g,a=0;a<1<<H[E];a++)z[g++]=E;for(z[g-1]=E,d=0,E=0;E<16;E++)for(At[E]=d,a=0;a<1<<X[E];a++)U[d++]=E;for(d>>=7;E<m;E++)for(At[E]=d<<7,a=0;a<1<<X[E]-7;a++)U[256+d++]=E;for(p=0;p<=C;p++)R[p]=0;for(a=0;a<=143;)_[a*2+1]=8,a++,R[8]++;for(;a<=255;)_[a*2+1]=9,a++,R[9]++;for(;a<=279;)_[a*2+1]=7,a++,R[7]++;for(;a<=287;)_[a*2+1]=8,a++,R[8]++;for(Ui(_,y+1,R),a=0;a<m;a++)L[a*2+1]=5,L[a*2]=Vi(a,5);ls=new Se(_,H,f+1,y,C),Vs=new Se(L,X,0,m,C),Us=new Se(new Array(0),pt,0,v,b)},ji=a=>{let p;for(p=0;p<y;p++)a.dyn_ltree[p*2]=0;for(p=0;p<m;p++)a.dyn_dtree[p*2]=0;for(p=0;p<v;p++)a.bl_tree[p*2]=0;a.dyn_ltree[k*2]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0},Hi=a=>{a.bi_valid>8?re(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},Bi=(a,p,g,E)=>{Hi(a),E&&(re(a,g),re(a,~g)),a.pending_buf.set(a.window.subarray(p,p+g),a.pending),a.pending+=g},jr=(a,p,g,E)=>{let d=p*2,R=g*2;return a[d]<a[R]||a[d]===a[R]&&E[p]<=E[g]},Fi=(a,p,g)=>{let E=a.heap[g],d=g<<1;for(;d<=a.heap_len&&(d<a.heap_len&&jr(p,a.heap[d+1],a.heap[d],a.depth)&&d++,!jr(p,E,a.heap[d],a.depth));)a.heap[g]=a.heap[d],g=d,d<<=1;a.heap[g]=E},Hr=(a,p,g)=>{let E,d,R=0,A,I;if(a.last_lit!==0)do E=a.pending_buf[a.d_buf+R*2]<<8|a.pending_buf[a.d_buf+R*2+1],d=a.pending_buf[a.l_buf+R],R++,E===0?Xt(a,d,p):(A=z[d],Xt(a,A+f+1,p),I=H[A],I!==0&&(d-=ut[A],bt(a,d,I)),E--,A=De(E),Xt(a,A,g),I=X[A],I!==0&&(E-=At[A],bt(a,E,I)));while(R<a.last_lit);Xt(a,k,p)},$i=(a,p)=>{let g=p.dyn_tree,E=p.stat_desc.static_tree,d=p.stat_desc.has_stree,R=p.stat_desc.elems,A,I,tt=-1,$;for(a.heap_len=0,a.heap_max=T,A=0;A<R;A++)g[A*2]!==0?(a.heap[++a.heap_len]=tt=A,a.depth[A]=0):g[A*2+1]=0;for(;a.heap_len<2;)$=a.heap[++a.heap_len]=tt<2?++tt:0,g[$*2]=1,a.depth[$]=0,a.opt_len--,d&&(a.static_len-=E[$*2+1]);for(p.max_code=tt,A=a.heap_len>>1;A>=1;A--)Fi(a,g,A);$=R;do A=a.heap[1],a.heap[1]=a.heap[a.heap_len--],Fi(a,g,1),I=a.heap[1],a.heap[--a.heap_max]=A,a.heap[--a.heap_max]=I,g[$*2]=g[A*2]+g[I*2],a.depth[$]=(a.depth[A]>=a.depth[I]?a.depth[A]:a.depth[I])+1,g[A*2+1]=g[I*2+1]=$,a.heap[1]=$++,Fi(a,g,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],Vr(a,p),Ui(g,tt,a.bl_count)},Br=(a,p,g)=>{let E,d=-1,R,A=p[0*2+1],I=0,tt=7,$=4;for(A===0&&(tt=138,$=3),p[(g+1)*2+1]=65535,E=0;E<=g;E++)R=A,A=p[(E+1)*2+1],!(++I<tt&&R===A)&&(I<$?a.bl_tree[R*2]+=I:R!==0?(R!==d&&a.bl_tree[R*2]++,a.bl_tree[O*2]++):I<=10?a.bl_tree[S*2]++:a.bl_tree[V*2]++,I=0,d=R,A===0?(tt=138,$=3):R===A?(tt=6,$=3):(tt=7,$=4))},Lo=(a,p,g)=>{let E,d=-1,R,A=p[0*2+1],I=0,tt=7,$=4;for(A===0&&(tt=138,$=3),E=0;E<=g;E++)if(R=A,A=p[(E+1)*2+1],!(++I<tt&&R===A)){if(I<$)do Xt(a,R,a.bl_tree);while(--I!==0);else R!==0?(R!==d&&(Xt(a,R,a.bl_tree),I--),Xt(a,O,a.bl_tree),bt(a,I-3,2)):I<=10?(Xt(a,S,a.bl_tree),bt(a,I-3,3)):(Xt(a,V,a.bl_tree),bt(a,I-11,7));I=0,d=R,A===0?(tt=138,$=3):R===A?(tt=6,$=3):(tt=7,$=4)}},ql=a=>{let p;for(Br(a,a.dyn_ltree,a.l_desc.max_code),Br(a,a.dyn_dtree,a.d_desc.max_code),$i(a,a.bl_desc),p=v-1;p>=3&&a.bl_tree[kt[p]*2+1]===0;p--);return a.opt_len+=3*(p+1)+5+5+4,p},Wl=(a,p,g,E)=>{let d;for(bt(a,p-257,5),bt(a,g-1,5),bt(a,E-4,4),d=0;d<E;d++)bt(a,a.bl_tree[kt[d]*2+1],3);Lo(a,a.dyn_ltree,p-1),Lo(a,a.dyn_dtree,g-1)},Yl=a=>{let p=4093624447,g;for(g=0;g<=31;g++,p>>>=1)if(p&1&&a.dyn_ltree[g*2]!==0)return 0;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return 1;for(g=32;g<f;g++)if(a.dyn_ltree[g*2]!==0)return 1;return 0},Vo=!1,Xl=a=>{Vo||(Ur(),Vo=!0),a.l_desc=new Me(a.dyn_ltree,ls),a.d_desc=new Me(a.dyn_dtree,Vs),a.bl_desc=new Me(a.bl_tree,Us),a.bi_buf=0,a.bi_valid=0,ji(a)},Uo=(a,p,g,E)=>{bt(a,(n<<1)+(E?1:0),3),Bi(a,p,g,!0)},Kl=a=>{bt(a,o<<1,3),Xt(a,k,_),Lr(a)},Jl=(a,p,g,E)=>{let d,R,A=0;a.level>0?(a.strm.data_type===2&&(a.strm.data_type=Yl(a)),$i(a,a.l_desc),$i(a,a.d_desc),A=ql(a),d=a.opt_len+3+7>>>3,R=a.static_len+3+7>>>3,R<=d&&(d=R)):d=R=g+5,g+4<=d&&p!==-1?Uo(a,p,g,E):a.strategy===4||R===d?(bt(a,(o<<1)+(E?1:0),3),Hr(a,_,L)):(bt(a,(c<<1)+(E?1:0),3),Wl(a,a.l_desc.max_code+1,a.d_desc.max_code+1,A+1),Hr(a,a.dyn_ltree,a.dyn_dtree)),ji(a),E&&Hi(a)},Ql=(a,p,g)=>(a.pending_buf[a.d_buf+a.last_lit*2]=p>>>8&255,a.pending_buf[a.d_buf+a.last_lit*2+1]=p&255,a.pending_buf[a.l_buf+a.last_lit]=g&255,a.last_lit++,p===0?a.dyn_ltree[g*2]++:(a.matches++,p--,a.dyn_ltree[(z[g]+f+1)*2]++,a.dyn_dtree[De(p)*2]++),a.last_lit===a.lit_bufsize-1);var Zl=Xl,th=Uo,eh=Jl,sh=Ql,ih=Kl,rh={_tr_init:Zl,_tr_stored_block:th,_tr_flush_block:eh,_tr_tally:sh,_tr_align:ih},jo=(a,p,g,E)=>{let d=a&65535|0,R=a>>>16&65535|0,A=0;for(;g!==0;){A=g>2e3?2e3:g,g-=A;do d=d+p[E++]|0,R=R+d|0;while(--A);d%=65521,R%=65521}return d|R<<16|0};let nh=()=>{let a,p=[];for(var g=0;g<256;g++){a=g;for(var E=0;E<8;E++)a=a&1?3988292384^a>>>1:a>>>1;p[g]=a}return p},oh=new Uint32Array(nh());var ke=(a,p,g,E)=>{let d=oh,R=E+g;a^=-1;for(let A=E;A<R;A++)a=a>>>8^d[(a^p[A])&255];return a^-1},zi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ho={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:ah,_tr_stored_block:ch,_tr_flush_block:lh,_tr_tally:xe,_tr_align:hh}=rh,{Z_NO_FLUSH:hs,Z_PARTIAL_FLUSH:uh,Z_FULL_FLUSH:dh,Z_FINISH:Le,Z_BLOCK:Bo,Z_OK:he,Z_STREAM_END:Fo,Z_STREAM_ERROR:Kt,Z_DATA_ERROR:fh,Z_BUF_ERROR:Fr,Z_DEFAULT_COMPRESSION:ph,Z_FILTERED:gh,Z_HUFFMAN_ONLY:Gi,Z_RLE:mh,Z_FIXED:yh,Z_DEFAULT_STRATEGY:Eh,Z_UNKNOWN:vh,Z_DEFLATED:qi}=Ho,Sh=9,_h=15,wh=8,$r=256+1+29,Ah=30,bh=19,Th=2*$r+1,Rh=15,J=3,Ve=258,ne=Ve+J+1,Ch=32,Wi=42,zr=69,Yi=73,Xi=91,Ki=103,us=113,ii=666,mt=1,ri=2,ds=3,js=4,Ih=3,Ue=(a,p)=>(a.msg=zi[p],p),$o=a=>(a<<1)-(a>4?9:0),je=a=>{let p=a.length;for(;--p>=0;)a[p]=0},He=(a,p,g)=>(p<<a.hash_shift^g)&a.hash_mask,Be=a=>{let p=a.state,g=p.pending;g>a.avail_out&&(g=a.avail_out),g!==0&&(a.output.set(p.pending_buf.subarray(p.pending_out,p.pending_out+g),a.next_out),a.next_out+=g,p.pending_out+=g,a.total_out+=g,a.avail_out-=g,p.pending-=g,p.pending===0&&(p.pending_out=0))},Tt=(a,p)=>{lh(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,p),a.block_start=a.strstart,Be(a.strm)},st=(a,p)=>{a.pending_buf[a.pending++]=p},ni=(a,p)=>{a.pending_buf[a.pending++]=p>>>8&255,a.pending_buf[a.pending++]=p&255},Ph=(a,p,g,E)=>{let d=a.avail_in;return d>E&&(d=E),d===0?0:(a.avail_in-=d,p.set(a.input.subarray(a.next_in,a.next_in+d),g),a.state.wrap===1?a.adler=jo(a.adler,p,d,g):a.state.wrap===2&&(a.adler=ke(a.adler,p,d,g)),a.next_in+=d,a.total_in+=d,d)},zo=(a,p)=>{let g=a.max_chain_length,E=a.strstart,d,R,A=a.prev_length,I=a.nice_match,tt=a.strstart>a.w_size-ne?a.strstart-(a.w_size-ne):0,$=a.window,$t=a.w_mask,Fe=a.prev,ot=a.strstart+Ve,ps=$[E+A-1],Bs=$[E+A];a.prev_length>=a.good_match&&(g>>=2),I>a.lookahead&&(I=a.lookahead);do if(d=p,!($[d+A]!==Bs||$[d+A-1]!==ps||$[d]!==$[E]||$[++d]!==$[E+1])){E+=2,d++;do;while($[++E]===$[++d]&&$[++E]===$[++d]&&$[++E]===$[++d]&&$[++E]===$[++d]&&$[++E]===$[++d]&&$[++E]===$[++d]&&$[++E]===$[++d]&&$[++E]===$[++d]&&E<ot);if(R=Ve-(ot-E),E=ot-Ve,R>A){if(a.match_start=p,A=R,R>=I)break;ps=$[E+A-1],Bs=$[E+A]}}while((p=Fe[p&$t])>tt&&--g!==0);return A<=a.lookahead?A:a.lookahead},fs=a=>{let p=a.w_size,g,E,d,R,A;do{if(R=a.window_size-a.lookahead-a.strstart,a.strstart>=p+(p-ne)){a.window.set(a.window.subarray(p,p+p),0),a.match_start-=p,a.strstart-=p,a.block_start-=p,E=a.hash_size,g=E;do d=a.head[--g],a.head[g]=d>=p?d-p:0;while(--E);E=p,g=E;do d=a.prev[--g],a.prev[g]=d>=p?d-p:0;while(--E);R+=p}if(a.strm.avail_in===0)break;if(E=Ph(a.strm,a.window,a.strstart+a.lookahead,R),a.lookahead+=E,a.lookahead+a.insert>=J)for(A=a.strstart-a.insert,a.ins_h=a.window[A],a.ins_h=He(a,a.ins_h,a.window[A+1]);a.insert&&(a.ins_h=He(a,a.ins_h,a.window[A+J-1]),a.prev[A&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=A,A++,a.insert--,!(a.lookahead+a.insert<J)););}while(a.lookahead<ne&&a.strm.avail_in!==0)},Oh=(a,p)=>{let g=65535;for(g>a.pending_buf_size-5&&(g=a.pending_buf_size-5);;){if(a.lookahead<=1){if(fs(a),a.lookahead===0&&p===hs)return mt;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;let E=a.block_start+g;if((a.strstart===0||a.strstart>=E)&&(a.lookahead=a.strstart-E,a.strstart=E,Tt(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-ne&&(Tt(a,!1),a.strm.avail_out===0))return mt}return a.insert=0,p===Le?(Tt(a,!0),a.strm.avail_out===0?ds:js):(a.strstart>a.block_start&&(Tt(a,!1),a.strm.avail_out===0),mt)},Gr=(a,p)=>{let g,E;for(;;){if(a.lookahead<ne){if(fs(a),a.lookahead<ne&&p===hs)return mt;if(a.lookahead===0)break}if(g=0,a.lookahead>=J&&(a.ins_h=He(a,a.ins_h,a.window[a.strstart+J-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),g!==0&&a.strstart-g<=a.w_size-ne&&(a.match_length=zo(a,g)),a.match_length>=J)if(E=xe(a,a.strstart-a.match_start,a.match_length-J),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=J){a.match_length--;do a.strstart++,a.ins_h=He(a,a.ins_h,a.window[a.strstart+J-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=He(a,a.ins_h,a.window[a.strstart+1]);else E=xe(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(E&&(Tt(a,!1),a.strm.avail_out===0))return mt}return a.insert=a.strstart<J-1?a.strstart:J-1,p===Le?(Tt(a,!0),a.strm.avail_out===0?ds:js):a.last_lit&&(Tt(a,!1),a.strm.avail_out===0)?mt:ri},Hs=(a,p)=>{let g,E,d;for(;;){if(a.lookahead<ne){if(fs(a),a.lookahead<ne&&p===hs)return mt;if(a.lookahead===0)break}if(g=0,a.lookahead>=J&&(a.ins_h=He(a,a.ins_h,a.window[a.strstart+J-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=J-1,g!==0&&a.prev_length<a.max_lazy_match&&a.strstart-g<=a.w_size-ne&&(a.match_length=zo(a,g),a.match_length<=5&&(a.strategy===gh||a.match_length===J&&a.strstart-a.match_start>4096)&&(a.match_length=J-1)),a.prev_length>=J&&a.match_length<=a.prev_length){d=a.strstart+a.lookahead-J,E=xe(a,a.strstart-1-a.prev_match,a.prev_length-J),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=d&&(a.ins_h=He(a,a.ins_h,a.window[a.strstart+J-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);if(a.match_available=0,a.match_length=J-1,a.strstart++,E&&(Tt(a,!1),a.strm.avail_out===0))return mt}else if(a.match_available){if(E=xe(a,0,a.window[a.strstart-1]),E&&Tt(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return mt}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(E=xe(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<J-1?a.strstart:J-1,p===Le?(Tt(a,!0),a.strm.avail_out===0?ds:js):a.last_lit&&(Tt(a,!1),a.strm.avail_out===0)?mt:ri},Nh=(a,p)=>{let g,E,d,R,A=a.window;for(;;){if(a.lookahead<=Ve){if(fs(a),a.lookahead<=Ve&&p===hs)return mt;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=J&&a.strstart>0&&(d=a.strstart-1,E=A[d],E===A[++d]&&E===A[++d]&&E===A[++d])){R=a.strstart+Ve;do;while(E===A[++d]&&E===A[++d]&&E===A[++d]&&E===A[++d]&&E===A[++d]&&E===A[++d]&&E===A[++d]&&E===A[++d]&&d<R);a.match_length=Ve-(R-d),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=J?(g=xe(a,1,a.match_length-J),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(g=xe(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),g&&(Tt(a,!1),a.strm.avail_out===0))return mt}return a.insert=0,p===Le?(Tt(a,!0),a.strm.avail_out===0?ds:js):a.last_lit&&(Tt(a,!1),a.strm.avail_out===0)?mt:ri},Mh=(a,p)=>{let g;for(;;){if(a.lookahead===0&&(fs(a),a.lookahead===0)){if(p===hs)return mt;break}if(a.match_length=0,g=xe(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,g&&(Tt(a,!1),a.strm.avail_out===0))return mt}return a.insert=0,p===Le?(Tt(a,!0),a.strm.avail_out===0?ds:js):a.last_lit&&(Tt(a,!1),a.strm.avail_out===0)?mt:ri};function ue(a,p,g,E,d){this.good_length=a,this.max_lazy=p,this.nice_length=g,this.max_chain=E,this.func=d}let oi=[new ue(0,0,0,0,Oh),new ue(4,4,8,4,Gr),new ue(4,5,16,8,Gr),new ue(4,6,32,32,Gr),new ue(4,4,16,16,Hs),new ue(8,16,32,32,Hs),new ue(8,16,128,128,Hs),new ue(8,32,128,256,Hs),new ue(32,128,258,1024,Hs),new ue(32,258,258,4096,Hs)],Dh=a=>{a.window_size=2*a.w_size,je(a.head),a.max_lazy_match=oi[a.level].max_lazy,a.good_match=oi[a.level].good_length,a.nice_match=oi[a.level].nice_length,a.max_chain_length=oi[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=J-1,a.match_available=0,a.ins_h=0};function kh(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=qi,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Th*2),this.dyn_dtree=new Uint16Array((2*Ah+1)*2),this.bl_tree=new Uint16Array((2*bh+1)*2),je(this.dyn_ltree),je(this.dyn_dtree),je(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Rh+1),this.heap=new Uint16Array(2*$r+1),je(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*$r+1),je(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let Go=a=>{if(!a||!a.state)return Ue(a,Kt);a.total_in=a.total_out=0,a.data_type=vh;let p=a.state;return p.pending=0,p.pending_out=0,p.wrap<0&&(p.wrap=-p.wrap),p.status=p.wrap?Wi:us,a.adler=p.wrap===2?0:1,p.last_flush=hs,ah(p),he},qo=a=>{let p=Go(a);return p===he&&Dh(a.state),p},xh=(a,p)=>!a||!a.state||a.state.wrap!==2?Kt:(a.state.gzhead=p,he),Wo=(a,p,g,E,d,R)=>{if(!a)return Kt;let A=1;if(p===ph&&(p=6),E<0?(A=0,E=-E):E>15&&(A=2,E-=16),d<1||d>Sh||g!==qi||E<8||E>15||p<0||p>9||R<0||R>yh)return Ue(a,Kt);E===8&&(E=9);let I=new kh;return a.state=I,I.strm=a,I.wrap=A,I.gzhead=null,I.w_bits=E,I.w_size=1<<I.w_bits,I.w_mask=I.w_size-1,I.hash_bits=d+7,I.hash_size=1<<I.hash_bits,I.hash_mask=I.hash_size-1,I.hash_shift=~~((I.hash_bits+J-1)/J),I.window=new Uint8Array(I.w_size*2),I.head=new Uint16Array(I.hash_size),I.prev=new Uint16Array(I.w_size),I.lit_bufsize=1<<d+6,I.pending_buf_size=I.lit_bufsize*4,I.pending_buf=new Uint8Array(I.pending_buf_size),I.d_buf=1*I.lit_bufsize,I.l_buf=3*I.lit_bufsize,I.level=p,I.strategy=R,I.method=g,qo(a)},Lh=(a,p)=>Wo(a,p,qi,_h,wh,Eh),Vh=(a,p)=>{let g,E;if(!a||!a.state||p>Bo||p<0)return a?Ue(a,Kt):Kt;let d=a.state;if(!a.output||!a.input&&a.avail_in!==0||d.status===ii&&p!==Le)return Ue(a,a.avail_out===0?Fr:Kt);d.strm=a;let R=d.last_flush;if(d.last_flush=p,d.status===Wi)if(d.wrap===2)a.adler=0,st(d,31),st(d,139),st(d,8),d.gzhead?(st(d,(d.gzhead.text?1:0)+(d.gzhead.hcrc?2:0)+(d.gzhead.extra?4:0)+(d.gzhead.name?8:0)+(d.gzhead.comment?16:0)),st(d,d.gzhead.time&255),st(d,d.gzhead.time>>8&255),st(d,d.gzhead.time>>16&255),st(d,d.gzhead.time>>24&255),st(d,d.level===9?2:d.strategy>=Gi||d.level<2?4:0),st(d,d.gzhead.os&255),d.gzhead.extra&&d.gzhead.extra.length&&(st(d,d.gzhead.extra.length&255),st(d,d.gzhead.extra.length>>8&255)),d.gzhead.hcrc&&(a.adler=ke(a.adler,d.pending_buf,d.pending,0)),d.gzindex=0,d.status=zr):(st(d,0),st(d,0),st(d,0),st(d,0),st(d,0),st(d,d.level===9?2:d.strategy>=Gi||d.level<2?4:0),st(d,Ih),d.status=us);else{let A=qi+(d.w_bits-8<<4)<<8,I=-1;d.strategy>=Gi||d.level<2?I=0:d.level<6?I=1:d.level===6?I=2:I=3,A|=I<<6,d.strstart!==0&&(A|=Ch),A+=31-A%31,d.status=us,ni(d,A),d.strstart!==0&&(ni(d,a.adler>>>16),ni(d,a.adler&65535)),a.adler=1}if(d.status===zr)if(d.gzhead.extra){for(g=d.pending;d.gzindex<(d.gzhead.extra.length&65535)&&!(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=ke(a.adler,d.pending_buf,d.pending-g,g)),Be(a),g=d.pending,d.pending===d.pending_buf_size));)st(d,d.gzhead.extra[d.gzindex]&255),d.gzindex++;d.gzhead.hcrc&&d.pending>g&&(a.adler=ke(a.adler,d.pending_buf,d.pending-g,g)),d.gzindex===d.gzhead.extra.length&&(d.gzindex=0,d.status=Yi)}else d.status=Yi;if(d.status===Yi)if(d.gzhead.name){g=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=ke(a.adler,d.pending_buf,d.pending-g,g)),Be(a),g=d.pending,d.pending===d.pending_buf_size)){E=1;break}d.gzindex<d.gzhead.name.length?E=d.gzhead.name.charCodeAt(d.gzindex++)&255:E=0,st(d,E)}while(E!==0);d.gzhead.hcrc&&d.pending>g&&(a.adler=ke(a.adler,d.pending_buf,d.pending-g,g)),E===0&&(d.gzindex=0,d.status=Xi)}else d.status=Xi;if(d.status===Xi)if(d.gzhead.comment){g=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=ke(a.adler,d.pending_buf,d.pending-g,g)),Be(a),g=d.pending,d.pending===d.pending_buf_size)){E=1;break}d.gzindex<d.gzhead.comment.length?E=d.gzhead.comment.charCodeAt(d.gzindex++)&255:E=0,st(d,E)}while(E!==0);d.gzhead.hcrc&&d.pending>g&&(a.adler=ke(a.adler,d.pending_buf,d.pending-g,g)),E===0&&(d.status=Ki)}else d.status=Ki;if(d.status===Ki&&(d.gzhead.hcrc?(d.pending+2>d.pending_buf_size&&Be(a),d.pending+2<=d.pending_buf_size&&(st(d,a.adler&255),st(d,a.adler>>8&255),a.adler=0,d.status=us)):d.status=us),d.pending!==0){if(Be(a),a.avail_out===0)return d.last_flush=-1,he}else if(a.avail_in===0&&$o(p)<=$o(R)&&p!==Le)return Ue(a,Fr);if(d.status===ii&&a.avail_in!==0)return Ue(a,Fr);if(a.avail_in!==0||d.lookahead!==0||p!==hs&&d.status!==ii){let A=d.strategy===Gi?Mh(d,p):d.strategy===mh?Nh(d,p):oi[d.level].func(d,p);if((A===ds||A===js)&&(d.status=ii),A===mt||A===ds)return a.avail_out===0&&(d.last_flush=-1),he;if(A===ri&&(p===uh?hh(d):p!==Bo&&(ch(d,0,0,!1),p===dh&&(je(d.head),d.lookahead===0&&(d.strstart=0,d.block_start=0,d.insert=0))),Be(a),a.avail_out===0))return d.last_flush=-1,he}return p!==Le?he:d.wrap<=0?Fo:(d.wrap===2?(st(d,a.adler&255),st(d,a.adler>>8&255),st(d,a.adler>>16&255),st(d,a.adler>>24&255),st(d,a.total_in&255),st(d,a.total_in>>8&255),st(d,a.total_in>>16&255),st(d,a.total_in>>24&255)):(ni(d,a.adler>>>16),ni(d,a.adler&65535)),Be(a),d.wrap>0&&(d.wrap=-d.wrap),d.pending!==0?he:Fo)},Uh=a=>{if(!a||!a.state)return Kt;let p=a.state.status;return p!==Wi&&p!==zr&&p!==Yi&&p!==Xi&&p!==Ki&&p!==us&&p!==ii?Ue(a,Kt):(a.state=null,p===us?Ue(a,fh):he)},jh=(a,p)=>{let g=p.length;if(!a||!a.state)return Kt;let E=a.state,d=E.wrap;if(d===2||d===1&&E.status!==Wi||E.lookahead)return Kt;if(d===1&&(a.adler=jo(a.adler,p,g,0)),E.wrap=0,g>=E.w_size){d===0&&(je(E.head),E.strstart=0,E.block_start=0,E.insert=0);let tt=new Uint8Array(E.w_size);tt.set(p.subarray(g-E.w_size,g),0),p=tt,g=E.w_size}let R=a.avail_in,A=a.next_in,I=a.input;for(a.avail_in=g,a.next_in=0,a.input=p,fs(E);E.lookahead>=J;){let tt=E.strstart,$=E.lookahead-(J-1);do E.ins_h=He(E,E.ins_h,E.window[tt+J-1]),E.prev[tt&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=tt,tt++;while(--$);E.strstart=tt,E.lookahead=J-1,fs(E)}return E.strstart+=E.lookahead,E.block_start=E.strstart,E.insert=E.lookahead,E.lookahead=0,E.match_length=E.prev_length=J-1,E.match_available=0,a.next_in=A,a.input=I,a.avail_in=R,E.wrap=d,he};var Hh=Lh,Bh=Wo,Fh=qo,$h=Go,zh=xh,Gh=Vh,qh=Uh,Wh=jh,Yh="pako deflate (from Nodeca project)",ai={deflateInit:Hh,deflateInit2:Bh,deflateReset:Fh,deflateResetKeep:$h,deflateSetHeader:zh,deflate:Gh,deflateEnd:qh,deflateSetDictionary:Wh,deflateInfo:Yh};let Xh=(a,p)=>Object.prototype.hasOwnProperty.call(a,p);var Kh=function(a){let p=Array.prototype.slice.call(arguments,1);for(;p.length;){let g=p.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(let E in g)Xh(g,E)&&(a[E]=g[E])}}return a},Jh=a=>{let p=0;for(let E=0,d=a.length;E<d;E++)p+=a[E].length;let g=new Uint8Array(p);for(let E=0,d=0,R=a.length;E<R;E++){let A=a[E];g.set(A,d),d+=A.length}return g},Yo={assign:Kh,flattenChunks:Jh};let Xo=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Xo=!1}let ci=new Uint8Array(256);for(let a=0;a<256;a++)ci[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;ci[254]=ci[254]=1;var Qh=a=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let p,g,E,d,R,A=a.length,I=0;for(d=0;d<A;d++)g=a.charCodeAt(d),(g&64512)===55296&&d+1<A&&(E=a.charCodeAt(d+1),(E&64512)===56320&&(g=65536+(g-55296<<10)+(E-56320),d++)),I+=g<128?1:g<2048?2:g<65536?3:4;for(p=new Uint8Array(I),R=0,d=0;R<I;d++)g=a.charCodeAt(d),(g&64512)===55296&&d+1<A&&(E=a.charCodeAt(d+1),(E&64512)===56320&&(g=65536+(g-55296<<10)+(E-56320),d++)),g<128?p[R++]=g:g<2048?(p[R++]=192|g>>>6,p[R++]=128|g&63):g<65536?(p[R++]=224|g>>>12,p[R++]=128|g>>>6&63,p[R++]=128|g&63):(p[R++]=240|g>>>18,p[R++]=128|g>>>12&63,p[R++]=128|g>>>6&63,p[R++]=128|g&63);return p};let Ko=(a,p=a.length)=>{if(p<65534&&a.subarray&&Xo)return String.fromCharCode.apply(null,a.length===p?a:a.subarray(0,p));let g="";for(let E=0;E<p;E++)g+=String.fromCharCode(a[E]);return g};var Zh=(a,p)=>{let g=p||a.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,p));let E,d,R=new Array(g*2);for(d=0,E=0;E<g;){let A=a[E++];if(A<128){R[d++]=A;continue}let I=ci[A];if(I>4){R[d++]=65533,E+=I-1;continue}for(A&=I===2?31:I===3?15:7;I>1&&E<g;)A=A<<6|a[E++]&63,I--;if(I>1){R[d++]=65533;continue}A<65536?R[d++]=A:(A-=65536,R[d++]=55296|A>>10&1023,R[d++]=56320|A&1023)}return Ko(R,d)},tu=(a,p)=>{p=p||a.length,p>a.length&&(p=a.length);let g=p-1;for(;g>=0&&(a[g]&192)===128;)g--;return g<0||g===0?p:g+ci[a[g]]>p?g:p},Jo={string2buf:Qh,buf2string:Zh,utf8border:tu};function eu(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var su=eu;let Qo=Object.prototype.toString,{Z_NO_FLUSH:iu,Z_SYNC_FLUSH:ru,Z_FULL_FLUSH:nu,Z_FINISH:ou,Z_OK:Ji,Z_STREAM_END:au,Z_DEFAULT_COMPRESSION:cu,Z_DEFAULT_STRATEGY:lu,Z_DEFLATED:hu}=Ho;function Qi(a){this.options=Yo.assign({level:cu,method:hu,chunkSize:16384,windowBits:15,memLevel:8,strategy:lu},a||{});let p=this.options;p.raw&&p.windowBits>0?p.windowBits=-p.windowBits:p.gzip&&p.windowBits>0&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new su,this.strm.avail_out=0;let g=ai.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(g!==Ji)throw new Error(zi[g]);if(p.header&&ai.deflateSetHeader(this.strm,p.header),p.dictionary){let E;if(typeof p.dictionary=="string"?E=Jo.string2buf(p.dictionary):Qo.call(p.dictionary)==="[object ArrayBuffer]"?E=new Uint8Array(p.dictionary):E=p.dictionary,g=ai.deflateSetDictionary(this.strm,E),g!==Ji)throw new Error(zi[g]);this._dict_set=!0}}Qi.prototype.push=function(a,p){let g=this.strm,E=this.options.chunkSize,d,R;if(this.ended)return!1;for(p===~~p?R=p:R=p===!0?ou:iu,typeof a=="string"?g.input=Jo.string2buf(a):Qo.call(a)==="[object ArrayBuffer]"?g.input=new Uint8Array(a):g.input=a,g.next_in=0,g.avail_in=g.input.length;;){if(g.avail_out===0&&(g.output=new Uint8Array(E),g.next_out=0,g.avail_out=E),(R===ru||R===nu)&&g.avail_out<=6){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(d=ai.deflate(g,R),d===au)return g.next_out>0&&this.onData(g.output.subarray(0,g.next_out)),d=ai.deflateEnd(this.strm),this.onEnd(d),this.ended=!0,d===Ji;if(g.avail_out===0){this.onData(g.output);continue}if(R>0&&g.next_out>0){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(g.avail_in===0)break}return!0},Qi.prototype.onData=function(a){this.chunks.push(a)},Qi.prototype.onEnd=function(a){a===Ji&&(this.result=Yo.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function uu(a,p){p=p||{};let g=new Qi(p);if(g.push(a,!0),g.err)throw g.msg||zi[g.err];return g.result}function du(a,p){return p=p||{},p.gzip=!0,uu(a,p)}return(a,p,g)=>{let E=du(a);return p==="base64"?E=btoa(Ko(E)):E=E.buffer,g&&g(E),E}}var vE=(()=>{class s extends Zc{constructor(){super(),this.algorithm=Di.GZIP,this.pT=Xn(),this.compress=(i,n,o)=>this.om.compress(i,n).then(o);let e=typeof CompressionStream!="undefined"&&!!self.CompressionStream?_E:SE;this.om=new e,EE.create(e,{getPakoCompressor:Xn}).then(i=>{this.om=i})}compressSync(t,e){try{return this.pT(t,e)}catch(i){throw nt.warn(i),i}}}return s})(),SE=(()=>{class s{constructor(){this.gT=Xn()}compress(t,e){return Promise.resolve(this.gT(t,e))}}return s})(),_E=(()=>{class s{mT(t){return new Promise(e=>{let i=new FileReader;i.onload=n=>e(n.target.result.split(",")[1]),i.readAsDataURL(new Blob([t]))})}compress(t,e){let i=new Response(t).body.pipeThrough(new CompressionStream("gzip")),n=new Response(i).arrayBuffer();return e==="base64"?n.then(o=>this.mT(o)):n}}return s})(),Nl=(()=>{class s extends Zc{constructor(){super(...arguments),this.algorithm=Di.UNCOMPRESSED,this.compress=(t,e,i)=>{i(this.compressSync(t,e))},this.compressSync=(t,e)=>t}}return s})(),Ml=(()=>{class s{static create(t=!0){return this.instance?this.instance:t&&!mE.isCompressionEnabled()?new Nl:this.instance=new vE}}return s})(),wE=s=>{let r=s*60*1e3;return`${Math.floor(csDate.now()/r)}`},AE=5e3,bE=(()=>{class s extends xc{constructor(t,e,i){super(t,e),this.Fr=null,this.yT=(i==null?void 0:i.type)||"json",this.am=i==null?void 0:i.cacheMinutes,this.lc=i==null?void 0:i.timeout}onLoad(t){this.$r=t}onError(t){this.Ao=t}onTimeout(t,e){this.Zi=t,this.lc=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,n=>n());let t=this.retrieveParameters();this.ol(t);let e=Si.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.ET(i,this.yT)}abort(){this.Fr&&(this.Fr.abort(),this.Fr=null)}isInProgress(){return this.Fr!==null}ET(t,e){var i;let n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType=e,n.onerror=()=>{var o;return(o=this.Ao)===null||o===void 0?void 0:o.call(this,n)},n.ontimeout=()=>{var o;return(o=this.Zi)===null||o===void 0?void 0:o.call(this,n)},n.onload=()=>{var o,c;n.status>=200&&n.status<400?((o=this.$r)===null||o===void 0||o.call(this,this.vT(n,e)?n.response:n.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.Ao)===null||c===void 0||c.call(this,n)},n.onloadend=()=>{this.Fr=null},n.timeout=(i=this.lc)!==null&&i!==void 0?i:AE,this.Fr=n,n.send()}vT(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}ol(t){let e;this.am?e=`${wE(this.am)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})(),TE=2e4,RE=(()=>{class s{constructor(t){var e;this.Ze={},this.Cu={},this.cm=i=>{for(let n of i){let{metadata:o,events:c}=n;this.send(c,o)}},this.to=t.endpoint,this.bo=t.compressionOpts,this.le=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.Iu=t.contentType,this.worker=!!t.worker,this.le&&this.le.recover(this.cm)}setQueryParams(t){Object.keys(t).forEach(e=>{this.Ze[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.Ze[e]}):this.Ze={}}send(t,e){t=t!=null?t:"";let i=e||{...this.Ze},n=!("ct"in i),o=this.Iu==="application/json"||typeof t!="string"&&!this.ST(t);"ct"in i||(!this.bo||!n?i.ct=Di.UNCOMPRESSED:i.ct=this.bo.compressionType);let c=o?JSON.stringify(t):t,l=Object.keys(i).map(u=>`${encodeURIComponent(u)}=${encodeURIComponent(i[u])}`).join("&"),h=`${this.to}?${l}`;if(Mn(this.mandatoryParameters,u=>i[u]==null)){nt.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${h}`);return}this.bo&&n&&typeof c=="string"?this.bo.compressor(c,this.bo.compressionOutputType,u=>this.lm(h,i,u)):this.lm(h,i,c)}onLoad(t){this.$r=t}onError(t){this.Ao=t}onTimeout(t,e){this.Zi=t,this.lc=e}abort(){this.hm&&this.hm()}setRequestHeader(t,e){this.Cu[t]=e}getQueryParams(){return this.Ze}ST(t){return t&&t.byteLength!==void 0}lm(t,e,i){let n=new XMLHttpRequest,o=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");n.open("POST",t,!0),this.Iu&&n.setRequestHeader("Content-Type",this.Iu),n.onload=()=>{if(this.le&&this.le.recover(this.cm),this.$r){let c={params:e,responseText:n.responseText,status:n.status};this.$r(c)}},n.onerror=()=>{this.le&&this.le.save({key:o,metadata:e,events:i}),this.Ao&&this.Ao({params:e})},n.timeout=this.lc||TE,n.ontimeout=()=>{j.counters.requestTimeouts.count(this.to),this.Zi&&this.Zi()},this.hm=()=>n.abort(),Object.keys(this.Cu).forEach(c=>{n.setRequestHeader(c,this.Cu[c])}),n.send(i)}}return s})(),Dl=(()=>{class s{constructor(t){this.um=t}create(t,e,i){let n=e?{compressor:this.um.compress,compressionOutputType:e,compressionType:this.um.algorithm}:void 0;return new RE({endpoint:t,compressionOpts:n,recoveryStorage:i})}}return s})(),CE=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),ki=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})();var IE=(()=>{class s{constructor(t){this.Pu=t}start(){this.Pu.onEvent(t=>this.Z(t)),this.Pu.start()}stop(){this.Pu.stop()}Z(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;F.warn(e)}}return s})(),PE=(()=>{class s{constructor(){this.te={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)}}start(){Vt(this.te)}stop(){Ut(this.te)}onEvent(t){this.j=t}bT(t){if(!t)return!1;let e=t.disposition;return G(t.sourceFile)&&csArray.prototype.some.call(s.TT,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.bT(t)&&this.j({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.TT=["contentsquare","cdnssl.clicktale.net"],B([x("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),OE=(()=>{class s{init(){this.hc=new IE(new PE),this.hc.start()}onOptout(){this.hc.stop()}onArtificialPageViewEnd(t){t&&this.hc.stop()}onAfterArtificialPageView(t){t&&this.hc.start()}}return s})(),NE=(()=>{class s{constructor(t,e,i){this.E=t,this.C=e,this.w=i}grantReplayConsent(){if(!es.isReplayConsentNeeded(this.E))return;let t=this.C.getSession();if(!t){this.C.grantReplayRecordingBeforeSessionStart();return}es.isRecordingBlockedByConsent(t)&&(this.C.grantReplayRecording(t),this.w.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!es.isReplayConsentNeeded(this.E))return;let t=this.C.getSession();if(!t){this.C.withdrawnReplayRecordingBeforeSessionStart();return}es.isRecordingWithDrawn(t)||(this.C.withdrawnReplayRecording(t),this.w.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),ME=["replay:consent:unanonymized:granted","trackConsentGranted"],DE=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],kE=["replay:consent:startForSession:granted"],xE=["replay:consent:startForSession:withdrawn"],LE=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.S=e,this.It=i,this.C=n,this.w=o}init(){this.dm=new NE(this.E,this.C,this.w),this.It.setInitialConsent(),this.ft()}ft(){this.S.register(ME,()=>{this.It.grantReplayAnonymizationConsent()}),this.S.register(DE,()=>{this.It.withdrawReplayAnonymizationConsent()}),this.S.register(kE,()=>{this.dm.grantReplayConsent()}),this.S.register(xE,()=>{this.dm.withdrawReplayConsent()})}onOptout(){this.It.removeAllConsents()}onBeforeVisitorRenewal(){this.It.removeAllConsents()}onAfterVisitorRenewal(){this.It.setInitialConsent()}onAfterVisitorCleared(){this.It.setInitialConsent()}}return s})(),Xe="_cs_c",ms=(()=>{let s;return function(r){r[r.NOT_REQUIRED=0]="NOT_REQUIRED",r[r.NOT_EXPRESSED=1]="NOT_EXPRESSED",r[r.GRANTED=2]="GRANTED",r[r.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),VE=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.St=i}get(){let t;return this.E.cookielessTrackingEnabled?t=this.St.getItem(Xe):t=this.O.get(Xe),t===null?t:Number(t)}set(t){this.E.cookielessTrackingEnabled?this.St.setItem(Xe,csString(t)):this.O.set(Xe,csString(t),ao)}remove(){this.E.cookielessTrackingEnabled?this.St.removeItem(Xe):this.O.delete(Xe)}handleSubdomainChange(){this.E.cookielessTrackingEnabled||(this.E.allowSubdomains?this.O.delete(Xe,Or.CURRENT_DOMAIN):this.O.delete(Xe,this.O.getRootDomain()))}}return s})(),UE=(()=>{class s{constructor(t,e,i){this.E=t,this.mt=e,this.w=i}setInitialConsent(){let t=this.mt.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.E.consentRequired;return e&&t===ms.NOT_REQUIRED||!e&&t!==ms.NOT_REQUIRED}handleSubdomainChange(){this.mt.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.E.consentRequired?ms.NOT_EXPRESSED:ms.NOT_REQUIRED;this.mt.set(t)}grantReplayAnonymizationConsent(){this.E.consentRequired&&(this.mt.set(ms.GRANTED),this.w.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.E.consentRequired&&(this.mt.set(ms.WITHDRAWN),this.w.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.mt.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.E.consentRequired||this.mt.get()===ms.GRANTED}getRequestParameters(){return{uc:`${this.mt.get()}`}}}return s})(),Ja=512,Qa=255,pn={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},jE=(()=>{class s{constructor(t,e){this.D=t,this.mt=e,this.re={},this.We={}}set(t,e,i,n){let o,c;if((Wt(t)||G(t))&&Number(t)>0&&Mt(e)&&Mt(i)&&!os(e)&&!os(i)&&this.RT(n)){let l=this.D.anonymizePII(csString(e)),h=this.D.anonymizePII(csString(i));if(o=[csString.prototype.slice.call(l,0,Ja),csString.prototype.slice.call(h,0,Qa)],c=i!=="",!Q(n)||csArray.prototype.indexOf.call(pn.SESSION,n)>=0){let u=this.getCustomVariablesSession();c?u[t]=o:delete u[t],this.setCustomVariableSession(u)}(!Q(n)||csArray.prototype.indexOf.call(pn.PAGE,n)>=0)&&(c?this.re[t]=o:delete this.re[t]),Q(n)&&csArray.prototype.indexOf.call(pn.NEXT_PAGE_ONLY,n)>=0&&(c?this.We[t]=o:delete this.We[t])}else throw new wt(tl[0])}getCustomVariablesSession(){let t=this.mt.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&Ts(e)?e:{}}setCustomVariableSession(t){this.mt.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.mt.remove()}removeCustomVariablesPage(){this.re={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.We)this.We.hasOwnProperty(i)&&(this.re[i]=this.We[i]);for(let i in this.re)this.re.hasOwnProperty(i)&&(t[i]=this.re[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.fm(t)};return this.hasCustomVariablesPage()&&(e.cvarp=this.getCustomVariablesPage()),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.We).length>0)for(let t in this.We)this.We[t]===this.re[t]&&(delete this.re[t],delete this.We[t])}hasCustomVariablesPage(){return this.re&&!Cn(this.re)}getCustomVariablesPage(){return this.fm(this.re)}pm(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),n=t[e],o=n[0],c=n[1];(!gu(i,1,20)||o.length>Ja||c.length>Qa)&&delete t[e]}}fm(t){this.pm(t);let e=Cn(t)?[]:t;return window.csJSON.stringify(e)}RT(t){return!Q(t)||G(t)||Wt(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.We)this.We.hasOwnProperty(e)&&(this.re[e]=this.We[e]);for(let e in this.re)this.re.hasOwnProperty(e)&&(t[e]=this.re[e]);return this.pm(t),t}}return s})(),HE=(()=>{class s{constructor(t,e,i,n){this.be=t,this.To=e,this.Ro=i,this.It=n}init(){this.CT()}shouldMaskNonTextElements(){if(this.be.anonymisationMethod!==gs.replayRecordingMaskedUrlRegexRules)return!1;if(this.be.isSMB)return this.shouldUseAnonymization();let t=this.Ro.getMatchingRules(this.To.getAnonymizedUrl());return csArray.prototype.some.call(t,e=>e.maskMedia)}shouldUseAnonymization(){if(this.It&&!this.It.isReplayUnanonymizedAllowedByConsent()){switch(this.be.anonymisationMethod){case null:case gs.replayRecordingUnmaskedUrlRegex:return!(this.be.replayRecordingUnmaskedUrlRegex&&this.be.replayRecordingUnmaskedUrlRegex.test(this.To.getAnonymizedUrl()));case gs.replayRecordingUnmaskedUrlRegexRules:return!this.Ro.evaluateUrl(this.To.getAnonymizedUrl())}return!0}else{switch(this.be.anonymisationMethod){case null:case gs.replayRecordingMaskedUrlRegex:return!!(this.be.replayRecordingMaskedUrlRegex&&this.be.replayRecordingMaskedUrlRegex.test(this.To.getAnonymizedUrl()));case gs.replayRecordingMaskedUrlRegexRules:return this.Ro.evaluateUrl(this.To.getAnonymizedUrl())}return!1}}CT(){this.be.anonymisationMethod===gs.replayRecordingMaskedUrlRegexRules&&this.be.replayRecordingMaskedUrlRegexRules?this.Ro.setRegexRules(this.be.replayRecordingMaskedUrlRegexRules):this.be.anonymisationMethod===gs.replayRecordingUnmaskedUrlRegexRules&&this.be.replayRecordingUnmaskedUrlRegexRules&&this.Ro.setRegexRules(this.be.replayRecordingUnmaskedUrlRegexRules)}}return s})();var BE=(()=>{class s extends le{constructor(t){super(),this.W=null,this.fc=null,this.U=null,this.li=null,this.gm=["value","checked","src","data","alt"],this.pc={state:D.MaskedElementState.Child},this.PT=e=>{for(let i of e){if(D.isMaskedElement(i.target)||D.isMaskedElementChild(i.target))for(let n=0;n<i.addedNodes.length;n+=1){let o=i.addedNodes[n];D.isMaskedElement(o)||D.isMaskedElementChild(o)||ct(o)&&this.mm(o)}for(let n=0;n<i.removedNodes.length;n+=1){let o=i.removedNodes[n];ft.isConnected(o)||this.ym(o)}}},this.OT=t}setMaskedElementSettings(t){this.Hs=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,n;this.Hs||(nt.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.Hs={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:o,attrSelector:c,attrSelectors:l}=this.Hs;(t=this.li)!==null&&t!==void 0||(this.li=this.NT()),o.length!==0&&((e=this.W)!==null&&e!==void 0||(this.W=this.MT()),this.W.observe(o)),c.length!==0&&((i=this.fc)!==null&&i!==void 0||(this.fc=this.DT(l)),this.fc.observe(c)),(n=this.U)!==null&&n!==void 0||(this.U=new Ne(this.PT,(h,u)=>u==="added"&&this.kT(h))),this.U.observe(),csSetTimeout(this.OT)}onStop(){var t,e,i;this.W&&(this.ym(document),this.W.disconnect()),(t=this.fc)===null||t===void 0||t.disconnect(),(e=this.U)===null||e===void 0||e.disconnect(),(i=this.li)===null||i===void 0||i.disconnect()}NT(){return window.ResizeObserver?new ResizeObserver(t=>{window.requestAnimationFrame(()=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})})}):null}MT(){return new Os(t=>{csArray.prototype.forEach.call(t,e=>{this.xT(e)?this.mm(e):(this.LT(e),this.VT(e))})})}DT(t){return new Os(e=>{csArray.prototype.forEach.call(e,i=>this.UT(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=D.getMaskedElementDetails(t.target);if(i.state!==D.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let n={state:D.MaskedElementState.Parent,width:e.width,height:e.height};D.setMaskedElementProperty(t.target,n),this.produceEvent({type:"ResizeMaskedElement",target:q(t.target),width:e.width,height:e.height})}VT(t){!this.li||!ct(t)||Pr(t)||this.li.observe(t)}xT(t){let e=csNodeparentNode.apply(t);return e?D.isMaskedElement(e)||D.isMaskedElementChild(e):vi(t)?D.isMaskedElement(t.host)||D.isMaskedElementChild(t.host):!1}kT(t){(D.isMaskedElement(t.host)||D.isMaskedElementChild(t.host))&&D.setMaskedElementProperty(t,this.pc)}ym(t){se(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{D.unsetMaskedElementProperty(i),t===document&&j.counters.dom.add("size",1)})}LT(t){let e=t.getBoundingClientRect(),i={state:D.MaskedElementState.Parent,width:e.width,height:e.height};D.setMaskedElementProperty(t,i),this.jT(t),se(t).visitAll(n=>n!==t&&D.setMaskedElementProperty(n,this.pc))}mm(t){D.setMaskedElementProperty(t,this.pc),se(t).visitAll(e=>e!==t&&D.setMaskedElementProperty(e,this.pc))}jT(t){var e;let i=(e=it.getProperty(t,D.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let n=0;n<this.gm.length;n+=1){let o=this.gm[n];csArray.prototype.indexOf.call(i.attributes,o)===-1&&csArray.prototype.push.call(i.attributes,o)}i.attributes.length!==0&&D.setMaskedAttributeProperty(t,i)}UT(t,e){var i;let n=(i=it.getProperty(t,D.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let o=0;o<t.attributes.length;o+=1){let c=t.attributes[o].name;csArray.prototype.indexOf.call(n.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&Ft.call(t,l.selector))&&csArray.prototype.push.call(n.attributes,c)}n.attributes.length!==0&&D.setMaskedAttributeProperty(t,n)}}return Oe([x()],s.prototype,"resizeObserverCallback",null),s})(),FE=(()=>{class s{constructor(){this.Nu=0,this.B=!1,this.Em="data-cs-capture",this.wi=t=>{for(let e of t){if(pe.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];pe.isWhitelistedElement(n)||ct(n)&&this.vm(n)}for(let i=0;i<e.removedNodes.length;i+=1){let n=e.removedNodes[i];ft.isConnected(n)||this.Sm(n)}}}}start(){this.Nu++,!this.B&&(this.B=!0,this.HT())}HT(){this.W||(this.W=new Os(e=>Z(e,i=>this.vm(i))));let t=this.Mu?`[${this.Em}], ${this.Mu}`:`[${this.Em}]`;this.W.observe(t),this.U||(this.U=new Ne(this.wi,(e,i)=>i==="added"&&this.BT(e))),this.U.observe()}stop(){this.B&&(this.Nu--,this.Nu===0&&(this.B=!1,this.FT()))}FT(){this.W&&(this.Sm(document),this.W.disconnect()),this.U&&this.U.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(Ys(t))this.Mu=t;else if(e)throw new wt("setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.Mu}vm(t){se(t).visitAll(e=>{pe.whitelistElement(e)})}BT(t){pe.isWhitelistedElement(t.host)&&pe.whitelistElement(t)}Sm(t){se(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{pe.removeWhitelistElement(i)})}}return s})();var $E=(()=>{let s;return function(r){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(e(i).toString(16),-4),o=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let h=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(l==="x"?h:h&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",n)}r.generate=t;function e(i){let n=0;for(let o=0;o<i.length;o+=1)n=csString.prototype.charCodeAt.call(i,o)+(n<<6)+(n<<16)-n;return Math.abs(n)}}(s||(s={})),s})();var zE="csq:start-hotjar",Po=(()=>{let s;return function(r){r.HJ_DUAL_COLLECT="one_app_tag_dc"}(s||(s={})),s})(),GE=(()=>{class s{static set(t,e){s.wm[t]=e}static isEnabled(t){return s.wm[t]===!0}}return s.wm={[Po.HJ_DUAL_COLLECT]:!1},s})();function qE(s){return!window.hjSiteSettings||!((window.hjSiteSettings.features==null?void 0:csArray.prototype.indexOf.call(window.hjSiteSettings.features,Po.HJ_DUAL_COLLECT))>-1)?!1:s?!Yc(s)&&!lp(s):!0}var WE=(()=>{class s{constructor(t,e){this.Q=t,this.pt=e,this.ku=!1}getRequestParameters(){return{dr:this.get()}}addUrlMaskingPattern(t){this.pt.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.ku=!0}disableRemoveQueryString(){this.ku=!1}get(){let t=this.ku?this.Q.removeQueryString(this.Rm()):this.Rm();return this.Q.anonymizeUrl(t,{maskingPatterns:this.pt.getUrlMaskingPatterns()})}set(t){this.Cm=t}Rm(){if(this.Cm)return this.Cm;let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})();function Za(s,r,t){if(!Q(r)&&!Q(t))return s.href;let e=Q(r)?Kn(r):s.pathname,i=Q(t)?kl(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function Kn(s){return Dt(s,"/")?s:`/${s}`}function kl(s){return Dt(s,"?")||s===""?s:`?${s}`}var gn=(()=>{let s;return function(r){r[r.page=1]="page",r[r.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),YE=(()=>{class s{constructor(t,e){this.Dt=t,this.Q=e,this.s0=10}overridePath(t,e){if(t===""){this.Ai=void 0;return}let i=this.Im(e);i&&(this.xu=i),this.Ai=e?this.Pm(t,e):t}overrideQuery(t,e){let i=this.Im(e);i&&(this.Lu=i),this.Co=e?this.Pm(t,e):t}computeOverriddenUrl(t){return this.i0(t)?this.getAnonymizedUrl():t}r0(t){return(typeof t=="string"||typeof t=="number")&&t in gn}i0(t){let e=this.ya(this.Dt.href);return this.ya(t)===e}ya(t){return Nd(t,"/")?csString.prototype.slice.call(t,0,-1):t}Im(t){return Q(t==null?void 0:t.lifespan)&&this.r0(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}n0(){return this.xu&&this.xu in gn}o0(){return this.Lu&&this.Lu in gn}cleanupOverrideLifespan(){this.n0()&&(this.Ai=void 0,this.xu=void 0),this.o0()&&(this.Co=void 0,this.Lu=void 0)}getAnonymizedUrl(){let t=Za(this.Dt,this.Ai,this.Co);return this.Q.anonymizeUrl(t)}getUrl(){return Za(this.Dt,this.Ai,this.Co)}getAnonymizedPathAndQuery(){let t=Q(this.Ai)?Kn(this.Ai):this.Dt.pathname,e=Q(this.Co)?kl(this.Co):this.Dt.search;return this.Q.anonymizeUrl(t+e)}getPath(){return Q(this.Ai)?Kn(this.Ai):this.Dt.pathname}getUrlProtocol(){return this.Dt.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}Pm(t,e){return this.a0(e)?this.c0(t):this.l0(e)?this.h0(t):t}l0(t){return!!t.decodeURI}h0(t){return this.Om(t,1,!1)}a0(t){return!!t.decodeURIDeep}c0(t){return this.Om(t,this.s0,!0)}Om(t,e,i){let n=t;for(let o=0;o<e;o++)try{let c=window.decodeURI(n);if(c===n)return n;n=c}catch{return n}return i&&F.warn(`decodeURIDeep limit reached: ${n}`),n}}return s})(),XE=(()=>{class s{constructor(t,e){this.S=t,this.Rs=e}init(){this.S.register(["debugEvents"],t=>{typeof t=="boolean"&&this.Rs.updateDynamicFields("emitDebugEvents",t)})}}return s})();var tc=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.M=e,this.C=i,this.Nm=n,this.ns=o}getRequestParameters(){var t;let e={...yo(),...this.E.getRequestParameters()},i=this.C.getSession();i&&(e.pn=`${i.pageNumber}`);let n=this.M.getVisitor();if(n&&(e.sn=`${n.visitsCount}`,e.uu=`${n.id}`),!((t=this.Nm)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.Nm.getSubProjectId()}`),this.u0(e),window.heap&&!this.E.isCsCrosswritingHeap())try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}u0(t){if(!this.ns)return;let e=this.ns.getSharedContext();e&&(t.happid=e.happid,t.t=e.pageTitle,t.fvt=csString(e.firstViewTime),t.fvurl=e.firstViewUrl,e.previousViewUrl&&(t.pvurl=e.previousViewUrl),t.url=e.currentViewUrl,e.sessionReferrer&&(t.fpvurl=e.sessionReferrer),t.sw=csString(e.screenWidth),t.sh=csString(e.screenHeight),t.cvt=csString(e.currentViewTime),e.encryptedIdentity&&(t.i=e.encryptedIdentity),e.cvarp&&(t.cvarp=e.cvarp))}}return s})();function KE(){let s="[data-cs-mask]",r="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,r,t,...e,...i]}function JE(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var QE=(()=>{class s{constructor(t){this.yl=t,this.d0={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.Hs={elementSelector:"",attrSelector:"",attrSelectors:[]};let e={PIISelectors:KE(),Attributes:JE()};this.Hs=D.getComputedSelectorSettings(e,this.Hs)}init(){this.f0()}setMaskedElementSettingsFromCommand(t){if(t=D.sanitizeSelectorUserInput(t),!D.isSelectorUserInput(t))throw new wt(sl[0]);this.Vu(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.Vu(e)}getMaskedElementSettings(t){return t?this.Mm(this.d0):this.Hs}f0(){var t,e,i,n,o,c,l;let h={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&h.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(o=(n=window==null?void 0:window.ClickTaleSettings)===null||n===void 0?void 0:n.DOM)===null||o===void 0?void 0:o.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(u=>{G(u.attr)&&G(u.rule)&&h.Attributes.push({selector:u.rule,attrName:u.attr})}),(l=this.yl)===null||l===void 0||l.markClicktalePIIInUse(h),this.Vu(h)}Vu(t){this.Hs=this.Mm(t)}Mm(t){return D.getComputedSelectorSettings(t,this.Hs)}}return s})(),ZE=60*1e3,tv=30*1e3,ev=(()=>{class s{constructor(t,e){this.C=t,this.M=e,this.Uu=!1,this.p0=Nr(()=>this.C.refreshSession(),tv)}onSessionExpired(t){this.g0=t}isSessionValid(){return this.Uu?!0:!(!this.C.hasValidSession()||this.C.pollCacheRefreshEvent()&&this.M.isSessionRenewed())}isCurrentPageviewValid(){let t=this.C.hasValidSession();return this.C.pollCacheRefreshEvent(!1)?!this.M.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.p0():this.m0()&&(this.Dm=P.now(),this.renewSession(!1))}renewSession(t){this.Uu=!0,this.g0(t),this.Uu=!1}m0(){return!document.hidden&&(!Q(this.Dm)||P.now()-this.Dm>ZE)}}return s})(),sv=(()=>{class s{constructor(){this.W=null,this.U=null,this.B=!1,this.wi=t=>{for(let e of t)if(Je.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];if(!Je.isEditableNode(n)){if(Qs(n)||bc(n)){Je.markEditableNode(n);continue}ct(n)&&this.km(n)}}}}start(){this.B||(this.B=!0,this.W=new Os(t=>Z(t,e=>{this.km(e)})),this.W.observe("[contenteditable]"),this.U=new Ne(this.wi,(t,e)=>e==="added"&&this.y0(t)),this.U.observe())}stop(){var t,e;this.B&&(this.B=!1,(t=this.W)===null||t===void 0||t.disconnect(),this.W=null,(e=this.U)===null||e===void 0||e.disconnect(),this.U=null)}km(t){se(t).visitAll(e=>{Je.markEditableNode(e)})}y0(t){Je.isEditableNode(t.host)&&Je.markEditableNode(t)}}return s})(),iv=(()=>{class s{constructor(){this.W=null,this.U=null,this.ju=new Set,this.B=!1,this.wi=t=>{for(let e of t)if(ge.shouldEncrypt(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];if(!ge.shouldEncrypt(n)){if(Qs(n)||bc(n)){ge.markEncryptedNode(n);continue}ct(n)&&this.xm(n)}}}}start(){if(this.B)return;this.B=!0,this.W=new Os(e=>Z(e,i=>{this.xm(i)}));let t=csArray.prototype.join.call(as(this.ju),",");this.W.observe(t),this.U=new Ne(this.wi,(e,i)=>i==="added"&&this.E0(e)),this.U.observe()}stop(){var t,e;this.B&&(this.B=!1,(t=this.W)===null||t===void 0||t.disconnect(),this.W=null,(e=this.U)===null||e===void 0||e.disconnect(),this.U=null)}addSelector(t){!Ys(t)||this.ju.has(t)||(this.ju.add(t),this.W&&this.W.observe(t))}xm(t){se(t).visitAll(e=>{ge.markEncryptedNode(e)})}E0(t){ge.shouldEncrypt(t.host)&&ge.markEncryptedNode(t)}}return s})(),Oo=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),rv=(()=>{class s extends Oo{constructor(t){super(),this.v0=t,this.gi=[{boundElement:document,type:"touchstart",listener:e=>this.Z(e)},{boundElement:document,type:"touchmove",listener:e=>this.Z(e)},{boundElement:document,type:"touchend",listener:e=>this.Z(e)}],this.Io=new Wn,this.Io.onGesture((e,i)=>this.Fh(e,i))}Fh(t,e){for(let i in this.subscriptions){let n=this.subscriptions[i];n(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.gi,t=>Vt(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.gi,t=>Ut(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}Z(t){this.v0.tryToExecute("process gesture event",()=>{if(this.Io.isValidTouchEvent(t))switch(t.type){case"touchstart":this.Io.processActionDown(t);break;case"touchmove":this.Io.processActionMove();break;case"touchend":this.Io.processActionUp(t);break}})()}static isSwipe(t){return t.type===_t.FLICK||t.type===_t.DRAG}}return s})();var nv=(()=>{class s{constructor(t){this.vt=t}on(t,e){return i=>{this.vt.hasValidEventTarget(i)&&this.j0(i,t)&&e(i)}}j0(t,e){let i=St(t);return Ft.call(i,e)}isMatchesSelectorSupported(){return!!Ft}}return s})(),ov=(()=>{class s extends Pt{constructor(){super(),this.Hm=0}onStart(){F.isPerfLoggingActive()&&(this.Po=window.csSetInterval(()=>this.Bm(),s.H0))}onStop(){F.isPerfLoggingActive()&&(this.Bm(),csClearInterval(this.Po))}Bm(){this.Hm>=s.B0||j.counters.methodPerformance.flush()&&this.Hm++}}return s.H0=5e3,s.B0=5,s})(),av=(()=>{class s{constructor(){}init(){this.yc=new ov}onStartTracking(){this.yc.start()}onOptout(){this.yc.stop()}onArtificialPageViewEnd(t){t&&this.yc.stop()}onAfterArtificialPageView(t){t&&this.yc.start()}}return s})();var xl=(()=>{class s{constructor(){this.sR=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml","text/javascript"]}setCollectionOptions(t){this.Xu=t}isValidBodyType(t){let e=t["content-type"];if(!e)return!1;let i=csString.prototype.toLocaleLowerCase.call(e);return Mn(this.sR,n=>_r(i,n))}canCollect(t,e){return this.iR(t,e)&&this.rR(e)}iR(t,e){return t>=400||t>=200&&t<300&&this.Xu.statusCodes.has(t)&&this.nR(e)}nR(t){return Mn(this.Xu.urls,e=>csString.prototype.indexOf.call(t,e)!==-1)}rR(t){return Iu(this.Xu.excludedDomains,e=>csString.prototype.indexOf.call(t,e)===-1)}}return s})(),cv=(()=>{class s extends xl{constructor(){super(),this.B=!1,this.qr=null,this.oR=({result:t,args:e,callerName:i})=>{this.interceptFetch(t,e,i)}}onEvent(t){this.j=t}start(){this.B||this.aR()&&(this.cR(),this.qr&&this.qr.activate(),this.B=!0)}stop(){this.B&&(this.qr&&this.qr.deactivate(),this.B=!1)}aR(){return!!window.fetch&&typeof window.fetch=="function"}lR(t){if(t[0]&&typeof t[0].clone=="function"){let e=Js(t);return e[0]=t[0].clone(),e}return t}cR(){this.qr||(this.qr=ae({target:window,methodName:"fetch",hook:this.oR,hookPrepareArgs:this.lR,options:{withCallerName:!0}}))}async interceptFetch(t,e,i){let n=e[0],o=e[1],c=new Request(n,o);if(!G(c.url))return;let l=P.now(),h;try{h=await t}catch(m){if(this.hR(m)||this.Km(m)||this.uR(m)||this.dR(m))return;throw m}let[u,f]=csString.prototype.split.call(c.url,"?"),y=ce(u);if(h&&super.canCollect(h.status,y)){let m={library:i,method:c.method,url:y,queryParameters:f,requestTime:l,responseTime:P.now(),statusCode:h.status,requestBody:"",responseBody:"",requestHeaders:this.Jm(c.headers),responseHeaders:this.Jm(h.headers)};if(!h.bodyUsed&&super.isValidBodyType(m.responseHeaders))try{m.responseBody=await h.clone().text()}catch(v){if(this.Km(v))return}super.isValidBodyType(m.requestHeaders)&&(m.requestBody=await c.text()),this.j(m)}}hR(t){return t instanceof TypeError}Km(t){return t instanceof DOMException&&t.name==="AbortError"}dR(t){return t instanceof DOMException&&t.name==="TimeoutError"}uR(t){return t instanceof DOMException&&csArray.prototype.some.call(s.fR,e=>e===t.name)}Jm(t){let e={};return t.forEach((i,n)=>{i&&(e[csString.prototype.toLowerCase.call(n)]=csString.prototype.trim.call(i))}),e}}return s.fR=["NoModificationAllowedError","InvalidStateError","OperationError"],B([x("FetchRequestTracker.interceptFetch")],s.prototype,"interceptFetch",null),s})(),lv=0,hv=(()=>{class s extends xl{constructor(){super(),this.ne=csSymbol("ApiCall"),this.B=!1,this.Wr=null,this.Yr=null,this.Sc=null,this.pR=({context:t,args:e,callerName:i})=>this.interceptOpen(t,e,i),this.gR=({context:t,args:e})=>this.interceptSetRequestHeader(t,e),this.mR=({context:t,args:e})=>this.interceptSend(t,e)}onEvent(t){this.j=t}start(){this.B||(this.bu(),this.Wr&&this.Wr.activate(),this.Yr&&this.Yr.activate(),this.Sc&&this.Sc.activate(),this.B=!0)}stop(){this.B&&(this.Wr&&this.Wr.deactivate(),this.Yr&&this.Yr.deactivate(),this.B=!1)}bu(){this.Wr||(this.Wr=ae({target:XMLHttpRequest.prototype,methodName:"open",hook:this.pR,options:{withCallerName:!0}})),this.Yr||(this.Yr=ae({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.gR})),this.Sc||(this.Sc=ae({target:XMLHttpRequest.prototype,methodName:"send",hook:this.mR}))}interceptOpen(t,e,i){if(!e[1]||!G(e[1]))return;let[n,o]=csString.prototype.split.call(e[1],"?");t[this.ne]={library:i,requestTime:P.now(),method:e[0],url:ce(n),queryParameters:o,statusCode:lv,responseHeaders:{},requestHeaders:{},responseBody:"",requestBody:""},t.addEventListener("readystatechange",()=>this.readyStateChangeListener(t))}readyStateChangeListener(t){t[this.ne]&&t.readyState===XMLHttpRequest.DONE&&this.canCollect(t.status,t[this.ne].url)&&(t[this.ne].responseTime=P.now(),t[this.ne].statusCode=t.status,t[this.ne].responseHeaders=this.yR(t.getAllResponseHeaders()),super.isValidBodyType(t[this.ne].responseHeaders)&&(t.responseType===""||t.responseType==="text")&&(t[this.ne].responseBody=t.responseText),this.j(t[this.ne]))}interceptSetRequestHeader(t,e){if(!t[this.ne])return;let i=e[0],n=csString.prototype.valueOf.call(new csString(e[1]));typeof i!="string"||n.length===0||(i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(i)),n=csString.prototype.trim.call(n),t[this.ne].requestHeaders[i]?t[this.ne].requestHeaders[i]+=`, ${n}`:t[this.ne].requestHeaders[i]=n)}interceptSend(t,e){t[this.ne]&&super.isValidBodyType(t[this.ne].requestHeaders)&&typeof e[0]=="string"&&(t[this.ne].requestBody=e[0])}yR(t){let e={};return csArray.prototype.forEach.call(csString.prototype.split.call(t,/[\r\n]+/),i=>{let[n,o]=csString.prototype.split.call(i,/:\s*/);o&&(e[csString.prototype.toLowerCase.call(n)]=csString.prototype.trim.call(o))}),e}}return B([x("XhrRequestTracker.interceptOpen")],s.prototype,"interceptOpen",null),B([x("XhrRequestTracker.readyStateChangeListener")],s.prototype,"readyStateChangeListener",null),B([x("XhrRequestTracker.interceptSetRequestHeader")],s.prototype,"interceptSetRequestHeader",null),B([x("XhrRequestTracker.interceptSend")],s.prototype,"interceptSend",null),s})(),uv=1024,dv=512,mn=1024,yn="||",fv=(()=>{let s;return function(r){function t(c,l){return G(c)&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(c),Re.CHAMELEON)!==-1?Re.CHAMELEON:l}r.handleCustomEventCommandMisuse=t;function e(c,l,h){let u=i(h);return{type:W.CUSTOM_EVENT,ts:0,customEventName:K.truncate(c,uv,K.ELLIPSIS),sourceLibrary:Df(l)?l:Re.WEB,...Cn(u)?{}:{properties:u}}}r.buildCustomEvent=e;function i(c){let l={};for(let h in c){if(h.length>dv)continue;let u=c[h];if(Wt(u)||fr(u))l[h]=csString(u);else if(o(u))l[h]=K.truncate(u,mn,K.ELLIPSIS);else if(Ou(u)){let f=n(u);f!==""&&(l[h]=f)}}return l}r.sanitizeCustomEventProperties=i;function n(c){let l="";for(let h=0;h<c.length;h++){let u=c[h];if(!Wt(u)&&!fr(u)&&!o(u))continue;let f=csString(u);if(l==="")l=K.truncate(f,mn,K.ELLIPSIS);else if(l.length+yn.length+f.length<=mn)l+=yn+f;else break}return l}function o(c){return G(c)&&!no(c)&&!csString.prototype.includes.call(c,yn)}}(s||(s={})),s})(),Lt=(()=>{class s{static buildFromCustomEvent(t,e){return this.Qm(null,t,e)}static buildFromAnalysisEvent(t,e,i){return this.Qm(t,e,i)}static Qm(t,e,i){return csArray.prototype.reduce.call(i,(n,o)=>o.enhanceAnalysisEvent(t,n),e)}}return s})();var pv=(()=>{class s extends Pt{constructor(t,e,i,n,o,c,l,h,u,f,y,m,v,T,C,w,b,k,O,S,V){super(),this.E=t,this.Ti=e,this.zt=i,this.Xr=n,this.Ku=o,this.as=c,this.je=l,this.Ju=h,this.V=u,this.le=f,this.Qu=y,this.es=m,this.K=v,this.Gt=T,this._c=C,this.Bs=w,this.Fs=b,this.Zu=k,this.ir=O,this.rr=S,this.nr=V,this.Ei=new Cl,this.wc=!1,this.or=[]}init(){var t,e,i,n,o,c,l;this.Ti.onEvent(h=>this.jt(h)),this.zt.onEvent(h=>this.jt(h)),this.Xr.onEvent(()=>{let h=this.Xr.getRequestParameters();this.K.setQueryParams(h),this.je.setQueryParams(h)}),this.Qu.onEvent(h=>this.Te(h)),this.td(),(t=this._c)===null||t===void 0||t.onEvent(h=>this.jt(h)),(e=this.ir)===null||e===void 0||e.onEvent(h=>this.jt(h)),(i=this.Bs)===null||i===void 0||i.onEvent(h=>this.jt(h)),(n=this.Fs)===null||n===void 0||n.onEvent(h=>this.jt(h)),this.ER(),(o=this.Zu)===null||o===void 0||o.onEvent(h=>this.Te(h)),(c=this.rr)===null||c===void 0||c.onEvent(h=>this.Te(h)),(l=this.nr)===null||l===void 0||l.onEvent(h=>this.Te(h))}ER(){this.je.onBeaconSuccess(()=>{this.as.clearEvents()}),this.je.onBeaconFailure(t=>{this.vR(t)})}initStates(){let t=this.Ju.getRequestParameters(),e=this.Ku.getRequestParameters(),i=this.Xr.getRequestParameters();this.K.setQueryParams(t),this.K.setQueryParams(e),this.K.setQueryParams(i),this.je.setQueryParams(t),this.je.setQueryParams(e),this.je.setQueryParams(i),this.Ll()}clearStates(t){var e,i;this.Ti.flushPendingDebouncedListeners(),(e=this.Bs)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.Fs)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this.sd(),this.sendLastMessageBeacon()):this.sendEvents(),this.Xr.reset(),this.K.removeQueryParams()}onStart(t){var e,i,n,o,c,l,h;t||(e=this.Zu)===null||e===void 0||e.start(),this.es.start(),this.Ti.start(),this.Xr.start(),this.zt.start(),(i=this._c)===null||i===void 0||i.start(),(n=this.Fs)===null||n===void 0||n.start(),t||this.Qu.start(),(o=this.Bs)===null||o===void 0||o.start(),(c=this.ir)===null||c===void 0||c.start(),(l=this.rr)===null||l===void 0||l.start(),(h=this.nr)===null||h===void 0||h.start(),csArray.prototype.forEach.call(this.or,u=>{this.Te(u)}),this.or=[]}collectInitialEvents(){var t;(t=this._c)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.Te(t)}onIframeAnalysisUserEvent(t){this.jt(t)}onExternalEvent(t){this.Z(t)}Te(t){this.isStarted&&this.V.isCurrentPageviewValid()&&this.Z(t)}jt(t){this.isStarted&&(this.V.refreshSession(),this.V.isSessionValid()&&this.Z(t))}Z(t){this.as.addEvent(this.SR(t)),this.as.isFull()&&this.sendEvents(),this.E.emitDebugEvents&&this.Ei.emit("analysisEvent",{...t,typeName:W[t.type]})}SR(t){return t.ts=this.Li(),t}sd(){this.je.setQueryParams({hlm:"true"}),this.wc=!0}sendLastMessageBeacon(){this.je.removeQueryParams(["i"]),this.je.setQueryParams(this.Ju.getRequestParameters()),this.je.setQueryParams(this.Ku.getRequestParameters()),this.je.send(this.as.stringifyEvents()),this.je.removeQueryParams(["hlm"]),this.wc=!1}sendEvents(){this.as.isEmpty()||(this.je.removeQueryParams(["i"]),this.K.setQueryParams(this.Ju.getRequestParameters()),this.K.setQueryParams(this.Ku.getRequestParameters()),this.K.send(this.as.getEvents()),this.as.clearEvents())}onStop(){var t,e,i,n,o,c,l;this.es.stop(),this.Ti.stop(),this.Xr.stop(),this.zt.stop(),this.Qu.stop(),(t=this._c)===null||t===void 0||t.stop(),(e=this.Bs)===null||e===void 0||e.stop(),(i=this.Fs)===null||i===void 0||i.stop(),(n=this.ir)===null||n===void 0||n.stop(),this.as.empty(),(o=this.Zu)===null||o===void 0||o.stop(),(c=this.rr)===null||c===void 0||c.stop(),(l=this.nr)===null||l===void 0||l.stop()}Ll(){this.ds=P.now()}Li(){return P.now()-this.ds}td(){this.es.onEvent(t=>{var e,i;t!==Qt.Visible&&((e=this.Bs)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.Fs)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===Qt.PagehideVisible?this.sd():t===Qt.PagehideHidden?(this.sd(),this.sendLastMessageBeacon()):(!this.as.isEmpty()||this.wc)&&this.sendLastMessageBeacon())})}vR(t){try{(!this.as.isEmpty()||this.wc)&&this.le.save({requestParameters:t,events:this.as.getEvents()})}catch{}}pushCustomEvent(t,e,i){if(!(G(t)&&!no(t))||i!==void 0&&!pc(i))throw new wt(so[0]);let n=fv.buildCustomEvent(t,e,i),o=Lt.buildFromCustomEvent(n,this.Gt);this.isStarted?this.Te(o):csArray.prototype.push.call(this.or,o)}}return s})(),gv=(()=>{class s extends ki{constructor(){super(...arguments),this.supportedEventTypes=[W.CHANGE],this._R=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=St(t);return Ni(i)&&csArray.prototype.indexOf.call(this._R,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})();var Gt=(()=>{let s;return function(r){r[r.ANONYMIZED=0]="ANONYMIZED",r[r.CAPTURED=1]="CAPTURED",r[r.MASKED=2]="MASKED",r[r.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})();var Ll=(()=>{class s extends ki{constructor(t){super(),this.vt=t,this.supportedEventTypes=[W.MOUSEDOWN,W.MOUSEUP,W.CLICK,W.MOUSEOVER,W.TAP,W.DRAG,W.FLICK,W.SUBMIT,W.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.vt.getEventTargetPath(t)),e}}return s})(),ec=65535,mv=(()=>{let s;return function(r){function t(e){let i=St(e);if(!i||!ct(i)||!os(i.getBoundingClientRect)||!Mt(e.pageX)||!Mt(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let n=i.getBoundingClientRect(),o=e.pageX-n.left-yt.windowOffsetX(),c=e.pageY-n.top-yt.windowOffsetY();i!==document.documentElement&&(o+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,n.width),h=Math.max(i.scrollHeight,n.height),u=Math.round(o/l*ec),f=Math.round(c/h*ec);return{xRel:u,yRel:f,valid:!0}}r.getRelativePosition=t}(s||(s={})),s})(),yv=(()=>{class s extends ki{constructor(t,e){super(),this.Rs=t,this.vt=e,this.supportedEventTypes=[W.MOUSEMOVE,W.CLICK],this.nd=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:n,yRel:o}=mv.getRelativePosition(t);if(i){let c=this.vt.getEventTargetPath(t);c!==is.INVALID_ELEMENT&&(e.xRel=n,e.yRel=o,e.type===W.MOUSEMOVE&&(c!==this.nd||this.Rs.iframesTracking?(this.nd=c,e.tgtHM=c,this.Rs.isChild||(e.tgtHMH=Fc(e.tgtHM))):e.tgtHM=""))}else e.type===W.MOUSEMOVE&&(this.nd="");return e}}return s})(),Vl=(()=>{class s extends ki{constructor(t,e){super(),this.vt=t,this.$t=e,this.supportedEventTypes=[W.CLICK,W.SUBMIT,W.CHANGE,W.TAP]}baseEnhanceAnalysisEvent(t,e){let i=this.$t.getSensitiveStatus().useAnonymization,{path:n,hierarchy:o}=this.vt.getEventTargetPathAndHierarchy(t,i);return e.tgt=n,e.hrchy=o,e}}return s})(),sc=100,Ul=(()=>{class s extends ki{constructor(t,e,i){super(),this.E=t,this.$t=e,this.D=i,this.supportedEventTypes=[W.TAP,W.CLICK,W.SUBMIT]}MR(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),n=i.nextNode();for(;n;){if(e+=n.textContent,fo(n.parentElement)||Ir(n.parentElement)||this.$t.getElementSensitiveStatus(n.parentElement)!==Gt.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=sc)break;n=i.nextNode()}return!1}DR(t){let e=Un(t,"button,a");return e||(this.E.collectTargetText===Vn.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(Rr(csEventtarget.apply(t))){let i=this.DR(csEventtarget.apply(t));if(i&&G(i.textContent)&&!this.MR(i)&&!this.D.hasPII(i.textContent,this.E.anonymizeDigits)){let n=K.truncate(csString.prototype.trim.call(i.textContent),sc);n.length>0&&(e.text=n)}}return e}}return s})();function Ev(s,r,t,e,i){let n=[];return csArray.prototype.push.call(n,new yv(s,r)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(n,new Ul(s,t,new ei)),s.collectHierarchy&&csArray.prototype.push.call(n,new Vl(r,t)),csArray.prototype.push.call(n,new gv,new Ll(r)),n}function vv(s,r,t,e,i){let n=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(n,new Ul(s,t,new ei)),s.collectHierarchy&&csArray.prototype.push.call(n,new Vl(r,t)),csArray.prototype.push.call(n,new Ll(r)),n}var Sv=(()=>{class s extends Pt{constructor(t,e){super(),this.le=t,this.K=e,this.iy=()=>{document.visibilityState==="visible"&&this.ry()}}onStart(){this.ry(),this.Jh()}onStop(){this.Qh()}getRecoveryStorage(){return this.le}ry(){let t=this.le.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.K.send(i,e)}}Jh(){document.addEventListener("visibilitychange",this.iy)}Qh(){document.removeEventListener("visibilitychange",this.iy)}}return s})(),_v=(()=>{class s{constructor(t){this.xr=t}save(t){localStorage.setItem(this.xr,csJSON.stringify(t))}clear(){localStorage.removeItem(this.xr)}recover(){let t=localStorage.getItem(this.xr);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{F.error(`Invalid item in localStorage.
         (key:${this.xr}; value:${t})`)}finally{this.clear()}return e}}return s})(),wv=50,Av=(()=>{class s{constructor(t=[]){this.Bt=t}stringifyEvents(){return csJSON.stringify(this.Bt)}addEvent(t){csArray.prototype.push.call(this.Bt,t)}eventsCount(){return this.Bt.length}clearEvents(){this.Bt=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=wv}isEmpty(){return this.Bt.length===0}getEvents(){return this.Bt}}return s})(),bv=(()=>{class s{constructor(t,e,i,n=["submit"]){this.Gt=t,this.vt=e,this.qt=i,this.kR=n,this.ny="select, select *, input, textarea",this.xR="select, select *, input, textarea",this.oy="a, a *, button, button *, select, select *, input, textarea",this.Do="input, select, textarea",this.LR="form",this.Pc=150,this.VR=400,this.ay=!1,this.ko=pr((o,c)=>this.scrollListener(o,c),this.Pc),this.cy=pr(o=>this.resizeListener(o),this.Pc),this.UR=Nr(o=>this.mouseMoveListener(o),this.VR),this.jR=[{boundElement:window,type:"resize",listener:()=>this.cy()},{boundElement:document,type:"scroll",listener:o=>this.ko(o)},{boundElement:window,type:"mousemove",listener:o=>{this.UR(Kf(o))}},{boundElement:document,type:"mousedown",listener:o=>this.mouseDownListener(o)},{boundElement:document,type:"mouseup",listener:o=>this.mouseUpListener(o)},{boundElement:document,type:"click",listener:o=>this.clickListener(o)}],this.ly=[{type:"change",listener:this.qt.on(this.xR,o=>this.changeListener(o))},{type:"submit",listener:this.qt.on(this.LR,o=>this.submitListener(o))}],this.HR=[{boundElement:document,type:"mouseover",listener:this.qt.on(this.oy,o=>this.mouseOverListener(o))},{boundElement:document,type:"mouseout",listener:this.qt.on(this.oy,o=>this.mouseOutListener(o))},{boundElement:document,type:"focusin",listener:this.qt.on(this.ny,o=>this.focusInListener(o))},{boundElement:document,type:"focusout",listener:this.qt.on(this.ny,o=>this.focusOutListener(o))},{boundElement:document,type:"keyup",listener:this.qt.on(this.Do,o=>this.keyUpListener(o))},{boundElement:document,type:"keydown",listener:this.qt.on(this.Do,o=>this.keyDownListener(o))},{boundElement:document,type:"copy",listener:this.qt.on(this.Do,o=>this.copyListener(o))},{boundElement:document,type:"cut",listener:this.qt.on(this.Do,o=>this.cutListener(o))},{boundElement:document,type:"paste",listener:this.qt.on(this.Do,o=>this.pasteListener(o))},...csArray.prototype.map.call(this.ly,o=>({...o,boundElement:document}))],this.F={},this.ah=(o,c)=>{switch(c){case"initial":case"added":this.Yi(o);break;case"removed":this.Xi(o);break}},this.Ee=new xs(this.ah),this.du()}Yi(t){if(yr(t)){let e=this.hy();csArray.prototype.forEach.call(e,i=>Vt(i))}else{let e=this.uy();csArray.prototype.forEach.call(e,i=>{Vt({...i,boundElement:t})})}}Xi(t){if(yr(t)){let e=this.hy();csArray.prototype.forEach.call(e,i=>Ut(i))}else{let e=this.uy();csArray.prototype.forEach.call(e,i=>{Ut({...i,boundElement:t})})}}onEvent(t){this.j=t}start(){this.Ee.observe(),this.Yi(document),this.resizeListener()}stop(){this.Xi(document),this.Ee.disconnect()}flushPendingDebouncedListeners(){this.ko.flushPending(),this.cy.flushPending()}dy(t){return csArray.prototype.some.call(this.kR,e=>e===t)}uy(){return this.qt.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.ly,t=>!this.dy(t.type)):(F.warn("Element.matches is not implemented yet"),[])}hy(){let t=[];return csArray.prototype.push.call(t,...this.jR),this.qt.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.HR):F.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.dy(e.type))}resizeListener(t){let e=Ks.getScrollContainer(),i=Rr(e);i&&(this.ay=!0);let n={type:W.RESIZE,ts:0,x:i?e.clientWidth:yt.windowWidth(),y:i?e.clientHeight:yt.windowHeight()};t!==void 0&&(n.d=t),this.j(n)}scrollListener(t,e){let i=Ks.isEventOnScrollContainer(e);!this.ay&&i&&this.resizeListener();let n={type:W.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:yt.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:yt.windowOffsetY(),d:t},o=Lt.buildFromAnalysisEvent(e,n,this.Gt);this.j(o)}mouseMoveListener(t){let e={type:W.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Lt.buildFromAnalysisEvent(t,e,this.Gt);this.j(i)}mouseDownListener(t){let e={type:W.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Lt.buildFromAnalysisEvent(t,e,this.Gt);this.Re(i)}mouseUpListener(t){let e={type:W.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Lt.buildFromAnalysisEvent(t,e,this.Gt);this.Re(i)}clickListener(t){let e={type:W.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Lt.buildFromAnalysisEvent(t,e,this.Gt);this.Re(i)}mouseOverListener(t){let e={type:W.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Lt.buildFromAnalysisEvent(t,e,this.Gt);this.Re(i)}mouseOutListener(t){let e={type:W.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.vt.getEventTargetPath(t)},i=Lt.buildFromAnalysisEvent(t,e,this.Gt);this.Re(i)}focusInListener(t){let e={type:W.FOCUSIN,ts:0,tgt:this.vt.getEventTargetPath(t)},i=Lt.buildFromAnalysisEvent(t,e,this.Gt);this.Re(i)}focusOutListener(t){let e={type:W.FOCUSOUT,ts:0,tgt:this.vt.getEventTargetPath(t)},i=Lt.buildFromAnalysisEvent(t,e,this.Gt);this.Re(i)}changeListener(t){let e={type:W.CHANGE,ts:0,tgt:""},i=Lt.buildFromAnalysisEvent(t,e,this.Gt);this.Re(i)}submitListener(t){let e={type:W.SUBMIT,ts:0,tgt:""},i=Lt.buildFromAnalysisEvent(t,e,this.Gt);this.Re(i)}copyListener(t){let e={type:W.COMMAND,ts:0,tgt:this.vt.getEventTargetPath(t),key:Xs.COPY};this.Re(e)}cutListener(t){let e={type:W.COMMAND,ts:0,tgt:this.vt.getEventTargetPath(t),key:Xs.CUT};this.Re(e)}pasteListener(t){let e={type:W.COMMAND,ts:0,tgt:this.vt.getEventTargetPath(t),key:Xs.PASTE};this.Re(e)}keyUpListener(t){let e={type:W.KEYUP,ts:0,tgt:this.vt.getEventTargetPath(t),key:this.fy(t)};this.Re(e)}keyDownListener(t){let e={type:W.KEYDOWN,ts:0,tgt:this.vt.getEventTargetPath(t),key:this.fy(t)};this.Re(e)}fy(t){let e=this.F[t.key];return e===void 0?Y.ALPHANUMERICAL:e}Re(t){Bc(t)&&t.tgt!==is.INVALID_ELEMENT&&this.j(t)}du(){this.F[" "]=Y.SPACE,this.F.Spacebar=Y.SPACE,this.F.Enter=Y.ENTER,this.F.Backspace=Y.BACKSPACE,this.F.Delete=Y.DELETE,this.F.ArrowUp=Y.ARROWUP,this.F.ArrowDown=Y.ARROWDOWN,this.F.ArrowLeft=Y.ARROWLEFT,this.F.ArrowRight=Y.ARROWRIGHT,this.F.Up=Y.ARROWUP,this.F.Down=Y.ARROWDOWN,this.F.Left=Y.ARROWLEFT,this.F.Right=Y.ARROWRIGHT,this.F.CapsLock=Y.CAPSLOCK,this.F.Shift=Y.SHIFT,this.F.Tab=Y.TAB}}return B([x("Event handler type: resize")],s.prototype,"resizeListener",null),B([x("Event handler type: scroll")],s.prototype,"scrollListener",null),B([x("Event handler type: mouseMove"),It()],s.prototype,"mouseMoveListener",null),B([x("Event handler type: mouseDown"),It()],s.prototype,"mouseDownListener",null),B([x("Event handler type: mouseUp"),It()],s.prototype,"mouseUpListener",null),B([x("Event handler type: click"),It()],s.prototype,"clickListener",null),B([x("Event handler type: mouseOver"),It()],s.prototype,"mouseOverListener",null),B([x("Event handler type: mouseOut"),It()],s.prototype,"mouseOutListener",null),B([x("Event handler type: focusIn")],s.prototype,"focusInListener",null),B([x("Event handler type: focusOut")],s.prototype,"focusOutListener",null),B([x("Event handler type: change")],s.prototype,"changeListener",null),B([x("Event handler type: submit"),It()],s.prototype,"submitListener",null),B([x("Event handler type: copy")],s.prototype,"copyListener",null),B([x("Event handler type: cut")],s.prototype,"cutListener",null),B([x("Event handler type: paste")],s.prototype,"pasteListener",null),B([x("Event handler type: keyup")],s.prototype,"keyUpListener",null),B([x("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),Tv=(()=>{class s{constructor(t,e,i){this.Gt=t,this.zt=e,this.Nt=i}processGesture(t,e){switch(t.type){case _t.TAP:this.BR(e);break;case _t.FLICK:this.FR(t,e);break;case _t.DRAG:this.$R(t,e);break;default:break}}BR(t){let e={type:W.TAP,ts:0,x:0,y:0,tgt:""},i=Lt.buildFromAnalysisEvent(t,e,this.Gt);i.tgt!==is.INVALID_ELEMENT&&this.j(i)}$R(t,e){var i,n;let o={type:W.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.Nt)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.Nt)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=Lt.buildFromAnalysisEvent(e,o,this.Gt);c.tgt!==is.INVALID_ELEMENT&&this.j(c)}FR(t,e){var i,n;let o={type:W.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.Nt)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.Nt)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=Lt.buildFromAnalysisEvent(e,o,this.Gt);c.tgt!==is.INVALID_ELEMENT&&this.j(c)}onEvent(t){this.j=t}start(){this.zt.subscribe(s.py,(t,e)=>this.processGesture(t,e))}stop(){this.zt.unsubscribe(s.py)}}return s.py="AnalysisGestureTracker",B([It()],s.prototype,"processGesture",null),s})();var Rv=(()=>{class s{constructor(){this.by=100,this.Vo=0,this.Uo=yt.documentHeight(),this.Ty={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.Vo=this.pd(Ks.getScrollContainer()).maxScrollRate}onEvent(t){this.j=t}start(){Vt(this.Ty)}stop(){Ut(this.Ty)}reset(){let t=Ks.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.pd(t);this.Uo=i,this.Vo=e,this.j()}pd(t){let e=0,i=0;if(t===null)i=yt.documentHeight(),e=this.eC(i);else{let n=this.sC(t);i=this.Ry(t,n),e=this.iC(t,n)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;Ks.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:n}=this.pd(e);(i>this.Vo||n>this.Uo)&&(this.Vo=i,n>this.Uo&&(this.Uo=n),this.j())}eC(t){let e=Math.round(this.rC()/t*100);return Math.min(e,this.by)}rC(){let t=yt.windowHeight();return yt.windowOffsetY()+t}iC(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,n=this.Ry(t,e),o=Math.round(i/n*100);return Math.min(o,this.by)}sC(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}Ry(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.Vo}`,mdh:`${this.Uo}`}}}return B([x("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})(),Cv=(()=>{class s{constructor(t){this.jo=t,this.Ho=e=>this.processMetric(e),this.B=!1}onEvent(t){this.j=t}start(){this.B||(this.B=!0,this.jo.onFCP(this.Ho),this.jo.onCLS(this.Ho),this.jo.onLCP(this.Ho),this.jo.onTTFB(this.Ho),this.jo.onINP(this.Ho))}stop(){this.B=!1}processMetric(t){if(!this.B)return;let e={type:W.PERFORMANCE,name:t.name,val:t.value,ts:0};this.j(e)}}return B([x("Performance metric handler")],s.prototype,"processMetric",null),s})(),Iv=(()=>{class s{constructor(t){this.Dc=t.performance}getRequestParameters(){if(this.nC())return{};let t=this.oC();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}oC(){let t=this.Dc.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}nC(){return!(this.Dc&&this.Dc.timing&&this.Dc.timing.loadEventEnd>0)}}return s})();var jl=-1,si=s=>{addEventListener("pageshow",r=>{r.persisted&&(jl=r.timeStamp,s(r))},!0)},Ee=(s,r,t,e)=>{let i,n;return o=>{r.value>=0&&(o||e)&&(n=r.value-(i!=null?i:0),(n||i===void 0)&&(i=r.value,r.delta=n,r.rating=((c,l)=>c>l[1]?"poor":c>l[0]?"needs-improvement":"good")(r.value,t),s(r)))}},No=s=>{requestAnimationFrame(()=>requestAnimationFrame(()=>s()))},Mo=()=>{let s=performance.getEntriesByType("navigation")[0];if(s&&s.responseStart>0&&s.responseStart<performance.now())return s},xi=()=>{var r;let s=Mo();return(r=s==null?void 0:s.activationStart)!=null?r:0},ve=(s,r=-1)=>{let t=Mo(),e="navigate";return jl>=0?e="back-forward-cache":t&&(document.prerendering||xi()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:r,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:e}},En=new WeakMap;function Do(s,r){return En.get(s)||En.set(s,new r),En.get(s)}var Jn=class{constructor(){_e(this,"t");_e(this,"i",0);_e(this,"o",[])}h(r){var i;if(r.hadRecentInput)return;let t=this.o[0],e=this.o.at(-1);this.i&&t&&e&&r.startTime-e.startTime<1e3&&r.startTime-t.startTime<5e3?(this.i+=r.value,this.o.push(r)):(this.i=r.value,this.o=[r]),(i=this.t)==null||i.call(this,r)}},Li=(s,r,t={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(s)){let e=new PerformanceObserver(i=>{Promise.resolve().then(()=>{r(i.getEntries())})});return e.observe({type:s,buffered:!0,...t}),e}}catch{}},ko=s=>{let r=!1;return()=>{r||(s(),r=!0)}},Ws=-1,ic=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,Tr=s=>{document.visibilityState==="hidden"&&Ws>-1&&(Ws=s.type==="visibilitychange"?s.timeStamp:0,Pv())},rc=()=>{addEventListener("visibilitychange",Tr,!0),addEventListener("prerenderingchange",Tr,!0)},Pv=()=>{removeEventListener("visibilitychange",Tr,!0),removeEventListener("prerenderingchange",Tr,!0)},Hl=()=>{var s;if(Ws<0){let r=xi(),t=document.prerendering||(s=globalThis.performance.getEntriesByType("visibility-state").filter(e=>e.name==="hidden"&&e.startTime>r)[0])==null?void 0:s.startTime;Ws=t!=null?t:ic(),rc(),si(()=>{setTimeout(()=>{Ws=ic(),rc()})})}return{get firstHiddenTime(){return Ws}}},xr=s=>{document.prerendering?addEventListener("prerenderingchange",()=>s(),!0):s()},nc=[1800,3e3],Bl=(s,r={})=>{xr(()=>{let t=Hl(),e,i=ve("FCP"),n=Li("paint",o=>{for(let c of o)c.name==="first-contentful-paint"&&(n.disconnect(),c.startTime<t.firstHiddenTime&&(i.value=Math.max(c.startTime-xi(),0),i.entries.push(c),e(!0)))});n&&(e=Ee(s,i,nc,r.reportAllChanges),si(o=>{i=ve("FCP"),e=Ee(s,i,nc,r.reportAllChanges),No(()=>{i.value=performance.now()-o.timeStamp,e(!0)})}))})},oc=[.1,.25],Ov=(s,r={})=>{Bl(ko(()=>{let t,e=ve("CLS",0),i=Do(r,Jn),n=c=>{for(let l of c)i.h(l);i.i>e.value&&(e.value=i.i,e.entries=i.o,t())},o=Li("layout-shift",n);o&&(t=Ee(s,e,oc,r.reportAllChanges),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),si(()=>{i.i=0,e=ve("CLS",0),t=Ee(s,e,oc,r.reportAllChanges),No(()=>t())}),setTimeout(t))}))},Fl=0,vn=1/0,cr=0,Nv=s=>{for(let r of s)r.interactionId&&(vn=Math.min(vn,r.interactionId),cr=Math.max(cr,r.interactionId),Fl=cr?(cr-vn)/7+1:0)},Qn,ac=()=>{var s;return Qn?Fl:(s=performance.interactionCount)!=null?s:0},Mv=()=>{"interactionCount"in performance||Qn||(Qn=Li("event",Nv,{type:"event",buffered:!0,durationThreshold:0}))},cc=0,Zn=class{constructor(){_e(this,"u",[]);_e(this,"l",new Map);_e(this,"m");_e(this,"p")}v(){cc=ac(),this.u.length=0,this.l.clear()}P(){let r=Math.min(this.u.length-1,Math.floor((ac()-cc)/50));return this.u[r]}h(r){var i,n;if((i=this.m)==null||i.call(this,r),!r.interactionId&&r.entryType!=="first-input")return;let t=this.u.at(-1),e=this.l.get(r.interactionId);if(e||this.u.length<10||r.duration>t.T){if(e?r.duration>e.T?(e.entries=[r],e.T=r.duration):r.duration===e.T&&r.startTime===e.entries[0].startTime&&e.entries.push(r):(e={id:r.interactionId,entries:[r],T:r.duration},this.l.set(e.id,e),this.u.push(e)),this.u.sort((o,c)=>c.T-o.T),this.u.length>10){let o=this.u.splice(10);for(let c of o)this.l.delete(c.id)}(n=this.p)==null||n.call(this,e)}}},$l=s=>{let r=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?s():(r(s=ko(s)),document.addEventListener("visibilitychange",s,{once:!0}))},lc=[200,500],Dv=(s,r={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&xr(()=>{var c;Mv();let t,e=ve("INP"),i=Do(r,Zn),n=l=>{$l(()=>{for(let u of l)i.h(u);let h=i.P();h&&h.T!==e.value&&(e.value=h.T,e.entries=h.entries,t())})},o=Li("event",n,{durationThreshold:(c=r.durationThreshold)!=null?c:40});t=Ee(s,e,lc,r.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),si(()=>{i.v(),e=ve("INP"),t=Ee(s,e,lc,r.reportAllChanges)}))})},to=class{constructor(){_e(this,"m")}h(r){var t;(t=this.m)==null||t.call(this,r)}},hc=[2500,4e3],kv=(s,r={})=>{xr(()=>{let t=Hl(),e,i=ve("LCP"),n=Do(r,to),o=l=>{r.reportAllChanges||(l=l.slice(-1));for(let h of l)n.h(h),h.startTime<t.firstHiddenTime&&(i.value=Math.max(h.startTime-xi(),0),i.entries=[h],e())},c=Li("largest-contentful-paint",o);if(c){e=Ee(s,i,hc,r.reportAllChanges);let l=ko(()=>{o(c.takeRecords()),c.disconnect(),e(!0)});for(let h of["keydown","click","visibilitychange"])addEventListener(h,()=>$l(l),{capture:!0,once:!0});si(h=>{i=ve("LCP"),e=Ee(s,i,hc,r.reportAllChanges),No(()=>{i.value=performance.now()-h.timeStamp,e(!0)})})}})},uc=[800,1800],eo=s=>{document.prerendering?xr(()=>eo(s)):document.readyState!=="complete"?addEventListener("load",()=>eo(s),!0):setTimeout(s)},xv=(s,r={})=>{let t=ve("TTFB"),e=Ee(s,t,uc,r.reportAllChanges);eo(()=>{let i=Mo();i&&(t.value=Math.max(i.responseStart-xi(),0),t.entries=[i],e(!0),si(()=>{t=ve("TTFB",0),e=Ee(s,t,uc,r.reportAllChanges),e(!0)}))})},Lv=(()=>{class s{onFCP(t){try{Bl(t,{reportAllChanges:!0})}catch{j.counters.webVitalsErrors.count("FCP")}}onCLS(t){try{Ov(t,{reportAllChanges:!0})}catch{j.counters.webVitalsErrors.count("CLS")}}onLCP(t){try{kv(t,{reportAllChanges:!0})}catch{j.counters.webVitalsErrors.count("LCP")}}onTTFB(t){try{xv(t,{reportAllChanges:!0})}catch{j.counters.webVitalsErrors.count("TTFB")}}onINP(t){try{Dv(t,{reportAllChanges:!0})}catch{j.counters.webVitalsErrors.count("INP")}}}return s})();var Vv="csAnalysisEventsPersisted",dc="v2/events",so=["trackEvent"];var Uv=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,f,y,m,v,T,C){this.E=t,this._t=e,this.M=i,this.et=n,this.qt=o,this.S=c,this.V=l,this.zt=h,this.gt=u,this.Ot=f,this.Y=y,this.$t=m,this.nt=v,this.Wt=T,this.Yt=C}init(){let t=new Av,e=this.Ot.create(`${this.E.getTrackerUri()}/${dc}`,"base64");this.tn=this.vC(e),this.Ce=this.SC(t,this.tn.getRecoveryStorage(),e),this.Ce.init(),this.Y.addListener(this.Ce),this.gt.addListener(this.Ce),this.S.register(so,i=>{if(!pc(i))throw new wt(so[0]);this.Ce.pushCustomEvent(i.name,i.source,i.properties)})}onStartTracking(t){this.tn.start(),this.Ce.start(t)}onAfterNaturalPageView(){this.Ce.initStates()}onArtificialPageViewEnd(t){this.Ce.clearStates(!0),t&&(this.Ce.stop(),this.tn.stop())}onAfterArtificialPageView(t){this.Ce.initStates(),t&&(this.Ce.start(),this.tn.start()),this.Ce.collectInitialEvents()}onBeforeSessionRenewal(){this.Ce.clearStates(),this.Ce.stop(),this.tn.stop()}onOptout(){this.Ce.stop(),this.tn.stop()}SC(t,e,i){var n,o;let c=new Iv(window),l=new Rv,h=Ev(this.E,this.et,this.$t,this.Wt,this.Yt),u=[];this.E.collectSubmit||csArray.prototype.push.call(u,"submit");let f=new bv(h,this.et,this.qt,u),y=vv(this.E,this.et,this.$t,this.Wt,this.Yt),m=new Tv(y,this.zt),v=new Cv(new Lv),T=new Il,C,w,b,k=new Tl(`${this.E.getTrackerUri()}/${dc}`),O=new wi(this._t,this.M),S,V,H,X;return new pv(this.E,f,m,l,c,t,k,O,this.V,e,v,T,i,h,C,w,b,S,V,H,X)}vC(t){return new Sv(new _v(Vv),t)}}return s})(),jv=["startDataCollection","data-collection:start"],Hv=["data-collection:stop"],Bv=(()=>{class s{constructor(t,e){this.cs=t,this.S=e}init(){this.S.register(jv,()=>{this.cs.startDataCollection()}),this.S.register(Hv,()=>{this.cs.stopDataCollection()})}}return s})(),Sn={fromSessionRenewal:!1,isRenewedVisitor:!1},Fv=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.w=e,this.us=i,this.ht=n,this.cr=o,this.V=c,this.jy=!1,this.Hy=0,this.yd=!0,this.By=!1,this.qs=!1,this.startDataCollection=({fromSessionRenewal:l,onAfterDataCollectionStartedCallback:h}=Sn)=>{l&&this.qs||!this.jy?this._C(l,h):this.wC()}}isDataCollectionStarted(){return this.qs}tryStartAutomaticDataCollection({fromSessionRenewal:t,isRenewedVisitor:e,onAfterDataCollectionStartedCallback:i}=Sn){this.AC(t,e)&&this.startDataCollection({fromSessionRenewal:t,onAfterDataCollectionStartedCallback:i})}disableStartDataCollection(){this.yd=!1}allowStartDataCollection({fromSessionRenewal:t}=Sn){this.yd=!0,this.By&&this.startDataCollection({fromSessionRenewal:t})}stopDataCollection(){this.qs&&(this.qs=!1,this.w.emitArtificialPageViewEnd(!0),this.cr.stop())}wC(){this.qs||(this.qs=!0,this.V.isSessionValid()?(this.V.refreshSession(),this.cr.start(Ss.Artificial)):this.V.renewSession(!1))}AC(t,e){return e&&!this.qs?!1:t?!0:this.E.startMode===wr.Manual?!1:!Bn(this.E)&&!this.E.isHeapSideloadsStartDataCollection()&&!this.E.isCsSideloadingHeap()}_C(t,e){if(this.us.isActive()||(this.By=!0,this.bC()&&(this.Hy++,this.Hy<2))||!this.yd||this.qs&&!t)return;this.jy=!0,this.qs=!0,this.ht.init();let i=t?Ss.Renewal:Ss.Natural;this.cr.start(i);let n=()=>{this.w.emitStartTracking(t),typeof e=="function"&&e()};ft.onDocumentLoaded(n)}bC(){return Bn(this.E)&&this.E.isCsSideloadingHeap()}}return s})(),$v=(()=>{class s{constructor(t){this.Ed=t}buildApiErrors(t,e){let i=this.Ed.collectDataPoints(t,e);if(i===null)return null;let n=this.TC(t,i);if(e){let o=this.RC(t,i);return{apiError:n,detailedApiError:o}}return{apiError:n}}RC(t,e){let i=this.Fy(t);return e.collectQueryParam&&t.queryParameters&&(i.queryParameters=t.queryParameters),e.collectRequestBody&&t.requestBody&&(i.requestBody=t.requestBody),e.collectResponseBody&&t.responseBody&&(i.responseBody=t.responseBody),Object.keys(e.standardRequestHeaders).length>0&&(i.standardRequestHeaders=e.standardRequestHeaders),Object.keys(e.standardResponseHeaders).length>0&&(i.standardResponseHeaders=e.standardResponseHeaders),Object.keys(e.customRequestHeaders).length>0&&(i.customRequestHeaders=csJSON.stringify(e.customRequestHeaders)),Object.keys(e.customResponseHeaders).length>0&&(i.customResponseHeaders=csJSON.stringify(e.customResponseHeaders)),Object.keys(e.plainCustomRequestHeaders).length>0&&(i.plainCustomRequestHeaders=e.plainCustomRequestHeaders),Object.keys(e.plainCustomResponseHeaders).length>0&&(i.plainCustomResponseHeaders=e.plainCustomResponseHeaders),e.plainResponseBodyAttributes&&Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainResponseBodyAttributes=e.plainResponseBodyAttributes),e.plainRequestBodyAttributes&&Object.keys(e.plainRequestBodyAttributes).length>0&&(i.plainRequestBodyAttributes=e.plainRequestBodyAttributes),Object.keys(e.responseBodyAttributes).length>0&&(i.responseBodyAttributes=csJSON.stringify(e.responseBodyAttributes)),Object.keys(e.requestBodyAttributes).length>0&&(i.requestBodyAttributes=csJSON.stringify(e.requestBodyAttributes)),i}Fy(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library}}TC(t,e){let i=this.Fy(t);return e.matchingBodyContents.length>0&&(i.matchingBodyContents=e.matchingBodyContents),Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainBodyResponseAttributes=e.plainResponseBodyAttributes),i}}return s})(),zv=(()=>{class s extends Oo{constructor(t,e,i){super(),this.kc=t,this.xc=e,this.Ed=i,this.vd=0,this.CC=new $v(i)}subscribe(t,e,i){i!=null&&i.detailedEvent&&(Object.defineProperty(e,"detailedEvent",{value:i.detailedEvent}),this.vd++),super.subscribe(t,e)}unsubscribe(t){var e;!((e=this.subscriptions[t])===null||e===void 0)&&e.hasOwnProperty("detailedEvent")&&this.vd--,super.unsubscribe(t)}init(){let t=this.Ed.computeApiErrorCollectionOptions();this.kc.setCollectionOptions(t),this.kc.onEvent(e=>this.$y(e)),this.xc.setCollectionOptions(t),this.xc.onEvent(e=>this.$y(e))}onStartTracking(){this.kc.start(),this.xc.start()}onStopTracking(){this.kc.stop(),this.xc.stop()}$y(t){let e=this.CC.buildApiErrors(t,this.vd!==0);if(e)for(let i in this.subscriptions){let n=this.subscriptions[i];n.hasOwnProperty("detailedEvent")?e.detailedApiError&&n(e.detailedApiError):n(e.apiError)}}}return s})(),Gv=(()=>{class s{constructor(t,e,i=!1){this.pt=t,this.Q=e,this.bn=i}addUrlMaskingPattern(t){this.pt.addUrlMaskingPattern(t)}anonymize(t){let e=this.Q.removeQueryString(t.url),i={maskingPatterns:this.pt.getUrlMaskingPatterns(),partialMaskingPatterns:this.pt.getPartialUrlMaskingPatterns(),maskNames:this.bn};return{...t,url:this.Q.anonymizeUrl(e,i),library:t.library?this.Q.anonymizeUrl(t.library,i):void 0}}}return s})(),qv=(()=>{class s{constructor(){this.IC=64e3,this.PC=5e3,this.OC=2e3,this.zy=8e3,this.Ls=!!self.TextEncoder,this.Ls&&(this.NC=new TextEncoder)}Bo(t){return this.NC.encode(t).byteLength}Gy(t,e,i){let n=0;t[e]&&(n+=this.Bo(t[e]),n>this.zy&&(n=0,t[e]=K.ELLIPSIS)),t[i]&&(n+=this.Bo(csJSON.stringify(t[i])),n>this.zy&&(t[i]=s.truncatedObjectMarker))}MC(t){t.queryParameters&&this.Bo(t.queryParameters)>this.OC&&(t.queryParameters=K.ELLIPSIS)}DC(t){t.requestBody&&this.Bo(t.requestBody)>this.IC&&(t.requestBody=K.ELLIPSIS),t.responseBody&&this.Bo(t.responseBody)>this.PC&&(t.responseBody=K.ELLIPSIS)}truncate(t){this.Ls?(this.MC(t),this.DC(t),this.Gy(t,"customResponseHeaders","plainCustomResponseHeaders"),this.Gy(t,"customRequestHeaders","plainCustomRequestHeaders")):(t.queryParameters="",t.requestBody="",t.responseBody="",t.customResponseHeaders="",t.customRequestHeaders="",t.plainCustomResponseHeaders={},t.plainCustomRequestHeaders={})}}return s.truncatedObjectMarker={[K.ELLIPSIS]:K.ELLIPSIS},s})(),Wv=(()=>{let s;return function(r){function t(n){let o="[",c="]",l=[];for(let h=0;h<n.length;++h)if(n[h]===o)csArray.prototype.push.call(l,n[h]);else if(n[h]===c)if(csString.prototype.indexOf.call(n,o)>-1)csArray.prototype.pop.call(l);else return!1;return l.length===0}function e(n){if(!n)return!0;if(!t(n))return!1;let o=csString.prototype.split.call(n,/[\[\]]/);return csArray.prototype.every.call(o,c=>{let l=c[0],h=c[c.length-1];if((l==="'"||l==='"')&&l!==h)return!1;let u=csString.prototype.split.call(c,".");return u[0].length===0&&csArray.prototype.shift.call(u),csArray.prototype.every.call(u,f=>{let y=/^\-?\d+$/.exec(f);return y?parseInt(y[0],10)>=0:f==="$"||/\w+/.test(f)})})}r.isValidJSONPath=e;function i(n,o){if(!n)return;let c=csString.prototype.split.call(n,/[\$\[\]]/),l=[];csArray.prototype.forEach.call(c,u=>{if(u[0]==="'"||u[0]==='"'){csArray.prototype.push.call(l,csString.prototype.substring.call(u,1,u.length-1));return}csArray.prototype.push.call(l,...csArray.prototype.filter.call(csString.prototype.split.call(u,"."),f=>f.length>0))}),l[0]==="$"&&csArray.prototype.shift.call(l);let h=o;for(let u of l)if(h[u]!==void 0)h=h[u];else return;return h}r.getJSONPathValue=i}(s||(s={})),s})(),Yv=(()=>{class s{constructor(){this.kC=new Set(["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"])}isValidStandardHeader(t){return this.kC.has(t)}}return s})(),Xv=(()=>{class s{constructor(){this.xC=64e3,this.LC=100,this.ot={collectQueryParam:!1,collectRequestBody:!1,collectResponseBody:!1,matchingBodyContents:[],plainResponseBodyAttributes:{},plainRequestBodyAttributes:{},requestBodyAttributes:{},responseBodyAttributes:{},standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},plainCustomRequestHeaders:{},plainCustomResponseHeaders:{}},this.qy=new Yv}VC(t){return t.length<=this.xC}UC(t){let e=t["content-type"];return e!==void 0&&(Dt(e,"application/json")||Dt(e,"application/graphql"))}jC(t,e){return t&&this.VC(t)&&this.UC(e)}Lc(t,e,i,n){let o=n==="request"?this.HC:this.BC;if(o!==void 0||this.jC(e,i)){if(o===void 0)try{o=csJSON.parse(e),n==="request"?this.HC=o:this.BC=o}catch{return}let c=Wv.getJSONPathValue(t,o);if(c!==void 0&&(c===null||!Ts(c))){let l=G(c)?c:csJSON.stringify(c);return K.truncate(l,this.LC,K.ELLIPSIS)}}}isBodyAttributeValueFound(t,e){let i,n;return(e.type==="request-response"||e.type==="response")&&(i=this.Lc(e.path,t.responseBody,t.responseHeaders,"response")),(e.type==="request-response"||e.type==="request")&&(n=this.Lc(e.path,t.requestBody,t.requestHeaders,"request")),Q(i)||Q(n)}collectBodyAttribute(t,e,i){let n;(e.type==="request-response"||e.type==="response")&&(n=this.Lc(e.path,t.responseBody,t.responseHeaders,"response"),n&&(e.encrypted?this.ot.responseBodyAttributes[e.path]=n:(n=i(n),this.ot.plainResponseBodyAttributes[e.path]=n))),(e.type==="request-response"||e.type==="request")&&(n=this.Lc(e.path,t.requestBody,t.requestHeaders,"request"),n&&(e.encrypted?n&&(this.ot.requestBodyAttributes[e.path]=n):(n=i(n),this.ot.plainRequestBodyAttributes[e.path]=n)))}isBodyContentMatching(t,e){return t.responseBody?!!new csRegExp(e,"i").test(t.responseBody):!1}collectBodyContent(t){csArray.prototype.indexOf.call(this.ot.matchingBodyContents,t)===-1&&csArray.prototype.push.call(this.ot.matchingBodyContents,t)}collectCustomHeaders(t,e,i){let n=csString.prototype.toLocaleLowerCase.call(e.headerName);t.responseHeaders[n]&&(e.type==="request-response"||e.type==="response")&&(e.encrypted?this.ot.customResponseHeaders[n]=t.responseHeaders[n]:this.ot.plainCustomResponseHeaders[n]=i(t.responseHeaders[n])),t.requestHeaders[n]&&(e.type==="request-response"||e.type==="request")&&(e.encrypted?this.ot.customRequestHeaders[n]=t.requestHeaders[n]:this.ot.plainCustomRequestHeaders[n]=i(t.requestHeaders[n]))}collectStandardHeaders(t){if(!(Object.keys(this.ot.standardRequestHeaders).length>0||Object.keys(this.ot.standardResponseHeaders).length>0)){for(let[e,i]of Object.entries(t.requestHeaders))this.qy.isValidStandardHeader(e)&&(this.ot.standardRequestHeaders[e]=i);for(let[e,i]of Object.entries(t.responseHeaders))this.qy.isValidStandardHeader(e)&&(this.ot.standardResponseHeaders[e]=i)}}setCollectQueryParam(t){t&&(this.ot.collectQueryParam=!0)}setCollectResponseBody(t){t&&(this.ot.collectResponseBody=!0)}setCollectRequestBody(t){t&&(this.ot.collectRequestBody=!0)}getCollectedDataPoints(){return this.ot}}return s})(),di=(()=>{let s;return function(r){r.CONTENTSQUARE="contentsquare.net",r.CLICKTALE="clicktale.net",r.FAKE_TRACKER="fake-tracker.content-square.fr",r.HEAP_API="heap-api.com",r.HEAP_ANALYTICS="heapanalytics.com"}(s||(s={})),s})(),Kv=(()=>{class s{constructor(t,e){this.Vc=t,this.D=e}collectDataPoints(t,e){this.ot=new Xv;let i=!1;if(this.Vc.collectionRules)for(let n of this.Vc.collectionRules)this.FC(n,t)&&this.$C(n,t)&&this.zC(n,t)&&(i=!0,this.GC(t,n,e));return i||(i=this.qC(t)),i&&e&&this.Vc.collectStandardHeaders&&this.ot.collectStandardHeaders(t),i?this.ot.getCollectedDataPoints():null}computeApiErrorCollectionOptions(){let t=this.Vc.collectionRules||[],e=new Set,i=[];for(let o of t)o.statusCode!==void 0&&e.add(o.statusCode),o.url!==void 0&&csArray.prototype.indexOf.call(i,o.url)===-1&&csArray.prototype.push.call(i,o.url);let n=[di.CONTENTSQUARE,di.CLICKTALE,di.HEAP_API,di.HEAP_ANALYTICS];return csArray.prototype.push.call(n,di.FAKE_TRACKER),{statusCodes:e,urls:i,excludedDomains:n}}FC(t,e){return(!t.statusCode&&e.statusCode>=400||t.statusCode!==void 0&&t.statusCode===e.statusCode)&&(!t.url||csString.prototype.indexOf.call(e.url,t.url)!==-1)}$C(t,e){return t.bodyContent?this.ot.isBodyContentMatching(e,t.bodyContent):!0}zC(t,e){let i=csArray.prototype.find.call(t.bodyAttributePaths,n=>n.primary);return i===void 0?!0:this.ot.isBodyAttributeValueFound(e,i)}qC(t){return t.statusCode>=400}GC(t,e,i){e.bodyContent&&this.ot.collectBodyContent(e.bodyContent);let n=Zs(e.bodyAttributePaths,o=>o.primary===1);if(n&&this.ot.collectBodyAttribute(t,n,o=>this.D.anonymizePII(o)),i){this.ot.setCollectQueryParam(e.collectQueryParam),this.ot.setCollectResponseBody(e.collectResponseBody),this.ot.setCollectRequestBody(e.collectRequestBody);for(let c of e.customHeaders)this.ot.collectCustomHeaders(t,c,l=>this.D.anonymizePII(l));let o=lo(e.bodyAttributePaths,c=>!c.primary);for(let c of o)this.ot.collectBodyAttribute(t,c,l=>this.D.anonymizePII(l))}}}return s})(),Jv=(()=>{let s;return function(r){function o(h,u,f=!1){let m={message:K.truncate(h,300,K.ELLIPSIS),errorType:"customError"};return(f||l(u))&&(c(u),m.attributes=u),m}r.buildCustomErrorEvent=o;function c(h){for(let u in h){let f=h[u];if(typeof f=="string"&&f.length>30&&(f=K.truncate(f,30,K.ELLIPSIS),h[u]=f),u.length>30){let y=K.truncate(u,30,K.ELLIPSIS);delete h[u],h[y]=f}}}function l(h){let u=Object.keys(h).length;return u>0&&u<=5}}(s||(s={})),s})();var Qv=20,Zv=(()=>{class s extends Pt{constructor(t,e,i,n,o,c){super(),this.Sd=t,this._t=e,this.Ci=i,this.Y=n,this.Ws=o,this.V=c,this.Uc=[],this.$i=0,this.lr=[]}initStates(){var t;this.xl(),this.ds=P.now(),this.Uc=[],this.$i=0,(t=this.Ws)===null||t===void 0||t.onEvent(e=>this.Z(e))}trackCustomError(t,e={}){if(!(G(t)&&Ts(e)&&Mt(e)))throw new wt(Ao[0]);let i=Jv.buildCustomErrorEvent(t,e);this.Fo(i)}onIframeCustomError(t){this.Z(t)}onStart(){var t;this._d(),(t=this.Ws)===null||t===void 0||t.start()}onStop(){var t;(t=this.Ws)===null||t===void 0||t.stop()}_d(){this.isStarted&&(csArray.prototype.forEach.call(this.lr,t=>this.Fo(t)),this.lr=[])}Fo(t){if(this.isStarted){let e=this.Z(t);e&&this.Y.emitCustomErrorEvent(e)}else csArray.prototype.push.call(this.lr,t)}Z(t){if(this.isStarted&&this.$i<Qv&&this.V.isSessionValid()){let e=this.YC(t);return csArray.prototype.push.call(this.Uc,e),this.In(),e}return null}YC(t){let e={...t,rt:this.Li()};return e.message=this.Ci.anonymize(t.message),e}xl(){this.Sd.removeQueryParams(),this.Sd.setQueryParams(this._t.getRequestParameters())}Li(){return P.now()-this.ds}In(){this.Sd.send({errors:this.Uc}),this.Uc=[],this.$i+=1}}return s})(),tS="custom-errors",eS=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u){this.Ci=t,this.E=e,this._t=i,this.S=n,this.Si=o,this.Ot=c,this.gt=l,this.Ws=h,this.V=u}init(){let t=this.Ot.create(`${this.E.getTrackerUri()}/${tS}`);this.Ys=new Zv(t,this._t,this.Ci,this.Si,this.Ws,this.V),this.gt.addListener(this.Ys),this.ft()}ft(){this.S.register(Ao,(t,e)=>{this.Ys.trackCustomError(t,e)})}onStartTracking(){this.Ys.start()}onAfterNaturalPageView(){this.Ys.initStates()}onArtificialPageViewEnd(t){t&&this.Ys.stop()}onAfterArtificialPageView(t){this.Ys.initStates(),t&&this.Ys.start()}onBeforeSessionRenewal(){this.Ys.stop()}onOptout(){this.Ys.stop()}}return s})(),sS=/(\b["']?key["']?\s*[=:]\s*["'](?:first|last|user|profile|primary|primary[ _-]?last)[ _-]?name["']\s*,?\s*["']?value["']?\s*[=:]\s*["'])(.+?)(["']|$)|(\b["']?(?:first|last|user|profile|primary|primary[ _-]?last)[\s_-]?name["']?\s*[=:]\s*["'])(.+?)(["']|$)/gi,iS="$1$4CS_ANONYMIZED_NAME$3$6",rS=/(?:\(\d{3}\) \d{3}[- ]\d{4}\b)|(?:\b\d{3}([-\. ])\d{3}\1\d{4}\b)|(?:\b\d{2} \d{2} \d{2} \d{2} \d{2}\b)|(?:\b\d{4} \d{3} \d{3}\b)|(?:\b\d{2}([-\. ])\d{4}\2\d{4}\b)|(?:\b\d{3}([- ])\d{4}\3\d{4}\b)|(?:\+\d{1,3} \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \(\d{3}\) \d{3}-\d{4}\b)|(?:\+\d{1,3}([- ])\d{4}\4\d{3}\4\d{3}\b)|(?:\+\d{1,3} \d \d{4} \d{4}\b)|(?:\+\d{1,3} \d \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \d \d{2} \d{2} \d{2} \d{2}\b)|(?:\+\d{7,15}\b)|(?:\+\d{1,3} \d{6,12}\b)|(?:\+\d{1,3}([- ])\d{4}\5\d{3}\5\d{3}\b)/g,nS="CS_ANONYMIZED_PHONE",oS=(()=>{class s{constructor(t,e){this.D=t,this.Q=e}anonymize(t){return this.Q?csArray.prototype.join.call(csArray.prototype.map.call(ef(t),({content:e,isUrl:i})=>{var n;return i?(n=this.Q)===null||n===void 0?void 0:n.anonymizeUrl(e,{maskNames:!0}):this.Wy(e)}),""):this.Wy(t)}Wy(t){t=this.D.anonymizePII(t);let e=t;t=this.bn(t),t!==e&&(j.counters.redactedPII.count("name"),j.counters.redactedPII.count("name-in-custom-error"));let i=t;return t=this.XC(t),t!==i&&(j.counters.redactedPII.count("phone"),j.counters.redactedPII.count("phone-in-custom-error")),t}bn(t){return csString.prototype.replace.call(t,sS,iS)}XC(t){return csString.prototype.replace.call(t,rS,nS)}}return s})(),aS=20,cS="Custom Error:",lS="https://cserror.com/texterror.js",hS=(()=>{class s extends Pt{constructor(t,e,i,n,o,c,l){super(),this.Xs=t,this.wd=e,this._t=i,this._e=n,this.Si=o,this.A=c,this.V=l,this.jc=[],this.zi=0,this.lr=[]}initStates(){this.ds=P.now(),this.wd.removeQueryParams(),this.wd.setQueryParams(this._t.getRequestParameters()),this.jc=[],this.zi=0}onStart(){this.Xs.subscribe(s.Ht,t=>this.Z(t)),this._d()}onStop(){this.Xs.unsubscribe(s.Ht)}onIframeJavascriptError(t){this.Z(t)}trackCustomError(t){let e={errorType:"jsError",message:`${cS} ${t}`,lineno:1,colno:1,filename:lS};this.Fo(e)}Fo(t){if(this.isStarted){let e=this.Z(t);e&&this.Si.emitCustomJavaScriptErrorEvent(e)}else csArray.prototype.push.call(this.lr,t)}_d(){this.isStarted&&(csArray.prototype.forEach.call(this.lr,t=>this.Fo(t)),this.lr=[])}Z(t){if(this.isStarted&&this.zi<aS&&this.V.isSessionValid()){let e={...t,pageUrl:this.A.getAnonymizedUrl(),rt:this.Li()};return this._e.anonymize(e),csArray.prototype.push.call(this.jc,e),this.In(),e}return null}Li(){return P.now()-this.ds}In(){this.wd.send({errors:this.jc}),this.jc=[],this.zi+=1}}return s.Ht="JavaScriptErrorsService",s})(),uS="errors",dS=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,f){this.Xs=t,this._e=e,this.E=i,this._t=n,this.gt=o,this.S=c,this.Si=l,this.A=h,this.Ot=u,this.V=f}init(){let t=this.Ot.create(`${this.E.getTrackerUri()}/${uS}`);this.Ks=new hS(this.Xs,t,this._t,this._e,this.Si,this.A,this.V),this.gt.addListener(this.Ks),this.ft()}ft(){this.E.jsCustomErrorsEnabled&&!this.E.customErrors.enabled&&this.S.register(Ao,t=>{this.Ks.trackCustomError(t)})}onStartTracking(){this.Ks.start()}onAfterNaturalPageView(){this.Ks.initStates()}onArtificialPageViewEnd(t){t&&this.Ks.stop()}onAfterArtificialPageView(t){this.Ks.initStates(),t&&this.Ks.start()}onBeforeSessionRenewal(){this.Ks.stop()}onOptout(){this.Ks.stop()}}return s})(),fS=(()=>{class s extends Oo{constructor(){super(),this.G=new wl(t=>this.errorListener(t))}onStartTracking(){this.G.observe()}onStopTracking(){this.G.disconnect()}errorListener(t){let e=this.KC(t);for(let i in this.subscriptions){let n=this.subscriptions[i];n(e)}}JC(t){return t=t!=null?t:"[NO ERROR MESSAGE]",K.truncate(t,s.$h,K.ELLIPSIS)}QC(t){return!t||Jt(t)?"":K.truncate(t,s.zh,K.ELLIPSIS)}KC(t){return{errorType:"jsError",message:this.JC(t.message),filename:this.QC(t.filename),lineno:t.lineno,colno:t.colno}}}return s.$h=1024,s.zh=150,B([x("Event handler type: error")],s.prototype,"errorListener",null),s})(),pS="CS_ANONYMIZED_VALUE",gS=(()=>{class s{constructor(t,e){this.D=t,this.A=e}anonymize(t){return G(t.message)&&(t.message=this.ZC(t.message),t.message=this.D.anonymizePII(t.message)),G(t.filename)&&(t.filename=this.A.computeOverriddenUrl(t.filename)),t}ZC(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,`value='${pS}'`)}}return s})();var _n;function mS(s){if(_n||(_n=document.createElement("div")),!(!!s&&G(s)))return F.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return Ft.call(_n,s),!0}catch{return F.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}var yS=(()=>{class s{constructor(t){this.S=t}init(){this.nE(s.MI,Uc),this.nE(s.DI,Vc)}nE(t,e){this.S.register([t],(i,n)=>{!G(i)||!(G(n)||Pe(n))||F.error(n,`${e}${i}`)})}}return s.DI="logSnippetError",s.MI="logImplementationSnippetError",s})();var ES=(()=>{class s{constructor(){this.bd=Es.Natural}setPageViewType(t){this.bd=t}getPageViewType(){return this.bd}getRequestParameters(){return{pvt:this.bd}}}return s})();var vS=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})();var SS=(()=>{class s{constructor(t,e){this.$t=t,this.E=e,this.oE=!1}enableRecordingContext(t,e,i){this.oE=!0,this.jr=t,this.C=e,this.fo=i}getRecordingContext(){var t,e,i;if(!this.oE)return{isRecording:!1,recordingStartTimestamp:0,etrState:Zt.ETR_OFF,etrStatus:qt.ETR_DISABLED,collectState:N.ANALYTICS_ONLY};let n=this.C.getSession();return{isRecording:this.jr.isRecording(),useAnonymization:this.$t.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.jr.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.jr.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.jr.getRecordingStartTimestamp(),10),etrState:this.E.malkaEtrEnabled?Zt.ETR_ON:Zt.ETR_OFF,etrStatus:this.fo.getEtrStatus(n),collectState:(i=n==null?void 0:n.collectState)!==null&&i!==void 0?i:N.ANALYTICS_ONLY}}}return s})(),Ri=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})(),_S="[data-cs-encrypt]",wS=(()=>{class s{constructor(t,e=new Nl){this.Rs=t,this.ge=e,this.Yo=_S}getEncryptionSelectors(){return this.Yo}setEncryptionSelectors(t,e=!0){let i=",";if(!mS(t)){if(e)throw new wt(el[0]);return}let n=csString.prototype.split.call(this.Yo,i),o=csString.prototype.split.call(t,i);for(let c of o)csArray.prototype.indexOf.call(n,c)===-1&&csArray.prototype.push.call(n,c);this.Yo=csArray.prototype.join.call(n,i)}shouldEncrypt(t){switch(csNodenodeType.apply(t)){case 1:return!!((Ni(t)||Ir(t))&&Ft.call(t,this.Yo)&&t.type!=="password");case 8:case 3:{let e=t.parentElement;return!!(e&&Qs(t)&&Ft.call(e,this.Yo))}default:return!1}}onEvent(t){this.j=t}onInputNodeToEncrypt(t){this.LI=t}onUserIdentifierToEncrypt(t){this.VI=t}onApiErrorToEncrypt(t){this.UI=t}async registerInputNodeToEncrypt(t){if(t.targetValue.length===0||!vt.isKeyImported())return this.Cd(t);try{let e=await this.aE(t.targetValue);this.Cd(t,e)}catch{F.warn("Fail to encrypt input data - Input node processed as INPUT_TEXT"),this.Cd(t)}}async registerUserIdentifierToEncrypt(t){if(!(t.userIdentifier.length===0||!vt.isKeyImported()))try{let e=await this.aE(t.userIdentifier);this.jI(t,e)}catch{F.warn("Fail to encrypt userIdentifier")}}async registerApiErrorToEncrypt(t){try{await this.HI(t)}catch{t.customRequestHeaders="",t.customResponseHeaders="",t.queryParameters="",t.requestBody="",t.responseBody="",t.requestBodyAttributes="",t.responseBodyAttributes=""}this.UI(t)}async HI(t){var e,i;if(!vt.isKeyImported())throw new Error("Key not imported");let n=await vt.generateSymmetricKey();if(!n)throw new Error("Key not initialized properly");let o=["customRequestHeaders","customResponseHeaders","requestBodyAttributes","responseBodyAttributes"];for(let l of o){let h=t[l];h&&h!==K.ELLIPSIS&&(t[l]=(e=await vt.symmetricEncrypt(h,n))!==null&&e!==void 0?e:K.ELLIPSIS)}let c=["queryParameters","requestBody","responseBody"];for(let l of c){let h=t[l];if(h&&h!==K.ELLIPSIS){let u=this.ge.compressSync(h,"base64");t[l]=(i=await vt.symmetricEncrypt(u,n))!==null&&i!==void 0?i:K.ELLIPSIS}}t.secret=await vt.encryptSecret(n.cryptoKey),t.initializationVector=In(n.initializationVector),t.encryptionKeyId=this.Rs.encryptionPublicKeyId}async aE(t){let e=await vt.asymmetricEncrypt(t);if(!e)throw Error("Could not Encrypt data");return e}Cd(t,e){var i;let{targetId:n,targetValue:o,date:c}=t,l=null;e?l={date:c,args:[n,csString.prototype.replace.call(o,/\S/g,"\u2022"),e,this.Rs.encryptionPublicKeyId],type:M.INPUT_ENCRYPTED_TEXT}:l={date:c,args:[n,csString.prototype.replace.call(o,/\S/g,"\u2022")],type:M.INPUT_TEXT},this.LI(l),(i=this.j)===null||i===void 0||i.call(this,l)}jI(t,e){var i;let n={type:M.USER_IDENTIFIER,args:[e,t.keyId],date:t.date};this.VI(n),(i=this.j)===null||i===void 0||i.call(this,n)}}return s})(),AS=(()=>{class s extends Pt{constructor(t,e,i,n,o,c){super(),this.we=t,this.ht=e,this.Jt=i,this.Sr=n,this.ln=o,this.it=c}onStart(){var t,e,i;this.Jt.start(),this.we.setMaskedElementSettings(this.ht.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this.we.startIdentifier(),(e=this.Sr)===null||e===void 0||e.start(),(i=this.ln)===null||i===void 0||i.start()}onStop(){var t,e;this.Jt.stop(),this.we.stopIdentifier(),(t=this.Sr)===null||t===void 0||t.stop(),(e=this.ln)===null||e===void 0||e.stop()}}return s})(),bS=(()=>{class s{constructor(t,e,i,n,o,c){this.it=t,this.ht=e,this.Kt=i,this.Jt=n,this.xn=o,this.ut=c,this.Ln=Eo(this.xn)}getSensitiveStatus(){var t,e;return{started:this.Kt.isStarted,useAnonymization:this.it.shouldUseAnonymization(),capturedElementSelector:this.Jt.getWhitelistedElementsSelector(),maskedElementSettings:this.ht.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.ut)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this.Kt.isStarted,i=this.it.shouldUseAnonymization();return e?D.isMaskedElement(t)||D.isMaskedElementChild(t)?Gt.MASKED:ge.shouldEncrypt(t)?Gt.ENCRYPTED:Je.isEditableNode(t)?Gt.ANONYMIZED:i?pe.isWhitelistedElement(t)?Gt.CAPTURED:Gt.ANONYMIZED:Gt.CAPTURED:Gt.ANONYMIZED}getAttributeSensitiveStatus(t,e){if(!this.Kt.isStarted)return Gt.ANONYMIZED;let i=this.it.shouldUseAnonymization();return D.isMaskedAttribute(t,e)?Gt.MASKED:i?ti(t)||pe.isWhitelistedElement(t)||this.Ln.has(e)?Gt.CAPTURED:Gt.ANONYMIZED:Gt.CAPTURED}}return s})(),TS=(()=>{class s{constructor(t){this.V=t}onAfterVisitorRenewal(){this.V.renewSession(!0)}}return s})(),RS={MATCHED:{[N.ANALYTICS_ONLY]:N.ANALYTICS_ONLY_RULES_TARGETING,[N.RECORDING_GLOBAL_SAMPLING]:N.RECORDING_RULES_TARGETING,[N.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING]:N.RECORDING_RULES_TARGETING},MISSED:{[N.ANALYTICS_ONLY]:N.ANALYTICS_ONLY_RULES_TARGETING,[N.RECORDING_GLOBAL_SAMPLING]:N.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING}},wn=(()=>{let s;return function(r){let t;function e(m){t=m}r.setLogger=e;function i(m,v){for(let T of m)if(o(T,v))return!0;return!1}r.isUrlMatching=i;function n(m,v){if(G(v)){for(let T of m)if(o(T,v))return!0}else if(fr(v)){for(let T of m)if(o(T,csString(v)))return!0}return!1}r.isMatching=n;function o(m,v){let T=c(m,v);return m.negate?!T:T}function c(m,v){switch(m.rule_type==="date"&&(m.match_operation==="less_than"||m.match_operation==="greater_than")&&(v=(new csDate(v).valueOf()/1e3).toFixed(0)),m.match_operation){case"exact":switch(m.rule_type){case"string":return G(m.pattern)?csString.prototype.toLowerCase.call(v)===csString.prototype.toLowerCase.call(m.pattern):!1;case"boolean":return v===m.pattern||v===csString(m.pattern);case"number":return Mt(v)?Number(v)===Number(m.pattern):!1;default:return v===m.pattern}case"starts_with":return G(m.pattern)?csString.prototype.indexOf.call(v,m.pattern)===0:!1;case"ends_with":return G(m.pattern)?Ii(v,m.pattern):!1;case"contains":return G(m.pattern)?csString.prototype.indexOf.call(v,m.pattern)!==-1:!1;case"regex":if(!G(m.pattern))return!1;try{return new csRegExp(m.pattern).test(v)}catch(T){return t==null||t.warn(`targeting.matchOperation.regex invalid ${T==null?void 0:T.message}`),!1}case"simple":return G(m.pattern)?y(v)===y(m.pattern):!1;case"greater_than":return Number(v)>Number(m.pattern);case"less_than":return Number(v)<Number(m.pattern);case"exact_date":{let T=Number(m.pattern);if(!Wt(T))return!1;let C=new csDate(T*1e3);return new csDate(v).toDateString()===C.toDateString()}case"exact_days_ago":return l(m,v);case"more_than_days_ago":return h(m,v);case"less_than_days_ago":return u(m,v);case"unknown":return f(v);default:return t==null||t.warn(`targeting.matchOperation.regex not managed operation ${m.match_operation}`),!1}}function l(m,v){let T=new csDate,C=T.setDate(T.getDate()-Number(m.pattern)),w=new csDate(C);return new csDate(v).toDateString()===w.toDateString()}function h(m,v){let T=Number(m.pattern);if(!Wt(T))return!1;let C=Number(T)+1,w=new csDate,b=new csDate(w);return b.setDate(w.getDate()-C),new csDate(v).getTime()<=b.getTime()}function u(m,v){let T=Number(m.pattern);if(!Wt(T))return!1;if(T===0)return l(m,v);let C=new csDate,w=new csDate(C);return w.setDate(C.getDate()-T),new csDate(v).getTime()>=w.getTime()}function f(m){return Mt(m)?G(m)?csString.prototype.trim.call(m)==="":fr(m)?m===!0:Wt(m)?m!==0:!1:!0}function y(m){let v=Dt(m,"http://")||Dt(m,"https://")?m:`https://${m}`,T=kc(v);return T!==null?csString.prototype.replace.call(T.host,/^www./,""):m}}(s||(s={})),s})(),CS=(()=>{let s;return function(r){r.URL="url"}(s||(s={})),s})(),An={isLegacyURL:s=>s.component==="url",isLegacyTrigger:s=>s.component==="trigger",isURL:s=>s.type===CS.URL},IS=(()=>{class s{constructor(t){this.cE=new vo,this.lE=[],this.hE=[],wn.setLogger(t)}setTargetingRules(t){this.cE.setRegexRules(csArray.prototype.filter.call(t,An.isURL));for(let e of t)An.isLegacyURL(e)?csArray.prototype.push.call(this.lE,e):An.isLegacyTrigger(e)&&csArray.prototype.push.call(this.hE,e)}matchUrl(t){return wn.isUrlMatching(this.lE,t)||this.cE.evaluateUrl(t)}matchTrigger(t){return wn.isMatching(this.hE,t)}}return s})(),PS=(()=>{class s extends Pt{constructor(t,e,i){super(),this.uE=t,this.Id=e,this.A=i}init(){this.Pd=new IS(F),this.uE&&this.Pd.setTargetingRules(this.uE)}onStart(){}checkTargetingRules(){let t=this.A.getAnonymizedUrl();this.Id(this.Od(t,"url"))}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.Id(this.Od(t,"url"))}onExternalEvent(t){this.isStarted&&this.Id(this.Od(t.name,"trigger"))}Od(t,e){var i,n;return e==="url"&&G(t)&&(!((i=this.Pd)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((n=this.Pd)===null||n===void 0)&&n.matchTrigger(t)))}}return s})(),OS=(()=>{class s{constructor(t,e,i,n,o,c,l){this.E=t,this.w=e,this.Rt=i,this.Y=n,this.A=o,this.C=c,this.cs=l,this.ur=!1,this.Xo=(h=!1)=>{this.ur&&this.E.isSMB&&this.cs.allowStartDataCollection({fromSessionRenewal:h}),this.E.startMode===wr.Automatic&&this.cs.startDataCollection({fromSessionRenewal:h})},this.BI=h=>{this.ur||(this.ur=h,this.dE(),this.Xo())}}init(){this.E.isSMB&&this.cs.disableStartDataCollection(),this.hn=new PS(this.E.recordTargetingRules,this.BI,this.A),this.Y.addListener(this.hn),this.hn.init()}start(){this.hn.start()}stop(){this.hn.stop()}maybeStartDataCollection(t){if(t){this.Xo(t);return}if(this.FI()){this.ur=!0,this.Xo(),this.stop();return}this.hn.checkTargetingRules()}onAfterArtificialPageView(){this.hn.checkTargetingRules()}onCollectStateChange(t){if(this.fE(t)){this.stop();return}let e=t===N.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING;!this.ur&&e||csSetTimeout(()=>this.pE(t),0)}onStartTracking(){this.dE()}FI(){let t=this.C.getSession();return!!(t&&this.fE(t.collectState))}fE(t){return t===N.RECORDING_RULES_TARGETING||t===N.ANALYTICS_ONLY_RULES_TARGETING}dE(){var t;if(this.ur){let e=this.C.getSession(),i=this.Rt.getInitialCollectState();this.pE((t=e==null?void 0:e.collectState)!==null&&t!==void 0?t:i),this.cs.isDataCollectionStarted()&&this.w.emitTargetingRulesMatched()}}pE(t){let e=RS[this.ur?"MATCHED":"MISSED"][t];e&&this.w.emitCollectStateChange(e,Zt.ETR_OFF)}}return s})(),zl=(()=>{class s{constructor(){this.gE=new Set,this.mE=[],this.Nd=new Set,this.Md=[]}addUrlMaskingPattern(t){if(this.gE.has(t))return;this.gE.add(t);let e=ma(t);csArray.prototype.push.call(this.mE,e)}getUrlMaskingPatterns(){return this.mE}resetPartialUrlMaskingPatterns(){this.Nd.clear(),this.Md=[]}addPartialUrlMaskingPattern(t){if(this.Nd.has(t))return;this.Nd.add(t);let e=ma(t);csArray.prototype.push.call(this.Md,e)}getPartialUrlMaskingPatterns(){return this.Md}}return s})(),NS=(()=>{class s{constructor(t,e,i){this.E=t,this.M=e,this.C=i,this.ds=P.now()}resetStartTime(){this.ds=P.now()}getSessionData(){let{projectId:t}=this.E,e=this.M.getVisitor();e==null&&F.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:n}=e!=null?e:{},o=this.C.getSession();o===null&&F.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=o!=null?o:{};return{projectId:t,userId:i,sessionNumber:n,pageNumber:c,relativeTimestamp:P.now()-this.ds}}}return s})(),MS=["clearSession"],DS=["extendSession"];var kS=["getSessionData"],xS=["session:start:newVisitor"],LS=["session:clear:visitor"],VS=(()=>{class s{constructor(t,e,i,n){this.E=t,this.M=e,this.C=i,this.S=n}init(){this.Dd=new NS(this.E,this.M,this.C),this.S.register(MS,()=>this.C.removeSession()),this.S.register(DS,()=>this.C.extendSessionPeriodically(),{disableApplyPending:!0}),this.S.register(kS,()=>this.Dd.getSessionData(),{disableApplyPending:!0}),this.S.register(xS,()=>this.M.renewVisitor()),this.S.register(LS,()=>{this.M.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.M.createOrUpdateVisitor(),this.C.createOrUpdateSession()}onBeforeArtificialPageView(){this.M.createOrUpdateVisitor(),this.C.createOrUpdateSession()}onAfterNaturalPageView(){this.Dd.resetStartTime()}onAfterArtificialPageView(){this.Dd.resetStartTime()}onOptout(){this.M.removeVisitor(),this.C.removeSession()}onCollectStateChange(t){this.C.updateCollectState(t)}}return s})(),US=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,f,y,m,v,T,C,w,b,k,O,S,V,H,X,pt,kt,ie,_,L,U,z,ut,At,Se,ls,Vs,Us,Me){this._t=t,this.fr=e,this.ge=i,this.M=n,this.C=o,this.V=c,this.Ms=l,this.w=h,this.S=u,this.Al=f,this.E=y,this.bl=m,this.us=v,this.Rn=T,this.It=C,this.D=w,this.et=b,this.Q=k,this.A=O,this.$I=S,this.Y=V,this.gt=H,this.Tt=X,this.yE=pt,this.Xt=kt,this.zI=ie,this.N=_,this.Ot=L,this.O=U,this.St=z,this.J=ut,this.Rt=At,this.ht=Se,this.Xe=ls,this.de=Vs,this.Wt=Us,this.Yt=Me,this.GI=De=>{this.w.emitBeforeSessionRenewal(),this.un(!0,De),this.w.emitAfterSessionRenewal()},this.qI=De=>{this.w.emitBeforeSessionRenewal(),this.Rt.refreshQuota(re=>{re!==N.QUOTA_REACHED&&(this.un(!0,De),this.w.emitAfterSessionRenewal())})}}start(){if(this.bl.init(),this.us.init(),this.us.isActive())return;let t,e,i,n,o,c,l,h,u,f,y,m,v,T,C,w,b,k,O;this.N.schedule(()=>{C=new TS(this.V),m=new nv(this.et),v=new BE(()=>{}),w=new FE,O=new sv,vt.isSupported()&&this.E.encryptionPublicKey&&this.E.encryptionPublicKeyId>0&&(b=new wS(this.E),k=new iv);let S=new AS(v,this.ht,w,k,O,this.kd());T=new bS(this.kd(),this.ht,S,w,this.E.whitelistedAttributes,b);let V=new $p(this.w,this.S,this.ht,S,w,b,k);V.init(),this.w.addListener(V),t=new Uv(this.E,this.fr,this.M,this.et,m,this.S,this.V,new rv(F),this.gt,this.Ot,this.Y,T,this.nt,this.Wt,this.Yt),e=new Xp(this.S,this.C,this.E,this._t,this.ge,this.D),y=new SS(T,this.E);let H=null,X=new ES;i=new cE(this.M,this.C,this.S,this.gt,H,this.E,X,y),n=new ig(this.E,this.fr,this.M,this.S,this.D,this.V,this.A);let pt,kt;this.cr=new Hp(this.E,this.S,this.w,this.fr,this.M,this.C,this.Ms,this.It,this.Tt,this.A,this.Xt,X,this.Y,this.Ot,this.Xe,pt,this.Wt,this.Yt,kt),this.EE=new VS(this.E,this.M,this.C,this.S),this.cs=new Fv(this.E,this.w,this.us,this.ht,this.cr,this.V),new Bv(this.cs,this.S).init(),l=new ag(this.E,this.S,this.ge,this.fr,this.Y),h=new yS(this.S),u=new av}),(this.E.apiErrors.enabled||this.E.isNetworkDetailsEnabled())&&this.N.schedule(()=>{this.pt=new zl,this.WI=new hg(this.S,this.pt),this.WI.init()}),this.E.apiErrors.enabled&&this.N.schedule(()=>{var S,V;let H=new Kv(this.E.apiErrors,this.D);this.yt=new zv(new hv,new cv,H),this.pe=new Gv(this.pt,this.Q,!!(!((V=(S=this.E)===null||S===void 0?void 0:S.experimental)===null||V===void 0)&&V.anonymizeNameInUrls)),this.Vr=new qv;let X=new Rp(this.yt,this.pe,this.E,this.fr,this.gt,this.S,this.Ot,this.V);X.init(),this.w.addListener(X)}),this.E.customErrors.enabled&&this.N.schedule(()=>{var S,V,H;let X;this.Ci=new oS(this.D,!((H=(V=this.E)===null||V===void 0?void 0:V.experimental)===null||H===void 0)&&H.anonymizeNameInUrls?this.Q:void 0);let pt=new eS(this.Ci,this.E,this.fr,this.S,this.Y,this.Ot,this.gt,X,this.V);pt.init(),this.w.addListener(pt)}),this.E.jsErrorsEnabled&&this.N.schedule(()=>{this.Xs=new fS,this._e=new gS(this.D,this.A);let S=new dS(this.Xs,this._e,this.E,this.fr,this.gt,this.S,this.Y,this.A,this.Ot,this.V);S.init(),this.w.addListener(S)}),this.N.schedule(()=>{this.Rn.init()}),this.N.schedule(()=>{i.init()}),this.N.schedule(()=>{e.init()}),this.N.schedule(()=>{n.init()}),this.N.schedule(()=>{this.yE.init()}),this.N.schedule(()=>{this.cr.init()}),this.N.schedule(()=>{this.EE.init()}),this.N.schedule(()=>{l.init()}),this.N.schedule(()=>{this.$I.init()}),this.N.schedule(()=>{h.init()}),this.N.schedule(()=>{u.init()}),this.N.schedule(()=>{this.zI.init()}),this.N.schedule(()=>{this.w.addListener(this.EE),this.w.addListener(this.Al),this.w.addListener(t),this.w.addListener(this.Rn),this.w.addListener(i),this.w.addListener(n),this.w.addListener(this.yE),this.w.addListener(this.cr),this.w.addListener(l),this.w.addListener(e),this.w.addListener(u),this.w.addListener(C)}),Ri.isRecordingSupported()&&this.N.schedule(()=>{let S=new Jy(y,this.C,this.E,this._t,this.S,this.D,this.V,v,this._e,this.yt,this.pe,this.pt,this.w,this.Y,this.gt,this.Xt,this.Ot,this.Q,this.Vr,this.kd(),this.Ci,b);S.init(),this.w.addListener(S),i.setRecordingService(S.recordingService)}),this.N.schedule(()=>{var S;let V,H}),this.N.schedule(()=>{t.init()}),this.N.schedule(()=>{this.E.isQuotaEnabled()?this.V.onSessionExpired(S=>{this.qI(S)}):this.V.onSessionExpired(S=>{this.GI(S)}),this.un()})}un(t=!1,e=!1){var i,n,o;if(this.E.hasTargetingRules()){this.Ko||(this.Ko=new OS(this.E,this.w,this.Rt,this.Y,this.A,this.C,this.cs),this.w.addListener(this.Ko),this.Ko.init(),this.Ko.start(),this.S.start(),(i=this.nt)===null||i===void 0||i.start()),this.Ko.maybeStartDataCollection(t);return}this.S.start(),(n=this.nt)===null||n===void 0||n.start(),this.cs.tryStartAutomaticDataCollection({fromSessionRenewal:t,isRenewedVisitor:e})}kd(){if(this.it)return this.it;let t=new vo;return this.it=new HE(this.E,this.A,t,this.It),this.it.init(),this.it.shouldUseAnonymization()&&j.counters.pageAnonymisation.count("anonymized-on-start"),this.it}}return s})();var Gl=(()=>{class s{constructor(t){this.configuration=t}}return s})(),jS=(()=>{class s extends Gl{constructor(t,e,i,n,o){super(t),this.configuration=t,this.w=e,this.xd=i,this.A=n,this.Ld=o,this.Vd=!1}refreshQuota(){}canCollect(t){return!0}init(){this.configuration.malkaUrlEnabled&&this.configuration.hasRecordingUrlRules()&&(this.Vd=!0,this.Ld.setRegexRules(this.configuration.recordingUrlRules))}sanitizeSessionCollectState(t){return(t.collectState===N.QUOTA_REACHED||t.collectState===N.RECORDING_RULES_TARGETING||t.collectState===N.RECORDING_TEMPORARILY)&&(t.collectState=N.ANALYTICS_ONLY),t}computeInitialCollectState(){return es.isReplayConsentNeeded(this.configuration)?N.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.zc()}computeInitialCollectStateFromRecordingConsentGranted(){return this.zc()}zc(){if(!Ri.isRecordingSupported())return N.ANALYTICS_ONLY;let t=N.ANALYTICS_ONLY,e=Zt.ETR_OFF;return Cs.percentage()<this.configuration.replayRecordingRate||this.xd.isForceReplayRecorded()?t=N.RECORDING_GLOBAL_SAMPLING:this.Vd&&this.Ld.evaluateUrl(this.A.getAnonymizedUrl())&&(t=N.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&(e=Zt.ETR_ON),this.w.emitCollectStateChange(t,e),t}getEligibleCollectState(t){if(!Ri.isRecordingSupported())return N.ANALYTICS_ONLY;if(es.isRecordingBlockedByConsent(t))return t.collectState===N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:N.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED;if(t.collectState===N.RECORDING_GLOBAL_SAMPLING)return N.RECORDING_GLOBAL_SAMPLING;let e=this.configuration.malkaEtrEnabled?Zt.ETR_ON:Zt.ETR_OFF;return this.Vd&&this.Ld.evaluateUrl(this.A.getAnonymizedUrl())?(this.w.emitCollectStateChange(N.RECORDING_URL_SAMPLING,e),N.RECORDING_URL_SAMPLING):(this.w.emitCollectStateChange(N.ANALYTICS_ONLY,e),N.ANALYTICS_ONLY)}isReplayRecorded(t){return es.isRecordingBlockedByConsent(t)?!1:t.collectState===N.RECORDING_TEMPORARILY||t.collectState===N.RECORDING_GLOBAL_SAMPLING||t.collectState===N.RECORDING_URL_SAMPLING||this.configuration.malkaEtrEnabled}getInitialCollectState(){return N.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return s})(),oe="_cs_s",io=18e5,bn=".",HS=13,lr=(()=>{let s;return function(r){r[r.NOT_FOUND=0]="NOT_FOUND",r[r.EXPIRED=1]="EXPIRED",r[r.FOUND=2]="FOUND"}(s||(s={})),s})(),BS=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.J=i,this.ae=null,this.Ud=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?Jc(e):null}getRawSession(t){if(t){let u=this.jd();return Hn(u)}let{sessionString:e,status:i}=this.YI(),n=Hn(e);if(i!==lr.EXPIRED)return n;if(this.E.cookielessTrackingEnabled)return null;let o=this.jd();if(!o)return null;let c=csString.prototype.split.call(o,bn);if(!s.vE(c))return o;let l=c[c.length-1],h=parseInt(l,10);return isNaN(h)||this.XI(h),n}onCookieToSet(t){this.ki=t}onCookieToRemove(t){this.xi=t}set(t,e=io){var i;let n=P.now()+e,o=up(t);o+=`${bn}${n}`,this.KI(o,n),this.E.cookielessTrackingEnabled?this.J.setItem(oe,o):(this.O.set(oe,o,e),(i=this.ki)===null||i===void 0||i.call(this,oe,o,e))}remove(){var t;this.E.cookielessTrackingEnabled?this.J.removeItem(oe):(this.O.delete(oe),(t=this.xi)===null||t===void 0||t.call(this,oe)),this.JI()}handleSubdomainChange(){if(this.E.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.E.allowSubdomains?this.O.delete(oe,Or.CURRENT_DOMAIN):this.O.delete(oe,this.O.getRootDomain()),this.set(t))}isValid(t){return t!==null&&wo(t)}KI(t,e){this.ae={sessionString:t,expires:e}}YI(){return this.ae?this.ae&&P.now()<=this.ae.expires?{sessionString:this.ae.sessionString,status:lr.FOUND}:{sessionString:this.ae.sessionString,status:lr.EXPIRED}:{sessionString:this.jd(),status:lr.NOT_FOUND}}JI(){this.ae=null}XI(t){this.ae&&(this.ae.expires=t,this.Ud=!0)}isCacheRefreshed(){return this.Ud}resetCacheRefreshed(){this.Ud=!1}jd(){if(this.E.cookielessTrackingEnabled){let e=this.J.getItem(oe);return!e||this.SE(e)?null:e}let t=this.O.get(oe);return!t||this.SE(t)?null:t}SE(t){let e=csString.prototype.split.call(t,bn);if(!s.vE(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&P.now()>i}static vE(t){return t[t.length-1].length===HS}}return s})(),FS=(()=>{class s extends Gl{constructor(t,e,i){super(t),this.configuration=t,this.Jo=e,this.w=i,this.QI=N.RECORDING_GLOBAL_SAMPLING}refreshQuota(t){this._E=t,this.Qo=void 0,this.ZI()}init(t){this.tP();let e=gt.get(oe);if(e!==null&&wo(e)){let i=dp(e);t(this.canCollect(i),i==null?void 0:i.collectState)}else this.refreshQuota(i=>{t(i!==N.QUOTA_REACHED,i)})}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==N.QUOTA_REACHED}computeInitialCollectState(t){return this.Qo?(this.w.emitCollectStateChange(this.Qo,this.configuration.malkaEtrEnabled?Zt.ETR_ON:Zt.ETR_OFF),this.Qo):(F.warn("Quota file error computeInitialCollectState() called before quota answered"),N.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===N.QUOTA_REACHED?N.QUOTA_REACHED:!Ri.isRecordingSupported()&&this.isReplayRecorded(t)?N.ANALYTICS_ONLY:t.collectState===N.RECORDING_RULES_TARGETING?N.RECORDING_RULES_TARGETING:t.collectState===N.ANALYTICS_ONLY_RULES_TARGETING?N.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===N.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING?N.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING:t.collectState===N.RECORDING_GLOBAL_SAMPLING?N.RECORDING_GLOBAL_SAMPLING:N.ANALYTICS_ONLY}isReplayRecorded(t){return t.collectState===N.RECORDING_GLOBAL_SAMPLING||t.collectState===N.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.Qo||N.QUOTA_REACHED}computeInitialCollectStateFromRecordingConsentGranted(t){return N.ANALYTICS_ONLY}Zo(t){this.Qo=t,this._E&&this._E(t)}tP(){this.Jo.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.Jo.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.Jo.onLoad(t=>this.quotaFileHandler(t))}ZI(){this.Jo.isInProgress()||this.Jo.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.eP(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;F.warn(e),this.Zo(this.QI)}eP(t){let e=!1,i=!1;for(let n of t.quotas)n.quotaType==="ANALYTICS"&&n.value?e=!0:n.quotaType==="RECORDING"&&n.value&&Cs.boolean(Math.round(n.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?Ri.isRecordingSupported()?this.Zo(N.RECORDING_GLOBAL_SAMPLING):this.Zo(N.ANALYTICS_ONLY):e&&!i?this.Zo(N.ANALYTICS_ONLY):this.Zo(N.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return N.ANALYTICS_ONLY}}return B([x("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),B([x("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})();var $S=(()=>{class s{constructor(t,e,i,n,o){this.M=t,this.C=e,this.bs=i,this.Tt=n,this.E=o}get(){return{exclusion:this.bs.getAppliedTrackingDraw(),visitor:this.M.getVisitor(),session:this.C.getSession(),cvars:this.Tt.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.bs.exclude(this.E),this.M.removeVisitor(),this.C.removeSession(),this.Tt.removeCustomVariablesSession()}include(t){this.bs.removeExclusion(),this.M.setVisitor(t.visitor),t.session?this.C.setSession(t.session):this.C.removeSession(),t.cvars?this.Tt.setCustomVariableSession(t.cvars):this.Tt.removeCustomVariablesSession()}}return s})();var xo=60*1e3,zS=60*xo,GS=4*zS-xo,Gs=(()=>{let s;return function(r){r[r.NO=0]="NO",r[r.WITHDRAWN=1]="WITHDRAWN",r[r.GRANTED=2]="GRANTED"}(s||(s={})),s})(),qS=(()=>{class s{constructor(t,e,i,n,o){this.Pe=t,this.Rt=e,this.w=i,this.aP=n,this.cP=o,this.ta=null,this.Bd=0,this.sa=Gs.NO}setDynamicVariablesService(t){this.lP=t}createOrUpdateSession(){this.Fd(),this.hP=P.now(),this.Bd=0;let t=this.bE();t===null?(t=this.uP(),this.zc(t),this.w.emitSessionCreated()):(t=this.Rt.sanitizeSessionCollectState(t),this.dP(t),t.collectState=this.Rt.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this.Rt.getInitialCollectState(),t.collectState=this.Rt.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.sa=Gs.GRANTED}withdrawnReplayRecording(t){t.collectState=this.Rt.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.sa=Gs.WITHDRAWN}zc(t){this.sa===Gs.WITHDRAWN?(t.collectState=this.Rt.getRecordingConsentWithdrawn(),this.setSession(t)):this.sa===Gs.GRANTED?t.collectState=this.Rt.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this.Rt.computeInitialCollectState(t),this.sa=Gs.NO}uP(){return{pageNumber:1,collectState:this.Rt.getInitialCollectState(),replayConsent:this.aP?jn.NOT_EXPRESSED:jn.UNNECESSARY,etrStatus:qt.ETR_NOT_SAVED_SESSION}}dP(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this.Rt.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===N.RECORDING_TEMPORARILY}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.Pe.get()}bE(){return this.Pe.get(!0)}doesSessionExist(){return this.Pe.get()!==null}setSession(t){this.Pe.set(t),this.w.emitSessionRefreshed()}refreshSession(){let t=this.bE();t&&this.setSession(t)}removeSession(){this.Pe.remove(),this.w.emitSessionRemoved()}getRecordingTypes(){let t=this.getSession(),e=this.fP(t);return this.pP(e)}pP(t){let e=[];return csArray.prototype.forEach.call(t,i=>{if(Yc(i)){let n=hp[i]||i;csArray.prototype.push.call(e,n)}}),e}fP(t){let e=[];return(t==null?void 0:t.collectState)!==void 0&&(csArray.prototype.push.call(e,t.collectState),this.cP&&csArray.prototype.push.call(e,N.RECORDING_ETR_SAMPLING)),e}updateCollectState(t){let e=this.getSession();e!==null&&(e.collectState=t,this.setSession(e))}hasValidSession(){let t=this.Pe.getRawSession();return this.Pe.isValid(t)}handleSubdomainChange(){this.Pe.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.Pe.isCacheRefreshed();return e&&t&&this.Pe.resetCacheRefreshed(),e}extendSessionPeriodically(){this.ta||this.TE()}extendSession(){let t=this.getSession();return t===null?(F.warn("extendSession is trying to extend an expired session"),this.Fd(),!1):(this.setSession(t),!0)}TE(){if(this.gP()){this.Fd();return}this.extendSession()&&(this.mP(),this.yP())}yP(){this.ta=window.csSetTimeout(()=>{this.TE()},io-xo)}gP(){return GS-(P.now()+io-this.hP)<0}Fd(){this.ta&&(window.csClearTimeout(this.ta),this.ta=null)}mP(){this.Bd+=1,this.lP.trackDynamicVariable("session_expiry_update",this.Bd)}}return s})();var WS=(()=>{class s{constructor(t,e,i){this.M=t,this.C=e,this.TP=i}handle(){this.M.hasAllowSubdomainsChanged()&&(this.M.handleSubdomainChange(),this.C.handleSubdomainChange(),this.TP.handleSubdomainChange())}}return s})(),Tn="_cs_inc",YS=(()=>{class s{constructor(t,e){this.Dt=t,this.O=e}isForceIncluded(){return this.RP()||this.CP()}isForceReplayRecorded(){return this.IP(N.RECORDING_GLOBAL_SAMPLING)}RP(){return this.O.get(Tn)!==null}IP(t){return this.O.get(Tn)===t}CP(){return csString.prototype.indexOf.call(this.Dt.href,Tn)>0}}return s})(),XS=(()=>{class s{constructor(t,e,i){this.E=t,this.M=e,this.bs=i}clear(){this.PP()&&(this.CE=this.M.getVisitor(),this.M.removeVisitor()),this.OP()&&this.bs.removeExclusion()}PP(){return this.M.doesVisitorExist()&&this.M.getVisitor().appliedTrackingDraw!==this.E.lastTrackingDraw}OP(){return this.bs.getAppliedTrackingDraw()!==this.E.lastTrackingDraw}restoreClearedVisitor(){this.CE&&this.M.setVisitor(this.CE)}}return s})(),KS=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.E=t,this.M=e,this.bs=i,this.IE=n,this.NP=o,this.MP=c,this.DP=l,this.xd=h}compute(t){var e,i;this.E.crossDomainTracking&&!this.E.cookielessTrackingEnabled?this.E.crossDomainSingleIframeTracking?(e=this.DP)===null||e===void 0||e.start(()=>this.qd(t)):(i=this.MP)===null||i===void 0||i.applyUpToDate(()=>this.qd(t)):this.qd(t)}qd(t){this.NP.handle(),this.IE.clear(),this.kP()?(this.IE.restoreClearedVisitor(),t(!0)):(this.bs.exclude(this.E),t(!1))}kP(){let t=Cs.boolean(this.E.sampleRate);return this.xd.isForceIncluded()||!this.bs.isExcluded()&&this.M.doesVisitorExist()||!this.bs.isExcluded()&&t}}return s})(),JS=(()=>{class s{constructor(t,e,i,n){this.E=t,this.mt=e,this.w=i,this.C=n,this.xP=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.LP(),(t=this.C)===null||t===void 0||t.removeSession()),this.VP(e),this.setVisitor(e)}LP(){return{id:$E.generate(),visitsCount:0,appliedTrackingDraw:this.E.lastTrackingDraw,creationTimestamp:ea(),lastVisitTimestamp:0,hitTimestamp:0,expires:P.now()+this.E.visitorCookieTimeout,allowSubdomains:this.E.allowSubdomains,identityPrint:null}}VP(t){let e=ea();this.C&&!this.C.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.E.lastTrackingDraw,this.PE=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.mt.get()}setVisitor(t){this.mt.set(t)}doesVisitorExist(){return this.mt.get()!==null}resetVisitor(){this.OE(),this.w.emitAfterVisitorCleared()}removeVisitor(){this.mt.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.E.allowSubdomains:!1}handleSubdomainChange(){this.mt.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.PE===void 0?!1:t.visitsCount!==this.PE}jP(){return!Q(this.NE)||P.now()-this.NE>this.xP}renewVisitor(){this.jP()?(this.NE=P.now(),this.OE(),this.w.emitAfterVisitorRenewal()):F.warn("session:start:newVisitor is trying to renew visitor under time limit")}OE(){this.w.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),de="_cs_id",QS=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.J=i}onCookieToSet(t){this.ki=t}onCookieToRemove(t){this.xi=t}get(){let t;return this.E.cookielessTrackingEnabled?t=this.J.getItem(de):t=this.O.get(de),t?(np(t)||F.warn(`Invalid visitor string: ${t}`),ip(t)):null}set(t){var e;let i=rp(t);if(this.E.cookielessTrackingEnabled)this.J.setItem(de,i);else{let n=new csDate(t.expires);this.O.set(de,i,n),(e=this.ki)===null||e===void 0||e.call(this,de,i,n)}}remove(){var t;this.E.cookielessTrackingEnabled?this.J.removeItem(de):(this.O.delete(de),(t=this.xi)===null||t===void 0||t.call(this,de))}handleSubdomainChange(){if(this.E.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.E.allowSubdomains,this.E.allowSubdomains?this.O.delete(de,Or.CURRENT_DOMAIN):this.O.delete(de,this.O.getRootDomain()),this.set(t))}}return s})();var ZS=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.Di=e,this.Er=i,this.N=n,this.w=o,this.J=c}initWithQuota(){if(!this.E.collectionEnabled){this.DE();return}let t=new bE(this.E.getSettingsFileUri(),"",{type:"json",cacheMinutes:15});this.Rt=new FS(this.E,t,this.w),this.Rt.init((e,i)=>{e?this.init():this.DE(),qE(i)&&(GE.set(Po.HJ_DUAL_COLLECT,!0),window.dispatchEvent(new CustomEvent(zE)))})}HP(){this.N.schedule(()=>{var t;this.D=new ei,this.Q=new Rf(this.D),this.A=new YE(window.location,this.Q),this.O=new Or(this.E,this.A,this.Di),this.O.init(),this.St=new CE;let e;!((t=this.E.experimental)===null||t===void 0)&&t.checkPIIMigration&&(e=new zf,this.w.addListener(e)),this.S=new Wf([qf.UXA],e),this.Y=new Yf,this.ht=new QE(e),this.It=new UE(this.E,new VE(this.E,this.O,this.St),this.w)})}DE(){}init(){vt.isSupported()&&(this.E.encryptionPublicKey&&vt.importKey(this.E.encryptionPublicKey),vt.setDigestSalt(this.E.projectId.toString()));let t,e,i,n,o,c,l,h,u,f,y,m,v,T,C,w,b,k,O,S,V,H,X,pt,kt,ie,_,L,U;this.HP();let z=new pE;this.w.addListener(z),this.N.schedule(()=>{y=new YS(window.location,this.O),new OE().init(),m=Ml.create(),f=new Dl(m),this.Rt===void 0&&(this.Rt=new jS(this.E,this.w,y,this.A,new vo),this.Rt.init())}),this.N.schedule(()=>{t=new BS(this.E,this.O,this.J),e=new qS(t,this.Rt,this.w,this.E.replayConsentRequiredForSession,this.E.malkaEtrEnabled),i=new QS(this.E,this.O,this.J),n=new JS(this.E,i,this.w,e),this.Er.setContext(n,e)}),this.N.schedule(()=>{c=new WS(n,e,this.It),l=new pp(this.E,this.O,this.J),h=new Ep(window.location,l),u=new yp(h),C=new XS(this.E,n,h),kt=new ep(is,this.E);let ut;S=new Vf(kt,this.E.isChild,ut),V=new Uf(kt),H=new jf(kt),X=new Bf,pt=new Lf(S,V,H,X),w=new Gf(this.S,pt),b=new Ap(this.A),k=new Sp(b,this.S);let At=new gp(this.E,this.O,this.J);ie=new jE(this.D,At),O=new Bp(this.S,ie);let Se=new $S(n,e,h,ie,this.E)}),this.N.schedule(()=>{new KS(this.E,n,h,C,c,v,o,y).compute(At=>{this.N.schedule(async()=>{var Se,ls,Vs,Us;w.init();let Me=new LE(this.E,this.S,this.It,e,this.w),De=new uE(this.E,this.O,this.St),re=new dE(this.w,window.location,De),bt=new hE(this.S,re),Xt=new XE(this.S,this.E),Vi=new WE(this.Q,new zl),Lr=new ev(e,n),Vr,Ui,Ur,ji=new tc(this.E,n,e,T),Hi=new tc(this.E,n,e,T,Ui);At?(this.w.emitInitTracking(),new US(ji,Hi,m,n,e,Lr,Vi,this.w,this.S,w,this.E,bt,re,Me,this.It,this.D,kt,this.Q,this.A,Xt,this.Y,pt,ie,O,b,k,this.N,f,this.O,this.St,this.J,this.Rt,this.ht,Ur,Vr,L,U).start()):new mp(this.w,this.S,w,bt,re,u,Me).start()})})})}}return s})(),vs=(()=>{let s;return function(r){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(b){let k=b.source,O=b.data;if(c(O)){let S=()=>{let V=n(t,O);y(V,()=>k.postMessage("csBundleLoaded",b.origin))};e=O.token,w(i.loadBundle),l(b.origin)&&S()}}};function n(b,k){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(b,"{version}",k.version),"{token}",k.token),"{domain}",k.domain)}function o(){return e}r.getToken=o;function c(b){return b&&b.type==="csBundleInjection"&&l(b.domain)&&u(b.version)&&h(b.token)}r.isAuthorizedIncomingMessage=c,r.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(b){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(b)||r.hjDomainRegex.test(b)}r.isAuthorizedDomain=l;function h(b){return/^[a-zA-Z0-9]+$/.test(b)}r.isAuthorizedToken=h;function u(b){return/^[a-zA-Z0-9\.]+$/.test(b)}r.isAuthorizedTagVersion=u;function f(){let b=window.opener||window.parent;return window!==b&&window.addEventListener}r.isActivable=f;function y(b,k){let O=document.createElement("script");O.type="text/javascript",O.async=!0,O.src=b,O.onload=k,O.charset="utf-8",document.head.appendChild(O)}r.addScript=y;function m(b){let k=document.createElement("link");k.rel="stylesheet",k.href=b,document.head.appendChild(k)}r.addStyle=m;function v(b){return`${b}?cb=${new csDate().getTime()}`}r.addCacheBusting=v;function T(){C(i.loadBundle)}r.waitForBundleInjection=T;function C(b){window.addEventListener("message",b,!1)}r.listen=C;function w(b){window.removeEventListener("message",b,!1)}r.removeListener=w}(s||(s={})),s})(),fc="_hp_ved",t_=18e5,e_="/js/ved.js",s_="/css/ved.css",i_="/js/ved.css",r_=(()=>{let s;return function(r){r.StatusUpdate="status"}(s||(s={})),s})(),n_=(()=>{let s;return function(r){r.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var Rn=(()=>{let s;return function(r){let t=!1,e;function i(y){return e+y}function n(){let y=[i(s_),i(i_)];csArray.prototype.forEach.call(y,m=>{vs.addStyle(m)})}function o(y){let m=new csRegExp("(^|;)[ ]*"+y+"=([^;]*)"),v=m.exec(document.cookie);return v?decodeURIComponent(v[2]):null}function c(y,m,v){let T=encodeURIComponent(y)+"="+encodeURIComponent(m),C=new csDate;C.setTime(C.getTime()+v);let w=T+"; expires="+C.toUTCString()+"; path=/";document.cookie=w}function l(){c(fc,"on",t_)}function h(){return o(fc)==="on"}r.isVLCookieEnabled=h;function u(y){window.heapV=Object.assign({},window.heap,{source:y==null?void 0:y.source,uri:e,loadArgs:y==null?void 0:y.data.args,identify:()=>{},track:()=>{}})}r.initializeHeapV=u;function f(y,m){var v;if(e=y,m){let T={type:r_.StatusUpdate,value:n_.ReceivedInitMessage},C={targetOrigin:m==null?void 0:m.origin};(v=m==null?void 0:m.source)===null||v===void 0||v.postMessage(T,C)}t||(t=!0,l(),u(m),window.heapV&&(vs.addScript(i(e_)),n()))}r.init=f}(s||(s={})),s})(),o_=(()=>{let s;return function(r){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",n=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,vs.hjDomainRegex],o,c,l,h={initHeapVisualLabeler(S){var V;S.origin===l&&((V=S.data)===null||V===void 0?void 0:V.message)==="init"&&S.source&&(Rn.init(l,S),b(h.initHeapVisualLabeler))},ping(S){typeof S.data=="string"&&S.data==="ping"&&y(S.origin)&&(c=S.origin,o=vs.hjDomainRegex.test(S.origin)?i:S.origin,b(h.ping),w(h.insertMessageScript),m(vs.addCacheBusting("utils.js")))},insertMessageScript:k(S=>{typeof S.data=="string"&&S.data!=="ping"&&(b(h.insertMessageScript),m(S.data))})};function u(){return vs.getToken()}r.getToken=u;function f(){return window!==t&&window.addEventListener}r.isActivable=f;function y(S){return csArray.prototype.some.call(n,V=>V.test(S))}r.isAuthorizedDomain=y;function m(S,V){let H=document.createElement("script");H.type="text/javascript",H.async=!0;let X=o==null?void 0:csString.prototype.replace.call(o,/^https?:/,"");H.src=`${X}/${e}/${S}`,H.onload=V,H.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(H),v(S)}function v(S){csString.prototype.includes.call(S,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(S,"&mode=")[1])}function T(){w(h.ping),vs.waitForBundleInjection()}r.waitForConnection=T;function C(S){l=S,w(h.initHeapVisualLabeler),Rn.isVLCookieEnabled()&&Rn.init(l)}r.waitForHeapVisualLabeler=C;function w(S){window.addEventListener("message",S,!1)}r.listen=w;function b(S){window.removeEventListener("message",S,!1)}r.removeListener=b;function k(S){return function(V){V.origin===c&&S(V)}}r.secureListener=k;function O(S){c&&t.postMessage(S,c)}r.post=O}(s||(s={})),s})();var hr=window.CSFrameCommunication||o_,a_=(()=>{class s extends So{constructor(t){super(),this.N=t;{let e=(i,n)=>{if(typeof n!="string"||!csString.prototype.startsWith.call(n,"on"))return;let o=csString.prototype.substring.call(n,2);return(...c)=>{n==="onInitialDomDone"&&(c=[]),document.dispatchEvent(new CustomEvent("cs-e2e-event",{detail:{type:"lifecycle",name:o,data:c}}))}};this.addListener(new Proxy({},{get:e}))}}emitBeforeNaturalPageView(t){for(let e of this.listeners)e.onBeforeNaturalPageView&&e.onBeforeNaturalPageView(t)}emitAfterNaturalPageView(t){for(let e of this.listeners)e.onAfterNaturalPageView&&e.onAfterNaturalPageView(t)}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.N.schedule(()=>e.onStartTracking(t))}emitStartNoTrackingMode(){for(let t of this.listeners)t.onStartNoTrackingMode&&this.N.schedule(()=>t.onStartNoTrackingMode())}emitArtificialPageViewEnd(t=!1){for(let e of this.listeners)if(e.onArtificialPageViewEnd)try{e.onArtificialPageViewEnd(t)}catch(i){F.error(i)}}emitBeforeArtificialPageView(t,e){for(let i of this.listeners)i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView(t,e)}emitAfterArtificialPageView(t=!1){for(let e of this.listeners)e.onAfterArtificialPageView&&e.onAfterArtificialPageView(t)}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}emitSessionCreated(){for(let t of this.listeners)t.onSessionCreated&&t.onSessionCreated()}emitSessionRemoved(){for(let t of this.listeners)t.onSessionRemoved&&t.onSessionRemoved()}emitSessionRefreshed(){for(let t of this.listeners)t.onSessionRefreshed&&t.onSessionRefreshed()}emitTargetingRulesMatched(){for(let t of this.listeners)t.onTargetingRulesMatched&&t.onTargetingRulesMatched()}}return B([jt("emitStartTracking")],s.prototype,"emitStartTracking",null),s})();var c_=(()=>{class s{constructor(t,e,i){this.E=t,this.Ct=e,this.Er=i}start(){var t,e,i,n,o;if(window.CSQ_TAGS=csArray.prototype.concat.call(window.CSQ_TAGS||[],this.E.projectId),window.UXAnalytics)return;window.UXAnalytics={};let c=new vS,l=new Ol(!!(!((t=this.E.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.E.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.E.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),h=new Sf(this.Ct,this.E);h.init();let u=new wf(this.E,h);if(this.Ct.isTopWindowTracker()&&u.canTrack()){if(!((n=window.CSProtectnativeFunctionsLogs)===null||n===void 0)&&n.Warning&&F.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((o=window.CSProtectnativeFunctionsLogs)===null||o===void 0)&&o.Critical){F.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}Ef();let y=new a_(l),m=new ZS(this.E,h,this.Er,l,y,c);this.E.isQuotaEnabled()?m.initWithQuota():m.init()}let f=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(y){return D.isMaskedElement(y)||D.isMaskedElementChild(y)},isAttributeSensitive(y,m){return D.isMaskedAttribute(y,m)},getSensitiveAttributes(y){return lo(y.attributes,m=>D.isMaskedAttribute(y,m.name))}},Console:{warn(y){f&&console.warn("cs.tracking.warning",y)},error(y){f&&console.error("cs.tracking.error",y)}},Version:Lc},window.CSFrameCommunication||(window.CSFrameCommunication=hr,hr.isActivable()&&hr.waitForConnection(),this.E.isCsCrosswritingHeap()&&hr.waitForHeapVisualLabeler(this.E.getHeapWebAppUri()))}}return B([jt("main.start"),x("main.start")],s.prototype,"start",null),s})();function l_(){csSetTimeout(()=>{let s=0;typeof CompressionStream!="undefined"&&(s|=1),typeof TransformStream!="undefined"&&(s|=2),typeof performance!="undefined"&&typeof performance.now=="function"&&(s|=4),typeof Worker!="undefined"&&(s|=8),typeof scheduler!="undefined"&&(typeof scheduler.yield=="function"&&(s|=16),typeof scheduler.postTask=="function"&&(s|=32)),j.counters.availableFeatures.set(s)})}var h_=(()=>{class s{constructor(t,e,i){this.K=t,this.D=e,this.$O=i,this.wt=[],this.zO=yo().v,l_()}flush(){this.wt.length!==0&&(this.K.send({m:csArray.prototype.map.call(this.wt,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.D.anonymizePII(window.location.pathname),pid:this.$O,v:this.zO}),this.wt=[])}push(t){csArray.prototype.push.call(this.wt,...t),this.flush()}}return s.THROTTLE_INTERVAL=5e3,B([Mr({wait:s.THROTTLE_INTERVAL,mode:"trailing"})],s.prototype,"flush",null),s})();function u_(s,r){let t=s.validationRate/10,e=Cs.boolean(t);if((s.environment==="staging"||!1||e)&&!r.isInWebViewContext())try{let o=Ml.create(r.isTopWindowTracker()),l=new Dl(o).create(s.getMetricsUri()),h=new ei,u=new h_(l,h,s.projectId);j.setService(u)}catch(o){F.warn(`Error initializing metrics: ${o.message}`)}}function d_(){var s;Mu();let r=new gf(window.CS_CONF);window._uxa=window._uxa||[],r.processOptionOverrides(window._uxa);let t=new Td(window,r);t.init();let e=new Od;if(mu(F),Ad(),F.computeIsActive(r.validationRate),t.isTopWindowTracker()){let n=new Kd(r,e);F.setStrategy(n)}else if(t.isInWebViewContext()){let n=new Qd;F.setStrategy(n)}!((s=r==null?void 0:r.experimental)===null||s===void 0)&&s.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=Ns(window,"MutationObserver")),vd(),u_(r,t),new c_(r,t,e).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{bd(d_)}catch{}});})();

// signature-03f8d3fb3c48e0214b030a560ae48be010ad8bf4670055181d3b62621d1ce123