/*! For license information please see site.js.LICENSE.txt */
!function(){var e={7053:function(e,t,n){var i,r,a;!function(s){"use strict";r=[n(9755),n(5592)],void 0===(a="function"==typeof(i=function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})?i.apply(t,r):i)||(e.exports=a)}()},5592:function(e,t,n){var i,r,a;!function(s){"use strict";r=[n(9755)],void 0===(a="function"==typeof(i=function(e){return e.ui=e.ui||{},e.ui.version="1.14.1"})?i.apply(t,r):i)||(e.exports=a)}()},4414:function(e,t,n){var i,r,a;!function(s){"use strict";r=[n(9755),n(5592),n(7053)],i=function(e){var t;function n(e){for(var t,n;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(n=parseInt(e.css("zIndex"),10),!isNaN(n)&&0!==n))return n;e=e.parent()}return 0}function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:"",selectMonthLabel:"Select month",selectYearLabel:"Select year"},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,onUpdateDatepicker:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=r(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function r(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",n,(function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")})).on("mouseover",n,a)}function a(){e.datepicker._isDisabledDatepicker(t.inline?t.dpDiv.parent()[0]:t.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function s(t,n){for(var i in e.extend(t,n),n)null==n[i]&&(t[i]=n[i]);return t}return e.extend(e.ui,{datepicker:{version:"1.14.1"}}),e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return s(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var i,r,a;r="div"===(i=t.nodeName.toLowerCase())||"span"===i,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(a=this._newInst(e(t),r)).settings=e.extend({},n||{}),"input"===i?this._connectDatepicker(t,a):r&&this._inlineDatepicker(t,a)},_newInst:function(t,n){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?r(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,n){var i=e(t);n.append=e([]),n.trigger=e([]),i.hasClass(this.markerClassName)||(this._attachments(i,n),i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(n),e.data(t,"datepicker",n),n.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,n){var i,r,a,s=this._get(n,"appendText"),o=this._get(n,"isRTL");n.append&&n.append.remove(),s&&(n.append=e("<span>").addClass(this._appendClass).text(s),t[o?"before":"after"](n.append)),t.off("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),"focus"!==(i=this._get(n,"showOn"))&&"both"!==i||t.on("focus",this._showDatepicker),"button"!==i&&"both"!==i||(r=this._get(n,"buttonText"),a=this._get(n,"buttonImage"),this._get(n,"buttonImageOnly")?n.trigger=e("<img>").addClass(this._triggerClass).attr({src:a,alt:r,title:r}):(n.trigger=e("<button type='button'>").addClass(this._triggerClass),a?n.trigger.html(e("<img>").attr({src:a,alt:r,title:r})):n.trigger.text(r)),t[o?"before":"after"](n.trigger),n.trigger.on("click",(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1})))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,i,r,a=new Date(2009,11,20),s=this._get(e,"dateFormat");s.match(/[DM]/)&&(t=function(e){for(n=0,i=0,r=0;r<e.length;r++)e[r].length>n&&(n=e[r].length,i=r);return i},a.setMonth(t(this._get(e,s.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,n){var i=e(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(n.dpDiv),e.data(t,"datepicker",n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(t),n.dpDiv.css("display","block"))},_dialogDatepicker:function(t,n,i,r,a){var o,l,c,d,u,h=this._dialogInst;return h||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),e("body").append(this._dialogInput),(h=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},e.data(this._dialogInput[0],"datepicker",h)),s(h.settings,r||{}),n=n&&n.constructor===Date?this._formatDate(h,n):n,this._dialogInput.val(n),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+d,c/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),h.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",h),this},_destroyDatepicker:function(n){var i,r=e(n),a=e.data(n,"datepicker");r.hasClass(this.markerClassName)&&(i=n.nodeName.toLowerCase(),e.removeData(n,"datepicker"),"input"===i?(a.append.remove(),a.trigger.remove(),r.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||r.removeClass(this.markerClassName).empty(),e.datepicker._hideDatepicker(),t===a&&(t=null,this._curInst=null))},_enableDatepicker:function(t){var n,i,r=e(t),a=e.data(t,"datepicker");r.hasClass(this.markerClassName)&&("input"===(n=t.nodeName.toLowerCase())?(t.disabled=!1,a.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==n&&"span"!==n||((i=r.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,(function(e){return e===t?null:e})))},_disableDatepicker:function(t){var n,i,r=e(t),a=e.data(t,"datepicker");r.hasClass(this.markerClassName)&&("input"===(n=t.nodeName.toLowerCase())?(t.disabled=!0,a.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==n&&"span"!==n||((i=r.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,(function(e){return e===t?null:e})),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,n,i){var r,a,o,l,c=this._getInst(t);if(2===arguments.length&&"string"==typeof n)return"defaults"===n?e.extend({},e.datepicker._defaults):c?"all"===n?e.extend({},c.settings):this._get(c,n):null;r=n||{},"string"==typeof n&&((r={})[n]=i),c&&(this._curInst===c&&this._hideDatepicker(),a=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(c,"min"),l=this._getMinMaxDate(c,"max"),s(c.settings,r),null!==o&&void 0!==r.dateFormat&&void 0===r.minDate&&(c.settings.minDate=this._formatDate(c,o)),null!==l&&void 0!==r.dateFormat&&void 0===r.maxDate&&(c.settings.maxDate=this._formatDate(c,l)),"disabled"in r&&(r.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),c),this._autoSize(c),this._setDate(c,a),this._updateAlternate(c),this._updateDatepicker(c))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,i,r,a=e.datepicker._getInst(t.target),s=!0,o=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),s=!1;break;case 13:return(r=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv))[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,r[0]),(n=e.datepicker._get(a,"onSelect"))?(i=e.datepicker._formatDate(a),n.apply(a.input?a.input[0]:null,[i,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),s=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),s=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,o?1:-1,"D"),s=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),s=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,o?-1:1,"D"),s=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),s=t.ctrlKey||t.metaKey;break;default:s=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):s=!1;s&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,i,r=e.datepicker._getInst(t.target);if(e.datepicker._get(r,"constrainInput"))return n=e.datepicker._possibleChars(e.datepicker._get(r,"dateFormat")),i=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||i<" "||!n||n.indexOf(i)>-1},_doKeyUp:function(t){var n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal)try{e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n))&&(e.datepicker._setDateFromField(n),e.datepicker._updateAlternate(n),e.datepicker._updateDatepicker(n))}catch(e){}return!0},_showDatepicker:function(t){var i,r,a,o,l,c,d;("input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)||(i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),!1!==(a=(r=e.datepicker._get(i,"beforeShow"))?r.apply(t,[t,i]):{})&&(s(i.settings,a),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each((function(){return!(o|="fixed"===e(this).css("position"))})),l={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),l=e.datepicker._checkOffset(i,l,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"}),i.inline||(c=e.datepicker._get(i,"showAnim"),d=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",n(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[c]?i.dpDiv.show(c,e.datepicker._get(i,"showOptions"),d):i.dpDiv[c||"show"](c?d:null),e.datepicker._shouldFocusInput(i)&&i.input.trigger("focus"),e.datepicker._curInst=i)))},_updateDatepicker:function(n){this.maxRows=4,t=n,n.dpDiv.empty().append(this._generateHTML(n)),this._attachHandlers(n);var i,r=this._getNumberOfMonths(n),s=r[1],o=17,l=n.dpDiv.find("."+this._dayOverClass+" a"),c=e.datepicker._get(n,"onUpdateDatepicker");l.length>0&&a.apply(l.get(0)),n.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&n.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",o*s+"em"),n.dpDiv[(1!==r[0]||1!==r[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),n.dpDiv[(this._get(n,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),n===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(n)&&n.input.trigger("focus"),n.yearshtml&&(i=n.yearshtml,setTimeout((function(){i===n.yearshtml&&n.yearshtml&&n.dpDiv.find("select.ui-datepicker-year").first().replaceWith(n.yearshtml),i=n.yearshtml=null}),0)),c&&c.apply(n.input?n.input[0]:null,[n])},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")},_checkOffset:function(t,n,i){var r=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),s=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(i?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?r-s:0,n.left-=i&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=i&&n.top===t.input.offset().top+o?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+r>l&&l>r?Math.abs(n.left+r-l):0),n.top-=Math.min(n.top,n.top+a>c&&c>a?Math.abs(a+o):0),n},_findPos:function(t){for(var n,i=this._getInst(t),r=this._get(i,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.pseudos.hidden(t));)t=t[r?"previousSibling":"nextSibling"];return[(n=e(t).offset()).left,n.top]},_hideDatepicker:function(t){var n,i,r,a,s=this._curInst;!s||t&&s!==e.data(t,"datepicker")||this._datepickerShowing&&(n=this._get(s,"showAnim"),i=this._get(s,"duration"),r=function(){e.datepicker._tidyDialog(s)},e.effects&&e.effects.effect[n]?s.dpDiv.hide(n,e.datepicker._get(s,"showOptions"),i,r):s.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?i:null,r),n||r(),this._datepickerShowing=!1,(a=this._get(s,"onClose"))&&a.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var n=e(t.target),i=e.datepicker._getInst(n[0]);(n[0].id===e.datepicker._mainDivId||0!==n.parents("#"+e.datepicker._mainDivId).length||n.hasClass(e.datepicker.markerClassName)||n.closest("."+e.datepicker._triggerClass).length||!e.datepicker._datepickerShowing||e.datepicker._inDialog&&e.blockUI)&&(!n.hasClass(e.datepicker.markerClassName)||e.datepicker._curInst===i)||e.datepicker._hideDatepicker()}},_adjustDate:function(t,n,i){var r=e(t),a=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(a,n,i),this._updateDatepicker(a))},_gotoToday:function(t){var n,i=e(t),r=this._getInst(i[0]);this._get(r,"gotoCurrent")&&r.currentDay?(r.selectedDay=r.currentDay,r.drawMonth=r.selectedMonth=r.currentMonth,r.drawYear=r.selectedYear=r.currentYear):(n=new Date,r.selectedDay=n.getDate(),r.drawMonth=r.selectedMonth=n.getMonth(),r.drawYear=r.selectedYear=n.getFullYear()),this._notifyChange(r),this._adjustDate(i)},_selectMonthYear:function(t,n,i){var r=e(t),a=this._getInst(r[0]);a["selected"+("M"===i?"Month":"Year")]=a["draw"+("M"===i?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(r)},_selectDay:function(t,n,i,r){var a,s=e(t);e(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||((a=this._getInst(s[0])).selectedDay=a.currentDay=parseInt(e("a",r).attr("data-date")),a.selectedMonth=a.currentMonth=n,a.selectedYear=a.currentYear=i,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var i,r=e(t),a=this._getInst(r[0]);n=null!=n?n:this._formatDate(a),a.input&&a.input.val(n),this._updateAlternate(a),(i=this._get(a,"onSelect"))?i.apply(a.input?a.input[0]:null,[n,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var n,i,r,a=this._get(t,"altField");a&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),i=this._getDate(t),r=this.formatDate(n,i,this._getFormatConfig(t)),e(document).find(a).val(r))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,i){if(null==t||null==n)throw"Invalid arguments";if(""===(n="object"==typeof n?n.toString():n+""))return null;var r,a,s,o,l=0,c=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),u=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,h=(i?i.dayNames:null)||this._defaults.dayNames,p=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,m=(i?i.monthNames:null)||this._defaults.monthNames,f=-1,g=-1,v=-1,_=-1,b=!1,y=function(e){var n=r+1<t.length&&t.charAt(r+1)===e;return n&&r++,n},x=function(e){var t=y(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,r=new RegExp("^\\d{"+("y"===e?i:1)+","+i+"}"),a=n.substring(l).match(r);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},w=function(t,i,r){var a=-1,s=e.map(y(t)?r:i,(function(e,t){return[[t,e]]})).sort((function(e,t){return-(e[1].length-t[1].length)}));if(e.each(s,(function(e,t){var i=t[1];if(n.substr(l,i.length).toLowerCase()===i.toLowerCase())return a=t[0],l+=i.length,!1})),-1!==a)return a+1;throw"Unknown name at position "+l},S=function(){if(n.charAt(l)!==t.charAt(r))throw"Unexpected literal at position "+l;l++};for(r=0;r<t.length;r++)if(b)"'"!==t.charAt(r)||y("'")?S():b=!1;else switch(t.charAt(r)){case"d":v=x("d");break;case"D":w("D",u,h);break;case"o":_=x("o");break;case"m":g=x("m");break;case"M":g=w("M",p,m);break;case"y":f=x("y");break;case"@":f=(o=new Date(x("@"))).getFullYear(),g=o.getMonth()+1,v=o.getDate();break;case"!":f=(o=new Date((x("!")-this._ticksTo1970)/1e4)).getFullYear(),g=o.getMonth()+1,v=o.getDate();break;case"'":y("'")?S():b=!0;break;default:S()}if(l<n.length&&(s=n.substr(l),!/^\s+/.test(s)))throw"Extra/unparsed characters found in date: "+s;if(-1===f?f=(new Date).getFullYear():f<100&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(f<=d?0:-100)),_>-1)for(g=1,v=_;;){if(v<=(a=this._getDaysInMonth(f,g-1)))break;g++,v-=a}if((o=this._daylightSavingAdjust(new Date(f,g-1,v))).getFullYear()!==f||o.getMonth()+1!==g||o.getDate()!==v)throw"Invalid date";return o},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var i,r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,a=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,l=function(t){var n=i+1<e.length&&e.charAt(i+1)===t;return n&&i++,n},c=function(e,t,n){var i=""+t;if(l(e))for(;i.length<n;)i="0"+i;return i},d=function(e,t,n,i){return l(e)?i[t]:n[t]},u="",h=!1;if(t)for(i=0;i<e.length;i++)if(h)"'"!==e.charAt(i)||l("'")?u+=e.charAt(i):h=!1;else switch(e.charAt(i)){case"d":u+=c("d",t.getDate(),2);break;case"D":u+=d("D",t.getDay(),r,a);break;case"o":u+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=c("m",t.getMonth()+1,2);break;case"M":u+=d("M",t.getMonth(),s,o);break;case"y":u+=l("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":h=!0;break;default:u+=e.charAt(i)}return u},_possibleChars:function(e){var t,n="",i=!1,r=function(n){var i=t+1<e.length&&e.charAt(t+1)===n;return i&&t++,i};for(t=0;t<e.length;t++)if(i)"'"!==e.charAt(t)||r("'")?n+=e.charAt(t):i=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":r("'")?n+="'":i=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var n=this._get(e,"dateFormat"),i=e.lastVal=e.input?e.input.val():null,r=this._getDefaultDate(e),a=r,s=this._getFormatConfig(e);try{a=this.parseDate(n,i,s)||r}catch(e){i=t?"":i}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=i?a.getDate():0,e.currentMonth=i?a.getMonth():0,e.currentYear=i?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,i){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(e){}for(var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,r=i.getFullYear(),a=i.getMonth(),s=i.getDate(),o=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=o.exec(n);l;){switch(l[2]||"d"){case"d":case"D":s+=parseInt(l[1],10);break;case"w":case"W":s+=7*parseInt(l[1],10);break;case"m":case"M":a+=parseInt(l[1],10),s=Math.min(s,e.datepicker._getDaysInMonth(r,a));break;case"y":case"Y":r+=parseInt(l[1],10),s=Math.min(s,e.datepicker._getDaysInMonth(r,a))}l=o.exec(n)}return new Date(r,a,s)},s=null==n||""===n?i:"string"==typeof n?a(n):"number"==typeof n?isNaN(n)?i:r(n):new Date(n.getTime());return(s=s&&"Invalid Date"===s.toString()?i:s)&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var i=!t,r=e.selectedMonth,a=e.selectedYear,s=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=s.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=s.getMonth(),e.drawYear=e.selectedYear=e.currentYear=s.getFullYear(),r===e.selectedMonth&&a===e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map((function(){var t={prev:function(){e.datepicker._adjustDate(i,-n,"M")},next:function(){e.datepicker._adjustDate(i,+n,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(i)},selectDay:function(){return e.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(i,this,"Y"),!1}};e(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])}))},_generateHTML:function(t){var n,i,r,a,s,o,l,c,d,u,h,p,m,f,g,v,_,b,y,x,w,S,T,E,M,C,A,k,D,L,I,P,R,O,N,B,F,U,z,V=new Date,H=this._daylightSavingAdjust(new Date(V.getFullYear(),V.getMonth(),V.getDate())),$=this._get(t,"isRTL"),W=this._get(t,"showButtonPanel"),G=this._get(t,"hideIfNoPrevNext"),j=this._get(t,"navigationAsDateFormat"),q=this._getNumberOfMonths(t),Y=this._get(t,"showCurrentAtPos"),X=this._get(t,"stepMonths"),K=1!==q[0]||1!==q[1],Z=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(t,"min"),Q=this._getMinMaxDate(t,"max"),ee=t.drawMonth-Y,te=t.drawYear;if(ee<0&&(ee+=12,te--),Q)for(n=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-q[0]*q[1]+1,Q.getDate())),n=J&&n<J?J:n;this._daylightSavingAdjust(new Date(te,ee,1))>n;)--ee<0&&(ee=11,te--);for(t.drawMonth=ee,t.drawYear=te,i=this._get(t,"prevText"),i=j?this.formatDate(i,this._daylightSavingAdjust(new Date(te,ee-X,1)),this._getFormatConfig(t)):i,r=this._canAdjustMonth(t,-1,te,ee)?e("<a>").attr({class:"ui-datepicker-prev ui-corner-all","data-handler":"prev","data-event":"click",title:i}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+($?"e":"w")).text(i))[0].outerHTML:G?"":e("<a>").attr({class:"ui-datepicker-prev ui-corner-all ui-state-disabled",title:i}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+($?"e":"w")).text(i))[0].outerHTML,a=this._get(t,"nextText"),a=j?this.formatDate(a,this._daylightSavingAdjust(new Date(te,ee+X,1)),this._getFormatConfig(t)):a,s=this._canAdjustMonth(t,1,te,ee)?e("<a>").attr({class:"ui-datepicker-next ui-corner-all","data-handler":"next","data-event":"click",title:a}).append(e("<span>").addClass("ui-icon ui-icon-circle-triangle-"+($?"w":"e")).text(a))[0].outerHTML:G?"":e("<a>").attr({class:"ui-datepicker-next ui-corner-all ui-state-disabled",title:a}).append(e("<span>").attr("class","ui-icon ui-icon-circle-triangle-"+($?"w":"e")).text(a))[0].outerHTML,o=this._get(t,"currentText"),l=this._get(t,"gotoCurrent")&&t.currentDay?Z:H,o=j?this.formatDate(o,l,this._getFormatConfig(t)):o,c="",t.inline||(c=e("<button>").attr({type:"button",class:"ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all","data-handler":"hide","data-event":"click"}).text(this._get(t,"closeText"))[0].outerHTML),d="",W&&(d=e("<div class='ui-datepicker-buttonpane ui-widget-content'>").append($?c:"").append(this._isInRange(t,l)?e("<button>").attr({type:"button",class:"ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all","data-handler":"today","data-event":"click"}).text(o):"").append($?"":c)[0].outerHTML),u=parseInt(this._get(t,"firstDay"),10),u=isNaN(u)?0:u,h=this._get(t,"showWeek"),p=this._get(t,"dayNames"),m=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),v=this._get(t,"beforeShowDay"),_=this._get(t,"showOtherMonths"),b=this._get(t,"selectOtherMonths"),y=this._getDefaultDate(t),x="",S=0;S<q[0];S++){for(T="",this.maxRows=4,E=0;E<q[1];E++){if(M=this._daylightSavingAdjust(new Date(te,ee,t.selectedDay)),C=" ui-corner-all",A="",K){if(A+="<div class='ui-datepicker-group",q[1]>1)switch(E){case 0:A+=" ui-datepicker-group-first",C=" ui-corner-"+($?"right":"left");break;case q[1]-1:A+=" ui-datepicker-group-last",C=" ui-corner-"+($?"left":"right");break;default:A+=" ui-datepicker-group-middle",C=""}A+="'>"}for(A+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&0===S?$?s:r:"")+(/all|right/.test(C)&&0===S?$?r:s:"")+this._generateMonthYearHeader(t,ee,te,J,Q,S>0||E>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",k=h?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;w<7;w++)k+="<th scope='col'"+((w+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+p[D=(w+u)%7]+"'>"+m[D]+"</span></th>";for(A+=k+"</tr></thead><tbody>",L=this._getDaysInMonth(te,ee),te===t.selectedYear&&ee===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,L)),I=(this._getFirstDayOfMonth(te,ee)-u+7)%7,P=Math.ceil((I+L)/7),R=K&&this.maxRows>P?this.maxRows:P,this.maxRows=R,O=this._daylightSavingAdjust(new Date(te,ee,1-I)),N=0;N<R;N++){for(A+="<tr>",B=h?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(O)+"</td>":"",w=0;w<7;w++)F=v?v.apply(t.input?t.input[0]:null,[O]):[!0,""],z=(U=O.getMonth()!==ee)&&!b||!F[0]||J&&O<J||Q&&O>Q,B+="<td class='"+((w+u+6)%7>=5?" ui-datepicker-week-end":"")+(U?" ui-datepicker-other-month":"")+(O.getTime()===M.getTime()&&ee===t.selectedMonth&&t._keyEvent||y.getTime()===O.getTime()&&y.getTime()===M.getTime()?" "+this._dayOverClass:"")+(z?" "+this._unselectableClass+" ui-state-disabled":"")+(U&&!_?"":" "+F[1]+(O.getTime()===Z.getTime()?" "+this._currentClass:"")+(O.getTime()===H.getTime()?" ui-datepicker-today":""))+"'"+(U&&!_||!F[2]?"":" title='"+F[2].replace(/'/g,"&#39;")+"'")+(z?"":" data-handler='selectDay' data-event='click' data-month='"+O.getMonth()+"' data-year='"+O.getFullYear()+"'")+">"+(U&&!_?"&#xa0;":z?"<span class='ui-state-default'>"+O.getDate()+"</span>":"<a class='ui-state-default"+(O.getTime()===H.getTime()?" ui-state-highlight":"")+(O.getTime()===Z.getTime()?" ui-state-active":"")+(U?" ui-priority-secondary":"")+"' href='#' aria-current='"+(O.getTime()===Z.getTime()?"true":"false")+"' data-date='"+O.getDate()+"'>"+O.getDate()+"</a>")+"</td>",O.setDate(O.getDate()+1),O=this._daylightSavingAdjust(O);A+=B+"</tr>"}++ee>11&&(ee=0,te++),T+=A+="</tbody></table>"+(K?"</div>"+(q[0]>0&&E===q[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}x+=T}return x+=d,t._keyEvent=!1,x},_generateMonthYearHeader:function(e,t,n,i,r,a,s,o){var l,c,d,u,h,p,m,f,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),_=this._get(e,"showMonthAfterYear"),b=this._get(e,"selectMonthLabel"),y=this._get(e,"selectYearLabel"),x="<div class='ui-datepicker-title'>",w="";if(a||!g)w+="<span class='ui-datepicker-month'>"+s[t]+"</span>";else{for(l=i&&i.getFullYear()===n,c=r&&r.getFullYear()===n,w+="<select class='ui-datepicker-month' aria-label='"+b+"' data-handler='selectMonth' data-event='change'>",d=0;d<12;d++)(!l||d>=i.getMonth())&&(!c||d<=r.getMonth())&&(w+="<option value='"+d+"'"+(d===t?" selected='selected'":"")+">"+o[d]+"</option>");w+="</select>"}if(_||(x+=w+(!a&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)x+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(u=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},m=p(u[0]),f=Math.max(m,p(u[1]||"")),m=i?Math.max(m,i.getFullYear()):m,f=r?Math.min(f,r.getFullYear()):f,e.yearshtml+="<select class='ui-datepicker-year' aria-label='"+y+"' data-handler='selectYear' data-event='change'>";m<=f;m++)e.yearshtml+="<option value='"+m+"'"+(m===n?" selected='selected'":"")+">"+m+"</option>";e.yearshtml+="</select>",x+=e.yearshtml,e.yearshtml=null}return x+=this._get(e,"yearSuffix"),_&&(x+=(!a&&g&&v?"":"&#xa0;")+w),x+="</div>"},_adjustInstDate:function(e,t,n){var i=e.selectedYear+("Y"===n?t:0),r=e.selectedMonth+("M"===n?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(i,r))+("D"===n?t:0),s=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,r,a)));e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),"M"!==n&&"Y"!==n||this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),r=n&&t<n?n:t;return i&&r>i?i:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,i){var r=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(n,i+(t<0?t:r[0]*r[1]),1));return t<0&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var n,i,r=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),s=null,o=null,l=this._get(e,"yearRange");return l&&(n=l.split(":"),i=(new Date).getFullYear(),s=parseInt(n[0],10),o=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(s+=i),n[1].match(/[+\-].*/)&&(o+=i)),(!r||t.getTime()>=r.getTime())&&(!a||t.getTime()<=a.getTime())&&(!s||t.getFullYear()>=s)&&(!o||t.getFullYear()<=o)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var r=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).on("mousedown",e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each((function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)})):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.14.1",e.datepicker},void 0===(a="function"==typeof i?i.apply(t,r):i)||(e.exports=a)}()},9755:function(e,t){var n;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(i,r){"use strict";var a=[],s=Object.getPrototypeOf,o=a.slice,l=a.flat?function(e){return a.flat.call(e)}:function(e){return a.concat.apply([],e)},c=a.push,d=a.indexOf,u={},h=u.toString,p=u.hasOwnProperty,m=p.toString,f=m.call(Object),g={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},_=function(e){return null!=e&&e===e.window},b=i.document,y={type:!0,src:!0,nonce:!0,noModule:!0};function x(e,t,n){var i,r,a=(n=n||b).createElement("script");if(a.text=e,t)for(i in y)(r=t[i]||t.getAttribute&&t.getAttribute(i))&&a.setAttribute(i,r);n.head.appendChild(a).parentNode.removeChild(a)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[h.call(e)]||"object":typeof e}var S="3.7.1",T=/HTML$/i,E=function(e,t){return new E.fn.init(e,t)};function M(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!v(e)&&!_(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function C(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}E.fn=E.prototype={jquery:S,constructor:E,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=E.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return E.each(this,e)},map:function(e){return this.pushStack(E.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(E.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:a.sort,splice:a.splice},E.extend=E.fn.extend=function(){var e,t,n,i,r,a,s=arguments[0]||{},o=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[o]||{},o++),"object"==typeof s||v(s)||(s={}),o===l&&(s=this,o--);o<l;o++)if(null!=(e=arguments[o]))for(t in e)i=e[t],"__proto__"!==t&&s!==i&&(c&&i&&(E.isPlainObject(i)||(r=Array.isArray(i)))?(n=s[t],a=r&&!Array.isArray(n)?[]:r||E.isPlainObject(n)?n:{},r=!1,s[t]=E.extend(c,a,i)):void 0!==i&&(s[t]=i));return s},E.extend({expando:"jQuery"+(S+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==h.call(e))&&(!(t=s(e))||"function"==typeof(n=p.call(t,"constructor")&&t.constructor)&&m.call(n)===f)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){x(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,i=0;if(M(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},text:function(e){var t,n="",i=0,r=e.nodeType;if(!r)for(;t=e[i++];)n+=E.text(t);return 1===r||11===r?e.textContent:9===r?e.documentElement.textContent:3===r||4===r?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?E.merge(n,"string"==typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:d.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!T.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,a=e.length,s=!n;r<a;r++)!t(e[r],r)!==s&&i.push(e[r]);return i},map:function(e,t,n){var i,r,a=0,s=[];if(M(e))for(i=e.length;a<i;a++)null!=(r=t(e[a],a,n))&&s.push(r);else for(a in e)null!=(r=t(e[a],a,n))&&s.push(r);return l(s)},guid:1,support:g}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=a[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){u["[object "+t+"]"]=t.toLowerCase()}));var A=a.pop,k=a.sort,D=a.splice,L="[\\x20\\t\\r\\n\\f]",I=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g");E.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var P=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function R(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}E.escapeSelector=function(e){return(e+"").replace(P,R)};var O=b,N=c;!function(){var e,t,n,r,s,l,c,u,h,m,f=N,v=E.expando,_=0,b=0,y=ee(),x=ee(),w=ee(),S=ee(),T=function(e,t){return e===t&&(s=!0),0},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",P="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",R="\\[[\\x20\\t\\r\\n\\f]*("+P+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+P+"))|)"+L+"*\\]",B=":("+P+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|.*)\\)|)",F=new RegExp(L+"+","g"),U=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),z=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),V=new RegExp(L+"|>"),H=new RegExp(B),$=new RegExp("^"+P+"$"),W={ID:new RegExp("^#("+P+")"),CLASS:new RegExp("^\\.("+P+")"),TAG:new RegExp("^("+P+"|[*])"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,j=/^h\d$/i,q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Y=/[+~]/,X=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),K=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Z=function(){le()},J=he((function(e){return!0===e.disabled&&C(e,"fieldset")}),{dir:"parentNode",next:"legend"});try{f.apply(a=o.call(O.childNodes),O.childNodes),a[O.childNodes.length].nodeType}catch(e){f={apply:function(e,t){N.apply(e,o.call(t))},call:function(e){N.apply(e,o.call(arguments,1))}}}function Q(e,t,n,i){var r,a,s,o,c,d,p,m=t&&t.ownerDocument,_=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==_&&9!==_&&11!==_)return n;if(!i&&(le(t),t=t||l,u)){if(11!==_&&(c=q.exec(e)))if(r=c[1]){if(9===_){if(!(s=t.getElementById(r)))return n;if(s.id===r)return f.call(n,s),n}else if(m&&(s=m.getElementById(r))&&Q.contains(t,s)&&s.id===r)return f.call(n,s),n}else{if(c[2])return f.apply(n,t.getElementsByTagName(e)),n;if((r=c[3])&&t.getElementsByClassName)return f.apply(n,t.getElementsByClassName(r)),n}if(!(S[e+" "]||h&&h.test(e))){if(p=e,m=t,1===_&&(V.test(e)||z.test(e))){for((m=Y.test(e)&&oe(t.parentNode)||t)==t&&g.scope||((o=t.getAttribute("id"))?o=E.escapeSelector(o):t.setAttribute("id",o=v)),a=(d=de(e)).length;a--;)d[a]=(o?"#"+o:":scope")+" "+ue(d[a]);p=d.join(",")}try{return f.apply(n,m.querySelectorAll(p)),n}catch(t){S(e,!0)}finally{o===v&&t.removeAttribute("id")}}}return _e(e.replace(I,"$1"),t,n,i)}function ee(){var e=[];return function n(i,r){return e.push(i+" ")>t.cacheLength&&delete n[e.shift()],n[i+" "]=r}}function te(e){return e[v]=!0,e}function ne(e){var t=l.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ie(e){return function(t){return C(t,"input")&&t.type===e}}function re(e){return function(t){return(C(t,"input")||C(t,"button"))&&t.type===e}}function ae(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&J(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function se(e){return te((function(t){return t=+t,te((function(n,i){for(var r,a=e([],n.length,t),s=a.length;s--;)n[r=a[s]]&&(n[r]=!(i[r]=n[r]))}))}))}function oe(e){return e&&void 0!==e.getElementsByTagName&&e}function le(e){var n,i=e?e.ownerDocument||e:O;return i!=l&&9===i.nodeType&&i.documentElement?(c=(l=i).documentElement,u=!E.isXMLDoc(l),m=c.matches||c.webkitMatchesSelector||c.msMatchesSelector,c.msMatchesSelector&&O!=l&&(n=l.defaultView)&&n.top!==n&&n.addEventListener("unload",Z),g.getById=ne((function(e){return c.appendChild(e).id=E.expando,!l.getElementsByName||!l.getElementsByName(E.expando).length})),g.disconnectedMatch=ne((function(e){return m.call(e,"*")})),g.scope=ne((function(){return l.querySelectorAll(":scope")})),g.cssHas=ne((function(){try{return l.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}})),g.getById?(t.filter.ID=function(e){var t=e.replace(X,K);return function(e){return e.getAttribute("id")===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&u){var n=t.getElementById(e);return n?[n]:[]}}):(t.filter.ID=function(e){var t=e.replace(X,K);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&u){var n,i,r,a=t.getElementById(e);if(a){if((n=a.getAttributeNode("id"))&&n.value===e)return[a];for(r=t.getElementsByName(e),i=0;a=r[i++];)if((n=a.getAttributeNode("id"))&&n.value===e)return[a]}return[]}}),t.find.TAG=function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},t.find.CLASS=function(e,t){if(void 0!==t.getElementsByClassName&&u)return t.getElementsByClassName(e)},h=[],ne((function(e){var t;c.appendChild(e).innerHTML="<a id='"+v+"' href='' disabled='disabled'></a><select id='"+v+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||h.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+M+")"),e.querySelectorAll("[id~="+v+"-]").length||h.push("~="),e.querySelectorAll("a#"+v+"+*").length||h.push(".#.+[+~]"),e.querySelectorAll(":checked").length||h.push(":checked"),(t=l.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),c.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&h.push(":enabled",":disabled"),(t=l.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||h.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")")})),g.cssHas||h.push(":has"),h=h.length&&new RegExp(h.join("|")),T=function(e,t){if(e===t)return s=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!g.sortDetached&&t.compareDocumentPosition(e)===n?e===l||e.ownerDocument==O&&Q.contains(O,e)?-1:t===l||t.ownerDocument==O&&Q.contains(O,t)?1:r?d.call(r,e)-d.call(r,t):0:4&n?-1:1)},l):l}for(e in Q.matches=function(e,t){return Q(e,null,null,t)},Q.matchesSelector=function(e,t){if(le(e),u&&!S[t+" "]&&(!h||!h.test(t)))try{var n=m.call(e,t);if(n||g.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){S(t,!0)}return Q(t,l,null,[e]).length>0},Q.contains=function(e,t){return(e.ownerDocument||e)!=l&&le(e),E.contains(e,t)},Q.attr=function(e,n){(e.ownerDocument||e)!=l&&le(e);var i=t.attrHandle[n.toLowerCase()],r=i&&p.call(t.attrHandle,n.toLowerCase())?i(e,n,!u):void 0;return void 0!==r?r:e.getAttribute(n)},Q.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},E.uniqueSort=function(e){var t,n=[],i=0,a=0;if(s=!g.sortStable,r=!g.sortStable&&o.call(e,0),k.call(e,T),s){for(;t=e[a++];)t===e[a]&&(i=n.push(a));for(;i--;)D.call(e,n[i],1)}return r=null,e},E.fn.uniqueSort=function(){return this.pushStack(E.uniqueSort(o.apply(this)))},t=E.expr={cacheLength:50,createPseudo:te,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(X,K),e[3]=(e[3]||e[4]||e[5]||"").replace(X,K),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Q.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Q.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return W.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&H.test(n)&&(t=de(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(X,K).toLowerCase();return"*"===e?function(){return!0}:function(e){return C(e,t)}},CLASS:function(e){var t=y[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+L+"|$)"))&&y(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var r=Q.attr(i,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r.replace(F," ")+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,r){var a="nth"!==e.slice(0,3),s="last"!==e.slice(-4),o="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,d,u,h,p,m=a!==s?"nextSibling":"previousSibling",f=t.parentNode,g=o&&t.nodeName.toLowerCase(),b=!l&&!o,y=!1;if(f){if(a){for(;m;){for(u=t;u=u[m];)if(o?C(u,g):1===u.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?f.firstChild:f.lastChild],s&&b){for(y=(h=(c=(d=f[v]||(f[v]={}))[e]||[])[0]===_&&c[1])&&c[2],u=h&&f.childNodes[h];u=++h&&u&&u[m]||(y=h=0)||p.pop();)if(1===u.nodeType&&++y&&u===t){d[e]=[_,h,y];break}}else if(b&&(y=h=(c=(d=t[v]||(t[v]={}))[e]||[])[0]===_&&c[1]),!1===y)for(;(u=++h&&u&&u[m]||(y=h=0)||p.pop())&&(!(o?C(u,g):1===u.nodeType)||!++y||(b&&((d=u[v]||(u[v]={}))[e]=[_,y]),u!==t)););return(y-=r)===i||y%i==0&&y/i>=0}}},PSEUDO:function(e,n){var i,r=t.pseudos[e]||t.setFilters[e.toLowerCase()]||Q.error("unsupported pseudo: "+e);return r[v]?r(n):r.length>1?(i=[e,e,"",n],t.setFilters.hasOwnProperty(e.toLowerCase())?te((function(e,t){for(var i,a=r(e,n),s=a.length;s--;)e[i=d.call(e,a[s])]=!(t[i]=a[s])})):function(e){return r(e,0,i)}):r}},pseudos:{not:te((function(e){var t=[],n=[],i=ve(e.replace(I,"$1"));return i[v]?te((function(e,t,n,r){for(var a,s=i(e,null,r,[]),o=e.length;o--;)(a=s[o])&&(e[o]=!(t[o]=a))})):function(e,r,a){return t[0]=e,i(t,null,a,n),t[0]=null,!n.pop()}})),has:te((function(e){return function(t){return Q(e,t).length>0}})),contains:te((function(e){return e=e.replace(X,K),function(t){return(t.textContent||E.text(t)).indexOf(e)>-1}})),lang:te((function(e){return $.test(e||"")||Q.error("unsupported lang: "+e),e=e.replace(X,K).toLowerCase(),function(t){var n;do{if(n=u?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=i.location&&i.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===c},focus:function(e){return e===function(){try{return l.activeElement}catch(e){}}()&&l.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:ae(!1),disabled:ae(!0),checked:function(e){return C(e,"input")&&!!e.checked||C(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return j.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){return C(e,"input")&&"button"===e.type||C(e,"button")},text:function(e){var t;return C(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:se((function(){return[0]})),last:se((function(e,t){return[t-1]})),eq:se((function(e,t,n){return[n<0?n+t:n]})),even:se((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:se((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:se((function(e,t,n){var i;for(i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e})),gt:se((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}},t.pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=ie(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=re(e);function ce(){}function de(e,n){var i,r,a,s,o,l,c,d=x[e+" "];if(d)return n?0:d.slice(0);for(o=e,l=[],c=t.preFilter;o;){for(s in i&&!(r=U.exec(o))||(r&&(o=o.slice(r[0].length)||o),l.push(a=[])),i=!1,(r=z.exec(o))&&(i=r.shift(),a.push({value:i,type:r[0].replace(I," ")}),o=o.slice(i.length)),t.filter)!(r=W[s].exec(o))||c[s]&&!(r=c[s](r))||(i=r.shift(),a.push({value:i,type:s,matches:r}),o=o.slice(i.length));if(!i)break}return n?o.length:o?Q.error(e):x(e,l).slice(0)}function ue(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function he(e,t,n){var i=t.dir,r=t.next,a=r||i,s=n&&"parentNode"===a,o=b++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||s)return e(t,n,r);return!1}:function(t,n,l){var c,d,u=[_,o];if(l){for(;t=t[i];)if((1===t.nodeType||s)&&e(t,n,l))return!0}else for(;t=t[i];)if(1===t.nodeType||s)if(d=t[v]||(t[v]={}),r&&C(t,r))t=t[i]||t;else{if((c=d[a])&&c[0]===_&&c[1]===o)return u[2]=c[2];if(d[a]=u,u[2]=e(t,n,l))return!0}return!1}}function pe(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function me(e,t,n,i,r){for(var a,s=[],o=0,l=e.length,c=null!=t;o<l;o++)(a=e[o])&&(n&&!n(a,i,r)||(s.push(a),c&&t.push(o)));return s}function fe(e,t,n,i,r,a){return i&&!i[v]&&(i=fe(i)),r&&!r[v]&&(r=fe(r,a)),te((function(a,s,o,l){var c,u,h,p,m=[],g=[],v=s.length,_=a||function(e,t,n){for(var i=0,r=t.length;i<r;i++)Q(e,t[i],n);return n}(t||"*",o.nodeType?[o]:o,[]),b=!e||!a&&t?_:me(_,m,e,o,l);if(n?n(b,p=r||(a?e:v||i)?[]:s,o,l):p=b,i)for(c=me(p,g),i(c,[],o,l),u=c.length;u--;)(h=c[u])&&(p[g[u]]=!(b[g[u]]=h));if(a){if(r||e){if(r){for(c=[],u=p.length;u--;)(h=p[u])&&c.push(b[u]=h);r(null,p=[],c,l)}for(u=p.length;u--;)(h=p[u])&&(c=r?d.call(a,h):m[u])>-1&&(a[c]=!(s[c]=h))}}else p=me(p===s?p.splice(v,p.length):p),r?r(null,s,p,l):f.apply(s,p)}))}function ge(e){for(var i,r,a,s=e.length,o=t.relative[e[0].type],l=o||t.relative[" "],c=o?1:0,u=he((function(e){return e===i}),l,!0),h=he((function(e){return d.call(i,e)>-1}),l,!0),p=[function(e,t,r){var a=!o&&(r||t!=n)||((i=t).nodeType?u(e,t,r):h(e,t,r));return i=null,a}];c<s;c++)if(r=t.relative[e[c].type])p=[he(pe(p),r)];else{if((r=t.filter[e[c].type].apply(null,e[c].matches))[v]){for(a=++c;a<s&&!t.relative[e[a].type];a++);return fe(c>1&&pe(p),c>1&&ue(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(I,"$1"),r,c<a&&ge(e.slice(c,a)),a<s&&ge(e=e.slice(a)),a<s&&ue(e))}p.push(r)}return pe(p)}function ve(e,i){var r,a=[],s=[],o=w[e+" "];if(!o){for(i||(i=de(e)),r=i.length;r--;)(o=ge(i[r]))[v]?a.push(o):s.push(o);o=w(e,function(e,i){var r=i.length>0,a=e.length>0,s=function(s,o,c,d,h){var p,m,g,v=0,b="0",y=s&&[],x=[],w=n,S=s||a&&t.find.TAG("*",h),T=_+=null==w?1:Math.random()||.1,M=S.length;for(h&&(n=o==l||o||h);b!==M&&null!=(p=S[b]);b++){if(a&&p){for(m=0,o||p.ownerDocument==l||(le(p),c=!u);g=e[m++];)if(g(p,o||l,c)){f.call(d,p);break}h&&(_=T)}r&&((p=!g&&p)&&v--,s&&y.push(p))}if(v+=b,r&&b!==v){for(m=0;g=i[m++];)g(y,x,o,c);if(s){if(v>0)for(;b--;)y[b]||x[b]||(x[b]=A.call(d));x=me(x)}f.apply(d,x),h&&!s&&x.length>0&&v+i.length>1&&E.uniqueSort(d)}return h&&(_=T,n=w),y};return r?te(s):s}(s,a)),o.selector=e}return o}function _e(e,n,i,r){var a,s,o,l,c,d="function"==typeof e&&e,h=!r&&de(e=d.selector||e);if(i=i||[],1===h.length){if((s=h[0]=h[0].slice(0)).length>2&&"ID"===(o=s[0]).type&&9===n.nodeType&&u&&t.relative[s[1].type]){if(!(n=(t.find.ID(o.matches[0].replace(X,K),n)||[])[0]))return i;d&&(n=n.parentNode),e=e.slice(s.shift().value.length)}for(a=W.needsContext.test(e)?0:s.length;a--&&(o=s[a],!t.relative[l=o.type]);)if((c=t.find[l])&&(r=c(o.matches[0].replace(X,K),Y.test(s[0].type)&&oe(n.parentNode)||n))){if(s.splice(a,1),!(e=r.length&&ue(s)))return f.apply(i,r),i;break}}return(d||ve(e,h))(r,n,!u,i,!n||Y.test(e)&&oe(n.parentNode)||n),i}ce.prototype=t.filters=t.pseudos,t.setFilters=new ce,g.sortStable=v.split("").sort(T).join("")===v,le(),g.sortDetached=ne((function(e){return 1&e.compareDocumentPosition(l.createElement("fieldset"))})),E.find=Q,E.expr[":"]=E.expr.pseudos,E.unique=E.uniqueSort,Q.compile=ve,Q.select=_e,Q.setDocument=le,Q.tokenize=de,Q.escape=E.escapeSelector,Q.getText=E.text,Q.isXML=E.isXMLDoc,Q.selectors=E.expr,Q.support=E.support,Q.uniqueSort=E.uniqueSort}();var B=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&E(e).is(n))break;i.push(e)}return i},F=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},U=E.expr.match.needsContext,z=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function V(e,t,n){return v(t)?E.grep(e,(function(e,i){return!!t.call(e,i,e)!==n})):t.nodeType?E.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?E.grep(e,(function(e){return d.call(t,e)>-1!==n})):E.filter(t,e,n)}E.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?E.find.matchesSelector(i,e)?[i]:[]:E.find.matches(e,E.grep(t,(function(e){return 1===e.nodeType})))},E.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(E(e).filter((function(){for(t=0;t<i;t++)if(E.contains(r[t],this))return!0})));for(n=this.pushStack([]),t=0;t<i;t++)E.find(e,r[t],n);return i>1?E.uniqueSort(n):n},filter:function(e){return this.pushStack(V(this,e||[],!1))},not:function(e){return this.pushStack(V(this,e||[],!0))},is:function(e){return!!V(this,"string"==typeof e&&U.test(e)?E(e):e||[],!1).length}});var H,$=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||H,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:$.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof E?t[0]:t,E.merge(this,E.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:b,!0)),z.test(i[1])&&E.isPlainObject(t))for(i in t)v(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=b.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==n.ready?n.ready(e):e(E):E.makeArray(e,this)}).prototype=E.fn,H=E(b);var W=/^(?:parents|prev(?:Until|All))/,G={children:!0,contents:!0,next:!0,prev:!0};function j(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}E.fn.extend({has:function(e){var t=E(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(E.contains(this,t[e]))return!0}))},closest:function(e,t){var n,i=0,r=this.length,a=[],s="string"!=typeof e&&E(e);if(!U.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?E.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?d.call(E(e),this[0]):d.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),E.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return B(e,"parentNode")},parentsUntil:function(e,t,n){return B(e,"parentNode",n)},next:function(e){return j(e,"nextSibling")},prev:function(e){return j(e,"previousSibling")},nextAll:function(e){return B(e,"nextSibling")},prevAll:function(e){return B(e,"previousSibling")},nextUntil:function(e,t,n){return B(e,"nextSibling",n)},prevUntil:function(e,t,n){return B(e,"previousSibling",n)},siblings:function(e){return F((e.parentNode||{}).firstChild,e)},children:function(e){return F(e.firstChild)},contents:function(e){return null!=e.contentDocument&&s(e.contentDocument)?e.contentDocument:(C(e,"template")&&(e=e.content||e),E.merge([],e.childNodes))}},(function(e,t){E.fn[e]=function(n,i){var r=E.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=E.filter(i,r)),this.length>1&&(G[e]||E.uniqueSort(r),W.test(e)&&r.reverse()),this.pushStack(r)}}));var q=/[^\x20\t\r\n\f]+/g;function Y(e){return e}function X(e){throw e}function K(e,t,n,i){var r;try{e&&v(r=e.promise)?r.call(e).done(t).fail(n):e&&v(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}E.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return E.each(e.match(q)||[],(function(e,n){t[n]=!0})),t}(e):E.extend({},e);var t,n,i,r,a=[],s=[],o=-1,l=function(){for(r=r||e.once,i=t=!0;s.length;o=-1)for(n=s.shift();++o<a.length;)!1===a[o].apply(n[0],n[1])&&e.stopOnFalse&&(o=a.length,n=!1);e.memory||(n=!1),t=!1,r&&(a=n?[]:"")},c={add:function(){return a&&(n&&!t&&(o=a.length-1,s.push(n)),function t(n){E.each(n,(function(n,i){v(i)?e.unique&&c.has(i)||a.push(i):i&&i.length&&"string"!==w(i)&&t(i)}))}(arguments),n&&!t&&l()),this},remove:function(){return E.each(arguments,(function(e,t){for(var n;(n=E.inArray(t,a,n))>-1;)a.splice(n,1),n<=o&&o--})),this},has:function(e){return e?E.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return r=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return r=s=[],n||t||(a=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=[e,(n=n||[]).slice?n.slice():n],s.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},E.extend({Deferred:function(e){var t=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return E.Deferred((function(n){E.each(t,(function(t,i){var r=v(e[i[4]])&&e[i[4]];a[i[1]]((function(){var e=r&&r.apply(this,arguments);e&&v(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,r){var a=0;function s(e,t,n,r){return function(){var o=this,l=arguments,c=function(){var i,c;if(!(e<a)){if((i=n.apply(o,l))===t.promise())throw new TypeError("Thenable self-resolution");c=i&&("object"==typeof i||"function"==typeof i)&&i.then,v(c)?r?c.call(i,s(a,t,Y,r),s(a,t,X,r)):(a++,c.call(i,s(a,t,Y,r),s(a,t,X,r),s(a,t,Y,t.notifyWith))):(n!==Y&&(o=void 0,l=[i]),(r||t.resolveWith)(o,l))}},d=r?c:function(){try{c()}catch(i){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(i,d.error),e+1>=a&&(n!==X&&(o=void 0,l=[i]),t.rejectWith(o,l))}};e?d():(E.Deferred.getErrorHook?d.error=E.Deferred.getErrorHook():E.Deferred.getStackHook&&(d.error=E.Deferred.getStackHook()),i.setTimeout(d))}}return E.Deferred((function(i){t[0][3].add(s(0,i,v(r)?r:Y,i.notifyWith)),t[1][3].add(s(0,i,v(e)?e:Y)),t[2][3].add(s(0,i,v(n)?n:X))})).promise()},promise:function(e){return null!=e?E.extend(e,r):r}},a={};return E.each(t,(function(e,i){var s=i[2],o=i[5];r[i[1]]=s.add,o&&s.add((function(){n=o}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),s.add(i[3].fire),a[i[0]]=function(){return a[i[0]+"With"](this===a?void 0:this,arguments),this},a[i[0]+"With"]=s.fireWith})),r.promise(a),e&&e.call(a,a),a},when:function(e){var t=arguments.length,n=t,i=Array(n),r=o.call(arguments),a=E.Deferred(),s=function(e){return function(n){i[e]=this,r[e]=arguments.length>1?o.call(arguments):n,--t||a.resolveWith(i,r)}};if(t<=1&&(K(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||v(r[n]&&r[n].then)))return a.then();for(;n--;)K(r[n],s(n),a.reject);return a.promise()}});var Z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(e,t){i.console&&i.console.warn&&e&&Z.test(e.name)&&i.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},E.readyException=function(e){i.setTimeout((function(){throw e}))};var J=E.Deferred();function Q(){b.removeEventListener("DOMContentLoaded",Q),i.removeEventListener("load",Q),E.ready()}E.fn.ready=function(e){return J.then(e).catch((function(e){E.readyException(e)})),this},E.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==e&&--E.readyWait>0||J.resolveWith(b,[E]))}}),E.ready.then=J.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?i.setTimeout(E.ready):(b.addEventListener("DOMContentLoaded",Q),i.addEventListener("load",Q));var ee=function(e,t,n,i,r,a,s){var o=0,l=e.length,c=null==n;if("object"===w(n))for(o in r=!0,n)ee(e,t,o,n[o],!0,a,s);else if(void 0!==i&&(r=!0,v(i)||(s=!0),c&&(s?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(E(e),n)})),t))for(;o<l;o++)t(e[o],n,s?i:i.call(e[o],o,t(e[o],n)));return r?e:c?t.call(e):l?t(e[0],n):a},te=/^-ms-/,ne=/-([a-z])/g;function ie(e,t){return t.toUpperCase()}function re(e){return e.replace(te,"ms-").replace(ne,ie)}var ae=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function se(){this.expando=E.expando+se.uid++}se.uid=1,se.prototype={cache:function(e){var t=e[this.expando];return t||(t={},ae(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[re(t)]=n;else for(i in t)r[re(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][re(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(re):(t=re(t))in i?[t]:t.match(q)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||E.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!E.isEmptyObject(t)}};var oe=new se,le=new se,ce=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,de=/[A-Z]/g;function ue(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(de,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ce.test(e)?JSON.parse(e):e)}(n)}catch(e){}le.set(e,t,n)}else n=void 0;return n}E.extend({hasData:function(e){return le.hasData(e)||oe.hasData(e)},data:function(e,t,n){return le.access(e,t,n)},removeData:function(e,t){le.remove(e,t)},_data:function(e,t,n){return oe.access(e,t,n)},_removeData:function(e,t){oe.remove(e,t)}}),E.fn.extend({data:function(e,t){var n,i,r,a=this[0],s=a&&a.attributes;if(void 0===e){if(this.length&&(r=le.get(a),1===a.nodeType&&!oe.get(a,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf("data-")&&(i=re(i.slice(5)),ue(a,i,r[i]));oe.set(a,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each((function(){le.set(this,e)})):ee(this,(function(t){var n;if(a&&void 0===t)return void 0!==(n=le.get(a,e))||void 0!==(n=ue(a,e))?n:void 0;this.each((function(){le.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){le.remove(this,e)}))}}),E.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=oe.get(e,t),n&&(!i||Array.isArray(n)?i=oe.access(e,t,E.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=E.queue(e,t),i=n.length,r=n.shift(),a=E._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete a.stop,r.call(e,(function(){E.dequeue(e,t)}),a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return oe.get(e,n)||oe.access(e,n,{empty:E.Callbacks("once memory").add((function(){oe.remove(e,[t+"queue",n])}))})}}),E.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?E.queue(this[0],e):void 0===t?this:this.each((function(){var n=E.queue(this,e,t);E._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&E.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){E.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=E.Deferred(),a=this,s=this.length,o=function(){--i||r.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=oe.get(a[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(o));return o(),r.promise(t)}});var he=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,pe=new RegExp("^(?:([+-])=|)("+he+")([a-z%]*)$","i"),me=["Top","Right","Bottom","Left"],fe=b.documentElement,ge=function(e){return E.contains(e.ownerDocument,e)},ve={composed:!0};fe.getRootNode&&(ge=function(e){return E.contains(e.ownerDocument,e)||e.getRootNode(ve)===e.ownerDocument});var _e=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ge(e)&&"none"===E.css(e,"display")};function be(e,t,n,i){var r,a,s=20,o=i?function(){return i.cur()}:function(){return E.css(e,t,"")},l=o(),c=n&&n[3]||(E.cssNumber[t]?"":"px"),d=e.nodeType&&(E.cssNumber[t]||"px"!==c&&+l)&&pe.exec(E.css(e,t));if(d&&d[3]!==c){for(l/=2,c=c||d[3],d=+l||1;s--;)E.style(e,t,d+c),(1-a)*(1-(a=o()/l||.5))<=0&&(s=0),d/=a;d*=2,E.style(e,t,d+c),n=n||[]}return n&&(d=+d||+l||0,r=n[1]?d+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=d,i.end=r)),r}var ye={};function xe(e){var t,n=e.ownerDocument,i=e.nodeName,r=ye[i];return r||(t=n.body.appendChild(n.createElement(i)),r=E.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),ye[i]=r,r)}function we(e,t){for(var n,i,r=[],a=0,s=e.length;a<s;a++)(i=e[a]).style&&(n=i.style.display,t?("none"===n&&(r[a]=oe.get(i,"display")||null,r[a]||(i.style.display="")),""===i.style.display&&_e(i)&&(r[a]=xe(i))):"none"!==n&&(r[a]="none",oe.set(i,"display",n)));for(a=0;a<s;a++)null!=r[a]&&(e[a].style.display=r[a]);return e}E.fn.extend({show:function(){return we(this,!0)},hide:function(){return we(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){_e(this)?E(this).show():E(this).hide()}))}});var Se,Te,Ee=/^(?:checkbox|radio)$/i,Me=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ce=/^$|^module$|\/(?:java|ecma)script/i;Se=b.createDocumentFragment().appendChild(b.createElement("div")),(Te=b.createElement("input")).setAttribute("type","radio"),Te.setAttribute("checked","checked"),Te.setAttribute("name","t"),Se.appendChild(Te),g.checkClone=Se.cloneNode(!0).cloneNode(!0).lastChild.checked,Se.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!Se.cloneNode(!0).lastChild.defaultValue,Se.innerHTML="<option></option>",g.option=!!Se.lastChild;var Ae={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ke(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&C(e,t)?E.merge([e],n):n}function De(e,t){for(var n=0,i=e.length;n<i;n++)oe.set(e[n],"globalEval",!t||oe.get(t[n],"globalEval"))}Ae.tbody=Ae.tfoot=Ae.colgroup=Ae.caption=Ae.thead,Ae.th=Ae.td,g.option||(Ae.optgroup=Ae.option=[1,"<select multiple='multiple'>","</select>"]);var Le=/<|&#?\w+;/;function Ie(e,t,n,i,r){for(var a,s,o,l,c,d,u=t.createDocumentFragment(),h=[],p=0,m=e.length;p<m;p++)if((a=e[p])||0===a)if("object"===w(a))E.merge(h,a.nodeType?[a]:a);else if(Le.test(a)){for(s=s||u.appendChild(t.createElement("div")),o=(Me.exec(a)||["",""])[1].toLowerCase(),l=Ae[o]||Ae._default,s.innerHTML=l[1]+E.htmlPrefilter(a)+l[2],d=l[0];d--;)s=s.lastChild;E.merge(h,s.childNodes),(s=u.firstChild).textContent=""}else h.push(t.createTextNode(a));for(u.textContent="",p=0;a=h[p++];)if(i&&E.inArray(a,i)>-1)r&&r.push(a);else if(c=ge(a),s=ke(u.appendChild(a),"script"),c&&De(s),n)for(d=0;a=s[d++];)Ce.test(a.type||"")&&n.push(a);return u}var Pe=/^([^.]*)(?:\.(.+)|)/;function Re(){return!0}function Oe(){return!1}function Ne(e,t,n,i,r,a){var s,o;if("object"==typeof t){for(o in"string"!=typeof n&&(i=i||n,n=void 0),t)Ne(e,o,n,i,t[o],a);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Oe;else if(!r)return e;return 1===a&&(s=r,r=function(e){return E().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=E.guid++)),e.each((function(){E.event.add(this,t,r,i,n)}))}function Be(e,t,n){n?(oe.set(e,t,!1),E.event.add(e,t,{namespace:!1,handler:function(e){var n,i=oe.get(this,t);if(1&e.isTrigger&&this[t]){if(i)(E.event.special[t]||{}).delegateType&&e.stopPropagation();else if(i=o.call(arguments),oe.set(this,t,i),this[t](),n=oe.get(this,t),oe.set(this,t,!1),i!==n)return e.stopImmediatePropagation(),e.preventDefault(),n}else i&&(oe.set(this,t,E.event.trigger(i[0],i.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Re)}})):void 0===oe.get(e,t)&&E.event.add(e,t,Re)}E.event={global:{},add:function(e,t,n,i,r){var a,s,o,l,c,d,u,h,p,m,f,g=oe.get(e);if(ae(e))for(n.handler&&(n=(a=n).handler,r=a.selector),r&&E.find.matchesSelector(fe,r),n.guid||(n.guid=E.guid++),(l=g.events)||(l=g.events=Object.create(null)),(s=g.handle)||(s=g.handle=function(t){return void 0!==E&&E.event.triggered!==t.type?E.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(q)||[""]).length;c--;)p=f=(o=Pe.exec(t[c])||[])[1],m=(o[2]||"").split(".").sort(),p&&(u=E.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=E.event.special[p]||{},d=E.extend({type:p,origType:f,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&E.expr.match.needsContext.test(r),namespace:m.join(".")},a),(h=l[p])||((h=l[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,i,m,s)||e.addEventListener&&e.addEventListener(p,s)),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,d):h.push(d),E.event.global[p]=!0)},remove:function(e,t,n,i,r){var a,s,o,l,c,d,u,h,p,m,f,g=oe.hasData(e)&&oe.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match(q)||[""]).length;c--;)if(p=f=(o=Pe.exec(t[c])||[])[1],m=(o[2]||"").split(".").sort(),p){for(u=E.event.special[p]||{},h=l[p=(i?u.delegateType:u.bindType)||p]||[],o=o[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=a=h.length;a--;)d=h[a],!r&&f!==d.origType||n&&n.guid!==d.guid||o&&!o.test(d.namespace)||i&&i!==d.selector&&("**"!==i||!d.selector)||(h.splice(a,1),d.selector&&h.delegateCount--,u.remove&&u.remove.call(e,d));s&&!h.length&&(u.teardown&&!1!==u.teardown.call(e,m,g.handle)||E.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)E.event.remove(e,p+t[c],n,i,!0);E.isEmptyObject(l)&&oe.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,a,s,o=new Array(arguments.length),l=E.event.fix(e),c=(oe.get(this,"events")||Object.create(null))[l.type]||[],d=E.event.special[l.type]||{};for(o[0]=l,t=1;t<arguments.length;t++)o[t]=arguments[t];if(l.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,l)){for(s=E.event.handlers.call(this,l,c),t=0;(r=s[t++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,n=0;(a=r.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==a.namespace&&!l.rnamespace.test(a.namespace)||(l.handleObj=a,l.data=a.data,void 0!==(i=((E.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,o))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,i,r,a,s,o=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(a=[],s={},n=0;n<l;n++)void 0===s[r=(i=t[n]).selector+" "]&&(s[r]=i.needsContext?E(r,this).index(c)>-1:E.find(r,this,null,[c]).length),s[r]&&a.push(i);a.length&&o.push({elem:c,handlers:a})}return c=this,l<t.length&&o.push({elem:c,handlers:t.slice(l)}),o},addProp:function(e,t){Object.defineProperty(E.Event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[E.expando]?e:new E.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Ee.test(t.type)&&t.click&&C(t,"input")&&Be(t,"click",!0),!1},trigger:function(e){var t=this||e;return Ee.test(t.type)&&t.click&&C(t,"input")&&Be(t,"click"),!0},_default:function(e){var t=e.target;return Ee.test(t.type)&&t.click&&C(t,"input")&&oe.get(t,"click")||C(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},E.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},E.Event=function(e,t){if(!(this instanceof E.Event))return new E.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Re:Oe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&E.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Oe,isPropagationStopped:Oe,isImmediatePropagationStopped:Oe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Re,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Re,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Re,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},(function(e,t){function n(e){if(b.documentMode){var n=oe.get(this,"handle"),i=E.event.fix(e);i.type="focusin"===e.type?"focus":"blur",i.isSimulated=!0,n(e),i.target===i.currentTarget&&n(i)}else E.event.simulate(t,e.target,E.event.fix(e))}E.event.special[e]={setup:function(){var i;if(Be(this,e,!0),!b.documentMode)return!1;(i=oe.get(this,t))||this.addEventListener(t,n),oe.set(this,t,(i||0)+1)},trigger:function(){return Be(this,e),!0},teardown:function(){var e;if(!b.documentMode)return!1;(e=oe.get(this,t)-1)?oe.set(this,t,e):(this.removeEventListener(t,n),oe.remove(this,t))},_default:function(t){return oe.get(t.target,e)},delegateType:t},E.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,r=b.documentMode?this:i,a=oe.get(r,t);a||(b.documentMode?this.addEventListener(t,n):i.addEventListener(e,n,!0)),oe.set(r,t,(a||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=b.documentMode?this:i,a=oe.get(r,t)-1;a?oe.set(r,t,a):(b.documentMode?this.removeEventListener(t,n):i.removeEventListener(e,n,!0),oe.remove(r,t))}}})),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){E.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,a=e.handleObj;return r&&(r===i||E.contains(i,r))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}})),E.fn.extend({on:function(e,t,n,i){return Ne(this,e,t,n,i)},one:function(e,t,n,i){return Ne(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,E(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Oe),this.each((function(){E.event.remove(this,e,n,t)}))}});var Fe=/<script|<style|<link/i,Ue=/checked\s*(?:[^=]|=\s*.checked.)/i,ze=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ve(e,t){return C(e,"table")&&C(11!==t.nodeType?t:t.firstChild,"tr")&&E(e).children("tbody")[0]||e}function He(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function $e(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function We(e,t){var n,i,r,a,s,o;if(1===t.nodeType){if(oe.hasData(e)&&(o=oe.get(e).events))for(r in oe.remove(t,"handle events"),o)for(n=0,i=o[r].length;n<i;n++)E.event.add(t,r,o[r][n]);le.hasData(e)&&(a=le.access(e),s=E.extend({},a),le.set(t,s))}}function Ge(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ee.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function je(e,t,n,i){t=l(t);var r,a,s,o,c,d,u=0,h=e.length,p=h-1,m=t[0],f=v(m);if(f||h>1&&"string"==typeof m&&!g.checkClone&&Ue.test(m))return e.each((function(r){var a=e.eq(r);f&&(t[0]=m.call(this,r,a.html())),je(a,t,n,i)}));if(h&&(a=(r=Ie(t,e[0].ownerDocument,!1,e,i)).firstChild,1===r.childNodes.length&&(r=a),a||i)){for(o=(s=E.map(ke(r,"script"),He)).length;u<h;u++)c=r,u!==p&&(c=E.clone(c,!0,!0),o&&E.merge(s,ke(c,"script"))),n.call(e[u],c,u);if(o)for(d=s[s.length-1].ownerDocument,E.map(s,$e),u=0;u<o;u++)c=s[u],Ce.test(c.type||"")&&!oe.access(c,"globalEval")&&E.contains(d,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?E._evalUrl&&!c.noModule&&E._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},d):x(c.textContent.replace(ze,""),c,d))}return e}function qe(e,t,n){for(var i,r=t?E.filter(t,e):e,a=0;null!=(i=r[a]);a++)n||1!==i.nodeType||E.cleanData(ke(i)),i.parentNode&&(n&&ge(i)&&De(ke(i,"script")),i.parentNode.removeChild(i));return e}E.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var i,r,a,s,o=e.cloneNode(!0),l=ge(e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||E.isXMLDoc(e)))for(s=ke(o),i=0,r=(a=ke(e)).length;i<r;i++)Ge(a[i],s[i]);if(t)if(n)for(a=a||ke(e),s=s||ke(o),i=0,r=a.length;i<r;i++)We(a[i],s[i]);else We(e,o);return(s=ke(o,"script")).length>0&&De(s,!l&&ke(e,"script")),o},cleanData:function(e){for(var t,n,i,r=E.event.special,a=0;void 0!==(n=e[a]);a++)if(ae(n)){if(t=n[oe.expando]){if(t.events)for(i in t.events)r[i]?E.event.remove(n,i):E.removeEvent(n,i,t.handle);n[oe.expando]=void 0}n[le.expando]&&(n[le.expando]=void 0)}}}),E.fn.extend({detach:function(e){return qe(this,e,!0)},remove:function(e){return qe(this,e)},text:function(e){return ee(this,(function(e){return void 0===e?E.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return je(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ve(this,e).appendChild(e)}))},prepend:function(){return je(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ve(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return je(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return je(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(E.cleanData(ke(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return E.clone(this,e,t)}))},html:function(e){return ee(this,(function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Fe.test(e)&&!Ae[(Me.exec(e)||["",""])[1].toLowerCase()]){e=E.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(E.cleanData(ke(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return je(this,arguments,(function(t){var n=this.parentNode;E.inArray(this,e)<0&&(E.cleanData(ke(this)),n&&n.replaceChild(t,this))}),e)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){E.fn[e]=function(e){for(var n,i=[],r=E(e),a=r.length-1,s=0;s<=a;s++)n=s===a?this:this.clone(!0),E(r[s])[t](n),c.apply(i,n.get());return this.pushStack(i)}}));var Ye=new RegExp("^("+he+")(?!px)[a-z%]+$","i"),Xe=/^--/,Ke=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)},Ze=function(e,t,n){var i,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];for(r in i=n.call(e),t)e.style[r]=a[r];return i},Je=new RegExp(me.join("|"),"i");function Qe(e,t,n){var i,r,a,s,o=Xe.test(t),l=e.style;return(n=n||Ke(e))&&(s=n.getPropertyValue(t)||n[t],o&&s&&(s=s.replace(I,"$1")||void 0),""!==s||ge(e)||(s=E.style(e,t)),!g.pixelBoxStyles()&&Ye.test(s)&&Je.test(t)&&(i=l.width,r=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=s,s=n.width,l.width=i,l.minWidth=r,l.maxWidth=a)),void 0!==s?s+"":s}function et(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(d){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",fe.appendChild(c).appendChild(d);var e=i.getComputedStyle(d);n="1%"!==e.top,l=12===t(e.marginLeft),d.style.right="60%",s=36===t(e.right),r=36===t(e.width),d.style.position="absolute",a=12===t(d.offsetWidth/3),fe.removeChild(c),d=null}}function t(e){return Math.round(parseFloat(e))}var n,r,a,s,o,l,c=b.createElement("div"),d=b.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===d.style.backgroundClip,E.extend(g,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),a},reliableTrDimensions:function(){var e,t,n,r;return null==o&&(e=b.createElement("table"),t=b.createElement("tr"),n=b.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",fe.appendChild(e).appendChild(t).appendChild(n),r=i.getComputedStyle(t),o=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,fe.removeChild(e)),o}}))}();var tt=["Webkit","Moz","ms"],nt=b.createElement("div").style,it={};function rt(e){var t=E.cssProps[e]||it[e];return t||(e in nt?e:it[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=tt.length;n--;)if((e=tt[n]+t)in nt)return e}(e)||e)}var at=/^(none|table(?!-c[ea]).+)/,st={position:"absolute",visibility:"hidden",display:"block"},ot={letterSpacing:"0",fontWeight:"400"};function lt(e,t,n){var i=pe.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function ct(e,t,n,i,r,a){var s="width"===t?1:0,o=0,l=0,c=0;if(n===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(c+=E.css(e,n+me[s],!0,r)),i?("content"===n&&(l-=E.css(e,"padding"+me[s],!0,r)),"margin"!==n&&(l-=E.css(e,"border"+me[s]+"Width",!0,r))):(l+=E.css(e,"padding"+me[s],!0,r),"padding"!==n?l+=E.css(e,"border"+me[s]+"Width",!0,r):o+=E.css(e,"border"+me[s]+"Width",!0,r));return!i&&a>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-l-o-.5))||0),l+c}function dt(e,t,n){var i=Ke(e),r=(!g.boxSizingReliable()||n)&&"border-box"===E.css(e,"boxSizing",!1,i),a=r,s=Qe(e,t,i),o="offset"+t[0].toUpperCase()+t.slice(1);if(Ye.test(s)){if(!n)return s;s="auto"}return(!g.boxSizingReliable()&&r||!g.reliableTrDimensions()&&C(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===E.css(e,"display",!1,i))&&e.getClientRects().length&&(r="border-box"===E.css(e,"boxSizing",!1,i),(a=o in e)&&(s=e[o])),(s=parseFloat(s)||0)+ct(e,t,n||(r?"border":"content"),a,i,s)+"px"}function ut(e,t,n,i,r){return new ut.prototype.init(e,t,n,i,r)}E.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Qe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,s,o=re(t),l=Xe.test(t),c=e.style;if(l||(t=rt(o)),s=E.cssHooks[t]||E.cssHooks[o],void 0===n)return s&&"get"in s&&void 0!==(r=s.get(e,!1,i))?r:c[t];"string"===(a=typeof n)&&(r=pe.exec(n))&&r[1]&&(n=be(e,t,r),a="number"),null!=n&&n==n&&("number"!==a||l||(n+=r&&r[3]||(E.cssNumber[o]?"":"px")),g.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,i){var r,a,s,o=re(t);return Xe.test(t)||(t=rt(o)),(s=E.cssHooks[t]||E.cssHooks[o])&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=Qe(e,t,i)),"normal"===r&&t in ot&&(r=ot[t]),""===n||n?(a=parseFloat(r),!0===n||isFinite(a)?a||0:r):r}}),E.each(["height","width"],(function(e,t){E.cssHooks[t]={get:function(e,n,i){if(n)return!at.test(E.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?dt(e,t,i):Ze(e,st,(function(){return dt(e,t,i)}))},set:function(e,n,i){var r,a=Ke(e),s=!g.scrollboxSize()&&"absolute"===a.position,o=(s||i)&&"border-box"===E.css(e,"boxSizing",!1,a),l=i?ct(e,t,i,o,a):0;return o&&s&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-ct(e,t,"border",!1,a)-.5)),l&&(r=pe.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=E.css(e,t)),lt(0,n,l)}}})),E.cssHooks.marginLeft=et(g.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Qe(e,"marginLeft"))||e.getBoundingClientRect().left-Ze(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),E.each({margin:"",padding:"",border:"Width"},(function(e,t){E.cssHooks[e+t]={expand:function(n){for(var i=0,r={},a="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+me[i]+t]=a[i]||a[i-2]||a[0];return r}},"margin"!==e&&(E.cssHooks[e+t].set=lt)})),E.fn.extend({css:function(e,t){return ee(this,(function(e,t,n){var i,r,a={},s=0;if(Array.isArray(t)){for(i=Ke(e),r=t.length;s<r;s++)a[t[s]]=E.css(e,t[s],!1,i);return a}return void 0!==n?E.style(e,t,n):E.css(e,t)}),e,t,arguments.length>1)}}),E.Tween=ut,ut.prototype={constructor:ut,init:function(e,t,n,i,r,a){this.elem=e,this.prop=n,this.easing=r||E.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(E.cssNumber[n]?"":"px")},cur:function(){var e=ut.propHooks[this.prop];return e&&e.get?e.get(this):ut.propHooks._default.get(this)},run:function(e){var t,n=ut.propHooks[this.prop];return this.options.duration?this.pos=t=E.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ut.propHooks._default.set(this),this}},ut.prototype.init.prototype=ut.prototype,ut.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=E.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){E.fx.step[e.prop]?E.fx.step[e.prop](e):1!==e.elem.nodeType||!E.cssHooks[e.prop]&&null==e.elem.style[rt(e.prop)]?e.elem[e.prop]=e.now:E.style(e.elem,e.prop,e.now+e.unit)}}},ut.propHooks.scrollTop=ut.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},E.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},E.fx=ut.prototype.init,E.fx.step={};var ht,pt,mt=/^(?:toggle|show|hide)$/,ft=/queueHooks$/;function gt(){pt&&(!1===b.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(gt):i.setTimeout(gt,E.fx.interval),E.fx.tick())}function vt(){return i.setTimeout((function(){ht=void 0})),ht=Date.now()}function _t(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=me[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function bt(e,t,n){for(var i,r=(yt.tweeners[t]||[]).concat(yt.tweeners["*"]),a=0,s=r.length;a<s;a++)if(i=r[a].call(n,t,e))return i}function yt(e,t,n){var i,r,a=0,s=yt.prefilters.length,o=E.Deferred().always((function(){delete l.elem})),l=function(){if(r)return!1;for(var t=ht||vt(),n=Math.max(0,c.startTime+c.duration-t),i=1-(n/c.duration||0),a=0,s=c.tweens.length;a<s;a++)c.tweens[a].run(i);return o.notifyWith(e,[c,i,n]),i<1&&s?n:(s||o.notifyWith(e,[c,1,0]),o.resolveWith(e,[c]),!1)},c=o.promise({elem:e,props:E.extend({},t),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:t,originalOptions:n,startTime:ht||vt(),duration:n.duration,tweens:[],createTween:function(t,n){var i=E.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)c.tweens[n].run(1);return t?(o.notifyWith(e,[c,1,0]),o.resolveWith(e,[c,t])):o.rejectWith(e,[c,t]),this}}),d=c.props;for(!function(e,t){var n,i,r,a,s;for(n in e)if(r=t[i=re(n)],a=e[n],Array.isArray(a)&&(r=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),(s=E.cssHooks[i])&&"expand"in s)for(n in a=s.expand(a),delete e[i],a)n in e||(e[n]=a[n],t[n]=r);else t[i]=r}(d,c.opts.specialEasing);a<s;a++)if(i=yt.prefilters[a].call(c,e,d,c.opts))return v(i.stop)&&(E._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return E.map(d,bt,c),v(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),E.fx.timer(E.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}E.Animation=E.extend(yt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return be(n.elem,e,pe.exec(t),n),n}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(q);for(var n,i=0,r=e.length;i<r;i++)n=e[i],yt.tweeners[n]=yt.tweeners[n]||[],yt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,r,a,s,o,l,c,d,u="width"in t||"height"in t,h=this,p={},m=e.style,f=e.nodeType&&_e(e),g=oe.get(e,"fxshow");for(i in n.queue||(null==(s=E._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,o=s.empty.fire,s.empty.fire=function(){s.unqueued||o()}),s.unqueued++,h.always((function(){h.always((function(){s.unqueued--,E.queue(e,"fx").length||s.empty.fire()}))}))),t)if(r=t[i],mt.test(r)){if(delete t[i],a=a||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;f=!0}p[i]=g&&g[i]||E.style(e,i)}if((l=!E.isEmptyObject(t))||!E.isEmptyObject(p))for(i in u&&1===e.nodeType&&(n.overflow=[m.overflow,m.overflowX,m.overflowY],null==(c=g&&g.display)&&(c=oe.get(e,"display")),"none"===(d=E.css(e,"display"))&&(c?d=c:(we([e],!0),c=e.style.display||c,d=E.css(e,"display"),we([e]))),("inline"===d||"inline-block"===d&&null!=c)&&"none"===E.css(e,"float")&&(l||(h.done((function(){m.display=c})),null==c&&(d=m.display,c="none"===d?"":d)),m.display="inline-block")),n.overflow&&(m.overflow="hidden",h.always((function(){m.overflow=n.overflow[0],m.overflowX=n.overflow[1],m.overflowY=n.overflow[2]}))),l=!1,p)l||(g?"hidden"in g&&(f=g.hidden):g=oe.access(e,"fxshow",{display:c}),a&&(g.hidden=!f),f&&we([e],!0),h.done((function(){for(i in f||we([e]),oe.remove(e,"fxshow"),p)E.style(e,i,p[i])}))),l=bt(f?g[i]:0,i,h),i in g||(g[i]=l.start,f&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?yt.prefilters.unshift(e):yt.prefilters.push(e)}}),E.speed=function(e,t,n){var i=e&&"object"==typeof e?E.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};return E.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in E.fx.speeds?i.duration=E.fx.speeds[i.duration]:i.duration=E.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){v(i.old)&&i.old.call(this),i.queue&&E.dequeue(this,i.queue)},i},E.fn.extend({fadeTo:function(e,t,n,i){return this.filter(_e).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=E.isEmptyObject(e),a=E.speed(t,n,i),s=function(){var t=yt(this,E.extend({},e),a);(r||oe.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||!1===a.queue?this.each(s):this.queue(a.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,r=null!=e&&e+"queueHooks",a=E.timers,s=oe.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&ft.test(r)&&i(s[r]);for(r=a.length;r--;)a[r].elem!==this||null!=e&&a[r].queue!==e||(a[r].anim.stop(n),t=!1,a.splice(r,1));!t&&n||E.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=oe.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],a=E.timers,s=i?i.length:0;for(n.finish=!0,E.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish}))}}),E.each(["toggle","show","hide"],(function(e,t){var n=E.fn[t];E.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(_t(t,!0),e,i,r)}})),E.each({slideDown:_t("show"),slideUp:_t("hide"),slideToggle:_t("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){E.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}})),E.timers=[],E.fx.tick=function(){var e,t=0,n=E.timers;for(ht=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||E.fx.stop(),ht=void 0},E.fx.timer=function(e){E.timers.push(e),E.fx.start()},E.fx.interval=13,E.fx.start=function(){pt||(pt=!0,gt())},E.fx.stop=function(){pt=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(e,t){return e=E.fx&&E.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var r=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(r)}}))},function(){var e=b.createElement("input"),t=b.createElement("select").appendChild(b.createElement("option"));e.type="checkbox",g.checkOn=""!==e.value,g.optSelected=t.selected,(e=b.createElement("input")).value="t",e.type="radio",g.radioValue="t"===e.value}();var xt,wt=E.expr.attrHandle;E.fn.extend({attr:function(e,t){return ee(this,E.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){E.removeAttr(this,e)}))}}),E.extend({attr:function(e,t,n){var i,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?E.prop(e,t,n):(1===a&&E.isXMLDoc(e)||(r=E.attrHooks[t.toLowerCase()]||(E.expr.match.bool.test(t)?xt:void 0)),void 0!==n?null===n?void E.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=E.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&C(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(q);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),xt={set:function(e,t,n){return!1===t?E.removeAttr(e,n):e.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=wt[t]||E.find.attr;wt[t]=function(e,t,i){var r,a,s=t.toLowerCase();return i||(a=wt[s],wt[s]=r,r=null!=n(e,t,i)?s:null,wt[s]=a),r}}));var St=/^(?:input|select|textarea|button)$/i,Tt=/^(?:a|area)$/i;function Et(e){return(e.match(q)||[]).join(" ")}function Mt(e){return e.getAttribute&&e.getAttribute("class")||""}function Ct(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(q)||[]}E.fn.extend({prop:function(e,t){return ee(this,E.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[E.propFix[e]||e]}))}}),E.extend({prop:function(e,t,n){var i,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&E.isXMLDoc(e)||(t=E.propFix[t]||t,r=E.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=E.find.attr(e,"tabindex");return t?parseInt(t,10):St.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(E.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){E.propFix[this.toLowerCase()]=this})),E.fn.extend({addClass:function(e){var t,n,i,r,a,s;return v(e)?this.each((function(t){E(this).addClass(e.call(this,t,Mt(this)))})):(t=Ct(e)).length?this.each((function(){if(i=Mt(this),n=1===this.nodeType&&" "+Et(i)+" "){for(a=0;a<t.length;a++)r=t[a],n.indexOf(" "+r+" ")<0&&(n+=r+" ");s=Et(n),i!==s&&this.setAttribute("class",s)}})):this},removeClass:function(e){var t,n,i,r,a,s;return v(e)?this.each((function(t){E(this).removeClass(e.call(this,t,Mt(this)))})):arguments.length?(t=Ct(e)).length?this.each((function(){if(i=Mt(this),n=1===this.nodeType&&" "+Et(i)+" "){for(a=0;a<t.length;a++)for(r=t[a];n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");s=Et(n),i!==s&&this.setAttribute("class",s)}})):this:this.attr("class","")},toggleClass:function(e,t){var n,i,r,a,s=typeof e,o="string"===s||Array.isArray(e);return v(e)?this.each((function(n){E(this).toggleClass(e.call(this,n,Mt(this),t),t)})):"boolean"==typeof t&&o?t?this.addClass(e):this.removeClass(e):(n=Ct(e),this.each((function(){if(o)for(a=E(this),r=0;r<n.length;r++)i=n[r],a.hasClass(i)?a.removeClass(i):a.addClass(i);else void 0!==e&&"boolean"!==s||((i=Mt(this))&&oe.set(this,"__className__",i),this.setAttribute&&this.setAttribute("class",i||!1===e?"":oe.get(this,"__className__")||""))})))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+Et(Mt(n))+" ").indexOf(t)>-1)return!0;return!1}});var At=/\r/g;E.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=v(e),this.each((function(n){var r;1===this.nodeType&&(null==(r=i?e.call(this,n,E(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=E.map(r,(function(e){return null==e?"":e+""}))),(t=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))}))):r?(t=E.valHooks[r.type]||E.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(At,""):null==n?"":n:void 0}}),E.extend({valHooks:{option:{get:function(e){var t=E.find.attr(e,"value");return null!=t?t:Et(E.text(e))}},select:{get:function(e){var t,n,i,r=e.options,a=e.selectedIndex,s="select-one"===e.type,o=s?null:[],l=s?a+1:r.length;for(i=a<0?l:s?a:0;i<l;i++)if(((n=r[i]).selected||i===a)&&!n.disabled&&(!n.parentNode.disabled||!C(n.parentNode,"optgroup"))){if(t=E(n).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var n,i,r=e.options,a=E.makeArray(t),s=r.length;s--;)((i=r[s]).selected=E.inArray(E.valHooks.option.get(i),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),E.each(["radio","checkbox"],(function(){E.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=E.inArray(E(e).val(),t)>-1}},g.checkOn||(E.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var kt=i.location,Dt={guid:Date.now()},Lt=/\?/;E.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||E.error("Invalid XML: "+(n?E.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var It=/^(?:focusinfocus|focusoutblur)$/,Pt=function(e){e.stopPropagation()};E.extend(E.event,{trigger:function(e,t,n,r){var a,s,o,l,c,d,u,h,m=[n||b],f=p.call(e,"type")?e.type:e,g=p.call(e,"namespace")?e.namespace.split("."):[];if(s=h=o=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!It.test(f+E.event.triggered)&&(f.indexOf(".")>-1&&(g=f.split("."),f=g.shift(),g.sort()),c=f.indexOf(":")<0&&"on"+f,(e=e[E.expando]?e:new E.Event(f,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:E.makeArray(t,[e]),u=E.event.special[f]||{},r||!u.trigger||!1!==u.trigger.apply(n,t))){if(!r&&!u.noBubble&&!_(n)){for(l=u.delegateType||f,It.test(l+f)||(s=s.parentNode);s;s=s.parentNode)m.push(s),o=s;o===(n.ownerDocument||b)&&m.push(o.defaultView||o.parentWindow||i)}for(a=0;(s=m[a++])&&!e.isPropagationStopped();)h=s,e.type=a>1?l:u.bindType||f,(d=(oe.get(s,"events")||Object.create(null))[e.type]&&oe.get(s,"handle"))&&d.apply(s,t),(d=c&&s[c])&&d.apply&&ae(s)&&(e.result=d.apply(s,t),!1===e.result&&e.preventDefault());return e.type=f,r||e.isDefaultPrevented()||u._default&&!1!==u._default.apply(m.pop(),t)||!ae(n)||c&&v(n[f])&&!_(n)&&((o=n[c])&&(n[c]=null),E.event.triggered=f,e.isPropagationStopped()&&h.addEventListener(f,Pt),n[f](),e.isPropagationStopped()&&h.removeEventListener(f,Pt),E.event.triggered=void 0,o&&(n[c]=o)),e.result}},simulate:function(e,t,n){var i=E.extend(new E.Event,n,{type:e,isSimulated:!0});E.event.trigger(i,null,t)}}),E.fn.extend({trigger:function(e,t){return this.each((function(){E.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return E.event.trigger(e,t,n,!0)}});var Rt=/\[\]$/,Ot=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,Bt=/^(?:input|select|textarea|keygen)/i;function Ft(e,t,n,i){var r;if(Array.isArray(t))E.each(t,(function(t,r){n||Rt.test(e)?i(e,r):Ft(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)}));else if(n||"object"!==w(t))i(e,t);else for(r in t)Ft(e+"["+r+"]",t[r],n,i)}E.param=function(e,t){var n,i=[],r=function(e,t){var n=v(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!E.isPlainObject(e))E.each(e,(function(){r(this.name,this.value)}));else for(n in e)Ft(n,e[n],t,r);return i.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=E.prop(this,"elements");return e?E.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!E(this).is(":disabled")&&Bt.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!Ee.test(e))})).map((function(e,t){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,(function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}})):{name:t.name,value:n.replace(Ot,"\r\n")}})).get()}});var Ut=/%20/g,zt=/#.*$/,Vt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,$t=/^(?:GET|HEAD)$/,Wt=/^\/\//,Gt={},jt={},qt="*/".concat("*"),Yt=b.createElement("a");function Xt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,a=t.toLowerCase().match(q)||[];if(v(n))for(;i=a[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function Kt(e,t,n,i){var r={},a=e===jt;function s(o){var l;return r[o]=!0,E.each(e[o]||[],(function(e,o){var c=o(t,n,i);return"string"!=typeof c||a||r[c]?a?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)})),l}return s(t.dataTypes[0])||!r["*"]&&s("*")}function Zt(e,t){var n,i,r=E.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&E.extend(!0,e,i),e}Yt.href=kt.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:kt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(kt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Zt(Zt(e,E.ajaxSettings),t):Zt(E.ajaxSettings,e)},ajaxPrefilter:Xt(Gt),ajaxTransport:Xt(jt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,a,s,o,l,c,d,u,h,p=E.ajaxSetup({},t),m=p.context||p,f=p.context&&(m.nodeType||m.jquery)?E(m):E.event,g=E.Deferred(),v=E.Callbacks("once memory"),_=p.statusCode||{},y={},x={},w="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=Ht.exec(a);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,y[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)S.always(e[S.status]);else for(t in e)_[t]=[_[t],e[t]];return this},abort:function(e){var t=e||w;return n&&n.abort(t),T(0,t),this}};if(g.promise(S),p.url=((e||p.url||kt.href)+"").replace(Wt,kt.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(q)||[""],null==p.crossDomain){l=b.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Yt.protocol+"//"+Yt.host!=l.protocol+"//"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=E.param(p.data,p.traditional)),Kt(Gt,p,t,S),c)return S;for(u in(d=E.event&&p.global)&&0==E.active++&&E.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!$t.test(p.type),r=p.url.replace(zt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Ut,"+")):(h=p.url.slice(r.length),p.data&&(p.processData||"string"==typeof p.data)&&(r+=(Lt.test(r)?"&":"?")+p.data,delete p.data),!1===p.cache&&(r=r.replace(Vt,"$1"),h=(Lt.test(r)?"&":"?")+"_="+Dt.guid+++h),p.url=r+h),p.ifModified&&(E.lastModified[r]&&S.setRequestHeader("If-Modified-Since",E.lastModified[r]),E.etag[r]&&S.setRequestHeader("If-None-Match",E.etag[r])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&S.setRequestHeader("Content-Type",p.contentType),S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+qt+"; q=0.01":""):p.accepts["*"]),p.headers)S.setRequestHeader(u,p.headers[u]);if(p.beforeSend&&(!1===p.beforeSend.call(m,S,p)||c))return S.abort();if(w="abort",v.add(p.complete),S.done(p.success),S.fail(p.error),n=Kt(jt,p,t,S)){if(S.readyState=1,d&&f.trigger("ajaxSend",[S,p]),c)return S;p.async&&p.timeout>0&&(o=i.setTimeout((function(){S.abort("timeout")}),p.timeout));try{c=!1,n.send(y,T)}catch(e){if(c)throw e;T(-1,e)}}else T(-1,"No Transport");function T(e,t,s,l){var u,h,b,y,x,w=t;c||(c=!0,o&&i.clearTimeout(o),n=void 0,a=l||"",S.readyState=e>0?4:0,u=e>=200&&e<300||304===e,s&&(y=function(e,t,n){for(var i,r,a,s,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in o)if(o[r]&&o[r].test(i)){l.unshift(r);break}if(l[0]in n)a=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){a=r;break}s||(s=r)}a=a||s}if(a)return a!==l[0]&&l.unshift(a),n[a]}(p,S,s)),!u&&E.inArray("script",p.dataTypes)>-1&&E.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),y=function(e,t,n,i){var r,a,s,o,l,c={},d=e.dataTypes.slice();if(d[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(a=d.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=d.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(s=c[l+" "+a]||c["* "+a]))for(r in c)if((o=r.split(" "))[1]===a&&(s=c[l+" "+o[0]]||c["* "+o[0]])){!0===s?s=c[r]:!0!==c[r]&&(a=o[0],d.unshift(o[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(p,y,S,u),u?(p.ifModified&&((x=S.getResponseHeader("Last-Modified"))&&(E.lastModified[r]=x),(x=S.getResponseHeader("etag"))&&(E.etag[r]=x)),204===e||"HEAD"===p.type?w="nocontent":304===e?w="notmodified":(w=y.state,h=y.data,u=!(b=y.error))):(b=w,!e&&w||(w="error",e<0&&(e=0))),S.status=e,S.statusText=(t||w)+"",u?g.resolveWith(m,[h,w,S]):g.rejectWith(m,[S,w,b]),S.statusCode(_),_=void 0,d&&f.trigger(u?"ajaxSuccess":"ajaxError",[S,p,u?h:b]),v.fireWith(m,[S,w]),d&&(f.trigger("ajaxComplete",[S,p]),--E.active||E.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return E.get(e,t,n,"json")},getScript:function(e,t){return E.get(e,void 0,t,"script")}}),E.each(["get","post"],(function(e,t){E[t]=function(e,n,i,r){return v(n)&&(r=r||i,i=n,n=void 0),E.ajax(E.extend({url:e,type:t,dataType:r,data:n,success:i},E.isPlainObject(e)&&e))}})),E.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),E._evalUrl=function(e,t,n){return E.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){E.globalEval(e,t,n)}})},E.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=E(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return v(e)?this.each((function(t){E(this).wrapInner(e.call(this,t))})):this.each((function(){var t=E(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=v(e);return this.each((function(n){E(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){E(this).replaceWith(this.childNodes)})),this}}),E.expr.pseudos.hidden=function(e){return!E.expr.pseudos.visible(e)},E.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var Jt={0:200,1223:204},Qt=E.ajaxSettings.xhr();g.cors=!!Qt&&"withCredentials"in Qt,g.ajax=Qt=!!Qt,E.ajaxTransport((function(e){var t,n;if(g.cors||Qt&&!e.crossDomain)return{send:function(r,a){var s,o=e.xhr();if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)o[s]=e.xhrFields[s];for(s in e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)o.setRequestHeader(s,r[s]);t=function(e){return function(){t&&(t=n=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===e?o.abort():"error"===e?"number"!=typeof o.status?a(0,"error"):a(o.status,o.statusText):a(Jt[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=t(),n=o.onerror=o.ontimeout=t("error"),void 0!==o.onabort?o.onabort=n:o.onreadystatechange=function(){4===o.readyState&&i.setTimeout((function(){t&&n()}))},t=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),E.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return E.globalEval(e),e}}}),E.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),E.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(i,r){t=E("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),b.head.appendChild(t[0])},abort:function(){n&&n()}}}));var en,tn=[],nn=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=tn.pop()||E.expando+"_"+Dt.guid++;return this[e]=!0,e}}),E.ajaxPrefilter("json jsonp",(function(e,t,n){var r,a,s,o=!1!==e.jsonp&&(nn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(nn,"$1"+r):!1!==e.jsonp&&(e.url+=(Lt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||E.error(r+" was not called"),s[0]},e.dataTypes[0]="json",a=i[r],i[r]=function(){s=arguments},n.always((function(){void 0===a?E(i).removeProp(r):i[r]=a,e[r]&&(e.jsonpCallback=t.jsonpCallback,tn.push(r)),s&&v(a)&&a(s[0]),s=a=void 0})),"script"})),g.createHTMLDocument=((en=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===en.childNodes.length),E.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(g.createHTMLDocument?((i=(t=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,t.head.appendChild(i)):t=b),a=!n&&[],(r=z.exec(e))?[t.createElement(r[1])]:(r=Ie([e],t,a),a&&a.length&&E(a).remove(),E.merge([],r.childNodes)));var i,r,a},E.fn.load=function(e,t,n){var i,r,a,s=this,o=e.indexOf(" ");return o>-1&&(i=Et(e.slice(o)),e=e.slice(0,o)),v(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&E.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done((function(e){a=arguments,s.html(i?E("<div>").append(E.parseHTML(e)).find(i):e)})).always(n&&function(e,t){s.each((function(){n.apply(this,a||[e.responseText,t,e])}))}),this},E.expr.pseudos.animated=function(e){return E.grep(E.timers,(function(t){return e===t.elem})).length},E.offset={setOffset:function(e,t,n){var i,r,a,s,o,l,c=E.css(e,"position"),d=E(e),u={};"static"===c&&(e.style.position="relative"),o=d.offset(),a=E.css(e,"top"),l=E.css(e,"left"),("absolute"===c||"fixed"===c)&&(a+l).indexOf("auto")>-1?(s=(i=d.position()).top,r=i.left):(s=parseFloat(a)||0,r=parseFloat(l)||0),v(t)&&(t=t.call(e,n,E.extend({},o))),null!=t.top&&(u.top=t.top-o.top+s),null!=t.left&&(u.left=t.left-o.left+r),"using"in t?t.using.call(e,u):d.css(u)}},E.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){E.offset.setOffset(this,e,t)}));var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],r={top:0,left:0};if("fixed"===E.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===E.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((r=E(e).offset()).top+=E.css(e,"borderTopWidth",!0),r.left+=E.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-E.css(i,"marginTop",!0),left:t.left-r.left-E.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===E.css(e,"position");)e=e.offsetParent;return e||fe}))}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;E.fn[e]=function(i){return ee(this,(function(e,i,r){var a;if(_(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===r)return a?a[t]:e[i];a?a.scrollTo(n?a.pageXOffset:r,n?r:a.pageYOffset):e[i]=r}),e,i,arguments.length)}})),E.each(["top","left"],(function(e,t){E.cssHooks[t]=et(g.pixelPosition,(function(e,n){if(n)return n=Qe(e,t),Ye.test(n)?E(e).position()[t]+"px":n}))})),E.each({Height:"height",Width:"width"},(function(e,t){E.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,i){E.fn[i]=function(r,a){var s=arguments.length&&(n||"boolean"!=typeof r),o=n||(!0===r||!0===a?"margin":"border");return ee(this,(function(t,n,r){var a;return _(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===r?E.css(t,n,o):E.style(t,n,r,o)}),t,s?r:void 0,s)}}))})),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){E.fn[t]=function(e){return this.on(t,e)}})),E.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){E.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var rn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;E.proxy=function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),v(e))return i=o.call(arguments,2),r=function(){return e.apply(t||this,i.concat(o.call(arguments)))},r.guid=e.guid=e.guid||E.guid++,r},E.holdReady=function(e){e?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=C,E.isFunction=v,E.isWindow=_,E.camelCase=re,E.type=w,E.now=Date.now,E.isNumeric=function(e){var t=E.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},E.trim=function(e){return null==e?"":(e+"").replace(rn,"$1")},void 0===(n=function(){return E}.apply(t,[]))||(e.exports=n);var an=i.jQuery,sn=i.$;return E.noConflict=function(e){return i.$===E&&(i.$=sn),e&&i.jQuery===E&&(i.jQuery=an),E},void 0===r&&(i.jQuery=i.$=E),E}))},2705:function(e,t,n){var i=n(5639).Symbol;e.exports=i},4239:function(e,t,n){var i=n(2705),r=n(9607),a=n(2333),s=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?r(e):a(e)}},7561:function(e,t,n){var i=n(7990),r=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(r,""):e}},1957:function(e,t,n){var i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=i},9607:function(e,t,n){var i=n(2705),r=Object.prototype,a=r.hasOwnProperty,s=r.toString,o=i?i.toStringTag:void 0;e.exports=function(e){var t=a.call(e,o),n=e[o];try{e[o]=void 0;var i=!0}catch(e){}var r=s.call(e);return i&&(t?e[o]=n:delete e[o]),r}},2333:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5639:function(e,t,n){var i=n(1957),r="object"==typeof self&&self&&self.Object===Object&&self,a=i||r||Function("return this")();e.exports=a},7990:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},3279:function(e,t,n){var i=n(3218),r=n(7771),a=n(4841),s=Math.max,o=Math.min;e.exports=function(e,t,n){var l,c,d,u,h,p,m=0,f=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function _(t){var n=l,i=c;return l=c=void 0,m=t,u=e.apply(i,n)}function b(e){return m=e,h=setTimeout(x,t),f?_(e):u}function y(e){var n=e-p;return void 0===p||n>=t||n<0||g&&e-m>=d}function x(){var e=r();if(y(e))return w(e);h=setTimeout(x,function(e){var n=t-(e-p);return g?o(n,d-(e-m)):n}(e))}function w(e){return h=void 0,v&&l?_(e):(l=c=void 0,u)}function S(){var e=r(),n=y(e);if(l=arguments,c=this,p=e,n){if(void 0===h)return b(p);if(g)return clearTimeout(h),h=setTimeout(x,t),_(p)}return void 0===h&&(h=setTimeout(x,t)),u}return t=a(t)||0,i(n)&&(f=!!n.leading,d=(g="maxWait"in n)?s(a(n.maxWait)||0,t):d,v="trailing"in n?!!n.trailing:v),S.cancel=function(){void 0!==h&&clearTimeout(h),m=0,l=p=c=h=void 0},S.flush=function(){return void 0===h?u:w(r())},S}},3218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},3448:function(e,t,n){var i=n(4239),r=n(7005);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==i(e)}},7771:function(e,t,n){var i=n(5639);e.exports=function(){return i.Date.now()}},3493:function(e,t,n){var i=n(3279),r=n(3218);e.exports=function(e,t,n){var a=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return r(n)&&(a="leading"in n?!!n.leading:a,s="trailing"in n?!!n.trailing:s),i(e,t,{leading:a,maxWait:t,trailing:s})}},4841:function(e,t,n){var i=n(7561),r=n(3218),a=n(3448),s=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=o.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):s.test(e)?NaN:+e}},1443:function(e,t,n){var i=n(9755);"object"==typeof navigator&&(e.exports=function(){"use strict";function e(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var o={addCSS:!0,thumbWidth:15,watch:!0},l=function(e){return null!=e?e.constructor:null},c=function(e,t){return!!(e&&t&&e instanceof t)},d=function(e){return null==e},u=function(e){return l(e)===Object},h=function(e){return l(e)===String},p=function(e){return Array.isArray(e)},m=function(e){return c(e,NodeList)},f={nullOrUndefined:d,object:u,number:function(e){return l(e)===Number&&!Number.isNaN(e)},string:h,boolean:function(e){return l(e)===Boolean},function:function(e){return l(e)===Function},array:p,nodeList:m,element:function(e){return c(e,Element)},event:function(e){return c(e,Event)},empty:function(e){return d(e)||(h(e)||p(e)||m(e))&&!e.length||u(e)&&!Object.keys(e).length}};function g(e,t){if(1>t){var n=function(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}(t);return parseFloat(e.toFixed(n))}return Math.round(e/t)*t}var v=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),f.element(t)?this.element=t:f.string(t)&&(this.element=document.querySelector(t)),f.element(this.element)&&f.empty(this.element.rangeTouch)&&(this.config=s({},o,{},n),this.init())}return function(e,n,i){n&&t(e.prototype,n),i&&t(e,i)}(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,n=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach((function(e){t.element[n](e,(function(e){return t.set(e)}),!1)}))}},{key:"get",value:function(t){if(!e.enabled||!f.event(t))return null;var n,i=t.target,r=t.changedTouches[0],a=parseFloat(i.getAttribute("min"))||0,s=parseFloat(i.getAttribute("max"))||100,o=parseFloat(i.getAttribute("step"))||1,l=i.getBoundingClientRect(),c=100/l.width*(this.config.thumbWidth/2)/100;return 0>(n=100/l.width*(r.clientX-l.left))?n=0:100<n&&(n=100),50>n?n-=(100-2*n)*c:50<n&&(n+=2*(n-50)*c),a+g(n/100*(s-a),o)}},{key:"set",value:function(t){e.enabled&&f.event(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),function(e,t){if(e&&t){var n=new Event(t,{bubbles:!0});e.dispatchEvent(n)}}(t.target,"touchend"===t.type?"change":"input"))}}],[{key:"setup",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=null;if(f.empty(t)||f.string(t)?i=Array.from(document.querySelectorAll(f.string(t)?t:'input[type="range"]')):f.element(t)?i=[t]:f.nodeList(t)?i=Array.from(t):f.array(t)&&(i=t.filter(f.element)),f.empty(i))return null;var r=s({},o,{},n);if(f.string(t)&&r.watch){var a=new MutationObserver((function(n){Array.from(n).forEach((function(n){Array.from(n.addedNodes).forEach((function(n){f.element(n)&&function(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}(n,t)&&new e(n,r)}))}))}));a.observe(document.body,{childList:!0,subtree:!0})}return i.map((function(t){return new e(t,n)}))}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e}();const _=e=>null!=e?e.constructor:null,b=(e,t)=>Boolean(e&&t&&e instanceof t),y=e=>null==e,x=e=>_(e)===Object,w=e=>_(e)===String,S=e=>"function"==typeof e,T=e=>Array.isArray(e),E=e=>b(e,NodeList),M=e=>y(e)||(w(e)||T(e)||E(e))&&!e.length||x(e)&&!Object.keys(e).length;var C={nullOrUndefined:y,object:x,number:e=>_(e)===Number&&!Number.isNaN(e),string:w,boolean:e=>_(e)===Boolean,function:S,array:T,weakMap:e=>b(e,WeakMap),nodeList:E,element:e=>null!==e&&"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument,textNode:e=>_(e)===Text,event:e=>b(e,Event),keyboardEvent:e=>b(e,KeyboardEvent),cue:e=>b(e,window.TextTrackCue)||b(e,window.VTTCue),track:e=>b(e,TextTrack)||!y(e)&&w(e.kind),promise:e=>b(e,Promise)&&S(e.then),url:e=>{if(b(e,window.URL))return!0;if(!w(e))return!1;let t=e;e.startsWith("http://")&&e.startsWith("https://")||(t=`http://${e}`);try{return!M(new URL(t).hostname)}catch(e){return!1}},empty:M};const A=(()=>{const e=document.createElement("span"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n=Object.keys(t).find((t=>void 0!==e.style[t]));return!!C.string(n)&&t[n]})();function k(e,t){setTimeout((()=>{try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch(e){}}),t)}var D={isIE:Boolean(window.document.documentMode),isEdge:/Edge/g.test(navigator.userAgent),isWebKit:"WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),isIPhone:/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,isIPadOS:"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,isIos:/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1};function L(e,t){return t.split(".").reduce(((e,t)=>e&&e[t]),e)}function I(e={},...t){if(!t.length)return e;const n=t.shift();return C.object(n)?(Object.keys(n).forEach((t=>{C.object(n[t])?(Object.keys(e).includes(t)||Object.assign(e,{[t]:{}}),I(e[t],n[t])):Object.assign(e,{[t]:n[t]})})),I(e,...t)):e}function P(e,t){const n=e.length?e:[e];Array.from(n).reverse().forEach(((e,n)=>{const i=n>0?t.cloneNode(!0):t,r=e.parentNode,a=e.nextSibling;i.appendChild(e),a?r.insertBefore(i,a):r.appendChild(i)}))}function R(e,t){C.element(e)&&!C.empty(t)&&Object.entries(t).filter((([,e])=>!C.nullOrUndefined(e))).forEach((([t,n])=>e.setAttribute(t,n)))}function O(e,t,n){const i=document.createElement(e);return C.object(t)&&R(i,t),C.string(n)&&(i.innerText=n),i}function N(e,t,n,i){C.element(t)&&t.appendChild(O(e,n,i))}function B(e){C.nodeList(e)||C.array(e)?Array.from(e).forEach(B):C.element(e)&&C.element(e.parentNode)&&e.parentNode.removeChild(e)}function F(e){if(!C.element(e))return;let{length:t}=e.childNodes;for(;t>0;)e.removeChild(e.lastChild),t-=1}function U(e,t){return C.element(t)&&C.element(t.parentNode)&&C.element(e)?(t.parentNode.replaceChild(e,t),e):null}function z(e,t){if(!C.string(e)||C.empty(e))return{};const n={},i=I({},t);return e.split(",").forEach((e=>{const t=e.trim(),r=t.replace(".",""),a=t.replace(/[[\]]/g,"").split("="),[s]=a,o=a.length>1?a[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":C.string(i.class)?n.class=`${i.class} ${r}`:n.class=r;break;case"#":n.id=t.replace("#","");break;case"[":n[s]=o}})),I(i,n)}function V(e,t){if(!C.element(e))return;let n=t;C.boolean(n)||(n=!e.hidden),e.hidden=n}function H(e,t,n){if(C.nodeList(e))return Array.from(e).map((e=>H(e,t,n)));if(C.element(e)){let i="toggle";return void 0!==n&&(i=n?"add":"remove"),e.classList[i](t),e.classList.contains(t)}return!1}function $(e,t){return C.element(e)&&e.classList.contains(t)}function W(e,t){const{prototype:n}=Element;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function G(e){return this.elements.container.querySelectorAll(e)}function j(e){return this.elements.container.querySelector(e)}function q(e=null,t=!1){C.element(e)&&e.focus({preventScroll:!0,focusVisible:t})}const Y={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},X={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(e,t){const n=X[e]||"html5"!==t;return{api:n,ui:n&&X.rangeInput}},pip:!(D.isIPhone||!C.function(O("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||O("video").disablePictureInPicture)),airplay:C.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(e){if(C.empty(e))return!1;const[t]=e.split("/");let n=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(Y).includes(n)&&(n+=`; codecs="${Y[e]}"`);try{return Boolean(n&&this.media.canPlayType(n).replace(/no/,""))}catch(e){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const e=document.createElement("input");return e.type="range","range"===e.type})(),touch:"ontouchstart"in document.documentElement,transitions:!1!==A,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},K=(()=>{let e=!1;try{const t=Object.defineProperty({},"passive",{get:()=>(e=!0,null)});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e})();function Z(e,t,n,i=!1,r=!0,a=!1){if(!e||!("addEventListener"in e)||C.empty(t)||!C.function(n))return;const s=t.split(" ");let o=a;K&&(o={passive:r,capture:a}),s.forEach((t=>{this&&this.eventListeners&&i&&this.eventListeners.push({element:e,type:t,callback:n,options:o}),e[i?"addEventListener":"removeEventListener"](t,n,o)}))}function J(e,t="",n,i=!0,r=!1){Z.call(this,e,t,n,!0,i,r)}function Q(e,t="",n,i=!0,r=!1){Z.call(this,e,t,n,!1,i,r)}function ee(e,t="",n,i=!0,r=!1){const a=(...s)=>{Q(e,t,a,i,r),n.apply(this,s)};Z.call(this,e,t,a,!0,i,r)}function te(e,t="",n=!1,i={}){if(!C.element(e)||C.empty(t))return;const r=new CustomEvent(t,{bubbles:n,detail:{...i,plyr:this}});e.dispatchEvent(r)}function ne(){this&&this.eventListeners&&(this.eventListeners.forEach((e=>{const{element:t,type:n,callback:i,options:r}=e;t.removeEventListener(n,i,r)})),this.eventListeners=[])}function ie(){return new Promise((e=>this.ready?setTimeout(e,0):J.call(this,this.elements.container,"ready",e))).then((()=>{}))}function re(e){C.promise(e)&&e.then(null,(()=>{}))}function ae(e){return C.array(e)?e.filter(((t,n)=>e.indexOf(t)===n)):e}function se(e,t){return C.array(e)&&e.length?e.reduce(((e,n)=>Math.abs(n-t)<Math.abs(e-t)?n:e)):null}function oe(e){return!(!window||!window.CSS)&&window.CSS.supports(e)}const le=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce(((e,[t,n])=>({...e,[t/n]:[t,n]})),{});function ce(e){return!!(C.array(e)||C.string(e)&&e.includes(":"))&&(C.array(e)?e:e.split(":")).map(Number).every(C.number)}function de(e){if(!C.array(e)||!e.every(C.number))return null;const[t,n]=e,i=(e,t)=>0===t?e:i(t,e%t),r=i(t,n);return[t/r,n/r]}function ue(e){const t=e=>ce(e)?e.split(":").map(Number):null;let n=t(e);if(null===n&&(n=t(this.config.ratio)),null===n&&!C.empty(this.embed)&&C.array(this.embed.ratio)&&({ratio:n}=this.embed),null===n&&this.isHTML5){const{videoWidth:e,videoHeight:t}=this.media;n=[e,t]}return de(n)}function he(e){if(!this.isVideo)return{};const{wrapper:t}=this.elements,n=ue.call(this,e);if(!C.array(n))return{};const[i,r]=de(n),a=100/i*r;if(oe(`aspect-ratio: ${i}/${r}`)?t.style.aspectRatio=`${i}/${r}`:t.style.paddingBottom=`${a}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const e=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),n=(e-a)/(e/50);this.fullscreen.active?t.style.paddingBottom=null:this.media.style.transform=`translateY(-${n}%)`}else this.isHTML5&&t.classList.add(this.config.classNames.videoFixedRatio);return{padding:a,ratio:n}}function pe(e,t,n=.05){const i=e/t,r=se(Object.keys(le),i);return Math.abs(r-i)<=n?le[r]:[e,t]}const me={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter((e=>{const t=e.getAttribute("type");return!!C.empty(t)||X.mime.call(this,t)})):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:me.getSources.call(this).map((e=>Number(e.getAttribute("size")))).filter(Boolean)},setup(){if(!this.isHTML5)return;const e=this;e.options.speed=e.config.speed.options,C.empty(this.config.ratio)||he.call(e),Object.defineProperty(e.media,"quality",{get(){const t=me.getSources.call(e).find((t=>t.getAttribute("src")===e.source));return t&&Number(t.getAttribute("size"))},set(t){if(e.quality!==t){if(e.config.quality.forced&&C.function(e.config.quality.onChange))e.config.quality.onChange(t);else{const n=me.getSources.call(e).find((e=>Number(e.getAttribute("size"))===t));if(!n)return;const{currentTime:i,paused:r,preload:a,readyState:s,playbackRate:o}=e.media;e.media.src=n.getAttribute("src"),("none"!==a||s)&&(e.once("loadedmetadata",(()=>{e.speed=o,e.currentTime=i,r||re(e.play())})),e.media.load())}te.call(e,e.media,"qualitychange",!1,{quality:t})}}})},cancelRequests(){this.isHTML5&&(B(me.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function fe(e,...t){return C.empty(e)?e:e.toString().replace(/{(\d+)}/g,((e,n)=>t[n].toString()))}const ge=(e="",t="",n="")=>e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),n.toString()),ve=(e="")=>e.toString().replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()));function _e(e=""){let t=e.toString();return t=function(e=""){let t=e.toString();return t=ge(t,"-"," "),t=ge(t,"_"," "),t=ve(t),ge(t," ","")}(t),t.charAt(0).toLowerCase()+t.slice(1)}function be(e){const t=document.createElement("div");return t.appendChild(e),t.innerHTML}const ye={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},xe={get(e="",t={}){if(C.empty(e)||C.empty(t))return"";let n=L(t.i18n,e);if(C.empty(n))return Object.keys(ye).includes(e)?ye[e]:"";const i={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(i).forEach((([e,t])=>{n=ge(n,e,t)})),n}};class we{constructor(t){e(this,"get",(e=>{if(!we.supported||!this.enabled)return null;const t=window.localStorage.getItem(this.key);if(C.empty(t))return null;const n=JSON.parse(t);return C.string(e)&&e.length?n[e]:n})),e(this,"set",(e=>{if(!we.supported||!this.enabled)return;if(!C.object(e))return;let t=this.get();C.empty(t)&&(t={}),I(t,e);try{window.localStorage.setItem(this.key,JSON.stringify(t))}catch(e){}})),this.enabled=t.config.storage.enabled,this.key=t.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}}function Se(e,t="text"){return new Promise(((n,i)=>{try{const i=new XMLHttpRequest;if(!("withCredentials"in i))return;i.addEventListener("load",(()=>{if("text"===t)try{n(JSON.parse(i.responseText))}catch(e){n(i.responseText)}else n(i.response)})),i.addEventListener("error",(()=>{throw new Error(i.status)})),i.open("GET",e,!0),i.responseType=t,i.send()}catch(e){i(e)}}))}function Te(e,t){if(!C.string(e))return;const n="cache",i=C.string(t);let r=!1;const a=()=>null!==document.getElementById(t),s=(e,t)=>{e.innerHTML=t,i&&a()||document.body.insertAdjacentElement("afterbegin",e)};if(!i||!a()){const a=we.supported,o=document.createElement("div");if(o.setAttribute("hidden",""),i&&o.setAttribute("id",t),a){const e=window.localStorage.getItem(`${n}-${t}`);if(r=null!==e,r){const t=JSON.parse(e);s(o,t.content)}}Se(e).then((e=>{if(!C.empty(e)){if(a)try{window.localStorage.setItem(`${n}-${t}`,JSON.stringify({content:e}))}catch(e){}s(o,e)}})).catch((()=>{}))}}const Ee=e=>Math.trunc(e/60/60%60,10),Me=e=>Math.trunc(e/60%60,10),Ce=e=>Math.trunc(e%60,10);function Ae(e=0,t=!1,n=!1){if(!C.number(e))return Ae(void 0,t,n);const i=e=>`0${e}`.slice(-2);let r=Ee(e);const a=Me(e),s=Ce(e);return r=t||r>0?`${r}:`:"",`${n&&e>0?"-":""}${r}${i(a)}:${i(s)}`}const ke={getIconUrl(){const e=new URL(this.config.iconUrl,window.location),t=window.location.host?window.location.host:window.top.location.host,n=e.host!==t||D.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:n}},findElements(){try{return this.elements.controls=j.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:G.call(this,this.config.selectors.buttons.play),pause:j.call(this,this.config.selectors.buttons.pause),restart:j.call(this,this.config.selectors.buttons.restart),rewind:j.call(this,this.config.selectors.buttons.rewind),fastForward:j.call(this,this.config.selectors.buttons.fastForward),mute:j.call(this,this.config.selectors.buttons.mute),pip:j.call(this,this.config.selectors.buttons.pip),airplay:j.call(this,this.config.selectors.buttons.airplay),settings:j.call(this,this.config.selectors.buttons.settings),captions:j.call(this,this.config.selectors.buttons.captions),fullscreen:j.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=j.call(this,this.config.selectors.progress),this.elements.inputs={seek:j.call(this,this.config.selectors.inputs.seek),volume:j.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:j.call(this,this.config.selectors.display.buffer),currentTime:j.call(this,this.config.selectors.display.currentTime),duration:j.call(this,this.config.selectors.display.duration)},C.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon(e,t){const n="http://www.w3.org/2000/svg",i=ke.getIconUrl.call(this),r=`${i.cors?"":i.url}#${this.config.iconPrefix}`,a=document.createElementNS(n,"svg");R(a,I(t,{"aria-hidden":"true",focusable:"false"}));const s=document.createElementNS(n,"use"),o=`${r}-${e}`;return"href"in s&&s.setAttributeNS("http://www.w3.org/1999/xlink","href",o),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o),a.appendChild(s),a},createLabel(e,t={}){const n=xe.get(e,this.config);return O("span",{...t,class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")},n)},createBadge(e){if(C.empty(e))return null;const t=O("span",{class:this.config.classNames.menu.value});return t.appendChild(O("span",{class:this.config.classNames.menu.badge},e)),t},createButton(e,t){const n=I({},t);let i=_e(e);const r={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach((e=>{Object.keys(n).includes(e)&&(r[e]=n[e],delete n[e])})),"button"!==r.element||Object.keys(n).includes("type")||(n.type="button"),Object.keys(n).includes("class")?n.class.split(" ").some((e=>e===this.config.classNames.control))||I(n,{class:`${n.class} ${this.config.classNames.control}`}):n.class=this.config.classNames.control,e){case"play":r.toggle=!0,r.label="play",r.labelPressed="pause",r.icon="play",r.iconPressed="pause";break;case"mute":r.toggle=!0,r.label="mute",r.labelPressed="unmute",r.icon="volume",r.iconPressed="muted";break;case"captions":r.toggle=!0,r.label="enableCaptions",r.labelPressed="disableCaptions",r.icon="captions-off",r.iconPressed="captions-on";break;case"fullscreen":r.toggle=!0,r.label="enterFullscreen",r.labelPressed="exitFullscreen",r.icon="enter-fullscreen",r.iconPressed="exit-fullscreen";break;case"play-large":n.class+=` ${this.config.classNames.control}--overlaid`,i="play",r.label="play",r.icon="play";break;default:C.empty(r.label)&&(r.label=i),C.empty(r.icon)&&(r.icon=e)}const a=O(r.element);return r.toggle?(a.appendChild(ke.createIcon.call(this,r.iconPressed,{class:"icon--pressed"})),a.appendChild(ke.createIcon.call(this,r.icon,{class:"icon--not-pressed"})),a.appendChild(ke.createLabel.call(this,r.labelPressed,{class:"label--pressed"})),a.appendChild(ke.createLabel.call(this,r.label,{class:"label--not-pressed"}))):(a.appendChild(ke.createIcon.call(this,r.icon)),a.appendChild(ke.createLabel.call(this,r.label))),I(n,z(this.config.selectors.buttons[i],n)),R(a,n),"play"===i?(C.array(this.elements.buttons[i])||(this.elements.buttons[i]=[]),this.elements.buttons[i].push(a)):this.elements.buttons[i]=a,a},createRange(e,t){const n=O("input",I(z(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":xe.get(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=n,ke.updateRangeFill.call(this,n),v.setup(n),n},createProgress(e,t){const n=O("progress",I(z(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if("volume"!==e){n.appendChild(O("span",null,"0"));const t={played:"played",buffer:"buffered"}[e],i=t?xe.get(t,this.config):"";n.innerText=`% ${i.toLowerCase()}`}return this.elements.display[e]=n,n},createTime(e,t){const n=z(this.config.selectors.display[e],t),i=O("div",I(n,{class:`${n.class?n.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":xe.get(e,this.config),role:"timer"}),"00:00");return this.elements.display[e]=i,i},bindMenuItemShortcuts(e,t){J.call(this,e,"keydown keyup",(n=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(n.key))return;if(n.preventDefault(),n.stopPropagation(),"keydown"===n.type)return;const i=W(e,'[role="menuitemradio"]');if(!i&&[" ","ArrowRight"].includes(n.key))ke.showMenuPanel.call(this,t,!0);else{let t;" "!==n.key&&("ArrowDown"===n.key||i&&"ArrowRight"===n.key?(t=e.nextElementSibling,C.element(t)||(t=e.parentNode.firstElementChild)):(t=e.previousElementSibling,C.element(t)||(t=e.parentNode.lastElementChild)),q.call(this,t,!0))}}),!1),J.call(this,e,"keyup",(e=>{"Return"===e.key&&ke.focusFirstMenuItem.call(this,null,!0)}))},createMenuItem({value:e,list:t,type:n,title:i,badge:r=null,checked:a=!1}){const s=z(this.config.selectors.inputs[n]),o=O("button",I(s,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${s.class?s.class:""}`.trim(),"aria-checked":a,value:e})),l=O("span");l.innerHTML=i,C.element(r)&&l.appendChild(r),o.appendChild(l),Object.defineProperty(o,"checked",{enumerable:!0,get:()=>"true"===o.getAttribute("aria-checked"),set(e){e&&Array.from(o.parentNode.children).filter((e=>W(e,'[role="menuitemradio"]'))).forEach((e=>e.setAttribute("aria-checked","false"))),o.setAttribute("aria-checked",e?"true":"false")}}),this.listeners.bind(o,"click keyup",(t=>{if(!C.keyboardEvent(t)||" "===t.key){switch(t.preventDefault(),t.stopPropagation(),o.checked=!0,n){case"language":this.currentTrack=Number(e);break;case"quality":this.quality=e;break;case"speed":this.speed=parseFloat(e)}ke.showMenuPanel.call(this,"home",C.keyboardEvent(t))}}),n,!1),ke.bindMenuItemShortcuts.call(this,o,n),t.appendChild(o)},formatTime(e=0,t=!1){return C.number(e)?Ae(e,Ee(this.duration)>0,t):e},updateTimeDisplay(e=null,t=0,n=!1){C.element(e)&&C.number(t)&&(e.innerText=ke.formatTime(t,n))},updateVolume(){this.supported.ui&&(C.element(this.elements.inputs.volume)&&ke.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),C.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange(e,t=0){C.element(e)&&(e.value=t,ke.updateRangeFill.call(this,e))},updateProgress(e){if(!this.supported.ui||!C.event(e))return;let t=0;const n=(e,t)=>{const n=C.number(t)?t:0,i=C.element(e)?e:this.elements.display.buffer;if(C.element(i)){i.value=n;const e=i.getElementsByTagName("span")[0];C.element(e)&&(e.childNodes[0].nodeValue=n)}};if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":i=this.currentTime,r=this.duration,t=0===i||0===r||Number.isNaN(i)||Number.isNaN(r)?0:(i/r*100).toFixed(2),"timeupdate"===e.type&&ke.setRange.call(this,this.elements.inputs.seek,t);break;case"playing":case"progress":n(this.elements.display.buffer,100*this.buffered)}var i,r},updateRangeFill(e){const t=C.event(e)?e.target:e;if(C.element(t)&&"range"===t.getAttribute("type")){if(W(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);const e=ke.formatTime(this.currentTime),n=ke.formatTime(this.duration),i=xe.get("seekLabel",this.config);t.setAttribute("aria-valuetext",i.replace("{currentTime}",e).replace("{duration}",n))}else if(W(t,this.config.selectors.inputs.volume)){const e=100*t.value;t.setAttribute("aria-valuenow",e),t.setAttribute("aria-valuetext",`${e.toFixed(1)}%`)}else t.setAttribute("aria-valuenow",t.value);(D.isWebKit||D.isIPadOS)&&t.style.setProperty("--value",t.value/t.max*100+"%")}},updateSeekTooltip(e){var t,n;if(!this.config.tooltips.seek||!C.element(this.elements.inputs.seek)||!C.element(this.elements.display.seekTooltip)||0===this.duration)return;const i=this.elements.display.seekTooltip,r=`${this.config.classNames.tooltip}--visible`,a=e=>H(i,r,e);if(this.touch)return void a(!1);let s=0;const o=this.elements.progress.getBoundingClientRect();if(C.event(e))s=100/o.width*(e.pageX-o.left);else{if(!$(i,r))return;s=parseFloat(i.style.left,10)}s<0?s=0:s>100&&(s=100);const l=this.duration/100*s;i.innerText=ke.formatTime(l);const c=null===(t=this.config.markers)||void 0===t||null===(n=t.points)||void 0===n?void 0:n.find((({time:e})=>e===Math.round(l)));c&&i.insertAdjacentHTML("afterbegin",`${c.label}<br>`),i.style.left=`${s}%`,C.event(e)&&["mouseenter","mouseleave"].includes(e.type)&&a("mouseenter"===e.type)},timeUpdate(e){const t=!C.element(this.elements.display.duration)&&this.config.invertTime;ke.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&"timeupdate"===e.type&&this.media.seeking||ke.updateProgress.call(this,e)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return V(this.elements.display.currentTime,!0),void V(this.elements.progress,!0);C.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const e=C.element(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&ke.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&ke.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&ke.setMarkers.call(this),ke.updateSeekTooltip.call(this)},toggleMenuButton(e,t){V(this.elements.settings.buttons[e],!t)},updateSetting(e,t,n){const i=this.elements.settings.panels[e];let r=null,a=t;if("captions"===e)r=this.currentTrack;else{if(r=C.empty(n)?this[e]:n,C.empty(r)&&(r=this.config[e].default),!C.empty(this.options[e])&&!this.options[e].includes(r))return void this.debug.warn(`Unsupported value of '${r}' for ${e}`);if(!this.config[e].options.includes(r))return void this.debug.warn(`Disabled value of '${r}' for ${e}`)}if(C.element(a)||(a=i&&i.querySelector('[role="menu"]')),!C.element(a))return;this.elements.settings.buttons[e].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=ke.getLabel.call(this,e,r);const s=a&&a.querySelector(`[value="${r}"]`);C.element(s)&&(s.checked=!0)},getLabel(e,t){switch(e){case"speed":return 1===t?xe.get("normal",this.config):`${t}&times;`;case"quality":if(C.number(t)){const e=xe.get(`qualityLabel.${t}`,this.config);return e.length?e:`${t}p`}return ve(t);case"captions":return Ie.getLabel.call(this);default:return null}},setQualityMenu(e){if(!C.element(this.elements.settings.panels.quality))return;const t="quality",n=this.elements.settings.panels.quality.querySelector('[role="menu"]');C.array(e)&&(this.options.quality=ae(e).filter((e=>this.config.quality.options.includes(e))));const i=!C.empty(this.options.quality)&&this.options.quality.length>1;if(ke.toggleMenuButton.call(this,t,i),F(n),ke.checkMenu.call(this),!i)return;const r=e=>{const t=xe.get(`qualityBadge.${e}`,this.config);return t.length?ke.createBadge.call(this,t):null};this.options.quality.sort(((e,t)=>{const n=this.config.quality.options;return n.indexOf(e)>n.indexOf(t)?1:-1})).forEach((e=>{ke.createMenuItem.call(this,{value:e,list:n,type:t,title:ke.getLabel.call(this,"quality",e),badge:r(e)})})),ke.updateSetting.call(this,t,n)},setCaptionsMenu(){if(!C.element(this.elements.settings.panels.captions))return;const e="captions",t=this.elements.settings.panels.captions.querySelector('[role="menu"]'),n=Ie.getTracks.call(this),i=Boolean(n.length);if(ke.toggleMenuButton.call(this,e,i),F(t),ke.checkMenu.call(this),!i)return;const r=n.map(((e,n)=>({value:n,checked:this.captions.toggled&&this.currentTrack===n,title:Ie.getLabel.call(this,e),badge:e.language&&ke.createBadge.call(this,e.language.toUpperCase()),list:t,type:"language"})));r.unshift({value:-1,checked:!this.captions.toggled,title:xe.get("disabled",this.config),list:t,type:"language"}),r.forEach(ke.createMenuItem.bind(this)),ke.updateSetting.call(this,e,t)},setSpeedMenu(){if(!C.element(this.elements.settings.panels.speed))return;const e="speed",t=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter((e=>e>=this.minimumSpeed&&e<=this.maximumSpeed));const n=!C.empty(this.options.speed)&&this.options.speed.length>1;ke.toggleMenuButton.call(this,e,n),F(t),ke.checkMenu.call(this),n&&(this.options.speed.forEach((n=>{ke.createMenuItem.call(this,{value:n,list:t,type:e,title:ke.getLabel.call(this,"speed",n)})})),ke.updateSetting.call(this,e,t))},checkMenu(){const{buttons:e}=this.elements.settings,t=!C.empty(e)&&Object.values(e).some((e=>!e.hidden));V(this.elements.settings.menu,!t)},focusFirstMenuItem(e,t=!1){if(this.elements.settings.popup.hidden)return;let n=e;C.element(n)||(n=Object.values(this.elements.settings.panels).find((e=>!e.hidden)));const i=n.querySelector('[role^="menuitem"]');q.call(this,i,t)},toggleMenu(e){const{popup:t}=this.elements.settings,n=this.elements.buttons.settings;if(!C.element(t)||!C.element(n))return;const{hidden:i}=t;let r=i;if(C.boolean(e))r=e;else if(C.keyboardEvent(e)&&"Escape"===e.key)r=!1;else if(C.event(e)){const i=C.function(e.composedPath)?e.composedPath()[0]:e.target,a=t.contains(i);if(a||!a&&e.target!==n&&r)return}n.setAttribute("aria-expanded",r),V(t,!r),H(this.elements.container,this.config.classNames.menu.open,r),r&&C.keyboardEvent(e)?ke.focusFirstMenuItem.call(this,null,!0):r||i||q.call(this,n,C.keyboardEvent(e))},getMenuSize(e){const t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);const n=t.scrollWidth,i=t.scrollHeight;return B(t),{width:n,height:i}},showMenuPanel(e="",t=!1){const n=this.elements.container.querySelector(`#plyr-settings-${this.id}-${e}`);if(!C.element(n))return;const i=n.parentNode,r=Array.from(i.children).find((e=>!e.hidden));if(X.transitions&&!X.reducedMotion){i.style.width=`${r.scrollWidth}px`,i.style.height=`${r.scrollHeight}px`;const e=ke.getMenuSize.call(this,n),t=e=>{e.target===i&&["width","height"].includes(e.propertyName)&&(i.style.width="",i.style.height="",Q.call(this,i,A,t))};J.call(this,i,A,t),i.style.width=`${e.width}px`,i.style.height=`${e.height}px`}V(r,!0),V(n,!1),ke.focusFirstMenuItem.call(this,n,t)},setDownloadUrl(){const e=this.elements.buttons.download;C.element(e)&&e.setAttribute("href",this.download)},create(e){const{bindMenuItemShortcuts:t,createButton:n,createProgress:i,createRange:r,createTime:a,setQualityMenu:s,setSpeedMenu:o,showMenuPanel:l}=ke;this.elements.controls=null,C.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(n.call(this,"play-large"));const c=O("div",z(this.config.selectors.controls.wrapper));this.elements.controls=c;const d={class:"plyr__controls__item"};return ae(C.array(this.config.controls)?this.config.controls:[]).forEach((s=>{if("restart"===s&&c.appendChild(n.call(this,"restart",d)),"rewind"===s&&c.appendChild(n.call(this,"rewind",d)),"play"===s&&c.appendChild(n.call(this,"play",d)),"fast-forward"===s&&c.appendChild(n.call(this,"fast-forward",d)),"progress"===s){const t=O("div",{class:`${d.class} plyr__progress__container`}),n=O("div",z(this.config.selectors.progress));if(n.appendChild(r.call(this,"seek",{id:`plyr-seek-${e.id}`})),n.appendChild(i.call(this,"buffer")),this.config.tooltips.seek){const e=O("span",{class:this.config.classNames.tooltip},"00:00");n.appendChild(e),this.elements.display.seekTooltip=e}this.elements.progress=n,t.appendChild(this.elements.progress),c.appendChild(t)}if("current-time"===s&&c.appendChild(a.call(this,"currentTime",d)),"duration"===s&&c.appendChild(a.call(this,"duration",d)),"mute"===s||"volume"===s){let{volume:t}=this.elements;if(C.element(t)&&c.contains(t)||(t=O("div",I({},d,{class:`${d.class} plyr__volume`.trim()})),this.elements.volume=t,c.appendChild(t)),"mute"===s&&t.appendChild(n.call(this,"mute")),"volume"===s&&!D.isIos&&!D.isIPadOS){const n={max:1,step:.05,value:this.config.volume};t.appendChild(r.call(this,"volume",I(n,{id:`plyr-volume-${e.id}`})))}}if("captions"===s&&c.appendChild(n.call(this,"captions",d)),"settings"===s&&!C.empty(this.config.settings)){const i=O("div",I({},d,{class:`${d.class} plyr__menu`.trim(),hidden:""}));i.appendChild(n.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${e.id}`,"aria-expanded":!1}));const r=O("div",{class:"plyr__menu__container",id:`plyr-settings-${e.id}`,hidden:""}),a=O("div"),s=O("div",{id:`plyr-settings-${e.id}-home`}),o=O("div",{role:"menu"});s.appendChild(o),a.appendChild(s),this.elements.settings.panels.home=s,this.config.settings.forEach((n=>{const i=O("button",I(z(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));t.call(this,i,n),J.call(this,i,"click",(()=>{l.call(this,n,!1)}));const r=O("span",null,xe.get(n,this.config)),s=O("span",{class:this.config.classNames.menu.value});s.innerHTML=e[n],r.appendChild(s),i.appendChild(r),o.appendChild(i);const c=O("div",{id:`plyr-settings-${e.id}-${n}`,hidden:""}),d=O("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});d.appendChild(O("span",{"aria-hidden":!0},xe.get(n,this.config))),d.appendChild(O("span",{class:this.config.classNames.hidden},xe.get("menuBack",this.config))),J.call(this,c,"keydown",(e=>{"ArrowLeft"===e.key&&(e.preventDefault(),e.stopPropagation(),l.call(this,"home",!0))}),!1),J.call(this,d,"click",(()=>{l.call(this,"home",!1)})),c.appendChild(d),c.appendChild(O("div",{role:"menu"})),a.appendChild(c),this.elements.settings.buttons[n]=i,this.elements.settings.panels[n]=c})),r.appendChild(a),i.appendChild(r),c.appendChild(i),this.elements.settings.popup=r,this.elements.settings.menu=i}if("pip"===s&&X.pip&&c.appendChild(n.call(this,"pip",d)),"airplay"===s&&X.airplay&&c.appendChild(n.call(this,"airplay",d)),"download"===s){const e=I({},d,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(e.download="");const{download:t}=this.config.urls;!C.url(t)&&this.isEmbed&&I(e,{icon:`logo-${this.provider}`,label:this.provider}),c.appendChild(n.call(this,"download",e))}"fullscreen"===s&&c.appendChild(n.call(this,"fullscreen",d))})),this.isHTML5&&s.call(this,me.getQualityOptions.call(this)),o.call(this),c},inject(){if(this.config.loadSprite){const e=ke.getIconUrl.call(this);e.cors&&Te(e.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let e=null;this.elements.controls=null;const t={id:this.id,seektime:this.config.seekTime,title:this.config.title};let n,i=!0;if(C.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,t)),this.config.controls||(this.config.controls=[]),C.element(this.config.controls)||C.string(this.config.controls)?e=this.config.controls:(e=ke.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:Ie.getLabel.call(this)}),i=!1),i&&C.string(this.config.controls)&&(e=(e=>{let n=e;return Object.entries(t).forEach((([e,t])=>{n=ge(n,`{${e}}`,t)})),n})(e)),C.string(this.config.selectors.controls.container)&&(n=document.querySelector(this.config.selectors.controls.container)),C.element(n)||(n=this.elements.container),n[C.element(e)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",e),C.element(this.elements.controls)||ke.findElements.call(this),!C.empty(this.elements.buttons)){const e=e=>{const t=this.config.classNames.controlPressed;e.setAttribute("aria-pressed","false"),Object.defineProperty(e,"pressed",{configurable:!0,enumerable:!0,get:()=>$(e,t),set(n=!1){H(e,t,n),e.setAttribute("aria-pressed",n?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach((t=>{C.array(t)||C.nodeList(t)?Array.from(t).filter(Boolean).forEach(e):e(t)}))}if(D.isEdge&&k(n),this.config.tooltips.controls){const{classNames:e,selectors:t}=this.config,n=`${t.controls.wrapper} ${t.labels} .${e.hidden}`,i=G.call(this,n);Array.from(i).forEach((e=>{H(e,this.config.classNames.hidden,!1),H(e,this.config.classNames.tooltip,!0)}))}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch(e){}},setMarkers(){var e,t;if(!this.duration||this.elements.markers)return;const n=null===(e=this.config.markers)||void 0===e||null===(t=e.points)||void 0===t?void 0:t.filter((({time:e})=>e>0&&e<this.duration));if(null==n||!n.length)return;const i=document.createDocumentFragment(),r=document.createDocumentFragment();let a=null;const s=`${this.config.classNames.tooltip}--visible`,o=e=>H(a,s,e);n.forEach((e=>{const t=O("span",{class:this.config.classNames.marker},""),n=e.time/this.duration*100+"%";a&&(t.addEventListener("mouseenter",(()=>{e.label||(a.style.left=n,a.innerHTML=e.label,o(!0))})),t.addEventListener("mouseleave",(()=>{o(!1)}))),t.addEventListener("click",(()=>{this.currentTime=e.time})),t.style.left=n,r.appendChild(t)})),i.appendChild(r),this.config.tooltips.seek||(a=O("span",{class:this.config.classNames.tooltip},""),i.appendChild(a)),this.elements.markers={points:r,tip:a},this.elements.progress.appendChild(i)}};function De(e,t=!0){let n=e;if(t){const e=document.createElement("a");e.href=n,n=e.href}try{return new URL(n)}catch(e){return null}}function Le(e){const t=new URLSearchParams;return C.object(e)&&Object.entries(e).forEach((([e,n])=>{t.set(e,n)})),t}const Ie={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!X.textTracks)return void(C.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&ke.setCaptionsMenu.call(this));var e,t;if(C.element(this.elements.captions)||(this.elements.captions=O("div",z(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),e=this.elements.captions,t=this.elements.wrapper,C.element(e)&&C.element(t)&&t.parentNode.insertBefore(e,t.nextSibling)),D.isIE&&window.URL){const e=this.media.querySelectorAll("track");Array.from(e).forEach((e=>{const t=e.getAttribute("src"),n=De(t);null!==n&&n.hostname!==window.location.href.hostname&&["http:","https:"].includes(n.protocol)&&Se(t,"blob").then((t=>{e.setAttribute("src",window.URL.createObjectURL(t))})).catch((()=>{B(e)}))}))}const n=ae((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map((e=>e.split("-")[0])));let i=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();"auto"===i&&([i]=n);let r=this.storage.get("captions");if(C.boolean(r)||({active:r}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:r,language:i,languages:n}),this.isHTML5){const e=this.config.captions.update?"addtrack removetrack":"removetrack";J.call(this,this.media.textTracks,e,Ie.update.bind(this))}setTimeout(Ie.update.bind(this),0)},update(){const e=Ie.getTracks.call(this,!0),{active:t,language:n,meta:i,currentTrackNode:r}=this.captions,a=Boolean(e.find((e=>e.language===n)));this.isHTML5&&this.isVideo&&e.filter((e=>!i.get(e))).forEach((e=>{this.debug.log("Track added",e),i.set(e,{default:"showing"===e.mode}),"showing"===e.mode&&(e.mode="hidden"),J.call(this,e,"cuechange",(()=>Ie.updateCues.call(this)))})),(a&&this.language!==n||!e.includes(r))&&(Ie.setLanguage.call(this,n),Ie.toggle.call(this,t&&a)),this.elements&&H(this.elements.container,this.config.classNames.captions.enabled,!C.empty(e)),C.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&ke.setCaptionsMenu.call(this)},toggle(e,t=!0){if(!this.supported.ui)return;const{toggled:n}=this.captions,i=this.config.classNames.captions.active,r=C.nullOrUndefined(e)?!n:e;if(r!==n){if(t||(this.captions.active=r,this.storage.set({captions:r})),!this.language&&r&&!t){const e=Ie.getTracks.call(this),t=Ie.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=t.language,void Ie.set.call(this,e.indexOf(t))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=r),H(this.elements.container,i,r),this.captions.toggled=r,ke.updateSetting.call(this,"captions"),te.call(this,this.media,r?"captionsenabled":"captionsdisabled")}setTimeout((()=>{r&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")}))},set(e,t=!0){const n=Ie.getTracks.call(this);if(-1!==e)if(C.number(e))if(e in n){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;const i=n[e],{language:r}=i||{};this.captions.currentTrackNode=i,ke.updateSetting.call(this,"captions"),t||(this.captions.language=r,this.storage.set({language:r})),this.isVimeo&&this.embed.enableTextTrack(r),te.call(this,this.media,"languagechange")}Ie.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&Ie.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else Ie.toggle.call(this,!1,t)},setLanguage(e,t=!0){if(!C.string(e))return void this.debug.warn("Invalid language argument",e);const n=e.toLowerCase();this.captions.language=n;const i=Ie.getTracks.call(this),r=Ie.findTrack.call(this,[n]);Ie.set.call(this,i.indexOf(r),t)},getTracks(e=!1){return Array.from((this.media||{}).textTracks||[]).filter((t=>!this.isHTML5||e||this.captions.meta.has(t))).filter((e=>["captions","subtitles"].includes(e.kind)))},findTrack(e,t=!1){const n=Ie.getTracks.call(this),i=e=>Number((this.captions.meta.get(e)||{}).default),r=Array.from(n).sort(((e,t)=>i(t)-i(e)));let a;return e.every((e=>(a=r.find((t=>t.language===e)),!a))),a||(t?r[0]:void 0)},getCurrentTrack(){return Ie.getTracks.call(this)[this.currentTrack]},getLabel(e){let t=e;return!C.track(t)&&X.textTracks&&this.captions.toggled&&(t=Ie.getCurrentTrack.call(this)),C.track(t)?C.empty(t.label)?C.empty(t.language)?xe.get("enabled",this.config):e.language.toUpperCase():t.label:xe.get("disabled",this.config)},updateCues(e){if(!this.supported.ui)return;if(!C.element(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!C.nullOrUndefined(e)&&!Array.isArray(e))return void this.debug.warn("updateCues: Invalid input",e);let t=e;if(!t){const e=Ie.getCurrentTrack.call(this);t=Array.from((e||{}).activeCues||[]).map((e=>e.getCueAsHTML())).map(be)}const n=t.map((e=>e.trim())).join("\n");if(n!==this.elements.captions.innerHTML){F(this.elements.captions);const e=O("span",z(this.config.selectors.caption));e.innerHTML=n,this.elements.captions.appendChild(e),te.call(this,this.media,"cuechange")}}},Pe={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},Re="picture-in-picture",Oe="inline",Ne={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Be="audio",Fe="video",Ue=()=>{};class ze{constructor(e=!1){this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):Ue}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):Ue}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):Ue}}class Ve{constructor(t){e(this,"onChange",(()=>{if(!this.supported)return;const e=this.player.elements.buttons.fullscreen;C.element(e)&&(e.pressed=this.active);const t=this.target===this.player.media?this.target:this.player.elements.container;te.call(this.player,t,this.active?"enterfullscreen":"exitfullscreen",!0)})),e(this,"toggleFallback",((e=!1)=>{if(e?this.scrollPosition={x:window.scrollX??0,y:window.scrollY??0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=e?"hidden":"",H(this.target,this.player.config.classNames.fullscreen.fallback,e),D.isIos){let t=document.head.querySelector('meta[name="viewport"]');const n="viewport-fit=cover";t||(t=document.createElement("meta"),t.setAttribute("name","viewport"));const i=C.string(t.content)&&t.content.includes(n);e?(this.cleanupViewport=!i,i||(t.content+=`,${n}`)):this.cleanupViewport&&(t.content=t.content.split(",").filter((e=>e.trim()!==n)).join(","))}this.onChange()})),e(this,"trapFocus",(e=>{if(D.isIos||D.isIPadOS||!this.active||"Tab"!==e.key)return;const t=document.activeElement,n=G.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[i]=n,r=n[n.length-1];t!==r||e.shiftKey?t===i&&e.shiftKey&&(r.focus(),e.preventDefault()):(i.focus(),e.preventDefault())})),e(this,"update",(()=>{if(this.supported){let e;e=this.forceFallback?"Fallback (forced)":Ve.nativeSupported?"Native":"Fallback",this.player.debug.log(`${e} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");H(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)})),e(this,"enter",(()=>{this.supported&&(D.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!Ve.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?C.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))})),e(this,"exit",(()=>{if(this.supported)if(D.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),re(this.player.play());else if(!Ve.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!C.empty(this.prefix)){const e="moz"===this.prefix?"Cancel":"Exit";document[`${this.prefix}${e}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)})),e(this,"toggle",(()=>{this.active?this.exit():this.enter()})),this.player=t,this.prefix=Ve.prefix,this.property=Ve.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===t.config.fullscreen.fallback,this.player.elements.fullscreen=t.config.fullscreen.container&&function(e,t){const{prototype:n}=Element;return(n.closest||function(){let e=this;do{if(W.matches(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}).call(e,t)}(this.player.elements.container,t.config.fullscreen.container),J.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":`${this.prefix}fullscreenchange`,(()=>{this.onChange()})),J.call(this.player,this.player.elements.container,"dblclick",(e=>{C.element(this.player.elements.controls)&&this.player.elements.controls.contains(e.target)||this.player.listeners.proxy(e,this.toggle,"fullscreen")})),J.call(this,this.player.elements.container,"keydown",(e=>this.trapFocus(e))),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return Ve.nativeSupported&&!this.forceFallback}static get prefix(){if(C.function(document.exitFullscreen))return"";let e="";return["webkit","moz","ms"].some((t=>!(!C.function(document[`${t}ExitFullscreen`])&&!C.function(document[`${t}CancelFullScreen`])||(e=t,0)))),e}static get property(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,Ve.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||Ve.nativeSupported||!D.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!Ve.nativeSupported||this.forceFallback)return $(this.target,this.player.config.classNames.fullscreen.fallback);const e=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return e&&e.shadowRoot?e===this.target.getRootNode().host:e===this.target}get target(){return D.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen??this.player.elements.container}}function He(e,t=1){return new Promise(((n,i)=>{const r=new Image,a=()=>{delete r.onload,delete r.onerror,(r.naturalWidth>=t?n:i)(r)};Object.assign(r,{onload:a,onerror:a,src:e})}))}const $e={addStyleHook(){H(this.elements.container,this.config.selectors.container.replace(".",""),!0),H(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(e=!1){e&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void $e.toggleNativeControls.call(this,!0);C.element(this.elements.controls)||(ke.inject.call(this),this.listeners.controls()),$e.toggleNativeControls.call(this),this.isHTML5&&Ie.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,ke.updateVolume.call(this),ke.timeUpdate.call(this),ke.durationUpdate.call(this),$e.checkPlaying.call(this),H(this.elements.container,this.config.classNames.pip.supported,X.pip&&this.isHTML5&&this.isVideo),H(this.elements.container,this.config.classNames.airplay.supported,X.airplay&&this.isHTML5),H(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout((()=>{te.call(this,this.media,"ready")}),0),$e.setTitle.call(this),this.poster&&$e.setPoster.call(this,this.poster,!1).catch((()=>{})),this.config.duration&&ke.durationUpdate.call(this),this.config.mediaMetadata&&ke.setMediaMetadata.call(this)},setTitle(){let e=xe.get("play",this.config);if(C.string(this.config.title)&&!C.empty(this.config.title)&&(e+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach((t=>{t.setAttribute("aria-label",e)})),this.isEmbed){const e=j.call(this,"iframe");if(!C.element(e))return;const t=C.empty(this.config.title)?"video":this.config.title,n=xe.get("frameTitle",this.config);e.setAttribute("title",n.replace("{title}",t))}},togglePoster(e){H(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster(e,t=!0){return t&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",e),this.elements.poster.removeAttribute("hidden"),ie.call(this).then((()=>He(e))).catch((t=>{throw e===this.poster&&$e.togglePoster.call(this,!1),t})).then((()=>{if(e!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")})).then((()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${e}')`,backgroundSize:""}),$e.togglePoster.call(this,!0),e))))},checkPlaying(e){H(this.elements.container,this.config.classNames.playing,this.playing),H(this.elements.container,this.config.classNames.paused,this.paused),H(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach((e=>{Object.assign(e,{pressed:this.playing}),e.setAttribute("aria-label",xe.get(this.playing?"pause":"play",this.config))})),C.event(e)&&"timeupdate"===e.type||$e.toggleControls.call(this)},checkLoading(e){this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout((()=>{H(this.elements.container,this.config.classNames.loading,this.loading),$e.toggleControls.call(this)}),this.loading?250:0)},toggleControls(e){const{controls:t}=this.elements;if(t&&this.config.hideControls){const n=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(e||this.loading||this.paused||t.pressed||t.hover||n))}},migrateStyles(){Object.values({...this.media.style}).filter((e=>!C.empty(e)&&C.string(e)&&e.startsWith("--plyr"))).forEach((e=>{this.elements.container.style.setProperty(e,this.media.style.getPropertyValue(e)),this.media.style.removeProperty(e)})),C.empty(this.media.style)&&this.media.removeAttribute("style")}};class We{constructor(t){e(this,"firstTouch",(()=>{const{player:e}=this,{elements:t}=e;e.touch=!0,H(t.container,e.config.classNames.isTouch,!0)})),e(this,"global",((e=!0)=>{const{player:t}=this;t.config.keyboard.global&&Z.call(t,window,"keydown keyup",this.handleKey,e,!1),Z.call(t,document.body,"click",this.toggleMenu,e),ee.call(t,document.body,"touchstart",this.firstTouch)})),e(this,"container",(()=>{const{player:e}=this,{config:t,elements:n,timers:i}=e;!t.keyboard.global&&t.keyboard.focused&&J.call(e,n.container,"keydown keyup",this.handleKey,!1),J.call(e,n.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",(t=>{const{controls:r}=n;r&&"enterfullscreen"===t.type&&(r.pressed=!1,r.hover=!1);let a=0;["touchstart","touchmove","mousemove"].includes(t.type)&&($e.toggleControls.call(e,!0),a=e.touch?3e3:2e3),clearTimeout(i.controls),i.controls=setTimeout((()=>$e.toggleControls.call(e,!1)),a)}));const r=()=>{if(!e.isVimeo||e.config.vimeo.premium)return;const t=n.wrapper,{active:i}=e.fullscreen,[r,a]=ue.call(e),s=oe(`aspect-ratio: ${r} / ${a}`);if(!i)return void(s?(t.style.width=null,t.style.height=null):(t.style.maxWidth=null,t.style.margin=null));const[o,l]=[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)],c=o/l>r/a;s?(t.style.width=c?"auto":"100%",t.style.height=c?"100%":"auto"):(t.style.maxWidth=c?l/a*r+"px":null,t.style.margin=c?"0 auto":null)},a=()=>{clearTimeout(i.resized),i.resized=setTimeout(r,50)};J.call(e,n.container,"enterfullscreen exitfullscreen",(t=>{const{target:i}=e.fullscreen;i===n.container&&(!e.isEmbed&&C.empty(e.config.ratio)||(r(),("enterfullscreen"===t.type?J:Q).call(e,window,"resize",a)))}))})),e(this,"media",(()=>{const{player:e}=this,{elements:t}=e;if(J.call(e,e.media,"timeupdate seeking seeked",(t=>ke.timeUpdate.call(e,t))),J.call(e,e.media,"durationchange loadeddata loadedmetadata",(t=>ke.durationUpdate.call(e,t))),J.call(e,e.media,"ended",(()=>{e.isHTML5&&e.isVideo&&e.config.resetOnEnd&&(e.restart(),e.pause())})),J.call(e,e.media,"progress playing seeking seeked",(t=>ke.updateProgress.call(e,t))),J.call(e,e.media,"volumechange",(t=>ke.updateVolume.call(e,t))),J.call(e,e.media,"playing play pause ended emptied timeupdate",(t=>$e.checkPlaying.call(e,t))),J.call(e,e.media,"waiting canplay seeked playing",(t=>$e.checkLoading.call(e,t))),e.supported.ui&&e.config.clickToPlay&&!e.isAudio){const n=j.call(e,`.${e.config.classNames.video}`);if(!C.element(n))return;J.call(e,t.container,"click",(i=>{([t.container,n].includes(i.target)||n.contains(i.target))&&(e.touch&&e.config.hideControls||(e.ended?(this.proxy(i,e.restart,"restart"),this.proxy(i,(()=>{re(e.play())}),"play")):this.proxy(i,(()=>{re(e.togglePlay())}),"play")))}))}e.supported.ui&&e.config.disableContextMenu&&J.call(e,t.wrapper,"contextmenu",(e=>{e.preventDefault()}),!1),J.call(e,e.media,"volumechange",(()=>{e.storage.set({volume:e.volume,muted:e.muted})})),J.call(e,e.media,"ratechange",(()=>{ke.updateSetting.call(e,"speed"),e.storage.set({speed:e.speed})})),J.call(e,e.media,"qualitychange",(t=>{ke.updateSetting.call(e,"quality",null,t.detail.quality)})),J.call(e,e.media,"ready qualitychange",(()=>{ke.setDownloadUrl.call(e)}));const n=e.config.events.concat(["keyup","keydown"]).join(" ");J.call(e,e.media,n,(n=>{let{detail:i={}}=n;"error"===n.type&&(i=e.media.error),te.call(e,t.container,n.type,!0,i)}))})),e(this,"proxy",((e,t,n)=>{const{player:i}=this,r=i.config.listeners[n];let a=!0;C.function(r)&&(a=r.call(i,e)),!1!==a&&C.function(t)&&t.call(i,e)})),e(this,"bind",((e,t,n,i,r=!0)=>{const{player:a}=this,s=a.config.listeners[i],o=C.function(s);J.call(a,e,t,(e=>this.proxy(e,n,i)),r&&!o)})),e(this,"controls",(()=>{const{player:e}=this,{elements:t}=e,n=D.isIE?"change":"input";if(t.buttons.play&&Array.from(t.buttons.play).forEach((t=>{this.bind(t,"click",(()=>{re(e.togglePlay())}),"play")})),this.bind(t.buttons.restart,"click",e.restart,"restart"),this.bind(t.buttons.rewind,"click",(()=>{e.lastSeekTime=Date.now(),e.rewind()}),"rewind"),this.bind(t.buttons.fastForward,"click",(()=>{e.lastSeekTime=Date.now(),e.forward()}),"fastForward"),this.bind(t.buttons.mute,"click",(()=>{e.muted=!e.muted}),"mute"),this.bind(t.buttons.captions,"click",(()=>e.toggleCaptions())),this.bind(t.buttons.download,"click",(()=>{te.call(e,e.media,"download")}),"download"),this.bind(t.buttons.fullscreen,"click",(()=>{e.fullscreen.toggle()}),"fullscreen"),this.bind(t.buttons.pip,"click",(()=>{e.pip="toggle"}),"pip"),this.bind(t.buttons.airplay,"click",e.airplay,"airplay"),this.bind(t.buttons.settings,"click",(t=>{t.stopPropagation(),t.preventDefault(),ke.toggleMenu.call(e,t)}),null,!1),this.bind(t.buttons.settings,"keyup",(t=>{[" ","Enter"].includes(t.key)&&("Enter"!==t.key?(t.preventDefault(),t.stopPropagation(),ke.toggleMenu.call(e,t)):ke.focusFirstMenuItem.call(e,null,!0))}),null,!1),this.bind(t.settings.menu,"keydown",(t=>{"Escape"===t.key&&ke.toggleMenu.call(e,t)})),this.bind(t.inputs.seek,"mousedown mousemove",(e=>{const n=t.progress.getBoundingClientRect(),i=100/n.width*(e.pageX-n.left);e.currentTarget.setAttribute("seek-value",i)})),this.bind(t.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",(t=>{const n=t.currentTarget,i="play-on-seeked";if(C.keyboardEvent(t)&&!["ArrowLeft","ArrowRight"].includes(t.key))return;e.lastSeekTime=Date.now();const r=n.hasAttribute(i),a=["mouseup","touchend","keyup"].includes(t.type);r&&a?(n.removeAttribute(i),re(e.play())):!a&&e.playing&&(n.setAttribute(i,""),e.pause())})),D.isIos){const t=G.call(e,'input[type="range"]');Array.from(t).forEach((e=>this.bind(e,n,(e=>k(e.target)))))}this.bind(t.inputs.seek,n,(t=>{const n=t.currentTarget;let i=n.getAttribute("seek-value");C.empty(i)&&(i=n.value),n.removeAttribute("seek-value"),e.currentTime=i/n.max*e.duration}),"seek"),this.bind(t.progress,"mouseenter mouseleave mousemove",(t=>ke.updateSeekTooltip.call(e,t))),this.bind(t.progress,"mousemove touchmove",(t=>{const{previewThumbnails:n}=e;n&&n.loaded&&n.startMove(t)})),this.bind(t.progress,"mouseleave touchend click",(()=>{const{previewThumbnails:t}=e;t&&t.loaded&&t.endMove(!1,!0)})),this.bind(t.progress,"mousedown touchstart",(t=>{const{previewThumbnails:n}=e;n&&n.loaded&&n.startScrubbing(t)})),this.bind(t.progress,"mouseup touchend",(t=>{const{previewThumbnails:n}=e;n&&n.loaded&&n.endScrubbing(t)})),D.isWebKit&&Array.from(G.call(e,'input[type="range"]')).forEach((t=>{this.bind(t,"input",(t=>ke.updateRangeFill.call(e,t.target)))})),e.config.toggleInvert&&!C.element(t.display.duration)&&this.bind(t.display.currentTime,"click",(()=>{0!==e.currentTime&&(e.config.invertTime=!e.config.invertTime,ke.timeUpdate.call(e))})),this.bind(t.inputs.volume,n,(t=>{e.volume=t.target.value}),"volume"),this.bind(t.controls,"mouseenter mouseleave",(n=>{t.controls.hover=!e.touch&&"mouseenter"===n.type})),t.fullscreen&&Array.from(t.fullscreen.children).filter((e=>!e.contains(t.container))).forEach((n=>{this.bind(n,"mouseenter mouseleave",(n=>{t.controls&&(t.controls.hover=!e.touch&&"mouseenter"===n.type)}))})),this.bind(t.controls,"mousedown mouseup touchstart touchend touchcancel",(e=>{t.controls.pressed=["mousedown","touchstart"].includes(e.type)})),this.bind(t.controls,"focusin",(()=>{const{config:n,timers:i}=e;H(t.controls,n.classNames.noTransition,!0),$e.toggleControls.call(e,!0),setTimeout((()=>{H(t.controls,n.classNames.noTransition,!1)}),0);const r=this.touch?3e3:4e3;clearTimeout(i.controls),i.controls=setTimeout((()=>$e.toggleControls.call(e,!1)),r)})),this.bind(t.inputs.volume,"wheel",(t=>{const n=t.webkitDirectionInvertedFromDevice,[i,r]=[t.deltaX,-t.deltaY].map((e=>n?-e:e)),a=Math.sign(Math.abs(i)>Math.abs(r)?i:r);e.increaseVolume(a/50);const{volume:s}=e.media;(1===a&&s<1||-1===a&&s>0)&&t.preventDefault()}),"volume",!1)})),this.player=t,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(e){const{player:t}=this,{elements:n}=t,{key:i,type:r,altKey:a,ctrlKey:s,metaKey:o,shiftKey:l}=e,c="keydown"===r,d=c&&i===this.lastKey;var u;if(!(a||s||o||l)&&i)if(c){const r=document.activeElement;if(C.element(r)){const{editable:i}=t.config.selectors,{seek:a}=n.inputs;if(r!==a&&W(r,i))return;if(" "===e.key&&W(r,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(i)&&(e.preventDefault(),e.stopPropagation()),i){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":d||(u=parseInt(i,10),t.currentTime=t.duration/10*u);break;case" ":case"k":d||re(t.togglePlay());break;case"ArrowUp":t.increaseVolume(.1);break;case"ArrowDown":t.decreaseVolume(.1);break;case"m":d||(t.muted=!t.muted);break;case"ArrowRight":t.forward();break;case"ArrowLeft":t.rewind();break;case"f":t.fullscreen.toggle();break;case"c":d||t.toggleCaptions();break;case"l":t.loop=!t.loop}"Escape"===i&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=i}else this.lastKey=null}toggleMenu(e){ke.toggleMenu.call(this.player,e)}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self&&self;var Ge=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){e.exports=function(){var e=function(){},t={},n={},i={};function r(e,t){e=e.push?e:[e];var r,a,s,o=[],l=e.length,c=l;for(r=function(e,n){n.length&&o.push(e),--c||t(o)};l--;)a=e[l],(s=n[a])?r(a,s):(i[a]=i[a]||[]).push(r)}function a(e,t){if(e){var r=i[e];if(n[e]=t,r)for(;r.length;)r[0](e,t),r.splice(0,1)}}function s(t,n){t.call&&(t={success:t}),n.length?(t.error||e)(n):(t.success||e)(t)}function o(t,n,i,r){var a,s,l=document,c=i.async,d=(i.numRetries||0)+1,u=i.before||e,h=t.replace(/[\?|#].*$/,""),p=t.replace(/^(css|img)!/,"");r=r||0,/(^css!|\.css$)/.test(h)?((s=l.createElement("link")).rel="stylesheet",s.href=p,(a="hideFocus"in s)&&s.relList&&(a=0,s.rel="preload",s.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(h)?(s=l.createElement("img")).src=p:((s=l.createElement("script")).src=t,s.async=void 0===c||c),s.onload=s.onerror=s.onbeforeload=function(e){var l=e.type[0];if(a)try{s.sheet.cssText.length||(l="e")}catch(e){18!=e.code&&(l="e")}if("e"==l){if((r+=1)<d)return o(t,n,i,r)}else if("preload"==s.rel&&"style"==s.as)return s.rel="stylesheet";n(t,l,e.defaultPrevented)},!1!==u(t,s)&&l.head.appendChild(s)}function l(e,t,n){var i,r,a=(e=e.push?e:[e]).length,s=a,l=[];for(i=function(e,n,i){if("e"==n&&l.push(e),"b"==n){if(!i)return;l.push(e)}--a||t(l)},r=0;r<s;r++)o(e[r],i,n)}function c(e,n,i){var r,o;if(n&&n.trim&&(r=n),o=(r?i:n)||{},r){if(r in t)throw"LoadJS";t[r]=!0}function c(t,n){l(e,(function(e){s(o,e),t&&s({success:t,error:n},e),a(r,e)}),o)}if(o.returnPromise)return new Promise(c);c()}return c.ready=function(e,t){return r(e,(function(e){s(t,e)})),c},c.done=function(e){a(e,[])},c.reset=function(){t={},n={},i={}},c.isDefined=function(e){return e in t},c}()}));function je(e){return new Promise(((t,n)=>{Ge(e,{success:t,error:n})}))}function qe(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,te.call(this,this.media,e?"play":"pause"))}const Ye={setup(){const e=this;H(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,he.call(e),C.object(window.Vimeo)?Ye.ready.call(e):je(e.config.urls.vimeo.sdk).then((()=>{Ye.ready.call(e)})).catch((t=>{e.debug.warn("Vimeo SDK (player.js) failed to load",t)}))},ready(){const e=this,t=e.config.vimeo,{premium:n,referrerPolicy:i,...r}=t;let a=e.media.getAttribute("src"),s="";C.empty(a)?(a=e.media.getAttribute(e.config.attributes.embed.id),s=e.media.getAttribute(e.config.attributes.embed.hash)):s=function(e){const t=e.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return t&&5===t.length?t[4]:null}(a);const o=s?{h:s}:{};n&&Object.assign(r,{controls:!1,sidedock:!1});const l=Le({loop:e.config.loop.active,autoplay:e.autoplay,muted:e.muted,gesture:"media",playsinline:e.config.playsinline,...o,...r}),c=(d=a,C.empty(d)?null:C.number(Number(d))?d:d.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:d);var d;const u=O("iframe"),h=fe(e.config.urls.vimeo.iframe,c,l);if(u.setAttribute("src",h),u.setAttribute("allowfullscreen",""),u.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),C.empty(i)||u.setAttribute("referrerPolicy",i),n||!t.customControls)u.setAttribute("data-poster",e.poster),e.media=U(u,e.media);else{const t=O("div",{class:e.config.classNames.embedContainer,"data-poster":e.poster});t.appendChild(u),e.media=U(t,e.media)}t.customControls||Se(fe(e.config.urls.vimeo.api,h)).then((t=>{!C.empty(t)&&t.thumbnail_url&&$e.setPoster.call(e,t.thumbnail_url).catch((()=>{}))})),e.embed=new window.Vimeo.Player(u,{autopause:e.config.autopause,muted:e.muted}),e.media.paused=!0,e.media.currentTime=0,e.supported.ui&&e.embed.disableTextTrack(),e.media.play=()=>(qe.call(e,!0),e.embed.play()),e.media.pause=()=>(qe.call(e,!1),e.embed.pause()),e.media.stop=()=>{e.pause(),e.currentTime=0};let{currentTime:p}=e.media;Object.defineProperty(e.media,"currentTime",{get:()=>p,set(t){const{embed:n,media:i,paused:r,volume:a}=e,s=r&&!n.hasPlayed;i.seeking=!0,te.call(e,i,"seeking"),Promise.resolve(s&&n.setVolume(0)).then((()=>n.setCurrentTime(t))).then((()=>s&&n.pause())).then((()=>s&&n.setVolume(a))).catch((()=>{}))}});let m=e.config.speed.selected;Object.defineProperty(e.media,"playbackRate",{get:()=>m,set(t){e.embed.setPlaybackRate(t).then((()=>{m=t,te.call(e,e.media,"ratechange")})).catch((()=>{e.options.speed=[1]}))}});let{volume:f}=e.config;Object.defineProperty(e.media,"volume",{get:()=>f,set(t){e.embed.setVolume(t).then((()=>{f=t,te.call(e,e.media,"volumechange")}))}});let{muted:g}=e.config;Object.defineProperty(e.media,"muted",{get:()=>g,set(t){const n=!!C.boolean(t)&&t;e.embed.setMuted(!!n||e.config.muted).then((()=>{g=n,te.call(e,e.media,"volumechange")}))}});let v,{loop:_}=e.config;Object.defineProperty(e.media,"loop",{get:()=>_,set(t){const n=C.boolean(t)?t:e.config.loop.active;e.embed.setLoop(n).then((()=>{_=n}))}}),e.embed.getVideoUrl().then((t=>{v=t,ke.setDownloadUrl.call(e)})).catch((e=>{this.debug.warn(e)})),Object.defineProperty(e.media,"currentSrc",{get:()=>v}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration}),Promise.all([e.embed.getVideoWidth(),e.embed.getVideoHeight()]).then((t=>{const[n,i]=t;e.embed.ratio=pe(n,i),he.call(this)})),e.embed.setAutopause(e.config.autopause).then((t=>{e.config.autopause=t})),e.embed.getVideoTitle().then((t=>{e.config.title=t,$e.setTitle.call(this)})),e.embed.getCurrentTime().then((t=>{p=t,te.call(e,e.media,"timeupdate")})),e.embed.getDuration().then((t=>{e.media.duration=t,te.call(e,e.media,"durationchange")})),e.embed.getTextTracks().then((t=>{e.media.textTracks=t,Ie.setup.call(e)})),e.embed.on("cuechange",(({cues:t=[]})=>{const n=t.map((e=>function(e){const t=document.createDocumentFragment(),n=document.createElement("div");return t.appendChild(n),n.innerHTML=e,t.firstChild.innerText}(e.text)));Ie.updateCues.call(e,n)})),e.embed.on("loaded",(()=>{e.embed.getPaused().then((t=>{qe.call(e,!t),t||te.call(e,e.media,"playing")})),C.element(e.embed.element)&&e.supported.ui&&e.embed.element.setAttribute("tabindex",-1)})),e.embed.on("bufferstart",(()=>{te.call(e,e.media,"waiting")})),e.embed.on("bufferend",(()=>{te.call(e,e.media,"playing")})),e.embed.on("play",(()=>{qe.call(e,!0),te.call(e,e.media,"playing")})),e.embed.on("pause",(()=>{qe.call(e,!1)})),e.embed.on("timeupdate",(t=>{e.media.seeking=!1,p=t.seconds,te.call(e,e.media,"timeupdate")})),e.embed.on("progress",(t=>{e.media.buffered=t.percent,te.call(e,e.media,"progress"),1===parseInt(t.percent,10)&&te.call(e,e.media,"canplaythrough"),e.embed.getDuration().then((t=>{t!==e.media.duration&&(e.media.duration=t,te.call(e,e.media,"durationchange"))}))})),e.embed.on("seeked",(()=>{e.media.seeking=!1,te.call(e,e.media,"seeked")})),e.embed.on("ended",(()=>{e.media.paused=!0,te.call(e,e.media,"ended")})),e.embed.on("error",(t=>{e.media.error=t,te.call(e,e.media,"error")})),t.customControls&&setTimeout((()=>$e.build.call(e)),0)}};function Xe(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,te.call(this,this.media,e?"play":"pause"))}function Ke(e){return e.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0}const Ze={setup(){if(H(this.elements.wrapper,this.config.classNames.embed,!0),C.object(window.YT)&&C.function(window.YT.Player))Ze.ready.call(this);else{const e=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{C.function(e)&&e(),Ze.ready.call(this)},je(this.config.urls.youtube.sdk).catch((e=>{this.debug.warn("YouTube API failed to load",e)}))}},getTitle(e){Se(fe(this.config.urls.youtube.api,e)).then((e=>{if(C.object(e)){const{title:t,height:n,width:i}=e;this.config.title=t,$e.setTitle.call(this),this.embed.ratio=pe(i,n)}he.call(this)})).catch((()=>{he.call(this)}))},ready(){const e=this,t=e.config.youtube,n=e.media&&e.media.getAttribute("id");if(!C.empty(n)&&n.startsWith("youtube-"))return;let i=e.media.getAttribute("src");C.empty(i)&&(i=e.media.getAttribute(this.config.attributes.embed.id));const r=(a=i,C.empty(a)?null:a.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:a);var a;const s=O("div",{id:`${e.provider}-${Math.floor(1e4*Math.random())}`,"data-poster":t.customControls?e.poster:void 0});if(e.media=U(s,e.media),t.customControls){const t=e=>`https://i.ytimg.com/vi/${r}/${e}default.jpg`;He(t("maxres"),121).catch((()=>He(t("sd"),121))).catch((()=>He(t("hq")))).then((t=>$e.setPoster.call(e,t.src))).then((t=>{t.includes("maxres")||(e.elements.poster.style.backgroundSize="cover")})).catch((()=>{}))}e.embed=new window.YT.Player(e.media,{videoId:r,host:Ke(t),playerVars:I({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui&&t.customControls?0:1,disablekb:1,playsinline:e.config.playsinline&&!e.config.fullscreen.iosNative?1:0,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},t),events:{onError(t){if(!e.media.error){const n=t.data,i={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[n]||"An unknown error occurred";e.media.error={code:n,message:i},te.call(e,e.media,"error")}},onPlaybackRateChange(t){const n=t.target;e.media.playbackRate=n.getPlaybackRate(),te.call(e,e.media,"ratechange")},onReady(n){if(C.function(e.media.play))return;const i=n.target;Ze.getTitle.call(e,r),e.media.play=()=>{Xe.call(e,!0),i.playVideo()},e.media.pause=()=>{Xe.call(e,!1),i.pauseVideo()},e.media.stop=()=>{i.stopVideo()},e.media.duration=i.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get:()=>Number(i.getCurrentTime()),set(t){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,te.call(e,e.media,"seeking"),i.seekTo(t)}}),Object.defineProperty(e.media,"playbackRate",{get:()=>i.getPlaybackRate(),set(e){i.setPlaybackRate(e)}});let{volume:a}=e.config;Object.defineProperty(e.media,"volume",{get:()=>a,set(t){a=t,i.setVolume(100*a),te.call(e,e.media,"volumechange")}});let{muted:s}=e.config;Object.defineProperty(e.media,"muted",{get:()=>s,set(t){const n=C.boolean(t)?t:s;s=n,i[n?"mute":"unMute"](),i.setVolume(100*a),te.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"currentSrc",{get:()=>i.getVideoUrl()}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration});const o=i.getAvailablePlaybackRates();e.options.speed=o.filter((t=>e.config.speed.options.includes(t))),e.supported.ui&&t.customControls&&e.media.setAttribute("tabindex",-1),te.call(e,e.media,"timeupdate"),te.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval((()=>{e.media.buffered=i.getVideoLoadedFraction(),(null===e.media.lastBuffered||e.media.lastBuffered<e.media.buffered)&&te.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,1===e.media.buffered&&(clearInterval(e.timers.buffering),te.call(e,e.media,"canplaythrough"))}),200),t.customControls&&setTimeout((()=>$e.build.call(e)),50)},onStateChange(n){const i=n.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(n.data)&&(e.media.seeking=!1,te.call(e,e.media,"seeked")),n.data){case-1:te.call(e,e.media,"timeupdate"),e.media.buffered=i.getVideoLoadedFraction(),te.call(e,e.media,"progress");break;case 0:Xe.call(e,!1),e.media.loop?(i.stopVideo(),i.playVideo()):te.call(e,e.media,"ended");break;case 1:t.customControls&&!e.config.autoplay&&e.media.paused&&!e.embed.hasPlayed?e.media.pause():(Xe.call(e,!0),te.call(e,e.media,"playing"),e.timers.playing=setInterval((()=>{te.call(e,e.media,"timeupdate")}),50),e.media.duration!==i.getDuration()&&(e.media.duration=i.getDuration(),te.call(e,e.media,"durationchange")));break;case 2:e.muted||e.embed.unMute(),Xe.call(e,!1);break;case 3:te.call(e,e.media,"waiting")}te.call(e,e.elements.container,"statechange",!1,{code:n.data})}}})}},Je={setup(){this.media?(H(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),H(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&H(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=O("div",{class:this.config.classNames.video}),P(this.media,this.elements.wrapper),this.elements.poster=O("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?me.setup.call(this):this.isYouTube?Ze.setup.call(this):this.isVimeo&&Ye.setup.call(this)):this.debug.warn("No media element found!")}};class Qe{constructor(t){e(this,"load",(()=>{this.enabled&&(C.object(window.google)&&C.object(window.google.ima)?this.ready():je(this.player.config.urls.googleIMA.sdk).then((()=>{this.ready()})).catch((()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))})))})),e(this,"ready",(()=>{var e;this.enabled||((e=this).manager&&e.manager.destroy(),e.elements.displayContainer&&e.elements.displayContainer.destroy(),e.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then((()=>{this.clearSafetyTimer("onAdsManagerLoaded()")})),this.listeners(),this.setupIMA()})),e(this,"setupIMA",(()=>{this.elements.container=O("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(e=>this.onAdsManagerLoaded(e)),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(e=>this.onAdError(e)),!1),this.requestAds()})),e(this,"requestAds",(()=>{const{container:e}=this.player.elements;try{const t=new google.ima.AdsRequest;t.adTagUrl=this.tagUrl,t.linearAdSlotWidth=e.offsetWidth,t.linearAdSlotHeight=e.offsetHeight,t.nonLinearAdSlotWidth=e.offsetWidth,t.nonLinearAdSlotHeight=e.offsetHeight,t.forceNonLinearFullSlot=!1,t.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(t)}catch(e){this.onAdError(e)}})),e(this,"pollCountdown",((e=!1)=>{if(!e)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval((()=>{const e=Ae(Math.max(this.manager.getRemainingTime(),0)),t=`${xe.get("advertisement",this.player.config)} - ${e}`;this.elements.container.setAttribute("data-badge-text",t)}),100)})),e(this,"onAdsManagerLoaded",(e=>{if(!this.enabled)return;const t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,t.enablePreloading=!0,this.manager=e.getAdsManager(this.player,t),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(e=>this.onAdError(e))),Object.keys(google.ima.AdEvent.Type).forEach((e=>{this.manager.addEventListener(google.ima.AdEvent.Type[e],(e=>this.onAdEvent(e)))})),this.trigger("loaded")})),e(this,"addCuePoints",(()=>{C.empty(this.cuePoints)||this.cuePoints.forEach((e=>{if(0!==e&&-1!==e&&e<this.player.duration){const t=this.player.elements.progress;if(C.element(t)){const n=100/this.player.duration*e,i=O("span",{class:this.player.config.classNames.cues});i.style.left=`${n.toString()}%`,t.appendChild(i)}}}))})),e(this,"onAdEvent",(e=>{const{container:t}=this.player.elements,n=e.getAd(),i=e.getAdData();switch((e=>{te.call(this.player,this.player.media,`ads${e.replace(/_/g,"").toLowerCase()}`)})(e.type),e.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),n.isLinear()||(n.width=t.offsetWidth,n.height=t.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:i.adError&&this.player.debug.warn(`Non-fatal ad error: ${i.adError.getMessage()}`)}})),e(this,"onAdError",(e=>{this.cancel(),this.player.debug.warn("Ads error",e)})),e(this,"listeners",(()=>{const{container:e}=this.player.elements;let t;this.player.on("canplay",(()=>{this.addCuePoints()})),this.player.on("ended",(()=>{this.loader.contentComplete()})),this.player.on("timeupdate",(()=>{t=this.player.currentTime})),this.player.on("seeked",(()=>{const e=this.player.currentTime;C.empty(this.cuePoints)||this.cuePoints.forEach(((n,i)=>{t<n&&n<e&&(this.manager.discardAdBreak(),this.cuePoints.splice(i,1))}))})),window.addEventListener("resize",(()=>{this.manager&&this.manager.resize(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL)}))})),e(this,"play",(()=>{const{container:e}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then((()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(e){this.onAdError(e)}})).catch((()=>{}))})),e(this,"resumeContent",(()=>{this.elements.container.style.zIndex="",this.playing=!1,re(this.player.media.play())})),e(this,"pauseContent",(()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()})),e(this,"cancel",(()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()})),e(this,"loadAds",(()=>{this.managerPromise.then((()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise((e=>{this.on("loaded",e),this.player.debug.log(this.manager)})),this.initialized=!1,this.requestAds()})).catch((()=>{}))})),e(this,"trigger",((e,...t)=>{const n=this.events[e];C.array(n)&&n.forEach((e=>{C.function(e)&&e.apply(this,t)}))})),e(this,"on",((e,t)=>(C.array(this.events[e])||(this.events[e]=[]),this.events[e].push(t),this))),e(this,"startSafetyTimer",((e,t)=>{this.player.debug.log(`Safety timer invoked from: ${t}`),this.safetyTimer=setTimeout((()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")}),e)})),e(this,"clearSafetyTimer",(e=>{C.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${e}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)})),this.player=t,this.config=t.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise(((e,t)=>{this.on("loaded",e),this.on("error",t)})),this.load()}get enabled(){const{config:e}=this;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!C.empty(e.publisherId)||C.url(e.tagUrl))}get tagUrl(){const{config:e}=this;return C.url(e.tagUrl)?e.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${Le({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId})}`}}function et(e=0,t=0,n=255){return Math.min(Math.max(e,t),n)}const tt=e=>{const t=[];return e.split(/\r\n\r\n|\n\n|\r\r/).forEach((e=>{const n={};e.split(/\r\n|\n|\r/).forEach((e=>{if(C.number(n.startTime)){if(!C.empty(e.trim())&&C.empty(n.text)){const t=e.trim().split("#xywh=");[n.text]=t,t[1]&&([n.x,n.y,n.w,n.h]=t[1].split(","))}}else{const t=e.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);t&&(n.startTime=60*Number(t[1]||0)*60+60*Number(t[2])+Number(t[3])+Number(`0.${t[4]}`),n.endTime=60*Number(t[6]||0)*60+60*Number(t[7])+Number(t[8])+Number(`0.${t[9]}`))}})),n.text&&t.push(n)})),t},nt=(e,t)=>{const n={};return e>t.width/t.height?(n.width=t.width,n.height=1/e*t.width):(n.height=t.height,n.width=e*t.height),n};class it{constructor(t){e(this,"load",(()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then((()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)}))})),e(this,"getThumbnails",(()=>new Promise((e=>{const{src:t}=this.player.config.previewThumbnails;if(C.empty(t))throw new Error("Missing previewThumbnails.src config attribute");const n=()=>{this.thumbnails.sort(((e,t)=>e.height-t.height)),this.player.debug.log("Preview thumbnails",this.thumbnails),e()};if(C.function(t))t((e=>{this.thumbnails=e,n()}));else{const e=(C.string(t)?[t]:t).map((e=>this.getThumbnail(e)));Promise.all(e).then(n)}})))),e(this,"getThumbnail",(e=>new Promise((t=>{Se(e).then((n=>{const i={frames:tt(n),height:null,urlPrefix:""};i.frames[0].text.startsWith("/")||i.frames[0].text.startsWith("http://")||i.frames[0].text.startsWith("https://")||(i.urlPrefix=e.substring(0,e.lastIndexOf("/")+1));const r=new Image;r.onload=()=>{i.height=r.naturalHeight,i.width=r.naturalWidth,this.thumbnails.push(i),t()},r.src=i.urlPrefix+i.frames[0].text}))})))),e(this,"startMove",(e=>{if(this.loaded&&C.event(e)&&["touchmove","mousemove"].includes(e.type)&&this.player.media.duration){if("touchmove"===e.type)this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var t,n;const i=this.player.elements.progress.getBoundingClientRect(),r=100/i.width*(e.pageX-i.left);this.seekTime=this.player.media.duration*(r/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=e.pageX,this.elements.thumb.time.innerText=Ae(this.seekTime);const a=null===(t=this.player.config.markers)||void 0===t||null===(n=t.points)||void 0===n?void 0:n.find((({time:e})=>e===Math.round(this.seekTime)));a&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${a.label}<br>`)}this.showImageAtCurrentTime()}})),e(this,"endMove",(()=>{this.toggleThumbContainer(!1,!0)})),e(this,"startScrubbing",(e=>{(C.nullOrUndefined(e.button)||!1===e.button||0===e.button)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))})),e(this,"endScrubbing",(()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):ee.call(this.player,this.player.media,"timeupdate",(()=>{this.mouseDown||this.toggleScrubbingContainer(!1)}))})),e(this,"listeners",(()=>{this.player.on("play",(()=>{this.toggleThumbContainer(!1,!0)})),this.player.on("seeked",(()=>{this.toggleThumbContainer(!1)})),this.player.on("timeupdate",(()=>{this.lastTime=this.player.media.currentTime}))})),e(this,"render",(()=>{this.elements.thumb.container=O("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=O("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const e=O("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=O("span",{},"00:00"),e.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(e),C.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=O("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)})),e(this,"destroy",(()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()})),e(this,"showImageAtCurrentTime",(()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const e=this.thumbnails[0].frames.findIndex((e=>this.seekTime>=e.startTime&&this.seekTime<=e.endTime)),t=e>=0;let n=0;this.mouseDown||this.toggleThumbContainer(t),t&&(this.thumbnails.forEach(((t,i)=>{this.loadedImages.includes(t.frames[e].text)&&(n=i)})),e!==this.showingThumb&&(this.showingThumb=e,this.loadImage(n)))})),e(this,"loadImage",((e=0)=>{const t=this.showingThumb,n=this.thumbnails[e],{urlPrefix:i}=n,r=n.frames[t],a=n.frames[t].text,s=i+a;if(this.currentImageElement&&this.currentImageElement.dataset.filename===a)this.showImage(this.currentImageElement,r,e,t,a,!1),this.currentImageElement.dataset.index=t,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const n=new Image;n.src=s,n.dataset.index=t,n.dataset.filename=a,this.showingThumbFilename=a,this.player.debug.log(`Loading image: ${s}`),n.onload=()=>this.showImage(n,r,e,t,a,!0),this.loadingImage=n,this.removeOldImages(n)}})),e(this,"showImage",((e,t,n,i,r,a=!0)=>{this.player.debug.log(`Showing thumb: ${r}. num: ${i}. qual: ${n}. newimg: ${a}`),this.setImageSizeAndOffset(e,t),a&&(this.currentImageContainer.appendChild(e),this.currentImageElement=e,this.loadedImages.includes(r)||this.loadedImages.push(r)),this.preloadNearby(i,!0).then(this.preloadNearby(i,!1)).then(this.getHigherQuality(n,e,t,r))})),e(this,"removeOldImages",(e=>{Array.from(this.currentImageContainer.children).forEach((t=>{if("img"!==t.tagName.toLowerCase())return;const n=this.usingSprites?500:1e3;if(t.dataset.index!==e.dataset.index&&!t.dataset.deleting){t.dataset.deleting=!0;const{currentImageContainer:e}=this;setTimeout((()=>{e.removeChild(t),this.player.debug.log(`Removing thumb: ${t.dataset.filename}`)}),n)}}))})),e(this,"preloadNearby",((e,t=!0)=>new Promise((n=>{setTimeout((()=>{const i=this.thumbnails[0].frames[e].text;if(this.showingThumbFilename===i){let r;r=t?this.thumbnails[0].frames.slice(e):this.thumbnails[0].frames.slice(0,e).reverse();let a=!1;r.forEach((e=>{const t=e.text;if(t!==i&&!this.loadedImages.includes(t)){a=!0,this.player.debug.log(`Preloading thumb filename: ${t}`);const{urlPrefix:e}=this.thumbnails[0],i=e+t,r=new Image;r.src=i,r.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${t}`),this.loadedImages.includes(t)||this.loadedImages.push(t),n()}}})),a||n()}}),300)})))),e(this,"getHigherQuality",((e,t,n,i)=>{if(e<this.thumbnails.length-1){let r=t.naturalHeight;this.usingSprites&&(r=n.h),r<this.thumbContainerHeight&&setTimeout((()=>{this.showingThumbFilename===i&&(this.player.debug.log(`Showing higher quality thumb for: ${i}`),this.loadImage(e+1))}),300)}})),e(this,"toggleThumbContainer",((e=!1,t=!1)=>{const n=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(n,e),!e&&t&&(this.showingThumb=null,this.showingThumbFilename=null)})),e(this,"toggleScrubbingContainer",((e=!1)=>{const t=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(t,e),e||(this.showingThumb=null,this.showingThumbFilename=null)})),e(this,"determineContainerAutoSizing",(()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)})),e(this,"setThumbContainerSizeAndPos",(()=>{const{imageContainer:e}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(e.clientHeight>20&&e.clientWidth<20){const t=Math.floor(e.clientHeight*this.thumbAspectRatio);e.style.width=`${t}px`}else if(e.clientHeight<20&&e.clientWidth>20){const t=Math.floor(e.clientWidth/this.thumbAspectRatio);e.style.height=`${t}px`}}else{const t=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);e.style.height=`${this.thumbContainerHeight}px`,e.style.width=`${t}px`}this.setThumbContainerPos()})),e(this,"setThumbContainerPos",(()=>{const e=this.player.elements.progress.getBoundingClientRect(),t=this.player.elements.container.getBoundingClientRect(),{container:n}=this.elements.thumb,i=t.left-e.left+10,r=t.right-e.left-n.clientWidth-10,a=this.mousePosX-e.left-n.clientWidth/2,s=et(a,i,r);n.style.left=`${s}px`,n.style.setProperty("--preview-arrow-offset",a-s+"px")})),e(this,"setScrubbingContainerSize",(()=>{const{width:e,height:t}=nt(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${e}px`,this.elements.scrubbing.container.style.height=`${t}px`})),e(this,"setImageSizeAndOffset",((e,t)=>{if(!this.usingSprites)return;const n=this.thumbContainerHeight/t.h;e.style.height=e.naturalHeight*n+"px",e.style.width=e.naturalWidth*n+"px",e.style.left=`-${t.x*n}px`,e.style.top=`-${t.y*n}px`})),this.player=t,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:e}=nt(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return e}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}const rt={insertElements(e,t){C.string(t)?N(e,this.media,{src:t}):C.array(t)&&t.forEach((t=>{N(e,this.media,t)}))},change(e){L(e,"sources.length")?(me.cancelRequests.call(this),this.destroy.call(this,(()=>{this.options.quality=[],B(this.media),this.media=null,C.element(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:t,type:n}=e,[{provider:i=Ne.html5,src:r}]=t,a="html5"===i?n:"div",s="html5"===i?{}:{src:r};Object.assign(this,{provider:i,type:n,supported:X.check(n,i,this.config.playsinline),media:O(a,s)}),this.elements.container.appendChild(this.media),C.boolean(e.autoplay)&&(this.config.autoplay=e.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),C.empty(e.poster)||(this.poster=e.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),$e.addStyleHook.call(this),this.isHTML5&&rt.insertElements.call(this,"source",t),this.config.title=e.title,Je.setup.call(this),this.isHTML5&&Object.keys(e).includes("tracks")&&rt.insertElements.call(this,"track",e.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&$e.build.call(this),this.isHTML5&&this.media.load(),C.empty(e.previewThumbnails)||(Object.assign(this.config.previewThumbnails,e.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new it(this))),this.fullscreen.update()}),!0)):this.debug.warn("Invalid source format")}};class at{constructor(t,n){if(e(this,"play",(()=>C.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then((()=>this.ads.play())).catch((()=>re(this.media.play()))),this.media.play()):null)),e(this,"pause",(()=>this.playing&&C.function(this.media.pause)?this.media.pause():null)),e(this,"togglePlay",(e=>(C.boolean(e)?e:!this.playing)?this.play():this.pause())),e(this,"stop",(()=>{this.isHTML5?(this.pause(),this.restart()):C.function(this.media.stop)&&this.media.stop()})),e(this,"restart",(()=>{this.currentTime=0})),e(this,"rewind",(e=>{this.currentTime-=C.number(e)?e:this.config.seekTime})),e(this,"forward",(e=>{this.currentTime+=C.number(e)?e:this.config.seekTime})),e(this,"increaseVolume",(e=>{const t=this.media.muted?0:this.volume;this.volume=t+(C.number(e)?e:0)})),e(this,"decreaseVolume",(e=>{this.increaseVolume(-e)})),e(this,"airplay",(()=>{X.airplay&&this.media.webkitShowPlaybackTargetPicker()})),e(this,"toggleControls",(e=>{if(this.supported.ui&&!this.isAudio){const t=$(this.elements.container,this.config.classNames.hideControls),n=void 0===e?void 0:!e,i=H(this.elements.container,this.config.classNames.hideControls,n);if(i&&C.array(this.config.controls)&&this.config.controls.includes("settings")&&!C.empty(this.config.settings)&&ke.toggleMenu.call(this,!1),i!==t){const e=i?"controlshidden":"controlsshown";te.call(this,this.media,e)}return!i}return!1})),e(this,"on",((e,t)=>{J.call(this,this.elements.container,e,t)})),e(this,"once",((e,t)=>{ee.call(this,this.elements.container,e,t)})),e(this,"off",((e,t)=>{Q(this.elements.container,e,t)})),e(this,"destroy",((e,t=!1)=>{if(!this.ready)return;const n=()=>{document.body.style.overflow="",this.embed=null,t?(Object.keys(this.elements).length&&(B(this.elements.buttons.play),B(this.elements.captions),B(this.elements.controls),B(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),C.function(e)&&e()):(ne.call(this),me.cancelRequests.call(this),U(this.elements.original,this.elements.container),te.call(this,this.elements.original,"destroyed",!0),C.function(e)&&e.call(this.elements.original),this.ready=!1,setTimeout((()=>{this.elements=null,this.media=null}),200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?($e.toggleNativeControls.call(this,!0),n()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),null!==this.embed&&C.function(this.embed.destroy)&&this.embed.destroy(),n()):this.isVimeo&&(null!==this.embed&&this.embed.unload().then(n),setTimeout(n,200))})),e(this,"supports",(e=>X.mime.call(this,e))),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=X.touch,this.media=t,C.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof i||C.nodeList(this.media)||C.array(this.media))&&(this.media=this.media[0]),this.config=I({},Pe,at.defaults,n||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch(e){return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new ze(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",X),C.nullOrUndefined(this.media)||!C.element(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!X.check().api)return void this.debug.error("Setup failed: no support");const r=this.media.cloneNode(!0);r.autoplay=!1,this.elements.original=r;const a=this.media.tagName.toLowerCase();let s=null,o=null;switch(a){case"div":if(s=this.media.querySelector("iframe"),C.element(s)){if(o=De(s.getAttribute("src")),this.provider=function(e){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(e)?Ne.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(e)?Ne.vimeo:null}(o.toString()),this.elements.container=this.media,this.media=s,this.elements.container.className="",o.search.length){const e=["1","true"];e.includes(o.searchParams.get("autoplay"))&&(this.config.autoplay=!0),e.includes(o.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=e.includes(o.searchParams.get("playsinline")),this.config.youtube.hl=o.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(C.empty(this.provider)||!Object.values(Ne).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=Fe;break;case"video":case"audio":this.type=a,this.provider=Ne.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=X.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new We(this),this.storage=new we(this),this.media.plyr=this,C.element(this.elements.container)||(this.elements.container=O("div"),P(this.media,this.elements.container)),$e.migrateStyles.call(this),$e.addStyleHook.call(this),Je.setup.call(this),this.config.debug&&J.call(this,this.elements.container,this.config.events.join(" "),(e=>{this.debug.log(`event: ${e.type}`)})),this.fullscreen=new Ve(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&$e.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new Qe(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",(()=>re(this.play()))),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new it(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===Ne.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===Ne.youtube}get isVimeo(){return this.provider===Ne.vimeo}get isVideo(){return this.type===Fe}get isAudio(){return this.type===Be}get playing(){return Boolean(this.ready&&!this.paused&&!this.ended)}get paused(){return Boolean(this.media.paused)}get stopped(){return Boolean(this.paused&&0===this.currentTime)}get ended(){return Boolean(this.media.ended)}set currentTime(e){if(!this.duration)return;const t=C.number(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:e}=this.media;return C.number(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}get seeking(){return Boolean(this.media.seeking)}get duration(){const e=parseFloat(this.config.duration),t=(this.media||{}).duration,n=C.number(t)&&t!==1/0?t:0;return e||n}set volume(e){let t=e;C.string(t)&&(t=Number(t)),C.number(t)||(t=this.storage.get("volume")),C.number(t)||({volume:t}=this.config),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!C.empty(e)&&this.muted&&t>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(e){let t=e;C.boolean(t)||(t=this.storage.get("muted")),C.boolean(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t}get muted(){return Boolean(this.media.muted)}get hasAudio(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}set speed(e){let t=null;C.number(e)&&(t=e),C.number(t)||(t=this.storage.get("speed")),C.number(t)||(t=this.config.speed.selected);const{minimumSpeed:n,maximumSpeed:i}=this;t=et(t,n,i),this.config.speed.selected=t,setTimeout((()=>{this.media&&(this.media.playbackRate=t)}),0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(e){const t=this.config.quality,n=this.options.quality;if(!n.length)return;let i=[!C.empty(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(C.number),r=!0;if(!n.includes(i)){const e=se(n,i);this.debug.warn(`Unsupported quality option: ${i}, using ${e} instead`),i=e,r=!1}t.selected=i,this.media.quality=i,r&&this.storage.set({quality:i})}get quality(){return this.media.quality}set loop(e){const t=C.boolean(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t}get loop(){return Boolean(this.media.loop)}set source(e){rt.change.call(this,e)}get source(){return this.media.currentSrc}get download(){const{download:e}=this.config.urls;return C.url(e)?e:this.source}set download(e){C.url(e)&&(this.config.urls.download=e,ke.setDownloadUrl.call(this))}set poster(e){this.isVideo?$e.setPoster.call(this,e,!1).catch((()=>{})):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const e=de(ue.call(this));return C.array(e)?e.join(":"):e}set ratio(e){this.isVideo?C.string(e)&&ce(e)?(this.config.ratio=de(e),he.call(this)):this.debug.error(`Invalid aspect ratio specified (${e})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(e){this.config.autoplay=C.boolean(e)?e:this.config.autoplay}get autoplay(){return Boolean(this.config.autoplay)}toggleCaptions(e){Ie.toggle.call(this,e,!1)}set currentTrack(e){Ie.set.call(this,e,!1),Ie.setup.call(this)}get currentTrack(){const{toggled:e,currentTrack:t}=this.captions;return e?t:-1}set language(e){Ie.setLanguage.call(this,e,!1)}get language(){return(Ie.getCurrentTrack.call(this)||{}).language}set pip(e){if(!X.pip)return;const t=C.boolean(e)?e:!this.pip;C.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?Re:Oe),C.function(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}get pip(){return X.pip?C.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===Re:null}setPreviewThumbnails(e){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,e),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new it(this))}static supported(e,t){return X.check(e,t)}static loadSprite(e,t){return Te(e,t)}static setup(e,t={}){let n=null;return C.string(e)?n=Array.from(document.querySelectorAll(e)):C.nodeList(e)?n=Array.from(e):C.array(e)&&(n=e.filter(C.element)),C.empty(n)?null:n.map((e=>new at(e,t)))}}var st;return at.defaults=(st=Pe,JSON.parse(JSON.stringify(st))),at}())},7489:function(e,t,n){"use strict";n.r(t),t.default={id:"ArrowLeft-usage",viewBox:"0 0 24 24",url:n.p+"sprite.svg#ArrowLeft",toString:function(){return this.url}}},8441:function(e,t,n){"use strict";n.r(t),t.default={id:"PencilSimple-usage",viewBox:"0 0 32 32",url:n.p+"sprite.svg#PencilSimple",toString:function(){return this.url}}},7299:function(e,t,n){"use strict";n.r(t),t.default={id:"account-icon-usage",viewBox:"0 0 18 17",url:n.p+"sprite.svg#account-icon",toString:function(){return this.url}}},3308:function(e,t,n){"use strict";n.r(t),t.default={id:"arrow-diagonal-usage",viewBox:"0 0 13 13",url:n.p+"sprite.svg#arrow-diagonal",toString:function(){return this.url}}},4067:function(e,t,n){"use strict";n.r(t),t.default={id:"arrow-down-usage",viewBox:"0 0 18 18",url:n.p+"sprite.svg#arrow-down",toString:function(){return this.url}}},2719:function(e,t,n){"use strict";n.r(t),t.default={id:"arrow-next-version2-usage",viewBox:"0 0 7 12",url:n.p+"sprite.svg#arrow-next-version2",toString:function(){return this.url}}},1417:function(e,t,n){"use strict";n.r(t),t.default={id:"arrow-right-cta-usage",viewBox:"0 0 17 18",url:n.p+"sprite.svg#arrow-right-cta",toString:function(){return this.url}}},9251:function(e,t,n){"use strict";n.r(t),t.default={id:"arrow_forward-usage",viewBox:"0 0 12 20",url:n.p+"sprite.svg#arrow_forward",toString:function(){return this.url}}},7867:function(e,t,n){"use strict";n.r(t),t.default={id:"close-usage",viewBox:"0 0 11 11",url:n.p+"sprite.svg#close",toString:function(){return this.url}}},2329:function(e,t,n){"use strict";n.r(t),t.default={id:"day-toggle-icon-usage",viewBox:"0 0 43 43",url:n.p+"sprite.svg#day-toggle-icon",toString:function(){return this.url}}},4081:function(e,t,n){"use strict";n.r(t),t.default={id:"delete-usage",viewBox:"0 0 17 18",url:n.p+"sprite.svg#delete",toString:function(){return this.url}}},1643:function(e,t,n){"use strict";n.r(t),t.default={id:"download-usage",viewBox:"0 0 18 19",url:n.p+"sprite.svg#download",toString:function(){return this.url}}},9846:function(e,t,n){"use strict";n.r(t),t.default={id:"drag-usage",viewBox:"0 0 116 64",url:n.p+"sprite.svg#drag",toString:function(){return this.url}}},9166:function(e,t,n){"use strict";n.r(t),t.default={id:"drag2-usage",viewBox:"0 0 64 64",url:n.p+"sprite.svg#drag2",toString:function(){return this.url}}},9434:function(e,t,n){"use strict";n.r(t),t.default={id:"edit-usage",viewBox:"0 0 13 13",url:n.p+"sprite.svg#edit",toString:function(){return this.url}}},881:function(e,t,n){"use strict";n.r(t),t.default={id:"failure-form-usage",viewBox:"0 0 94 93",url:n.p+"sprite.svg#failure-form",toString:function(){return this.url}}},4998:function(e,t,n){"use strict";n.r(t),t.default={id:"fingertouch-usage",viewBox:"0 0 32 32",url:n.p+"sprite.svg#fingertouch",toString:function(){return this.url}}},8485:function(e,t,n){"use strict";n.r(t),t.default={id:"instagram-usage",viewBox:"0 0 18 17",url:n.p+"sprite.svg#instagram",toString:function(){return this.url}}},4136:function(e,t,n){"use strict";n.r(t),t.default={id:"keyboard-usage",viewBox:"0 0 14 14",url:n.p+"sprite.svg#keyboard",toString:function(){return this.url}}},7438:function(e,t,n){"use strict";n.r(t),t.default={id:"linkedin-usage",viewBox:"0 0 18 17",url:n.p+"sprite.svg#linkedin",toString:function(){return this.url}}},8478:function(e,t,n){"use strict";n.r(t),t.default={id:"microphone-mute-usage",viewBox:"0 0 24 24",url:n.p+"sprite.svg#microphone-mute",toString:function(){return this.url}}},634:function(e,t,n){"use strict";n.r(t),t.default={id:"microphone-usage",viewBox:"0 0 28 28",url:n.p+"sprite.svg#microphone",toString:function(){return this.url}}},6561:function(e,t,n){"use strict";n.r(t),t.default={id:"minus-usage",viewBox:"0 0 24 25",url:n.p+"sprite.svg#minus",toString:function(){return this.url}}},182:function(e,t,n){"use strict";n.r(t),t.default={id:"mute-usage",viewBox:"0 0 24 24",url:n.p+"sprite.svg#mute",toString:function(){return this.url}}},2099:function(e,t,n){"use strict";n.r(t),t.default={id:"next-arrow-usage",viewBox:"0 0 24 24",url:n.p+"sprite.svg#next-arrow",toString:function(){return this.url}}},4805:function(e,t,n){"use strict";n.r(t),t.default={id:"night-toggle-icon-usage",viewBox:"0 0 43 43",url:n.p+"sprite.svg#night-toggle-icon",toString:function(){return this.url}}},4860:function(e,t,n){"use strict";n.r(t),t.default={id:"pause-usage",viewBox:"0 0 256 256",url:n.p+"sprite.svg#pause",toString:function(){return this.url}}},7261:function(e,t,n){"use strict";n.r(t),t.default={id:"play-audio-usage",viewBox:"0 0 23 27",url:n.p+"sprite.svg#play-audio",toString:function(){return this.url}}},3879:function(e,t,n){"use strict";n.r(t),t.default={id:"play-usage",viewBox:"-3 0 28 28",url:n.p+"sprite.svg#play",toString:function(){return this.url}}},8281:function(e,t,n){"use strict";n.r(t),t.default={id:"plus-usage",viewBox:"0 0 29 29",url:n.p+"sprite.svg#plus",toString:function(){return this.url}}},4336:function(e,t,n){"use strict";n.r(t),t.default={id:"previous-arrow-usage",viewBox:"0 0 24 24",url:n.p+"sprite.svg#previous-arrow",toString:function(){return this.url}}},4758:function(e,t,n){"use strict";n.r(t),t.default={id:"send-usage",viewBox:"0 0 28 28",url:n.p+"sprite.svg#send",toString:function(){return this.url}}},7196:function(e,t,n){"use strict";n.r(t),t.default={id:"success-form-usage",viewBox:"0 0 94 93",url:n.p+"sprite.svg#success-form",toString:function(){return this.url}}},2824:function(e,t,n){"use strict";n.r(t),t.default={id:"success-usage",viewBox:"0 0 94 93",url:n.p+"sprite.svg#success",toString:function(){return this.url}}},3558:function(e,t,n){"use strict";n.r(t),t.default={id:"swiper-carousel-arrow-usage",viewBox:"0 0 23 17",url:n.p+"sprite.svg#swiper-carousel-arrow",toString:function(){return this.url}}},4611:function(e,t,n){"use strict";n.r(t),t.default={id:"toggle-button-usage",viewBox:"0 0 43 43",url:n.p+"sprite.svg#toggle-button",toString:function(){return this.url}}},5811:function(e,t,n){"use strict";n.r(t),t.default={id:"unmute-usage",viewBox:"0 0 24 24",url:n.p+"sprite.svg#unmute",toString:function(){return this.url}}},5203:function(e,t,n){"use strict";n.r(t),t.default={id:"voice-wave-usage",viewBox:"0 0 11 13",url:n.p+"sprite.svg#voice-wave",toString:function(){return this.url}}},7013:function(e,t,n){"use strict";n.r(t),t.default={id:"x-usage",viewBox:"0 0 18 17",url:n.p+"sprite.svg#x",toString:function(){return this.url}}},9739:function(e,t,n){var i;(i=n(9320)).keys().forEach(i)},8112:function(e,t,n){var i=n(9755);"undefined"!=typeof window&&(window.$=window.jQuery=i)},9320:function(e,t,n){var i={"./ArrowLeft.svg":7489,"./PencilSimple.svg":8441,"./account-icon.svg":7299,"./arrow-diagonal.svg":3308,"./arrow-down.svg":4067,"./arrow-next-version2.svg":2719,"./arrow-right-cta.svg":1417,"./arrow_forward.svg":9251,"./close.svg":7867,"./day-toggle-icon.svg":2329,"./delete.svg":4081,"./download.svg":1643,"./drag.svg":9846,"./drag2.svg":9166,"./edit.svg":9434,"./failure-form.svg":881,"./fingertouch.svg":4998,"./instagram.svg":8485,"./keyboard.svg":4136,"./linkedin.svg":7438,"./microphone-mute.svg":8478,"./microphone.svg":634,"./minus.svg":6561,"./mute.svg":182,"./next-arrow.svg":2099,"./night-toggle-icon.svg":4805,"./pause.svg":4860,"./play-audio.svg":7261,"./play.svg":3879,"./plus.svg":8281,"./previous-arrow.svg":4336,"./send.svg":4758,"./success-form.svg":7196,"./success.svg":2824,"./swiper-carousel-arrow.svg":3558,"./toggle-button.svg":4611,"./unmute.svg":5811,"./voice-wave.svg":5203,"./x.svg":7013};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id=9320}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e+"../"}(),function(){"use strict";var e={};n.r(e),n.d(e,{afterMain:function(){return sn},afterRead:function(){return nn},afterWrite:function(){return cn},applyStyles:function(){return gn},arrow:function(){return Nn},auto:function(){return Wt},basePlacements:function(){return Gt},beforeMain:function(){return rn},beforeRead:function(){return en},beforeWrite:function(){return on},bottom:function(){return Vt},clippingParents:function(){return Yt},computeStyles:function(){return zn},createPopper:function(){return gi},createPopperBase:function(){return fi},createPopperLite:function(){return vi},detectOverflow:function(){return ni},end:function(){return qt},eventListeners:function(){return Hn},flip:function(){return ii},hide:function(){return si},left:function(){return $t},main:function(){return an},modifierPhases:function(){return dn},offset:function(){return oi},placements:function(){return Qt},popper:function(){return Kt},popperGenerator:function(){return mi},popperOffsets:function(){return li},preventOverflow:function(){return ci},read:function(){return tn},reference:function(){return Zt},right:function(){return Ht},start:function(){return jt},top:function(){return zt},variationPlacements:function(){return Jt},viewport:function(){return Xt},write:function(){return ln}});n(8112),n(9739);var t=n(9755);var i={eventsListeners:{DOMLOADED:"DOMContentLoaded",LOAD:"load",SCROLL:"scroll",CLICK:"click",KEYUP:"keyup",KEYPRESS:"keypress",KEYDOWN:"keydown",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSELEAVE:"mouseleave",HOVER:"hover",BLUR:"blur",FOCUS:"focus",CHANGE:"change",DOUBLECLICK:"dblclick",SUBMIT:"submit",PASTE:"paste",INPUT:"input",WINDOW:window,ADOBE_DATA_LAYER:window.adobeDataLayer||[],RESIZE:"resize",POINTER:"pointer",POINTERENTER:"pointerenter",POINTERMOVE:"pointermove",WHEEL:"wheel",TOUCH:"touch",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",TRANSITIONEND:"transitionend",BSMODALSHOW:"show.bs.modal",BSMODALSHOWN:"shown.bs.modal",BSMODALHIDE:"hide.bs.modal",BSMODALHIDDEN:"hidden.bs.modal",BSALERTCLOSE:"close.bs.alert",BSALERTCLOSED:"closed.bs.alert",BSCAROUSELSLIDE:"slid.bs.carousel",slideChange:"slideChange",beforeTransitionStart:"beforeTransitionStart",slideChangeTransitionEnd:"slideChangeTransitionEnd",videoMetadataLoaded:"loadedmetadata",videoEnded:"ended",timeUpdate:"timeupdate",loadedData:"loadeddata",visibilityChange:"visibilitychange"},keyboardKeys:{BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",ARROWLEFT:"ArrowLeft",ARROWUP:"ArrowUp",ARROWRIGHT:"ArrowRight",ARROWDOWN:"ArrowDown",SHIFT:"Shift",CONTROL:"Control",ALT:"Alt",META:"Meta",DELETE:"Delete",INSERT:"Insert",HOME:"Home",END:"End",PAGEUP:"PageUp",PAGEDOWN:"PageDown",CAPSLOCK:"CapsLock",NUMLOCK:"NumLock",SCROLLLOCK:"ScrollLock"},breakPoints:{EXTRA_SMALL:375,SMALL:576,MEDIUM:768,LARGE:1024,EXTRA_LARGE:1200,EXTRA_EXTRA_LARGE:1320,EXTRA_EXTRA_EXTRA_LARGE:1440},validationPatterns:{OTP_REGEX:/^\d+$/,DIGIT_REGEX:/^\d$/,NAME_REGEX:/^([a-zA-Z]+)$/,MOBILE_REGEX:/^[6-9][0-9]{9}$/,EMP_ID_REGEX:/^\d{8}$/,EMAIL_REGEX:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,PAN_REGEX:/^([a-zA-Z]){3}(C|P|H|F|A|T|B|L|J|G|c|p|h|f|a|t|b|l|j|g){1}([a-zA-Z]){1}([0-9]){4}([a-zA-Z]){1}?$/,DATE_REGEX:/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[0-2])\/\d{4}$/,PINCODE_REGEX:/^[1-9][0-9]{5}$/},validationLimits:{NAME_MIN_CHAR:3,MAX_OTP_ATTEMPTS:5},timeIntervals:{OTP_RESEND_TIME:30,OTP_RESET_TIME:90},headerAnimation:{headerSplashDelay:1400},videoConfig:{controls:["play","progress","current-time","mute","volume","fullscreen"],autoplay:!1,settings:["quality","speed"],tooltips:{controls:!0,seek:!0},loadSprite:!1,iconURL:"/etc.clientlibs/mg-select/clientlibs/clientlib-site/resources/images/sprite/sprite.svg"},webLinks:{url:"https://www.mgselect.co.in/"},isEditMode:t("main").data("iseditmode"),confettiColors:["#f94144","#f3722c","#f9c74f","#90be6d","#43aa8b","#577590","#277da1","#9c89b8"]},r=n(1443),a=n.n(r);let s=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&n[e]];return t};var o=n(9755);const l={variable:{plyr:".video",productBannerVideo:".product__banner--video",hotSpotVideo:".hot__spot__init--video",plyrInstances:{}},methods:{initializePlyr:function(e,t={}){const{videoConfig:n}=i,{plyrInstances:r}=this.variable,l={...n,...t};o(e).each((function(e,t){const n=t.id||s();t.id=n;const i=new(a())(t,l);r[n]=i}))},observeVideos:function(){const{plyrInstances:e,plyr:t,productBannerVideo:n,hotSpotVideo:i}=this.variable,r=o(".mg-select-scroller").eq(0).find(".video:visible");r.length&&(r.get(0).muted=!0);const a=new IntersectionObserver((t=>{t.forEach((t=>{const n=t.target.id,i=e[n];t.isIntersecting?i.play():i.pause()}))}),{threshold:.5});o(`${t}:not(${n}):not(${i})`).each((function(e,t){a.observe(t)}))},init:function(){const{plyr:e}=l.variable;o(e).length&&(this.initializePlyr.call(l,e),this.observeVideos.call(l))}}};var c,d;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),i={};for(const e of n)i[e]=t[e];return e.objectValues(i)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(c||(c={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(d||(d={}));const u=c.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),h=e=>{switch(typeof e){case"undefined":return u.undefined;case"string":return u.string;case"number":return isNaN(e)?u.nan:u.number;case"boolean":return u.boolean;case"function":return u.function;case"bigint":return u.bigint;case"symbol":return u.symbol;case"object":return Array.isArray(e)?u.array:null===e?u.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?u.promise:"undefined"!=typeof Map&&e instanceof Map?u.map:"undefined"!=typeof Set&&e instanceof Set?u.set:"undefined"!=typeof Date&&e instanceof Date?u.date:u.object;default:return u.unknown}},p=c.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class m extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},i=e=>{for(const r of e.issues)if("invalid_union"===r.code)r.unionErrors.map(i);else if("invalid_return_type"===r.code)i(r.returnTypeError);else if("invalid_arguments"===r.code)i(r.argumentsError);else if(0===r.path.length)n._errors.push(t(r));else{let e=n,i=0;for(;i<r.path.length;){const n=r.path[i];i===r.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(r))):e[n]=e[n]||{_errors:[]},e=e[n],i++}}};return i(this),n}static assert(e){if(!(e instanceof m))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,c.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},n=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}m.create=e=>new m(e);const f=(e,t)=>{let n;switch(e.code){case p.invalid_type:n=e.received===u.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case p.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,c.jsonStringifyReplacer)}`;break;case p.unrecognized_keys:n=`Unrecognized key(s) in object: ${c.joinValues(e.keys,", ")}`;break;case p.invalid_union:n="Invalid input";break;case p.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${c.joinValues(e.options)}`;break;case p.invalid_enum_value:n=`Invalid enum value. Expected ${c.joinValues(e.options)}, received '${e.received}'`;break;case p.invalid_arguments:n="Invalid function arguments";break;case p.invalid_return_type:n="Invalid function return type";break;case p.invalid_date:n="Invalid date";break;case p.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:c.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case p.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case p.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case p.custom:n="Invalid input";break;case p.invalid_intersection_types:n="Intersection results could not be merged";break;case p.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case p.not_finite:n="Number must be finite";break;default:n=t.defaultError,c.assertNever(e)}return{message:n}};let g=f;function v(){return g}const _=e=>{const{data:t,path:n,errorMaps:i,issueData:r}=e,a=[...n,...r.path||[]],s={...r,path:a};if(void 0!==r.message)return{...r,path:a,message:r.message};let o="";const l=i.filter((e=>!!e)).slice().reverse();for(const e of l)o=e(s,{data:t,defaultError:o}).message;return{...r,path:a,message:o}};function b(e,t){const n=v(),i=_({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===f?void 0:f].filter((e=>!!e))});e.common.issues.push(i)}class y{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const i of t){if("aborted"===i.status)return x;"dirty"===i.status&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t){const t=await e.key,i=await e.value;n.push({key:t,value:i})}return y.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const i of t){const{key:t,value:r}=i;if("aborted"===t.status)return x;if("aborted"===r.status)return x;"dirty"===t.status&&e.dirty(),"dirty"===r.status&&e.dirty(),"__proto__"===t.value||void 0===r.value&&!i.alwaysSet||(n[t.value]=r.value)}return{status:e.value,value:n}}}const x=Object.freeze({status:"aborted"}),w=e=>({status:"dirty",value:e}),S=e=>({status:"valid",value:e}),T=e=>"aborted"===e.status,E=e=>"dirty"===e.status,M=e=>"valid"===e.status,C=e=>"undefined"!=typeof Promise&&e instanceof Promise;function A(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)}function k(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n}var D,L,I;"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(D||(D={}));class P{constructor(e,t,n,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const R=(e,t)=>{if(M(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new m(e.common.issues);return this._error=t,this._error}}};function O(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:i,description:r}=e;if(t&&(n||i))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:r};return{errorMap:(t,r)=>{var a,s;const{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:r.defaultError}:void 0===r.data?{message:null!==(a=null!=o?o:i)&&void 0!==a?a:r.defaultError}:"invalid_type"!==t.code?{message:r.defaultError}:{message:null!==(s=null!=o?o:n)&&void 0!==s?s:r.defaultError}},description:r}}class N{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return h(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:h(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new y,ctx:{common:e.parent.common,data:e.data,parsedType:h(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(C(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const i={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:h(e)},r=this._parseSync({data:e,path:i.path,parent:i});return R(i,r)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:h(e)},i=this._parse({data:e,path:n.path,parent:n}),r=await(C(i)?i:Promise.resolve(i));return R(n,r)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,i)=>{const r=e(t),a=()=>i.addIssue({code:p.custom,...n(t)});return"undefined"!=typeof Promise&&r instanceof Promise?r.then((e=>!!e||(a(),!1))):!!r||(a(),!1)}))}refinement(e,t){return this._refinement(((n,i)=>!!e(n)||(i.addIssue("function"==typeof t?t(n,i):t),!1)))}_refinement(e){return new De({schema:this,typeName:He.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Le.create(this,this._def)}nullable(){return Ie.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ue.create(this,this._def)}promise(){return ke.create(this,this._def)}or(e){return me.create([this,e],this._def)}and(e){return _e.create(this,e,this._def)}transform(e){return new De({...O(this._def),schema:this,typeName:He.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Pe({...O(this._def),innerType:this,defaultValue:t,typeName:He.ZodDefault})}brand(){return new Be({typeName:He.ZodBranded,type:this,...O(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Re({...O(this._def),innerType:this,catchValue:t,typeName:He.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Fe.create(this,e)}readonly(){return Ue.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const B=/^c[^\s-]{8,}$/i,F=/^[0-9a-z]+$/,U=/^[0-9A-HJKMNP-TV-Z]{26}$/,z=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,V=/^[a-z0-9_-]{21}$/i,H=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,$=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let W;const G=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,j=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,q=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Y="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",X=new RegExp(`^${Y}$`);function K(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function Z(e){let t=`${Y}T${K(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}class J extends N{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==u.string){const t=this._getOrReturnCtx(e);return b(t,{code:p.invalid_type,expected:u.string,received:t.parsedType}),x}const t=new y;let n;for(const a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(n=this._getOrReturnCtx(e,n),b(n,{code:p.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("max"===a.kind)e.data.length>a.value&&(n=this._getOrReturnCtx(e,n),b(n,{code:p.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("length"===a.kind){const i=e.data.length>a.value,r=e.data.length<a.value;(i||r)&&(n=this._getOrReturnCtx(e,n),i?b(n,{code:p.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):r&&b(n,{code:p.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),t.dirty())}else if("email"===a.kind)$.test(e.data)||(n=this._getOrReturnCtx(e,n),b(n,{validation:"email",code:p.invalid_string,message:a.message}),t.dirty());else if("emoji"===a.kind)W||(W=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),W.test(e.data)||(n=this._getOrReturnCtx(e,n),b(n,{validation:"emoji",code:p.invalid_string,message:a.message}),t.dirty());else if("uuid"===a.kind)z.test(e.data)||(n=this._getOrReturnCtx(e,n),b(n,{validation:"uuid",code:p.invalid_string,message:a.message}),t.dirty());else if("nanoid"===a.kind)V.test(e.data)||(n=this._getOrReturnCtx(e,n),b(n,{validation:"nanoid",code:p.invalid_string,message:a.message}),t.dirty());else if("cuid"===a.kind)B.test(e.data)||(n=this._getOrReturnCtx(e,n),b(n,{validation:"cuid",code:p.invalid_string,message:a.message}),t.dirty());else if("cuid2"===a.kind)F.test(e.data)||(n=this._getOrReturnCtx(e,n),b(n,{validation:"cuid2",code:p.invalid_string,message:a.message}),t.dirty());else if("ulid"===a.kind)U.test(e.data)||(n=this._getOrReturnCtx(e,n),b(n,{validation:"ulid",code:p.invalid_string,message:a.message}),t.dirty());else if("url"===a.kind)try{new URL(e.data)}catch(i){n=this._getOrReturnCtx(e,n),b(n,{validation:"url",code:p.invalid_string,message:a.message}),t.dirty()}else if("regex"===a.kind){a.regex.lastIndex=0;a.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),b(n,{validation:"regex",code:p.invalid_string,message:a.message}),t.dirty())}else if("trim"===a.kind)e.data=e.data.trim();else if("includes"===a.kind)e.data.includes(a.value,a.position)||(n=this._getOrReturnCtx(e,n),b(n,{code:p.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),t.dirty());else if("toLowerCase"===a.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===a.kind)e.data=e.data.toUpperCase();else if("startsWith"===a.kind)e.data.startsWith(a.value)||(n=this._getOrReturnCtx(e,n),b(n,{code:p.invalid_string,validation:{startsWith:a.value},message:a.message}),t.dirty());else if("endsWith"===a.kind)e.data.endsWith(a.value)||(n=this._getOrReturnCtx(e,n),b(n,{code:p.invalid_string,validation:{endsWith:a.value},message:a.message}),t.dirty());else if("datetime"===a.kind){Z(a).test(e.data)||(n=this._getOrReturnCtx(e,n),b(n,{code:p.invalid_string,validation:"datetime",message:a.message}),t.dirty())}else if("date"===a.kind){X.test(e.data)||(n=this._getOrReturnCtx(e,n),b(n,{code:p.invalid_string,validation:"date",message:a.message}),t.dirty())}else if("time"===a.kind){new RegExp(`^${K(a)}$`).test(e.data)||(n=this._getOrReturnCtx(e,n),b(n,{code:p.invalid_string,validation:"time",message:a.message}),t.dirty())}else"duration"===a.kind?H.test(e.data)||(n=this._getOrReturnCtx(e,n),b(n,{validation:"duration",code:p.invalid_string,message:a.message}),t.dirty()):"ip"===a.kind?(i=e.data,("v4"!==(r=a.version)&&r||!G.test(i))&&("v6"!==r&&r||!j.test(i))&&(n=this._getOrReturnCtx(e,n),b(n,{validation:"ip",code:p.invalid_string,message:a.message}),t.dirty())):"base64"===a.kind?q.test(e.data)||(n=this._getOrReturnCtx(e,n),b(n,{validation:"base64",code:p.invalid_string,message:a.message}),t.dirty()):c.assertNever(a);var i,r;return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:p.invalid_string,...D.errToObj(n)})}_addCheck(e){return new J({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...D.errToObj(e)})}url(e){return this._addCheck({kind:"url",...D.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...D.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...D.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...D.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...D.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...D.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...D.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...D.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...D.errToObj(e)})}datetime(e){var t,n;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null==e?void 0:e.local)&&void 0!==n&&n,...D.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...D.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...D.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...D.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...D.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...D.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...D.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...D.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...D.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...D.errToObj(t)})}nonempty(e){return this.min(1,D.errToObj(e))}trim(){return new J({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new J({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new J({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Q(e,t){const n=(e.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,r=n>i?n:i;return parseInt(e.toFixed(r).replace(".",""))%parseInt(t.toFixed(r).replace(".",""))/Math.pow(10,r)}J.create=e=>{var t;return new J({checks:[],typeName:He.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...O(e)})};class ee extends N{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==u.number){const t=this._getOrReturnCtx(e);return b(t,{code:p.invalid_type,expected:u.number,received:t.parsedType}),x}let t;const n=new y;for(const i of this._def.checks)if("int"===i.kind)c.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),b(t,{code:p.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty());else if("min"===i.kind){(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),b(t,{code:p.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty())}else if("max"===i.kind){(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),b(t,{code:p.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty())}else"multipleOf"===i.kind?0!==Q(e.data,i.value)&&(t=this._getOrReturnCtx(e,t),b(t,{code:p.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):"finite"===i.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),b(t,{code:p.not_finite,message:i.message}),n.dirty()):c.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,D.toString(t))}gt(e,t){return this.setLimit("min",e,!1,D.toString(t))}lte(e,t){return this.setLimit("max",e,!0,D.toString(t))}lt(e,t){return this.setLimit("max",e,!1,D.toString(t))}setLimit(e,t,n,i){return new ee({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:D.toString(i)}]})}_addCheck(e){return new ee({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:D.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:D.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:D.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:D.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:D.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:D.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:D.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:D.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:D.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&c.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ee.create=e=>new ee({checks:[],typeName:He.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...O(e)});class te extends N{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==u.bigint){const t=this._getOrReturnCtx(e);return b(t,{code:p.invalid_type,expected:u.bigint,received:t.parsedType}),x}let t;const n=new y;for(const i of this._def.checks)if("min"===i.kind){(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),b(t,{code:p.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty())}else if("max"===i.kind){(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),b(t,{code:p.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty())}else"multipleOf"===i.kind?e.data%i.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),b(t,{code:p.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):c.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,D.toString(t))}gt(e,t){return this.setLimit("min",e,!1,D.toString(t))}lte(e,t){return this.setLimit("max",e,!0,D.toString(t))}lt(e,t){return this.setLimit("max",e,!1,D.toString(t))}setLimit(e,t,n,i){return new te({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:D.toString(i)}]})}_addCheck(e){return new te({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:D.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:D.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:D.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:D.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:D.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}te.create=e=>{var t;return new te({checks:[],typeName:He.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...O(e)})};class ne extends N{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==u.boolean){const t=this._getOrReturnCtx(e);return b(t,{code:p.invalid_type,expected:u.boolean,received:t.parsedType}),x}return S(e.data)}}ne.create=e=>new ne({typeName:He.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...O(e)});class ie extends N{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==u.date){const t=this._getOrReturnCtx(e);return b(t,{code:p.invalid_type,expected:u.date,received:t.parsedType}),x}if(isNaN(e.data.getTime())){return b(this._getOrReturnCtx(e),{code:p.invalid_date}),x}const t=new y;let n;for(const i of this._def.checks)"min"===i.kind?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),b(n,{code:p.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),t.dirty()):"max"===i.kind?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),b(n,{code:p.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),t.dirty()):c.assertNever(i);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ie({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:D.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:D.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}ie.create=e=>new ie({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:He.ZodDate,...O(e)});class re extends N{_parse(e){if(this._getType(e)!==u.symbol){const t=this._getOrReturnCtx(e);return b(t,{code:p.invalid_type,expected:u.symbol,received:t.parsedType}),x}return S(e.data)}}re.create=e=>new re({typeName:He.ZodSymbol,...O(e)});class ae extends N{_parse(e){if(this._getType(e)!==u.undefined){const t=this._getOrReturnCtx(e);return b(t,{code:p.invalid_type,expected:u.undefined,received:t.parsedType}),x}return S(e.data)}}ae.create=e=>new ae({typeName:He.ZodUndefined,...O(e)});class se extends N{_parse(e){if(this._getType(e)!==u.null){const t=this._getOrReturnCtx(e);return b(t,{code:p.invalid_type,expected:u.null,received:t.parsedType}),x}return S(e.data)}}se.create=e=>new se({typeName:He.ZodNull,...O(e)});class oe extends N{constructor(){super(...arguments),this._any=!0}_parse(e){return S(e.data)}}oe.create=e=>new oe({typeName:He.ZodAny,...O(e)});class le extends N{constructor(){super(...arguments),this._unknown=!0}_parse(e){return S(e.data)}}le.create=e=>new le({typeName:He.ZodUnknown,...O(e)});class ce extends N{_parse(e){const t=this._getOrReturnCtx(e);return b(t,{code:p.invalid_type,expected:u.never,received:t.parsedType}),x}}ce.create=e=>new ce({typeName:He.ZodNever,...O(e)});class de extends N{_parse(e){if(this._getType(e)!==u.undefined){const t=this._getOrReturnCtx(e);return b(t,{code:p.invalid_type,expected:u.void,received:t.parsedType}),x}return S(e.data)}}de.create=e=>new de({typeName:He.ZodVoid,...O(e)});class ue extends N{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),i=this._def;if(t.parsedType!==u.array)return b(t,{code:p.invalid_type,expected:u.array,received:t.parsedType}),x;if(null!==i.exactLength){const e=t.data.length>i.exactLength.value,r=t.data.length<i.exactLength.value;(e||r)&&(b(t,{code:e?p.too_big:p.too_small,minimum:r?i.exactLength.value:void 0,maximum:e?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(null!==i.minLength&&t.data.length<i.minLength.value&&(b(t,{code:p.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),null!==i.maxLength&&t.data.length>i.maxLength.value&&(b(t,{code:p.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>i.type._parseAsync(new P(t,e,t.path,n))))).then((e=>y.mergeArray(n,e)));const r=[...t.data].map(((e,n)=>i.type._parseSync(new P(t,e,t.path,n))));return y.mergeArray(n,r)}get element(){return this._def.type}min(e,t){return new ue({...this._def,minLength:{value:e,message:D.toString(t)}})}max(e,t){return new ue({...this._def,maxLength:{value:e,message:D.toString(t)}})}length(e,t){return new ue({...this._def,exactLength:{value:e,message:D.toString(t)}})}nonempty(e){return this.min(1,e)}}function he(e){if(e instanceof pe){const t={};for(const n in e.shape){const i=e.shape[n];t[n]=Le.create(he(i))}return new pe({...e._def,shape:()=>t})}return e instanceof ue?new ue({...e._def,type:he(e.element)}):e instanceof Le?Le.create(he(e.unwrap())):e instanceof Ie?Ie.create(he(e.unwrap())):e instanceof be?be.create(e.items.map((e=>he(e)))):e}ue.create=(e,t)=>new ue({type:e,minLength:null,maxLength:null,exactLength:null,typeName:He.ZodArray,...O(t)});class pe extends N{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=c.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==u.object){const t=this._getOrReturnCtx(e);return b(t,{code:p.invalid_type,expected:u.object,received:t.parsedType}),x}const{status:t,ctx:n}=this._processInputParams(e),{shape:i,keys:r}=this._getCached(),a=[];if(!(this._def.catchall instanceof ce&&"strip"===this._def.unknownKeys))for(const e in n.data)r.includes(e)||a.push(e);const s=[];for(const e of r){const t=i[e],r=n.data[e];s.push({key:{status:"valid",value:e},value:t._parse(new P(n,r,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof ce){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of a)s.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)a.length>0&&(b(n,{code:p.unrecognized_keys,keys:a}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of a){const i=n.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new P(n,i,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of s){const n=await t.key,i=await t.value;e.push({key:n,value:i,alwaysSet:t.alwaysSet})}return e})).then((e=>y.mergeObjectSync(t,e))):y.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return D.errToObj,new pe({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var i,r,a,s;const o=null!==(a=null===(r=(i=this._def).errorMap)||void 0===r?void 0:r.call(i,t,n).message)&&void 0!==a?a:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(s=D.errToObj(e).message)&&void 0!==s?s:o}:{message:o}}}:{}})}strip(){return new pe({...this._def,unknownKeys:"strip"})}passthrough(){return new pe({...this._def,unknownKeys:"passthrough"})}extend(e){return new pe({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new pe({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:He.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new pe({...this._def,catchall:e})}pick(e){const t={};return c.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new pe({...this._def,shape:()=>t})}omit(e){const t={};return c.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new pe({...this._def,shape:()=>t})}deepPartial(){return he(this)}partial(e){const t={};return c.objectKeys(this.shape).forEach((n=>{const i=this.shape[n];e&&!e[n]?t[n]=i:t[n]=i.optional()})),new pe({...this._def,shape:()=>t})}required(e){const t={};return c.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof Le;)e=e._def.innerType;t[n]=e}})),new pe({...this._def,shape:()=>t})}keyof(){return Me(c.objectKeys(this.shape))}}pe.create=(e,t)=>new pe({shape:()=>e,unknownKeys:"strip",catchall:ce.create(),typeName:He.ZodObject,...O(t)}),pe.strictCreate=(e,t)=>new pe({shape:()=>e,unknownKeys:"strict",catchall:ce.create(),typeName:He.ZodObject,...O(t)}),pe.lazycreate=(e,t)=>new pe({shape:e,unknownKeys:"strip",catchall:ce.create(),typeName:He.ZodObject,...O(t)});class me extends N{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new m(e.ctx.common.issues)));return b(t,{code:p.invalid_union,unionErrors:n}),x}));{let e;const i=[];for(const r of n){const n={...t,common:{...t.common,issues:[]},parent:null},a=r._parseSync({data:t.data,path:t.path,parent:n});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:n}),n.common.issues.length&&i.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const r=i.map((e=>new m(e)));return b(t,{code:p.invalid_union,unionErrors:r}),x}}get options(){return this._def.options}}me.create=(e,t)=>new me({options:e,typeName:He.ZodUnion,...O(t)});const fe=e=>e instanceof Te?fe(e.schema):e instanceof De?fe(e.innerType()):e instanceof Ee?[e.value]:e instanceof Ce?e.options:e instanceof Ae?c.objectValues(e.enum):e instanceof Pe?fe(e._def.innerType):e instanceof ae?[void 0]:e instanceof se?[null]:e instanceof Le?[void 0,...fe(e.unwrap())]:e instanceof Ie?[null,...fe(e.unwrap())]:e instanceof Be||e instanceof Ue?fe(e.unwrap()):e instanceof Re?fe(e._def.innerType):[];class ge extends N{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==u.object)return b(t,{code:p.invalid_type,expected:u.object,received:t.parsedType}),x;const n=this.discriminator,i=t.data[n],r=this.optionsMap.get(i);return r?t.common.async?r._parseAsync({data:t.data,path:t.path,parent:t}):r._parseSync({data:t.data,path:t.path,parent:t}):(b(t,{code:p.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),x)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const i=new Map;for(const n of t){const t=fe(n.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const r of t){if(i.has(r))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(r)}`);i.set(r,n)}}return new ge({typeName:He.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...O(n)})}}function ve(e,t){const n=h(e),i=h(t);if(e===t)return{valid:!0,data:e};if(n===u.object&&i===u.object){const n=c.objectKeys(t),i=c.objectKeys(e).filter((e=>-1!==n.indexOf(e))),r={...e,...t};for(const n of i){const i=ve(e[n],t[n]);if(!i.valid)return{valid:!1};r[n]=i.data}return{valid:!0,data:r}}if(n===u.array&&i===u.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let i=0;i<e.length;i++){const r=ve(e[i],t[i]);if(!r.valid)return{valid:!1};n.push(r.data)}return{valid:!0,data:n}}return n===u.date&&i===u.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class _e extends N{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),i=(e,i)=>{if(T(e)||T(i))return x;const r=ve(e.value,i.value);return r.valid?((E(e)||E(i))&&t.dirty(),{status:t.value,value:r.data}):(b(n,{code:p.invalid_intersection_types}),x)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>i(e,t))):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}_e.create=(e,t,n)=>new _e({left:e,right:t,typeName:He.ZodIntersection,...O(n)});class be extends N{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==u.array)return b(n,{code:p.invalid_type,expected:u.array,received:n.parsedType}),x;if(n.data.length<this._def.items.length)return b(n,{code:p.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),x;!this._def.rest&&n.data.length>this._def.items.length&&(b(n,{code:p.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...n.data].map(((e,t)=>{const i=this._def.items[t]||this._def.rest;return i?i._parse(new P(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(i).then((e=>y.mergeArray(t,e))):y.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new be({...this._def,rest:e})}}be.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new be({items:e,typeName:He.ZodTuple,rest:null,...O(t)})};class ye extends N{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==u.object)return b(n,{code:p.invalid_type,expected:u.object,received:n.parsedType}),x;const i=[],r=this._def.keyType,a=this._def.valueType;for(const e in n.data)i.push({key:r._parse(new P(n,e,n.path,e)),value:a._parse(new P(n,n.data[e],n.path,e)),alwaysSet:e in n.data});return n.common.async?y.mergeObjectAsync(t,i):y.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,n){return new ye(t instanceof N?{keyType:e,valueType:t,typeName:He.ZodRecord,...O(n)}:{keyType:J.create(),valueType:e,typeName:He.ZodRecord,...O(t)})}}class xe extends N{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==u.map)return b(n,{code:p.invalid_type,expected:u.map,received:n.parsedType}),x;const i=this._def.keyType,r=this._def.valueType,a=[...n.data.entries()].map((([e,t],a)=>({key:i._parse(new P(n,e,n.path,[a,"key"])),value:r._parse(new P(n,t,n.path,[a,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of a){const i=await n.key,r=await n.value;if("aborted"===i.status||"aborted"===r.status)return x;"dirty"!==i.status&&"dirty"!==r.status||t.dirty(),e.set(i.value,r.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of a){const i=n.key,r=n.value;if("aborted"===i.status||"aborted"===r.status)return x;"dirty"!==i.status&&"dirty"!==r.status||t.dirty(),e.set(i.value,r.value)}return{status:t.value,value:e}}}}xe.create=(e,t,n)=>new xe({valueType:t,keyType:e,typeName:He.ZodMap,...O(n)});class we extends N{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==u.set)return b(n,{code:p.invalid_type,expected:u.set,received:n.parsedType}),x;const i=this._def;null!==i.minSize&&n.data.size<i.minSize.value&&(b(n,{code:p.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),null!==i.maxSize&&n.data.size>i.maxSize.value&&(b(n,{code:p.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const r=this._def.valueType;function a(e){const n=new Set;for(const i of e){if("aborted"===i.status)return x;"dirty"===i.status&&t.dirty(),n.add(i.value)}return{status:t.value,value:n}}const s=[...n.data.values()].map(((e,t)=>r._parse(new P(n,e,n.path,t))));return n.common.async?Promise.all(s).then((e=>a(e))):a(s)}min(e,t){return new we({...this._def,minSize:{value:e,message:D.toString(t)}})}max(e,t){return new we({...this._def,maxSize:{value:e,message:D.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}we.create=(e,t)=>new we({valueType:e,minSize:null,maxSize:null,typeName:He.ZodSet,...O(t)});class Se extends N{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==u.function)return b(t,{code:p.invalid_type,expected:u.function,received:t.parsedType}),x;function n(e,n){return _({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,v(),f].filter((e=>!!e)),issueData:{code:p.invalid_arguments,argumentsError:n}})}function i(e,n){return _({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,v(),f].filter((e=>!!e)),issueData:{code:p.invalid_return_type,returnTypeError:n}})}const r={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof ke){const e=this;return S((async function(...t){const s=new m([]),o=await e._def.args.parseAsync(t,r).catch((e=>{throw s.addIssue(n(t,e)),s})),l=await Reflect.apply(a,this,o);return await e._def.returns._def.type.parseAsync(l,r).catch((e=>{throw s.addIssue(i(l,e)),s}))}))}{const e=this;return S((function(...t){const s=e._def.args.safeParse(t,r);if(!s.success)throw new m([n(t,s.error)]);const o=Reflect.apply(a,this,s.data),l=e._def.returns.safeParse(o,r);if(!l.success)throw new m([i(o,l.error)]);return l.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Se({...this._def,args:be.create(e).rest(le.create())})}returns(e){return new Se({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new Se({args:e||be.create([]).rest(le.create()),returns:t||le.create(),typeName:He.ZodFunction,...O(n)})}}class Te extends N{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Te.create=(e,t)=>new Te({getter:e,typeName:He.ZodLazy,...O(t)});class Ee extends N{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return b(t,{received:t.data,code:p.invalid_literal,expected:this._def.value}),x}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Me(e,t){return new Ce({values:e,typeName:He.ZodEnum,...O(t)})}Ee.create=(e,t)=>new Ee({value:e,typeName:He.ZodLiteral,...O(t)});class Ce extends N{constructor(){super(...arguments),L.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return b(t,{expected:c.joinValues(n),received:t.parsedType,code:p.invalid_type}),x}if(A(this,L,"f")||k(this,L,new Set(this._def.values),"f"),!A(this,L,"f").has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return b(t,{received:t.data,code:p.invalid_enum_value,options:n}),x}return S(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ce.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ce.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}L=new WeakMap,Ce.create=Me;class Ae extends N{constructor(){super(...arguments),I.set(this,void 0)}_parse(e){const t=c.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==u.string&&n.parsedType!==u.number){const e=c.objectValues(t);return b(n,{expected:c.joinValues(e),received:n.parsedType,code:p.invalid_type}),x}if(A(this,I,"f")||k(this,I,new Set(c.getValidEnumValues(this._def.values)),"f"),!A(this,I,"f").has(e.data)){const e=c.objectValues(t);return b(n,{received:n.data,code:p.invalid_enum_value,options:e}),x}return S(e.data)}get enum(){return this._def.values}}I=new WeakMap,Ae.create=(e,t)=>new Ae({values:e,typeName:He.ZodNativeEnum,...O(t)});class ke extends N{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==u.promise&&!1===t.common.async)return b(t,{code:p.invalid_type,expected:u.promise,received:t.parsedType}),x;const n=t.parsedType===u.promise?t.data:Promise.resolve(t.data);return S(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}ke.create=(e,t)=>new ke({type:e,typeName:He.ZodPromise,...O(t)});class De extends N{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===He.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),i=this._def.effect||null,r={addIssue:e=>{b(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(r.addIssue=r.addIssue.bind(r),"preprocess"===i.type){const e=i.transform(n.data,r);if(n.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return x;const i=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===i.status?x:"dirty"===i.status||"dirty"===t.value?w(i.value):i}));{if("aborted"===t.value)return x;const i=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===i.status?x:"dirty"===i.status||"dirty"===t.value?w(i.value):i}}if("refinement"===i.type){const e=e=>{const t=i.refinement(e,r);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===i.status?x:("dirty"===i.status&&t.dirty(),e(i.value),{status:t.value,value:i.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?x:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===i.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!M(e))return e;const a=i.transform(e.value,r);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>M(e)?Promise.resolve(i.transform(e.value,r)).then((e=>({status:t.value,value:e}))):e))}c.assertNever(i)}}De.create=(e,t,n)=>new De({schema:e,typeName:He.ZodEffects,effect:t,...O(n)}),De.createWithPreprocess=(e,t,n)=>new De({schema:t,effect:{type:"preprocess",transform:e},typeName:He.ZodEffects,...O(n)});class Le extends N{_parse(e){return this._getType(e)===u.undefined?S(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Le.create=(e,t)=>new Le({innerType:e,typeName:He.ZodOptional,...O(t)});class Ie extends N{_parse(e){return this._getType(e)===u.null?S(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ie.create=(e,t)=>new Ie({innerType:e,typeName:He.ZodNullable,...O(t)});class Pe extends N{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===u.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Pe.create=(e,t)=>new Pe({innerType:e,typeName:He.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...O(t)});class Re extends N{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return C(i)?i.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new m(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===i.status?i.value:this._def.catchValue({get error(){return new m(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Re.create=(e,t)=>new Re({innerType:e,typeName:He.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...O(t)});class Oe extends N{_parse(e){if(this._getType(e)!==u.nan){const t=this._getOrReturnCtx(e);return b(t,{code:p.invalid_type,expected:u.nan,received:t.parsedType}),x}return{status:"valid",value:e.data}}}Oe.create=e=>new Oe({typeName:He.ZodNaN,...O(e)});const Ne=Symbol("zod_brand");class Be extends N{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Fe extends N{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?x:"dirty"===e.status?(t.dirty(),w(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?x:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new Fe({in:e,out:t,typeName:He.ZodPipeline})}}class Ue extends N{_parse(e){const t=this._def.innerType._parse(e),n=e=>(M(e)&&(e.value=Object.freeze(e.value)),e);return C(t)?t.then((e=>n(e))):n(t)}unwrap(){return this._def.innerType}}function ze(e,t={},n){return e?oe.create().superRefine(((i,r)=>{var a,s;if(!e(i)){const e="function"==typeof t?t(i):"string"==typeof t?{message:t}:t,o=null===(s=null!==(a=e.fatal)&&void 0!==a?a:n)||void 0===s||s,l="string"==typeof e?{message:e}:e;r.addIssue({code:"custom",...l,fatal:o})}})):oe.create()}Ue.create=(e,t)=>new Ue({innerType:e,typeName:He.ZodReadonly,...O(t)});const Ve={object:pe.lazycreate};var He;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(He||(He={}));const $e=J.create,We=ee.create,Ge=Oe.create,je=te.create,qe=ne.create,Ye=ie.create,Xe=re.create,Ke=ae.create,Ze=se.create,Je=oe.create,Qe=le.create,et=ce.create,tt=de.create,nt=ue.create,it=pe.create,rt=pe.strictCreate,at=me.create,st=ge.create,ot=_e.create,lt=be.create,ct=ye.create,dt=xe.create,ut=we.create,ht=Se.create,pt=Te.create,mt=Ee.create,ft=Ce.create,gt=Ae.create,vt=ke.create,_t=De.create,bt=Le.create,yt=Ie.create,xt=De.createWithPreprocess,wt=Fe.create,St={string:e=>J.create({...e,coerce:!0}),number:e=>ee.create({...e,coerce:!0}),boolean:e=>ne.create({...e,coerce:!0}),bigint:e=>te.create({...e,coerce:!0}),date:e=>ie.create({...e,coerce:!0})},Tt=x;var Et=Object.freeze({__proto__:null,defaultErrorMap:f,setErrorMap:function(e){g=e},getErrorMap:v,makeIssue:_,EMPTY_PATH:[],addIssueToContext:b,ParseStatus:y,INVALID:x,DIRTY:w,OK:S,isAborted:T,isDirty:E,isValid:M,isAsync:C,get util(){return c},get objectUtil(){return d},ZodParsedType:u,getParsedType:h,ZodType:N,datetimeRegex:Z,ZodString:J,ZodNumber:ee,ZodBigInt:te,ZodBoolean:ne,ZodDate:ie,ZodSymbol:re,ZodUndefined:ae,ZodNull:se,ZodAny:oe,ZodUnknown:le,ZodNever:ce,ZodVoid:de,ZodArray:ue,ZodObject:pe,ZodUnion:me,ZodDiscriminatedUnion:ge,ZodIntersection:_e,ZodTuple:be,ZodRecord:ye,ZodMap:xe,ZodSet:we,ZodFunction:Se,ZodLazy:Te,ZodLiteral:Ee,ZodEnum:Ce,ZodNativeEnum:Ae,ZodPromise:ke,ZodEffects:De,ZodTransformer:De,ZodOptional:Le,ZodNullable:Ie,ZodDefault:Pe,ZodCatch:Re,ZodNaN:Oe,BRAND:Ne,ZodBranded:Be,ZodPipeline:Fe,ZodReadonly:Ue,custom:ze,Schema:N,ZodSchema:N,late:Ve,get ZodFirstPartyTypeKind(){return He},coerce:St,any:Je,array:nt,bigint:je,boolean:qe,date:Ye,discriminatedUnion:st,effect:_t,enum:ft,function:ht,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>ze((t=>t instanceof e),t),intersection:ot,lazy:pt,literal:mt,map:dt,nan:Ge,nativeEnum:gt,never:et,null:Ze,nullable:yt,number:We,object:it,oboolean:()=>qe().optional(),onumber:()=>We().optional(),optional:bt,ostring:()=>$e().optional(),pipeline:wt,preprocess:xt,promise:vt,record:ct,set:ut,strictObject:rt,string:$e,symbol:Xe,transformer:_t,tuple:lt,undefined:Ke,union:at,unknown:Qe,void:tt,NEVER:Tt,ZodIssueCode:p,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:m}),Mt=n(9755);const Ct={variables:{forms:".mg-select__form",labels:".mg-select__form-label",inputs:".mg-select__form-input",validationText:".mg-select__form-validate",zodSchemas:{}},methods:{addIdsToFormFields(){const{labels:e,inputs:t,validationText:n}=this.variables;Mt(e).each((function(){const e=s(10);Mt(this).attr("for",e),Mt(this).siblings(t).attr("id",e)})),Mt(t).each((function(){const e=s(10);Mt(this).attr("aria-describedby",e),Mt(this).siblings(n).attr("id",e)}))},getZodLiteral(e,t="string",n=!0,i=null,r=null){let a=Et;return"string"==t?(a=a.string({required_error:Mt(e).data("required-error")}),!0===n&&(a=a.min(1,{message:Mt(e).data("required-error")})),i&&(a=a.regex(i,{message:Mt(e).data("invalid-error")})),r&&(a=a.min(r,{message:Mt(e).data("limit-error")}))):"boolean"==t&&(a=a.boolean({required_error:Mt(e).data("required-error")}).refine((e=>!0===e),{message:Mt(e).data("required-error")})),a},generateFieldSchema(e,t,n){const{getZodLiteral:r}=Ct.methods,{NAME_REGEX:a,MOBILE_REGEX:s,EMAIL_REGEX:o,PAN_REGEX:l,DATE_REGEX:c,EMP_ID_REGEX:d,PINCODE_REGEX:u}=i.validationPatterns,h=Mt(t).find(`[name='${e}']`);let p=Mt(h).data("min-limit");const m={firstName:(p=p?parseInt(p):i.validationLimits.NAME_MIN_CHAR,r(h,"string",!0,a,p)),lastName:(p=p?parseInt(p):i.validationLimits.NAME_MIN_CHAR,r(h,"string",!0,a,p)),mobilePhone:r(h,"string",!0,s),email:r(h,"string",!0,o),city:r(h,"string",!0),address1:r(h,"string",!0),address2:r(h,"string",!0),pan:r(h,"string",!0,l),dob:r(h,"string",!0,c),BookedDateValue:r(h,"string",!0,c),otp:r(h,"string",!0),consent:r(h,"boolean"),dealerEmpID:r(h,"string",!0,d),model:r(h),pincode:r(h,"string",!0,u),dealership:r(h,"string",!0),serviceType:r(h,"string",!0),ExpectedPurchaseDate:r(h,"string",!0),BookedDateValue:r(h,"string",!0),mileage:r(h,"string",!0)};n[e]=m[e]},generateFormSchema(e,t,n){const i={},{zodSchemas:r}=this.variables,{generateFieldSchema:a}=this.methods;Mt.each(e,(function(){a(this,t,i)})),r[n]=Et.object(i)},handleOtpEvents(e){const{KEYDOWN:t,PASTE:n,INPUT:r}=i.eventsListeners,{OTP_REGEX:a,DIGIT_REGEX:s}=i.validationPatterns;let o="";Mt(e).each((function(){Mt(this).on({[r]:function(t){const n=Mt(this).val();if(n.length>1){if(o+=n,o.length>=4&&a.test(o)){const t=o.slice(0,4).split("");Mt(e).each((function(e){Mt(this).val(t[e]||"")})),Mt(e.last()).focus(),o=""}}else{const e=Mt(this).next();e.length&&e.focus()}},[n]:function(t){const n=t.originalEvent.clipboardData.getData("text");if(a.test(n)){const t=n.split("");Mt(e).each((function(e){Mt(this).val(t[e]||"")})),Mt(e.last()).focus()}t.preventDefault()},[t]:function(e){const t=e.key,{ARROWLEFT:n,ARROWRIGHT:r,BACKSPACE:a,ENTER:o,ARROWUP:l,ARROWDOWN:c}=i.keyboardKeys;if(s.test(t)){Mt(this).val(t);const n=Mt(this).next();n.length&&n.focus(),e.preventDefault()}else if(t===r){const e=Mt(this).next();e.length&&e.focus()}else if(t===n){const e=Mt(this).prev();e.length&&e.focus()}else if(t===a){if(""==Mt(this).val()){const e=Mt(this).prev();e.length&&(e.focus(),e.val(""))}else Mt(this).val("");e.preventDefault()}else t!==l&&t!==c||e.preventDefault()}})}))},handleNumberInput(e){Mt(e).on({[i.eventsListeners.KEYDOWN]:function(e){const t=e.key,n=e.ctrlKey||e.metaKey,{BACKSPACE:r,DELETE:a,TAB:s,ESCAPE:o,ENTER:l,ARROWLEFT:c,ARROWRIGHT:d}=i.keyboardKeys,u=n&&["a","c","v","x"].includes(t.toLowerCase());1===t?.length&&!isNaN(t)||t===r||t===a||t===s||t===o||t===l||t===c||t===d||u||e.preventDefault()},[i.eventsListeners.PASTE]:function(e){const t=(e.originalEvent||e).clipboardData.getData("text");isNaN(t)&&e.preventDefault()},[i.eventsListeners.INPUT]:function(){const e=Mt(this).val();Mt(this).val(e.replace(/\D/g,""))}})},handleDateField(e){const{KEYDOWN:t,INPUT:n}=i.eventsListeners,{BACKSPACE:r,DELETE:a,ARROWLEFT:s,ARROWRIGHT:o,HOME:l,END:c}=i.keyboardKeys,d=e=>e<=2?e:e<=5?e-1:e-2,u=(e,t,n)=>{const i=(e=>{let t="";return e.length>=2?t+=e.slice(0,2)+"/":t+=e,e.length>=4?t+=e.slice(2,4)+"/":e.length>2&&(t+=e.slice(2)),e.length>4&&(t+=e.slice(4,8)),t})(t);e.value=i;const r=(a=Math.min(n,t.length))<=2?a:a<=4?a+1:a+2;var a;e.setSelectionRange(r,r)};Mt(e).each((function(){const e=this;Mt(e).on(t,(function(t){const n=e.value.replace(/\D/g,""),i=e.selectionStart,h=e.selectionEnd,p=d(i);if(/^\d$/.test(t.key)){t.preventDefault();let i=n.slice(0,p)+t.key+n.slice(p);return i=i.slice(0,8),void u(e,i,p+1)}if(t.key!==r){if(t.key!==a){if(t.key===s){t.preventDefault();let n=i-1;return 2!==n&&5!==n||n--,n<0&&(n=0),void e.setSelectionRange(n,n)}if(t.key===o){t.preventDefault();let n=i+1;return 2!==n&&5!==n||n++,n>e.value.length&&(n=e.value.length),void e.setSelectionRange(n,n)}if([l,c].includes(t.key))return t.preventDefault(),void(t.key===l?e.setSelectionRange(0,0):e.setSelectionRange(e.value.length,e.value.length))}else if(t.preventDefault(),i!==h){const t=n.slice(0,d(i))+n.slice(d(h));u(e,t,d(i))}else if(p<n.length){const t=n.slice(0,p)+n.slice(p+1);u(e,t,p)}}else if(t.preventDefault(),i!==h){const t=n.slice(0,d(i))+n.slice(d(h));u(e,t,d(i))}else if(p>0){const t=n.slice(0,p-1)+n.slice(p);u(e,t,p-1)}})),Mt(e).on(n,(function(){const t=e.value.replace(/\D/g,"").slice(0,8),n=e.selectionStart;u(e,t,d(n))}))}))},init(){const e=this;Mt(Ct.variables.forms).length&&e.addIdsToFormFields.call(Ct)}}};var At=n(9755);const kt={ajaxHit(e,t,n,i){return At.ajax({url:e,type:t,data:n,dataType:"json",headers:{"X-Api-Key":i,"Content-Type":"application/json"}})}};var Dt=n(9755);const Lt={variables:{headerSection:".header-section"},methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},createOnLoadDatalayer(e,t){return{event:e,xdmPageLoad:t}},createWebPageDetails(e){let t={pageName:e+" page",channel:this.isMobile()?"msite|"+this.getChannelName(e):"web|"+this.getChannelName(e),brand:"mg select"},n=Dt("input[name='modelName']").val()?Dt("input[name='modelName']").val():localStorage.getItem("model-name")?localStorage.getItem("model-name"):"";return n&&(t.model=n),t},createProductWebpageDetails(e){return{pageName:e,channel:this.isMobile()?"msite|pdp":"web|pdp",brand:"mg select",model:e.split(":")[1]}},createOtherWebpageDetails(e){let t={pageName:e,channel:this.isMobile()?"msite|"+this.getChannelName(e):"web|"+this.getChannelName(e),brand:"mg select"},n=Dt("input[name='modelName']").val()||Dt("input[name='model']").val();return n&&(t.model="MG_CYBERSTER"==n?"cyberster":"m9"),t},getChannelName(e){return"pre reserve"==e||"kmi"==e||"test drive"==e||"service booking"==e?e+" form":e.includes("ebooking")?"ebooking form":"vehicle:cyberster"==e||"vehicle:m9"==e?"pdp":e.includes("ebooking")?"ebooking":e},getPageName(){let e=i.eventsListeners.WINDOW.location.pathname;return"/"==e?"home":e.includes("kmi")?"kmi":e.includes("test-drive")?"test drive":e.includes("service-booking")?"service booking":e.includes("post-payment")?window.location.href.includes("error.html")?"pre reserve failure":"pre reserve success":e.includes("pre-reserve")?"pre reserve":e.includes("e-booking")?window.location.href.includes("error.html")?"ebooking failure":window.location.href.includes("success.html")?"ebooking success":"ebooking":e.includes("cyberster/gallery")?"vehicle:cyberster:gallery":e.includes("m9/gallery")?"vehicle:m9:gallery":e.includes("cyberster")?"vehicle:cyberster":e.includes("m9")?"vehicle:m9":e.includes("event-list")?"event list":e.includes("article-list")?"article list":e.includes("media")?"media and event":"other"},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},webInteraction(e,t){const n={linkName:e,brand:"mg select",channel:this.isMobile()?"msite|"+this.getPageName():"web|"+this.getPageName(),pageName:this.getPageName()+" page",linkPosition:"hamburger"};return t&&(n.model=t),n},createInteraction(e){return{linkName:e,brand:"mg select",channel:this.isMobile()?"msite|"+this.getPageName():"web|"+this.getPageName(),pageName:this.getPageName()+" page",linkPosition:this.getPageName()+" - generic click"}},init(){const{headerSection:e}=Lt.variables;Dt(e).length&&("/cyberster"==i.eventsListeners.WINDOW.location.pathname||"/m9"==i.eventsListeners.WINDOW.location.pathname?i.eventsListeners.ADOBE_DATA_LAYER.push(this.createOnLoadDatalayer("pageLoaded",{webPageDetails:this.createProductWebpageDetails(this.getPageName())})):i.eventsListeners.WINDOW.location.pathname.includes("/gallery")||i.eventsListeners.WINDOW.location.pathname.includes("/test-drive")||i.eventsListeners.WINDOW.location.pathname.includes("/kmi")||i.eventsListeners.WINDOW.location.pathname.includes("/service-booking")||i.eventsListeners.WINDOW.location.pathname.includes("/e-booking")?i.eventsListeners.ADOBE_DATA_LAYER.push(this.createOnLoadDatalayer("pageLoaded",{webPageDetails:this.createOtherWebpageDetails(this.getPageName())})):i.eventsListeners.ADOBE_DATA_LAYER.push(this.createOnLoadDatalayer("pageLoaded",{webPageDetails:this.createWebPageDetails(this.getPageName())})),Dt(".header__logo a").on(i.eventsListeners.CLICK,(e=>{i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createInteraction("mg select logo")}))})),Dt(".header__main--tab").on(i.eventsListeners.CLICK,(e=>{const t=Dt(e.currentTarget).text().trim().toLowerCase();i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.webInteraction(t)}))})),Dt(".header__tab--larger").on(i.eventsListeners.CLICK,(e=>{const t=Dt(e.currentTarget).find(".header__tab__larger--text").text().trim().toLowerCase();i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.webInteraction(t)}))})),Dt(".header__hamburger--btn").on("click",(e=>{const t=Dt(e.currentTarget).hasClass("close-btn")?"hamburger - open":"hamburger - close";"requestIdleCallback"in window?requestIdleCallback?.((()=>{i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.webInteraction(t)}))})):setTimeout((()=>{i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.webInteraction(t)}))}),0)})),Dt(".header__content--cta").on(i.eventsListeners.CLICK,(e=>{const t=Dt(e.currentTarget).find("a").attr("title")?.toLowerCase(),n=Dt(e.currentTarget).data("model")?.toLowerCase();i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.webInteraction(`${n} - ${t}`,n)}))})),Dt(".header__content__main--cta").on(i.eventsListeners.CLICK,(e=>{const t=Dt(e.currentTarget).find("a").attr("title").toLowerCase(),n=Dt(e.currentTarget).data("model").toLowerCase();i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.webInteraction(`${n} - ${t}`,n)}))})))}}};var It=n(9755);const Pt={variables:{leadGenContainer:".lead-generation"},methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e,t){const n={linkName:e,brand:"mg select",channel:this.isMobile()?"msite|"+Lt.methods.getChannelName(Lt.methods.getPageName()):"web|"+Lt.methods.getChannelName(Lt.methods.getPageName()),pageName:Lt.methods.getPageName(),model:"MG_CYBERSTER"==It("input[name='modelName']").val()?"cyberster":"m9"};return t&&(n.linkPosition=t),n},removeNullValues(e){for(let t in e)e.hasOwnProperty(t)&&0==e.key&&(console.log(t,e[t]),delete e[t]);return e},createFormFillDatalayer(e,t,n,i,r,a,s,o){const l={formName:"pre reserve"==Lt.methods.getPageName()?"pre reserve form":"kmi form"};return e&&(l.formSection=e),t&&(l.formSuccess=t),n&&(l.formfailure=n),i&&(l.requestOtp=i),r&&(l.leadId=r),a&&(l.dealership=a),s&&(l.statusMessage=s),o&&(l.statusCode=o),"step1.0 - kmi form start"==e&&(l.formStart=1),this.removeNullValues(l)},createUserDetails(){return{firstName:It("input[name='firstName']").val(),lastName:It("input[name='lastName']").val(),email:It("input[name='email']").val(),phoneNumber:It("input[name='mobilePhone']").val()}},init(){const{leadGenContainer:e}=Pt.variables;It(e).length&&(It(".lead-generation__form-group input").on(i.eventsListeners.CLICK,(e=>{i.eventsListeners.WINDOW.adobeDataLayer.push(this.createDatalayer("form start",{webInteraction:this.createWebInteraction("form start"),form:this.createFormFillDatalayer("step1.0 - kmi form start")})),It(".lead-generation__form-group input").off("click")})),It(".lead-generation__form-otp__btn").on(i.eventsListeners.CLICK,(e=>{let t=It(e.currentTarget).find("button span").text().trim();i.eventsListeners.WINDOW.adobeDataLayer.push(this.createDatalayer("request otp",{webInteraction:this.createWebInteraction(t,"kmi form"),form:this.createFormFillDatalayer("step2.0 - request otp",0,0,1,"",""),userDetails:{email:It("input[name='email']").val(),phoneNumber:It("input[name='mobilePhone']").val(),pincode:It("input[name='pincode']").val()}}))})))}}};var Rt=n(9755);const Ot={variables:{eBookingForm:"ebooking__form"},methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e,t,n){const i={linkName:e,brand:"mg select",channel:this.isMobile()?"msite|ebooking form":"web|ebooking form",pageName:"ebooking"};let r=Rt("input[name='model']").val();return r&&(i.model="MG_CYBERSTER"==r?"cyberster":"m9"),t&&(i.linkPosition=t),n&&(i.variant=n),i},createErrorDatalayer(e,t,n){return{errorMessage:e,errorType:t,errorCode:n}},createFormDatalayer(e,t,n,i,r,a){const s={formName:"ebooking form",formSection:1==e?"step3.0 - ebooking form submit":"step3.1 - ebooking form failure"};return e&&(s.formSuccess=e),e||(s.formfailure=1),t&&(s.dealership=t),n&&(s.bookingId=n),i&&(s.transactionId=i),r&&(s.statusMessage=r),a&&(s.statusCode=a),s},formDatalayer(e,t,n,i,r,a){const s={formName:"ebooking form"};return e&&(s.formSection=e),t&&(s.formStart=t),n&&(s.requestOtp=n),i&&(s.validateOtp=i),r&&(s.journeyTracking=r),a&&(s.dealership=a),s},verifyAccount(e){let t=Rt(".ebooking__form--submit .cta-section__label").text().trim();i.eventsListeners.ADOBE_DATA_LAYER.push(Ot.methods.createDatalayer("validate otp",{webInteraction:Ot.methods.createWebInteraction(t,"ebooking form"),form:Ot.methods.formDatalayer("step1.2 - validate otp",0,0,1),userDetails:{phoneNumber:Rt(".ebooking__form--mobile[name='mobilePhone']").val()}}))},userDetails(){const{eBookingForm:e}=Ot.variables;return{firstName:localStorage.getItem("bookingFirstName"),lastName:localStorage.getItem("bookingLastName"),email:localStorage.getItem("bookingEmail"),phoneNumber:localStorage.getItem("bookingMobilePhone"),pincode:localStorage.getItem("bookingPincode")}},init(){const{eBookingForm:e}=Ot.variables;e.length&&Rt(".ebooking__form--mobile").on(i.eventsListeners.CLICK,(e=>{i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("form start",{webInteraction:this.createWebInteraction("form start"),form:this.formDatalayer("step1.0 - ebooking form start",1,0)})),Rt(".ebooking__form--mobile").off("click")}))}}};var Nt=n(9755);const Bt={variables:{loaderSection:".loader-section"},method:{showLoader(){const{loaderSection:e}=Bt.variables;Nt(e).removeClass("d-none")},hideLoader(){const{loaderSection:e}=Bt.variables;Nt(e).addClass("d-none")}}};var Ft=n(9755);const Ut={variables:{googleGeocoder:null},methods:{loadScript(e){return window.google&&window.google.maps?window.google.maps:new Promise(((t,n)=>{window.initGeocoder=()=>{Ut.variables.googleGeocoder=new google.maps.Geocoder,t(window.google.maps)},Ft.getScript(e+"&loading=async&callback=initGeocoder").done((()=>{window.google||n("Google Maps API failed to load.")})).fail((()=>n("Failed to load Google Maps script.")))}))},async getLatLngFromPincode(e){const t=new google.maps.Geocoder;return new Promise(((n,i)=>{t.geocode({address:e},((e,t)=>{if(t===google.maps.GeocoderStatus.OK){const t={lat:e[0].geometry.location.lat(),lng:e[0].geometry.location.lng()};n(t)}else i(`Geocoding failed: ${t}`)}))}))}}};var zt="top",Vt="bottom",Ht="right",$t="left",Wt="auto",Gt=[zt,Vt,Ht,$t],jt="start",qt="end",Yt="clippingParents",Xt="viewport",Kt="popper",Zt="reference",Jt=Gt.reduce((function(e,t){return e.concat([t+"-"+jt,t+"-"+qt])}),[]),Qt=[].concat(Gt,[Wt]).reduce((function(e,t){return e.concat([t,t+"-"+jt,t+"-"+qt])}),[]),en="beforeRead",tn="read",nn="afterRead",rn="beforeMain",an="main",sn="afterMain",on="beforeWrite",ln="write",cn="afterWrite",dn=[en,tn,nn,rn,an,sn,on,ln,cn];function un(e){return e?(e.nodeName||"").toLowerCase():null}function hn(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function pn(e){return e instanceof hn(e).Element||e instanceof Element}function mn(e){return e instanceof hn(e).HTMLElement||e instanceof HTMLElement}function fn(e){return"undefined"!=typeof ShadowRoot&&(e instanceof hn(e).ShadowRoot||e instanceof ShadowRoot)}var gn={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},i=t.attributes[e]||{},r=t.elements[e];mn(r)&&un(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(e){var t=i[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var i=t.elements[e],r=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});mn(i)&&un(i)&&(Object.assign(i.style,a),Object.keys(r).forEach((function(e){i.removeAttribute(e)})))}))}},requires:["computeStyles"]};function vn(e){return e.split("-")[0]}var _n=Math.max,bn=Math.min,yn=Math.round;function xn(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function wn(){return!/^((?!chrome|android).)*safari/i.test(xn())}function Sn(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=e.getBoundingClientRect(),r=1,a=1;t&&mn(e)&&(r=e.offsetWidth>0&&yn(i.width)/e.offsetWidth||1,a=e.offsetHeight>0&&yn(i.height)/e.offsetHeight||1);var s=(pn(e)?hn(e):window).visualViewport,o=!wn()&&n,l=(i.left+(o&&s?s.offsetLeft:0))/r,c=(i.top+(o&&s?s.offsetTop:0))/a,d=i.width/r,u=i.height/a;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l,x:l,y:c}}function Tn(e){var t=Sn(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function En(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&fn(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Mn(e){return hn(e).getComputedStyle(e)}function Cn(e){return["table","td","th"].indexOf(un(e))>=0}function An(e){return((pn(e)?e.ownerDocument:e.document)||window.document).documentElement}function kn(e){return"html"===un(e)?e:e.assignedSlot||e.parentNode||(fn(e)?e.host:null)||An(e)}function Dn(e){return mn(e)&&"fixed"!==Mn(e).position?e.offsetParent:null}function Ln(e){for(var t=hn(e),n=Dn(e);n&&Cn(n)&&"static"===Mn(n).position;)n=Dn(n);return n&&("html"===un(n)||"body"===un(n)&&"static"===Mn(n).position)?t:n||function(e){var t=/firefox/i.test(xn());if(/Trident/i.test(xn())&&mn(e)&&"fixed"===Mn(e).position)return null;var n=kn(e);for(fn(n)&&(n=n.host);mn(n)&&["html","body"].indexOf(un(n))<0;){var i=Mn(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||t&&"filter"===i.willChange||t&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(e)||t}function In(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Pn(e,t,n){return _n(e,bn(t,n))}function Rn(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function On(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}var Nn={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,i=e.name,r=e.options,a=n.elements.arrow,s=n.modifiersData.popperOffsets,o=vn(n.placement),l=In(o),c=[$t,Ht].indexOf(o)>=0?"height":"width";if(a&&s){var d=function(e,t){return Rn("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:On(e,Gt))}(r.padding,n),u=Tn(a),h="y"===l?zt:$t,p="y"===l?Vt:Ht,m=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],f=s[l]-n.rects.reference[l],g=Ln(a),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,_=m/2-f/2,b=d[h],y=v-u[c]-d[p],x=v/2-u[c]/2+_,w=Pn(b,x,y),S=l;n.modifiersData[i]=((t={})[S]=w,t.centerOffset=w-x,t)}},effect:function(e){var t=e.state,n=e.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=t.elements.popper.querySelector(i)))&&En(t.elements.popper,i)&&(t.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Bn(e){return e.split("-")[1]}var Fn={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Un(e){var t,n=e.popper,i=e.popperRect,r=e.placement,a=e.variation,s=e.offsets,o=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,u=e.isFixed,h=s.x,p=void 0===h?0:h,m=s.y,f=void 0===m?0:m,g="function"==typeof d?d({x:p,y:f}):{x:p,y:f};p=g.x,f=g.y;var v=s.hasOwnProperty("x"),_=s.hasOwnProperty("y"),b=$t,y=zt,x=window;if(c){var w=Ln(n),S="clientHeight",T="clientWidth";if(w===hn(n)&&"static"!==Mn(w=An(n)).position&&"absolute"===o&&(S="scrollHeight",T="scrollWidth"),r===zt||(r===$t||r===Ht)&&a===qt)y=Vt,f-=(u&&w===x&&x.visualViewport?x.visualViewport.height:w[S])-i.height,f*=l?1:-1;if(r===$t||(r===zt||r===Vt)&&a===qt)b=Ht,p-=(u&&w===x&&x.visualViewport?x.visualViewport.width:w[T])-i.width,p*=l?1:-1}var E,M=Object.assign({position:o},c&&Fn),C=!0===d?function(e,t){var n=e.x,i=e.y,r=t.devicePixelRatio||1;return{x:yn(n*r)/r||0,y:yn(i*r)/r||0}}({x:p,y:f},hn(n)):{x:p,y:f};return p=C.x,f=C.y,l?Object.assign({},M,((E={})[y]=_?"0":"",E[b]=v?"0":"",E.transform=(x.devicePixelRatio||1)<=1?"translate("+p+"px, "+f+"px)":"translate3d("+p+"px, "+f+"px, 0)",E)):Object.assign({},M,((t={})[y]=_?f+"px":"",t[b]=v?p+"px":"",t.transform="",t))}var zn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=void 0===i||i,a=n.adaptive,s=void 0===a||a,o=n.roundOffsets,l=void 0===o||o,c={placement:vn(t.placement),variation:Bn(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Un(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Un(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},Vn={passive:!0};var Hn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,a=void 0===r||r,s=i.resize,o=void 0===s||s,l=hn(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach((function(e){e.addEventListener("scroll",n.update,Vn)})),o&&l.addEventListener("resize",n.update,Vn),function(){a&&c.forEach((function(e){e.removeEventListener("scroll",n.update,Vn)})),o&&l.removeEventListener("resize",n.update,Vn)}},data:{}},$n={left:"right",right:"left",bottom:"top",top:"bottom"};function Wn(e){return e.replace(/left|right|bottom|top/g,(function(e){return $n[e]}))}var Gn={start:"end",end:"start"};function jn(e){return e.replace(/start|end/g,(function(e){return Gn[e]}))}function qn(e){var t=hn(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Yn(e){return Sn(An(e)).left+qn(e).scrollLeft}function Xn(e){var t=Mn(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function Kn(e){return["html","body","#document"].indexOf(un(e))>=0?e.ownerDocument.body:mn(e)&&Xn(e)?e:Kn(kn(e))}function Zn(e,t){var n;void 0===t&&(t=[]);var i=Kn(e),r=i===(null==(n=e.ownerDocument)?void 0:n.body),a=hn(i),s=r?[a].concat(a.visualViewport||[],Xn(i)?i:[]):i,o=t.concat(s);return r?o:o.concat(Zn(kn(s)))}function Jn(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Qn(e,t,n){return t===Xt?Jn(function(e,t){var n=hn(e),i=An(e),r=n.visualViewport,a=i.clientWidth,s=i.clientHeight,o=0,l=0;if(r){a=r.width,s=r.height;var c=wn();(c||!c&&"fixed"===t)&&(o=r.offsetLeft,l=r.offsetTop)}return{width:a,height:s,x:o+Yn(e),y:l}}(e,n)):pn(t)?function(e,t){var n=Sn(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):Jn(function(e){var t,n=An(e),i=qn(e),r=null==(t=e.ownerDocument)?void 0:t.body,a=_n(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=_n(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),o=-i.scrollLeft+Yn(e),l=-i.scrollTop;return"rtl"===Mn(r||n).direction&&(o+=_n(n.clientWidth,r?r.clientWidth:0)-a),{width:a,height:s,x:o,y:l}}(An(e)))}function ei(e,t,n,i){var r="clippingParents"===t?function(e){var t=Zn(kn(e)),n=["absolute","fixed"].indexOf(Mn(e).position)>=0&&mn(e)?Ln(e):e;return pn(n)?t.filter((function(e){return pn(e)&&En(e,n)&&"body"!==un(e)})):[]}(e):[].concat(t),a=[].concat(r,[n]),s=a[0],o=a.reduce((function(t,n){var r=Qn(e,n,i);return t.top=_n(r.top,t.top),t.right=bn(r.right,t.right),t.bottom=bn(r.bottom,t.bottom),t.left=_n(r.left,t.left),t}),Qn(e,s,i));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function ti(e){var t,n=e.reference,i=e.element,r=e.placement,a=r?vn(r):null,s=r?Bn(r):null,o=n.x+n.width/2-i.width/2,l=n.y+n.height/2-i.height/2;switch(a){case zt:t={x:o,y:n.y-i.height};break;case Vt:t={x:o,y:n.y+n.height};break;case Ht:t={x:n.x+n.width,y:l};break;case $t:t={x:n.x-i.width,y:l};break;default:t={x:n.x,y:n.y}}var c=a?In(a):null;if(null!=c){var d="y"===c?"height":"width";switch(s){case jt:t[c]=t[c]-(n[d]/2-i[d]/2);break;case qt:t[c]=t[c]+(n[d]/2-i[d]/2)}}return t}function ni(e,t){void 0===t&&(t={});var n=t,i=n.placement,r=void 0===i?e.placement:i,a=n.strategy,s=void 0===a?e.strategy:a,o=n.boundary,l=void 0===o?Yt:o,c=n.rootBoundary,d=void 0===c?Xt:c,u=n.elementContext,h=void 0===u?Kt:u,p=n.altBoundary,m=void 0!==p&&p,f=n.padding,g=void 0===f?0:f,v=Rn("number"!=typeof g?g:On(g,Gt)),_=h===Kt?Zt:Kt,b=e.rects.popper,y=e.elements[m?_:h],x=ei(pn(y)?y:y.contextElement||An(e.elements.popper),l,d,s),w=Sn(e.elements.reference),S=ti({reference:w,element:b,strategy:"absolute",placement:r}),T=Jn(Object.assign({},b,S)),E=h===Kt?T:w,M={top:x.top-E.top+v.top,bottom:E.bottom-x.bottom+v.bottom,left:x.left-E.left+v.left,right:E.right-x.right+v.right},C=e.modifiersData.offset;if(h===Kt&&C){var A=C[r];Object.keys(M).forEach((function(e){var t=[Ht,Vt].indexOf(e)>=0?1:-1,n=[zt,Vt].indexOf(e)>=0?"y":"x";M[e]+=A[n]*t}))}return M}var ii={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,a=void 0===r||r,s=n.altAxis,o=void 0===s||s,l=n.fallbackPlacements,c=n.padding,d=n.boundary,u=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,m=void 0===p||p,f=n.allowedAutoPlacements,g=t.options.placement,v=vn(g),_=l||(v===g||!m?[Wn(g)]:function(e){if(vn(e)===Wt)return[];var t=Wn(e);return[jn(e),t,jn(t)]}(g)),b=[g].concat(_).reduce((function(e,n){return e.concat(vn(n)===Wt?function(e,t){void 0===t&&(t={});var n=t,i=n.placement,r=n.boundary,a=n.rootBoundary,s=n.padding,o=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?Qt:l,d=Bn(i),u=d?o?Jt:Jt.filter((function(e){return Bn(e)===d})):Gt,h=u.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=u);var p=h.reduce((function(t,n){return t[n]=ni(e,{placement:n,boundary:r,rootBoundary:a,padding:s})[vn(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:d,rootBoundary:u,padding:c,flipVariations:m,allowedAutoPlacements:f}):n)}),[]),y=t.rects.reference,x=t.rects.popper,w=new Map,S=!0,T=b[0],E=0;E<b.length;E++){var M=b[E],C=vn(M),A=Bn(M)===jt,k=[zt,Vt].indexOf(C)>=0,D=k?"width":"height",L=ni(t,{placement:M,boundary:d,rootBoundary:u,altBoundary:h,padding:c}),I=k?A?Ht:$t:A?Vt:zt;y[D]>x[D]&&(I=Wn(I));var P=Wn(I),R=[];if(a&&R.push(L[C]<=0),o&&R.push(L[I]<=0,L[P]<=0),R.every((function(e){return e}))){T=M,S=!1;break}w.set(M,R)}if(S)for(var O=function(e){var t=b.find((function(t){var n=w.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return T=t,"break"},N=m?3:1;N>0;N--){if("break"===O(N))break}t.placement!==T&&(t.modifiersData[i]._skip=!0,t.placement=T,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ri(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ai(e){return[zt,Ht,Vt,$t].some((function(t){return e[t]>=0}))}var si={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,i=t.rects.reference,r=t.rects.popper,a=t.modifiersData.preventOverflow,s=ni(t,{elementContext:"reference"}),o=ni(t,{altBoundary:!0}),l=ri(s,i),c=ri(o,r,a),d=ai(l),u=ai(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}};var oi={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.offset,a=void 0===r?[0,0]:r,s=Qt.reduce((function(e,n){return e[n]=function(e,t,n){var i=vn(e),r=[$t,zt].indexOf(i)>=0?-1:1,a="function"==typeof n?n(Object.assign({},t,{placement:e})):n,s=a[0],o=a[1];return s=s||0,o=(o||0)*r,[$t,Ht].indexOf(i)>=0?{x:o,y:s}:{x:s,y:o}}(n,t.rects,a),e}),{}),o=s[t.placement],l=o.x,c=o.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=s}};var li={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=ti({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}};var ci={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,a=void 0===r||r,s=n.altAxis,o=void 0!==s&&s,l=n.boundary,c=n.rootBoundary,d=n.altBoundary,u=n.padding,h=n.tether,p=void 0===h||h,m=n.tetherOffset,f=void 0===m?0:m,g=ni(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:d}),v=vn(t.placement),_=Bn(t.placement),b=!_,y=In(v),x="x"===y?"y":"x",w=t.modifiersData.popperOffsets,S=t.rects.reference,T=t.rects.popper,E="function"==typeof f?f(Object.assign({},t.rects,{placement:t.placement})):f,M="number"==typeof E?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),C=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,A={x:0,y:0};if(w){if(a){var k,D="y"===y?zt:$t,L="y"===y?Vt:Ht,I="y"===y?"height":"width",P=w[y],R=P+g[D],O=P-g[L],N=p?-T[I]/2:0,B=_===jt?S[I]:T[I],F=_===jt?-T[I]:-S[I],U=t.elements.arrow,z=p&&U?Tn(U):{width:0,height:0},V=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},H=V[D],$=V[L],W=Pn(0,S[I],z[I]),G=b?S[I]/2-N-W-H-M.mainAxis:B-W-H-M.mainAxis,j=b?-S[I]/2+N+W+$+M.mainAxis:F+W+$+M.mainAxis,q=t.elements.arrow&&Ln(t.elements.arrow),Y=q?"y"===y?q.clientTop||0:q.clientLeft||0:0,X=null!=(k=null==C?void 0:C[y])?k:0,K=P+j-X,Z=Pn(p?bn(R,P+G-X-Y):R,P,p?_n(O,K):O);w[y]=Z,A[y]=Z-P}if(o){var J,Q="x"===y?zt:$t,ee="x"===y?Vt:Ht,te=w[x],ne="y"===x?"height":"width",ie=te+g[Q],re=te-g[ee],ae=-1!==[zt,$t].indexOf(v),se=null!=(J=null==C?void 0:C[x])?J:0,oe=ae?ie:te-S[ne]-T[ne]-se+M.altAxis,le=ae?te+S[ne]+T[ne]-se-M.altAxis:re,ce=p&&ae?function(e,t,n){var i=Pn(e,t,n);return i>n?n:i}(oe,te,le):Pn(p?oe:ie,te,p?le:re);w[x]=ce,A[x]=ce-te}t.modifiersData[i]=A}},requiresIfExists:["offset"]};function di(e,t,n){void 0===n&&(n=!1);var i,r,a=mn(t),s=mn(t)&&function(e){var t=e.getBoundingClientRect(),n=yn(t.width)/e.offsetWidth||1,i=yn(t.height)/e.offsetHeight||1;return 1!==n||1!==i}(t),o=An(t),l=Sn(e,s,n),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(a||!a&&!n)&&(("body"!==un(t)||Xn(o))&&(c=(i=t)!==hn(i)&&mn(i)?{scrollLeft:(r=i).scrollLeft,scrollTop:r.scrollTop}:qn(i)),mn(t)?((d=Sn(t,!0)).x+=t.clientLeft,d.y+=t.clientTop):o&&(d.x=Yn(o))),{x:l.left+c.scrollLeft-d.x,y:l.top+c.scrollTop-d.y,width:l.width,height:l.height}}function ui(e){var t=new Map,n=new Set,i=[];function r(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var i=t.get(e);i&&r(i)}})),i.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||r(e)})),i}var hi={placement:"bottom",modifiers:[],strategy:"absolute"};function pi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function mi(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,i=void 0===n?[]:n,r=t.defaultOptions,a=void 0===r?hi:r;return function(e,t,n){void 0===n&&(n=a);var r,s,o={placement:"bottom",orderedModifiers:[],options:Object.assign({},hi,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,d={state:o,setOptions:function(n){var r="function"==typeof n?n(o.options):n;u(),o.options=Object.assign({},a,o.options,r),o.scrollParents={reference:pn(e)?Zn(e):e.contextElement?Zn(e.contextElement):[],popper:Zn(t)};var s,c,h=function(e){var t=ui(e);return dn.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((s=[].concat(i,o.options.modifiers),c=s.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),Object.keys(c).map((function(e){return c[e]}))));return o.orderedModifiers=h.filter((function(e){return e.enabled})),o.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,i=void 0===n?{}:n,r=e.effect;if("function"==typeof r){var a=r({state:o,name:t,instance:d,options:i}),s=function(){};l.push(a||s)}})),d.update()},forceUpdate:function(){if(!c){var e=o.elements,t=e.reference,n=e.popper;if(pi(t,n)){o.rects={reference:di(t,Ln(n),"fixed"===o.options.strategy),popper:Tn(n)},o.reset=!1,o.placement=o.options.placement,o.orderedModifiers.forEach((function(e){return o.modifiersData[e.name]=Object.assign({},e.data)}));for(var i=0;i<o.orderedModifiers.length;i++)if(!0!==o.reset){var r=o.orderedModifiers[i],a=r.fn,s=r.options,l=void 0===s?{}:s,u=r.name;"function"==typeof a&&(o=a({state:o,options:l,name:u,instance:d})||o)}else o.reset=!1,i=-1}}},update:(r=function(){return new Promise((function(e){d.forceUpdate(),e(o)}))},function(){return s||(s=new Promise((function(e){Promise.resolve().then((function(){s=void 0,e(r())}))}))),s}),destroy:function(){u(),c=!0}};if(!pi(e,t))return d;function u(){l.forEach((function(e){return e()})),l=[]}return d.setOptions(n).then((function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)})),d}}var fi=mi(),gi=mi({defaultModifiers:[Hn,li,zn,gn,oi,ii,ci,Nn,si]}),vi=mi({defaultModifiers:[Hn,li,zn,gn]});const _i=new Map,bi={set(e,t,n){_i.has(e)||_i.set(e,new Map);const i=_i.get(e);i.has(t)||0===i.size?i.set(t,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get(e,t){return _i.has(e)&&_i.get(e).get(t)||null},remove(e,t){if(!_i.has(e))return;const n=_i.get(e);n.delete(t),0===n.size&&_i.delete(e)}},yi="transitionend",xi=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,((e,t)=>`#${CSS.escape(t)}`))),e),wi=e=>{e.dispatchEvent(new Event(yi))},Si=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),Ti=e=>Si(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(xi(e)):null,Ei=e=>{if(!Si(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),n=e.closest("details:not([open])");if(!n)return t;if(n!==e){const t=e.closest("summary");if(t&&t.parentNode!==n)return!1;if(null===t)return!1}return t},Mi=e=>!e||e.nodeType!==Node.ELEMENT_NODE||(!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled"))),Ci=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?Ci(e.parentNode):null},Ai=()=>{},ki=e=>{e.offsetHeight},Di=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Li=[],Ii=()=>"rtl"===document.documentElement.dir,Pi=e=>{var t;t=()=>{const t=Di();if(t){const n=e.NAME,i=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=i,e.jQueryInterface)}},"loading"===document.readyState?(Li.length||document.addEventListener("DOMContentLoaded",(()=>{for(const e of Li)e()})),Li.push(t)):t()},Ri=(e,t=[],n=e)=>"function"==typeof e?e(...t):n,Oi=(e,t,n=!0)=>{if(!n)return void Ri(e);const i=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const i=Number.parseFloat(t),r=Number.parseFloat(n);return i||r?(t=t.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(n))):0})(t)+5;let r=!1;const a=({target:n})=>{n===t&&(r=!0,t.removeEventListener(yi,a),Ri(e))};t.addEventListener(yi,a),setTimeout((()=>{r||wi(t)}),i)},Ni=(e,t,n,i)=>{const r=e.length;let a=e.indexOf(t);return-1===a?!n&&i?e[r-1]:e[0]:(a+=n?1:-1,i&&(a=(a+r)%r),e[Math.max(0,Math.min(a,r-1))])},Bi=/[^.]*(?=\..*)\.|.*/,Fi=/\..*/,Ui=/::\d+$/,zi={};let Vi=1;const Hi={mouseenter:"mouseover",mouseleave:"mouseout"},$i=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Wi(e,t){return t&&`${t}::${Vi++}`||e.uidEvent||Vi++}function Gi(e){const t=Wi(e);return e.uidEvent=t,zi[t]=zi[t]||{},zi[t]}function ji(e,t,n=null){return Object.values(e).find((e=>e.callable===t&&e.delegationSelector===n))}function qi(e,t,n){const i="string"==typeof t,r=i?n:t||n;let a=Zi(e);return $i.has(a)||(a=e),[i,r,a]}function Yi(e,t,n,i,r){if("string"!=typeof t||!e)return;let[a,s,o]=qi(t,n,i);if(t in Hi){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};s=e(s)}const l=Gi(e),c=l[o]||(l[o]={}),d=ji(c,s,a?n:null);if(d)return void(d.oneOff=d.oneOff&&r);const u=Wi(s,t.replace(Bi,"")),h=a?function(e,t,n){return function i(r){const a=e.querySelectorAll(t);for(let{target:s}=r;s&&s!==this;s=s.parentNode)for(const o of a)if(o===s)return Qi(r,{delegateTarget:s}),i.oneOff&&Ji.off(e,r.type,t,n),n.apply(s,[r])}}(e,n,s):function(e,t){return function n(i){return Qi(i,{delegateTarget:e}),n.oneOff&&Ji.off(e,i.type,t),t.apply(e,[i])}}(e,s);h.delegationSelector=a?n:null,h.callable=s,h.oneOff=r,h.uidEvent=u,c[u]=h,e.addEventListener(o,h,a)}function Xi(e,t,n,i,r){const a=ji(t[n],i,r);a&&(e.removeEventListener(n,a,Boolean(r)),delete t[n][a.uidEvent])}function Ki(e,t,n,i){const r=t[n]||{};for(const[a,s]of Object.entries(r))a.includes(i)&&Xi(e,t,n,s.callable,s.delegationSelector)}function Zi(e){return e=e.replace(Fi,""),Hi[e]||e}const Ji={on(e,t,n,i){Yi(e,t,n,i,!1)},one(e,t,n,i){Yi(e,t,n,i,!0)},off(e,t,n,i){if("string"!=typeof t||!e)return;const[r,a,s]=qi(t,n,i),o=s!==t,l=Gi(e),c=l[s]||{},d=t.startsWith(".");if(void 0===a){if(d)for(const n of Object.keys(l))Ki(e,l,n,t.slice(1));for(const[n,i]of Object.entries(c)){const r=n.replace(Ui,"");o&&!t.includes(r)||Xi(e,l,s,i.callable,i.delegationSelector)}}else{if(!Object.keys(c).length)return;Xi(e,l,s,a,r?n:null)}},trigger(e,t,n){if("string"!=typeof t||!e)return null;const i=Di();let r=null,a=!0,s=!0,o=!1;t!==Zi(t)&&i&&(r=i.Event(t,n),i(e).trigger(r),a=!r.isPropagationStopped(),s=!r.isImmediatePropagationStopped(),o=r.isDefaultPrevented());const l=Qi(new Event(t,{bubbles:a,cancelable:!0}),n);return o&&l.preventDefault(),s&&e.dispatchEvent(l),l.defaultPrevented&&r&&r.preventDefault(),l}};function Qi(e,t={}){for(const[n,i]of Object.entries(t))try{e[n]=i}catch(t){Object.defineProperty(e,n,{configurable:!0,get(){return i}})}return e}function er(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function tr(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}const nr={setDataAttribute(e,t,n){e.setAttribute(`data-bs-${tr(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${tr(t)}`)},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter((e=>e.startsWith("bs")&&!e.startsWith("bsConfig")));for(const i of n){let n=i.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),t[n]=er(e.dataset[i])}return t},getDataAttribute(e,t){return er(e.getAttribute(`data-bs-${tr(t)}`))}};class ir{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const n=Si(t)?nr.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"==typeof n?n:{},...Si(t)?nr.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[i,r]of Object.entries(t)){const t=e[i],a=Si(t)?"element":null==(n=t)?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(r).test(a))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${a}" but expected type "${r}".`)}var n}}class rr extends ir{constructor(e,t){super(),(e=Ti(e))&&(this._element=e,this._config=this._getConfig(t),bi.set(this._element,this.constructor.DATA_KEY,this))}dispose(){bi.remove(this._element,this.constructor.DATA_KEY),Ji.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,n=!0){Oi(e,t,n)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return bi.get(Ti(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const ar=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&"#"!==n?n.trim():null}return t?t.split(",").map((e=>xi(e))).join(","):null},sr={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter((e=>e.matches(t)))},parents(e,t){const n=[];let i=e.parentNode.closest(t);for(;i;)n.push(i),i=i.parentNode.closest(t);return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((e=>`${e}:not([tabindex^="-"])`)).join(",");return this.find(t,e).filter((e=>!Mi(e)&&Ei(e)))},getSelectorFromElement(e){const t=ar(e);return t&&sr.findOne(t)?t:null},getElementFromSelector(e){const t=ar(e);return t?sr.findOne(t):null},getMultipleElementsFromSelector(e){const t=ar(e);return t?sr.find(t):[]}},or=(e,t="hide")=>{const n=`click.dismiss${e.EVENT_KEY}`,i=e.NAME;Ji.on(document,n,`[data-bs-dismiss="${i}"]`,(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),Mi(this))return;const r=sr.getElementFromSelector(this)||this.closest(`.${i}`);e.getOrCreateInstance(r)[t]()}))};class lr extends rr{static get NAME(){return"alert"}close(){if(Ji.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,e)}_destroyElement(){this._element.remove(),Ji.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(e){return this.each((function(){const t=lr.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}or(lr,"close"),Pi(lr);const cr='[data-bs-toggle="button"]';class dr extends rr{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each((function(){const t=dr.getOrCreateInstance(this);"toggle"===e&&t[e]()}))}}Ji.on(document,"click.bs.button.data-api",cr,(e=>{e.preventDefault();const t=e.target.closest(cr);dr.getOrCreateInstance(t).toggle()})),Pi(dr);const ur=".bs.swipe",hr={endCallback:null,leftCallback:null,rightCallback:null},pr={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class mr extends ir{constructor(e,t){super(),this._element=e,e&&mr.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return hr}static get DefaultType(){return pr}static get NAME(){return"swipe"}dispose(){Ji.off(this._element,ur)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),Ri(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const t=e/this._deltaX;this._deltaX=0,t&&Ri(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Ji.on(this._element,"pointerdown.bs.swipe",(e=>this._start(e))),Ji.on(this._element,"pointerup.bs.swipe",(e=>this._end(e))),this._element.classList.add("pointer-event")):(Ji.on(this._element,"touchstart.bs.swipe",(e=>this._start(e))),Ji.on(this._element,"touchmove.bs.swipe",(e=>this._move(e))),Ji.on(this._element,"touchend.bs.swipe",(e=>this._end(e))))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&("pen"===e.pointerType||"touch"===e.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const fr="next",gr="prev",vr="left",_r="right",br="slid.bs.carousel",yr="carousel",xr="active",wr=".active",Sr=".carousel-item",Tr={ArrowLeft:_r,ArrowRight:vr},Er={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Mr={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Cr extends rr{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=sr.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===yr&&this.cycle()}static get Default(){return Er}static get DefaultType(){return Mr}static get NAME(){return"carousel"}next(){this._slide(fr)}nextWhenVisible(){!document.hidden&&Ei(this._element)&&this.next()}prev(){this._slide(gr)}pause(){this._isSliding&&wi(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?Ji.one(this._element,br,(()=>this.cycle())):this.cycle())}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void Ji.one(this._element,br,(()=>this.to(e)));const n=this._getItemIndex(this._getActive());if(n===e)return;const i=e>n?fr:gr;this._slide(i,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&Ji.on(this._element,"keydown.bs.carousel",(e=>this._keydown(e))),"hover"===this._config.pause&&(Ji.on(this._element,"mouseenter.bs.carousel",(()=>this.pause())),Ji.on(this._element,"mouseleave.bs.carousel",(()=>this._maybeEnableCycle()))),this._config.touch&&mr.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const e of sr.find(".carousel-item img",this._element))Ji.on(e,"dragstart.bs.carousel",(e=>e.preventDefault()));const e={leftCallback:()=>this._slide(this._directionToOrder(vr)),rightCallback:()=>this._slide(this._directionToOrder(_r)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new mr(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=Tr[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=sr.findOne(wr,this._indicatorsElement);t.classList.remove(xr),t.removeAttribute("aria-current");const n=sr.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);n&&(n.classList.add(xr),n.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const n=this._getActive(),i=e===fr,r=t||Ni(this._getItems(),n,i,this._config.wrap);if(r===n)return;const a=this._getItemIndex(r),s=t=>Ji.trigger(this._element,t,{relatedTarget:r,direction:this._orderToDirection(e),from:this._getItemIndex(n),to:a});if(s("slide.bs.carousel").defaultPrevented)return;if(!n||!r)return;const o=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(a),this._activeElement=r;const l=i?"carousel-item-start":"carousel-item-end",c=i?"carousel-item-next":"carousel-item-prev";r.classList.add(c),ki(r),n.classList.add(l),r.classList.add(l);this._queueCallback((()=>{r.classList.remove(l,c),r.classList.add(xr),n.classList.remove(xr,c,l),this._isSliding=!1,s(br)}),n,this._isAnimated()),o&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return sr.findOne(".active.carousel-item",this._element)}_getItems(){return sr.find(Sr,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return Ii()?e===vr?gr:fr:e===vr?fr:gr}_orderToDirection(e){return Ii()?e===gr?vr:_r:e===gr?_r:vr}static jQueryInterface(e){return this.each((function(){const t=Cr.getOrCreateInstance(this,e);if("number"!=typeof e){if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}else t.to(e)}))}}Ji.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",(function(e){const t=sr.getElementFromSelector(this);if(!t||!t.classList.contains(yr))return;e.preventDefault();const n=Cr.getOrCreateInstance(t),i=this.getAttribute("data-bs-slide-to");return i?(n.to(i),void n._maybeEnableCycle()):"next"===nr.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())})),Ji.on(window,"load.bs.carousel.data-api",(()=>{const e=sr.find('[data-bs-ride="carousel"]');for(const t of e)Cr.getOrCreateInstance(t)})),Pi(Cr);const Ar="show",kr="collapse",Dr="collapsing",Lr='[data-bs-toggle="collapse"]',Ir={parent:null,toggle:!0},Pr={parent:"(null|element)",toggle:"boolean"};class Rr extends rr{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const n=sr.find(Lr);for(const e of n){const t=sr.getSelectorFromElement(e),n=sr.find(t).filter((e=>e===this._element));null!==t&&n.length&&this._triggerArray.push(e)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Ir}static get DefaultType(){return Pr}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((e=>e!==this._element)).map((e=>Rr.getOrCreateInstance(e,{toggle:!1})))),e.length&&e[0]._isTransitioning)return;if(Ji.trigger(this._element,"show.bs.collapse").defaultPrevented)return;for(const t of e)t.hide();const t=this._getDimension();this._element.classList.remove(kr),this._element.classList.add(Dr),this._element.style[t]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n=`scroll${t[0].toUpperCase()+t.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Dr),this._element.classList.add(kr,Ar),this._element.style[t]="",Ji.trigger(this._element,"shown.bs.collapse")}),this._element,!0),this._element.style[t]=`${this._element[n]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(Ji.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,ki(this._element),this._element.classList.add(Dr),this._element.classList.remove(kr,Ar);for(const e of this._triggerArray){const t=sr.getElementFromSelector(e);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0;this._element.style[e]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Dr),this._element.classList.add(kr),Ji.trigger(this._element,"hidden.bs.collapse")}),this._element,!0)}_isShown(e=this._element){return e.classList.contains(Ar)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=Ti(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Lr);for(const t of e){const e=sr.getElementFromSelector(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(e){const t=sr.find(":scope .collapse .collapse",this._config.parent);return sr.find(e,this._config.parent).filter((e=>!t.includes(e)))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const n of e)n.classList.toggle("collapsed",!t),n.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each((function(){const n=Rr.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===n[e])throw new TypeError(`No method named "${e}"`);n[e]()}}))}}Ji.on(document,"click.bs.collapse.data-api",Lr,(function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();for(const e of sr.getMultipleElementsFromSelector(this))Rr.getOrCreateInstance(e,{toggle:!1}).toggle()})),Pi(Rr);const Or="dropdown",Nr="ArrowUp",Br="ArrowDown",Fr="click.bs.dropdown.data-api",Ur="keydown.bs.dropdown.data-api",zr="show",Vr='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Hr=`${Vr}.show`,$r=".dropdown-menu",Wr=Ii()?"top-end":"top-start",Gr=Ii()?"top-start":"top-end",jr=Ii()?"bottom-end":"bottom-start",qr=Ii()?"bottom-start":"bottom-end",Yr=Ii()?"left-start":"right-start",Xr=Ii()?"right-start":"left-start",Kr={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Zr={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Jr extends rr{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=sr.next(this._element,$r)[0]||sr.prev(this._element,$r)[0]||sr.findOne($r,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Kr}static get DefaultType(){return Zr}static get NAME(){return Or}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Mi(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!Ji.trigger(this._element,"show.bs.dropdown",e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const e of[].concat(...document.body.children))Ji.on(e,"mouseover",Ai);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(zr),this._element.classList.add(zr),Ji.trigger(this._element,"shown.bs.dropdown",e)}}hide(){if(Mi(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!Ji.trigger(this._element,"hide.bs.dropdown",e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))Ji.off(e,"mouseover",Ai);this._popper&&this._popper.destroy(),this._menu.classList.remove(zr),this._element.classList.remove(zr),this._element.setAttribute("aria-expanded","false"),nr.removeDataAttribute(this._menu,"popper"),Ji.trigger(this._element,"hidden.bs.dropdown",e)}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!Si(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError(`${Or.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(void 0===e)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=this._parent:Si(this._config.reference)?t=Ti(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);const n=this._getPopperConfig();this._popper=gi(t,this._menu,n)}_isShown(){return this._menu.classList.contains(zr)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return Yr;if(e.classList.contains("dropstart"))return Xr;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?Gr:Wr:t?qr:jr}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(nr.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...Ri(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:t}){const n=sr.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((e=>Ei(e)));n.length&&Ni(n,t,e===Br,!n.includes(t)).focus()}static jQueryInterface(e){return this.each((function(){const t=Jr.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}static clearMenus(e){if(2===e.button||"keyup"===e.type&&"Tab"!==e.key)return;const t=sr.find(Hr);for(const n of t){const t=Jr.getInstance(n);if(!t||!1===t._config.autoClose)continue;const i=e.composedPath(),r=i.includes(t._menu);if(i.includes(t._element)||"inside"===t._config.autoClose&&!r||"outside"===t._config.autoClose&&r)continue;if(t._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const a={relatedTarget:t._element};"click"===e.type&&(a.clickEvent=e),t._completeHide(a)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),n="Escape"===e.key,i=[Nr,Br].includes(e.key);if(!i&&!n)return;if(t&&!n)return;e.preventDefault();const r=this.matches(Vr)?this:sr.prev(this,Vr)[0]||sr.next(this,Vr)[0]||sr.findOne(Vr,e.delegateTarget.parentNode),a=Jr.getOrCreateInstance(r);if(i)return e.stopPropagation(),a.show(),void a._selectMenuItem(e);a._isShown()&&(e.stopPropagation(),a.hide(),r.focus())}}Ji.on(document,Ur,Vr,Jr.dataApiKeydownHandler),Ji.on(document,Ur,$r,Jr.dataApiKeydownHandler),Ji.on(document,Fr,Jr.clearMenus),Ji.on(document,"keyup.bs.dropdown.data-api",Jr.clearMenus),Ji.on(document,Fr,Vr,(function(e){e.preventDefault(),Jr.getOrCreateInstance(this).toggle()})),Pi(Jr);const Qr="backdrop",ea="show",ta="mousedown.bs.backdrop",na={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},ia={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class ra extends ir{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return na}static get DefaultType(){return ia}static get NAME(){return Qr}show(e){if(!this._config.isVisible)return void Ri(e);this._append();const t=this._getElement();this._config.isAnimated&&ki(t),t.classList.add(ea),this._emulateAnimation((()=>{Ri(e)}))}hide(e){this._config.isVisible?(this._getElement().classList.remove(ea),this._emulateAnimation((()=>{this.dispose(),Ri(e)}))):Ri(e)}dispose(){this._isAppended&&(Ji.off(this._element,ta),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Ti(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),Ji.on(e,ta,(()=>{Ri(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(e){Oi(e,this._getElement(),this._config.isAnimated)}}const aa=".bs.focustrap",sa="backward",oa={autofocus:!0,trapElement:null},la={autofocus:"boolean",trapElement:"element"};class ca extends ir{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return oa}static get DefaultType(){return la}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Ji.off(document,aa),Ji.on(document,"focusin.bs.focustrap",(e=>this._handleFocusin(e))),Ji.on(document,"keydown.tab.bs.focustrap",(e=>this._handleKeydown(e))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Ji.off(document,aa))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const n=sr.focusableChildren(t);0===n.length?t.focus():this._lastTabNavDirection===sa?n[n.length-1].focus():n[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?sa:"forward")}}const da=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ua=".sticky-top",ha="padding-right",pa="margin-right";class ma{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ha,(t=>t+e)),this._setElementAttributes(da,ha,(t=>t+e)),this._setElementAttributes(ua,pa,(t=>t-e))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ha),this._resetElementAttributes(da,ha),this._resetElementAttributes(ua,pa)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,n){const i=this.getWidth();this._applyManipulationCallback(e,(e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+i)return;this._saveInitialAttribute(e,t);const r=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,`${n(Number.parseFloat(r))}px`)}))}_saveInitialAttribute(e,t){const n=e.style.getPropertyValue(t);n&&nr.setDataAttribute(e,t,n)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,(e=>{const n=nr.getDataAttribute(e,t);null!==n?(nr.removeDataAttribute(e,t),e.style.setProperty(t,n)):e.style.removeProperty(t)}))}_applyManipulationCallback(e,t){if(Si(e))t(e);else for(const n of sr.find(e,this._element))t(n)}}const fa=".bs.modal",ga="hidden.bs.modal",va="show.bs.modal",_a="modal-open",ba="show",ya="modal-static",xa={backdrop:!0,focus:!0,keyboard:!0},wa={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Sa extends rr{constructor(e,t){super(e,t),this._dialog=sr.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ma,this._addEventListeners()}static get Default(){return xa}static get DefaultType(){return wa}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||this._isTransitioning)return;Ji.trigger(this._element,va,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(_a),this._adjustDialog(),this._backdrop.show((()=>this._showElement(e))))}hide(){if(!this._isShown||this._isTransitioning)return;Ji.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(ba),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated()))}dispose(){Ji.off(window,fa),Ji.off(this._dialog,fa),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new ra({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ca({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=sr.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),ki(this._element),this._element.classList.add(ba);this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Ji.trigger(this._element,"shown.bs.modal",{relatedTarget:e})}),this._dialog,this._isAnimated())}_addEventListeners(){Ji.on(this._element,"keydown.dismiss.bs.modal",(e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),Ji.on(window,"resize.bs.modal",(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),Ji.on(this._element,"mousedown.dismiss.bs.modal",(e=>{Ji.one(this._element,"click.dismiss.bs.modal",(t=>{this._element===e.target&&this._element===t.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(_a),this._resetAdjustments(),this._scrollBar.reset(),Ji.trigger(this._element,ga)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(Ji.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;"hidden"===t||this._element.classList.contains(ya)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(ya),this._queueCallback((()=>{this._element.classList.remove(ya),this._queueCallback((()=>{this._element.style.overflowY=t}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),n=t>0;if(n&&!e){const e=Ii()?"paddingLeft":"paddingRight";this._element.style[e]=`${t}px`}if(!n&&e){const e=Ii()?"paddingRight":"paddingLeft";this._element.style[e]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each((function(){const n=Sa.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===n[e])throw new TypeError(`No method named "${e}"`);n[e](t)}}))}}Ji.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',(function(e){const t=sr.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),Ji.one(t,va,(e=>{e.defaultPrevented||Ji.one(t,ga,(()=>{Ei(this)&&this.focus()}))}));const n=sr.findOne(".modal.show");n&&Sa.getInstance(n).hide();Sa.getOrCreateInstance(t).toggle(this)})),or(Sa),Pi(Sa);const Ta="show",Ea="showing",Ma="hiding",Ca=".offcanvas.show",Aa="hidePrevented.bs.offcanvas",ka="hidden.bs.offcanvas",Da={backdrop:!0,keyboard:!0,scroll:!1},La={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ia extends rr{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Da}static get DefaultType(){return La}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown)return;if(Ji.trigger(this._element,"show.bs.offcanvas",{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||(new ma).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Ea);this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Ta),this._element.classList.remove(Ea),Ji.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:e})}),this._element,!0)}hide(){if(!this._isShown)return;if(Ji.trigger(this._element,"hide.bs.offcanvas").defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Ma),this._backdrop.hide();this._queueCallback((()=>{this._element.classList.remove(Ta,Ma),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new ma).reset(),Ji.trigger(this._element,ka)}),this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new ra({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{"static"!==this._config.backdrop?this.hide():Ji.trigger(this._element,Aa)}:null})}_initializeFocusTrap(){return new ca({trapElement:this._element})}_addEventListeners(){Ji.on(this._element,"keydown.dismiss.bs.offcanvas",(e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():Ji.trigger(this._element,Aa))}))}static jQueryInterface(e){return this.each((function(){const t=Ia.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}Ji.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',(function(e){const t=sr.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),Mi(this))return;Ji.one(t,ka,(()=>{Ei(this)&&this.focus()}));const n=sr.findOne(Ca);n&&n!==t&&Ia.getInstance(n).hide();Ia.getOrCreateInstance(t).toggle(this)})),Ji.on(window,"load.bs.offcanvas.data-api",(()=>{for(const e of sr.find(Ca))Ia.getOrCreateInstance(e).show()})),Ji.on(window,"resize.bs.offcanvas",(()=>{for(const e of sr.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&Ia.getOrCreateInstance(e).hide()})),or(Ia),Pi(Ia);const Pa={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Ra=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Oa=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Na=(e,t)=>{const n=e.nodeName.toLowerCase();return t.includes(n)?!Ra.has(n)||Boolean(Oa.test(e.nodeValue)):t.filter((e=>e instanceof RegExp)).some((e=>e.test(n)))};const Ba={allowList:Pa,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Fa={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Ua={entry:"(string|element|function|null)",selector:"(string|element)"};class za extends ir{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Ba}static get DefaultType(){return Fa}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((e=>this._resolvePossibleFunction(e))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[t,n]of Object.entries(this._config.content))this._setContent(e,n,t);const t=e.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&t.classList.add(...n.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,n]of Object.entries(e))super._typeCheckConfig({selector:t,entry:n},Ua)}_setContent(e,t,n){const i=sr.findOne(n,e);i&&((t=this._resolvePossibleFunction(t))?Si(t)?this._putElementInTemplate(Ti(t),i):this._config.html?i.innerHTML=this._maybeSanitize(t):i.textContent=t:i.remove())}_maybeSanitize(e){return this._config.sanitize?function(e,t,n){if(!e.length)return e;if(n&&"function"==typeof n)return n(e);const i=(new window.DOMParser).parseFromString(e,"text/html"),r=[].concat(...i.body.querySelectorAll("*"));for(const e of r){const n=e.nodeName.toLowerCase();if(!Object.keys(t).includes(n)){e.remove();continue}const i=[].concat(...e.attributes),r=[].concat(t["*"]||[],t[n]||[]);for(const t of i)Na(t,r)||e.removeAttribute(t.nodeName)}return i.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return Ri(e,[this])}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const Va=new Set(["sanitize","allowList","sanitizeFn"]),Ha="fade",$a="show",Wa=".modal",Ga="hide.bs.modal",ja="hover",qa="focus",Ya={AUTO:"auto",TOP:"top",RIGHT:Ii()?"left":"right",BOTTOM:"bottom",LEFT:Ii()?"right":"left"},Xa={allowList:Pa,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Ka={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Za extends rr{constructor(t,n){if(void 0===e)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Xa}static get DefaultType(){return Ka}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),Ji.off(this._element.closest(Wa),Ga,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=Ji.trigger(this._element,this.constructor.eventName("show")),t=(Ci(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!t)return;this._disposePopper();const n=this._getTipElement();this._element.setAttribute("aria-describedby",n.getAttribute("id"));const{container:i}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(n),Ji.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(n),n.classList.add($a),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))Ji.on(e,"mouseover",Ai);this._queueCallback((()=>{Ji.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(!this._isShown())return;if(Ji.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented)return;if(this._getTipElement().classList.remove($a),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))Ji.off(e,"mouseover",Ai);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null;this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Ji.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(Ha,$a),t.classList.add(`bs-${this.constructor.NAME}-auto`);const n=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME).toString();return t.setAttribute("id",n),this._isAnimated()&&t.classList.add(Ha),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new za({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Ha)}_isShown(){return this.tip&&this.tip.classList.contains($a)}_createPopper(e){const t=Ri(this._config.placement,[this,e,this._element]),n=Ya[t.toUpperCase()];return gi(this._element,e,this._getPopperConfig(n))}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return Ri(e,[this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return{...t,...Ri(this._config.popperConfig,[t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)Ji.on(this._element,this.constructor.eventName("click"),this._config.selector,(e=>{this._initializeOnDelegatedTarget(e).toggle()}));else if("manual"!==t){const e=t===ja?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),n=t===ja?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");Ji.on(this._element,e,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusin"===e.type?qa:ja]=!0,t._enter()})),Ji.on(this._element,n,this._config.selector,(e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusout"===e.type?qa:ja]=t._element.contains(e.relatedTarget),t._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},Ji.on(this._element.closest(Wa),Ga,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=nr.getDataAttributes(this._element);for(const e of Object.keys(t))Va.has(e)&&delete t[e];return e={...t,..."object"==typeof e&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:Ti(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,n]of Object.entries(this._config))this.constructor.Default[t]!==n&&(e[t]=n);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each((function(){const t=Za.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}}Pi(Za);const Ja={...Za.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Qa={...Za.DefaultType,content:"(null|string|element|function)"};class es extends Za{static get Default(){return Ja}static get DefaultType(){return Qa}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each((function(){const t=es.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}}Pi(es);const ts="click.bs.scrollspy",ns="active",is="[href]",rs={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},as={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ss extends rr{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return rs}static get DefaultType(){return as}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Ti(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,"string"==typeof e.threshold&&(e.threshold=e.threshold.split(",").map((e=>Number.parseFloat(e)))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(Ji.off(this._config.target,ts),Ji.on(this._config.target,ts,is,(e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const n=this._rootElement||window,i=t.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:i,behavior:"smooth"});n.scrollTop=i}})))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((e=>this._observerCallback(e)),e)}_observerCallback(e){const t=e=>this._targetLinks.get(`#${e.target.id}`),n=e=>{this._previousScrollData.visibleEntryTop=e.target.offsetTop,this._process(t(e))},i=(this._rootElement||document.documentElement).scrollTop,r=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const a of e){if(!a.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(a));continue}const e=a.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&e){if(n(a),!i)return}else r||e||n(a)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=sr.find(is,this._config.target);for(const t of e){if(!t.hash||Mi(t))continue;const e=sr.findOne(decodeURI(t.hash),this._element);Ei(e)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,e))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(ns),this._activateParents(e),Ji.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))sr.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(ns);else for(const t of sr.parents(e,".nav, .list-group"))for(const e of sr.prev(t,".nav-link, .nav-item > .nav-link, .list-group-item"))e.classList.add(ns)}_clearActiveClass(e){e.classList.remove(ns);const t=sr.find("[href].active",e);for(const e of t)e.classList.remove(ns)}static jQueryInterface(e){return this.each((function(){const t=ss.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}))}}Ji.on(window,"load.bs.scrollspy.data-api",(()=>{for(const e of sr.find('[data-bs-spy="scroll"]'))ss.getOrCreateInstance(e)})),Pi(ss);const os="ArrowLeft",ls="ArrowRight",cs="ArrowUp",ds="ArrowDown",us="Home",hs="End",ps="active",ms="fade",fs="show",gs=".dropdown-toggle",vs='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',_s=`.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${vs}`;class bs extends rr{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Ji.on(this._element,"keydown.bs.tab",(e=>this._keydown(e))))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),n=t?Ji.trigger(t,"hide.bs.tab",{relatedTarget:e}):null;Ji.trigger(e,"show.bs.tab",{relatedTarget:t}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){if(!e)return;e.classList.add(ps),this._activate(sr.getElementFromSelector(e));this._queueCallback((()=>{"tab"===e.getAttribute("role")?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),Ji.trigger(e,"shown.bs.tab",{relatedTarget:t})):e.classList.add(fs)}),e,e.classList.contains(ms))}_deactivate(e,t){if(!e)return;e.classList.remove(ps),e.blur(),this._deactivate(sr.getElementFromSelector(e));this._queueCallback((()=>{"tab"===e.getAttribute("role")?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),Ji.trigger(e,"hidden.bs.tab",{relatedTarget:t})):e.classList.remove(fs)}),e,e.classList.contains(ms))}_keydown(e){if(![os,ls,cs,ds,us,hs].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter((e=>!Mi(e)));let n;if([us,hs].includes(e.key))n=t[e.key===us?0:t.length-1];else{const i=[ls,ds].includes(e.key);n=Ni(t,e.target,i,!0)}n&&(n.focus({preventScroll:!0}),bs.getOrCreateInstance(n).show())}_getChildren(){return sr.find(_s,this._parent)}_getActiveElem(){return this._getChildren().find((e=>this._elemIsActive(e)))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const e of t)this._setInitialAttributesOnChild(e)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),n=this._getOuterElement(e);e.setAttribute("aria-selected",t),n!==e&&this._setAttributeIfNotExists(n,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=sr.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const n=this._getOuterElement(e);if(!n.classList.contains("dropdown"))return;const i=(e,i)=>{const r=sr.findOne(e,n);r&&r.classList.toggle(i,t)};i(gs,ps),i(".dropdown-menu",fs),n.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,n){e.hasAttribute(t)||e.setAttribute(t,n)}_elemIsActive(e){return e.classList.contains(ps)}_getInnerElement(e){return e.matches(_s)?e:sr.findOne(_s,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each((function(){const t=bs.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}))}}Ji.on(document,"click.bs.tab",vs,(function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),Mi(this)||bs.getOrCreateInstance(this).show()})),Ji.on(window,"load.bs.tab",(()=>{for(const e of sr.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))bs.getOrCreateInstance(e)})),Pi(bs);const ys="hide",xs="show",ws="showing",Ss={animation:"boolean",autohide:"boolean",delay:"number"},Ts={animation:!0,autohide:!0,delay:5e3};class Es extends rr{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Ts}static get DefaultType(){return Ss}static get NAME(){return"toast"}show(){if(Ji.trigger(this._element,"show.bs.toast").defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");this._element.classList.remove(ys),ki(this._element),this._element.classList.add(xs,ws),this._queueCallback((()=>{this._element.classList.remove(ws),Ji.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()}),this._element,this._config.animation)}hide(){if(!this.isShown())return;if(Ji.trigger(this._element,"hide.bs.toast").defaultPrevented)return;this._element.classList.add(ws),this._queueCallback((()=>{this._element.classList.add(ys),this._element.classList.remove(ws,xs),Ji.trigger(this._element,"hidden.bs.toast")}),this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(xs),super.dispose()}isShown(){return this._element.classList.contains(xs)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const n=e.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){Ji.on(this._element,"mouseover.bs.toast",(e=>this._onInteraction(e,!0))),Ji.on(this._element,"mouseout.bs.toast",(e=>this._onInteraction(e,!1))),Ji.on(this._element,"focusin.bs.toast",(e=>this._onInteraction(e,!0))),Ji.on(this._element,"focusout.bs.toast",(e=>this._onInteraction(e,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each((function(){const t=Es.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}or(Es),Pi(Es);var Ms=n(9755);const Cs={variables:{modalMessage:".modal-message",modalTitle:".modal-title",modalEl:".modal"},methods:{initModal(e,t={}){const{modalEl:n}=Cs.variables;return new Sa(Ms(e).find(n),{backdrop:!0,keyboard:!0,focus:!0,...t})}}};var As=n(9755);const ks={methods:{scrollToTarget:function(e,t=1e3,n="swing"){const i=As(e);i.length&&As("html, body").animate({scrollTop:i.offset().top},t,n)},isElementVisible:function(e){const t=e,n="none"!==t.css("display")&&"hidden"!==t.css("visibility"),i=0!==parseFloat(t.css("opacity"));return n&&i},formatDate:function(e){const t=new Date(e),n=t.getDate(),i=n<10?"0"+n:n.toString();const r=function(e){if(e>=11&&e<=13)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(n);return`${i}${r} ${["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]} ${t.getFullYear()}`},observeSectionFullyInView:function(e){return new Promise((t=>{const n=new IntersectionObserver(((e,n)=>{e.forEach((e=>{e.isIntersecting&&1===e.intersectionRatio&&(n.unobserve(e.target),t(As(e.target)))}))}),{root:null,threshold:1});n.observe(e)}))},isMobile:()=>/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isIos(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},formatIndianAmount(e){if("number"!=typeof e&&(e=parseFloat(e)),isNaN(e))return"";const[t,n]=e.toString().split("."),i=t.slice(-3);let r=t.slice(0,-3);return""!==r&&(r=r.replace(/\B(?=(\d{2})+(?!\d))/g,",")),(r?r+",":"")+i},formatDateToISO(e){const[t,n,i]=e.split("/");return`${i}-${n}-${t}`},formatDateParams(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`},getFormattedDate(e){const t=new Date(e);return{day:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()],month:["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()],date:t.getDate()}},convertTo12Hour(e){const[t,n]=e.split(":");let i=parseInt(t,10);const r=i>=12?"PM":"AM";return i%=12,i=i||12,`${i}:${n} ${r}`},formatDateCustom(e){const t=new Date(e);return`${t.toLocaleDateString("en-US",{weekday:"long"})}, ${t.getDate()} ${t.toLocaleDateString("en-US",{month:"short"})}, ${t.getFullYear()}`},convertTimeToHHMMSS(e){const t=e.split(":");return(t[0]||"00").padStart(2,"0")+(t[1]||"00").padStart(2,"0")+(t[2]||"00").padStart(2,"0")},debounce(e,t){let n;return function(...i){clearTimeout(n),n=setTimeout((()=>{clearTimeout(n),e(...i)}),t)}},detectDevice(){const e=navigator.userAgent,t=navigator.platform,n=navigator.vendor||"",i=navigator.maxTouchPoints||0,r=/iPad|iPhone|iPod/.test(e)&&!window.MSStream||"MacIntel"===t&&i>1||/Macintosh/.test(e)&&"ontouchend"in document,a=/Android/.test(e),s=/Windows Phone|IEMobile|WPDesktop/.test(e),o=/BlackBerry|BB10/.test(e),l=/Kindle|Silk|KFAPW/.test(e),c=(/Macintosh|MacIntel|MacPPC|Mac68K/.test(t)||/Mac OS X/.test(e))&&i<2,d=/Win32|Win64|Windows|WinCE/.test(t)||/Windows NT/.test(e),u=(/Linux/.test(t)||/X11/.test(t))&&!a,h=/CrOS/.test(e),p=navigator.brave&&"function"==typeof navigator.brave.isBrave,m=/Edg/.test(e),f=/Edge\//.test(e),g=/OPR|Opera/.test(e)||void 0!==window.opr,v=/Vivaldi/.test(e),_=/YaBrowser/.test(e),b=/SamsungBrowser/.test(e),y=/UCBrowser/.test(e),x=/MiuiBrowser/.test(e),w=/MicroMessenger/.test(e),S=/FBAN|FBAV/.test(e),T=/Instagram/.test(e),E=/LinkedInApp/.test(e),M=/Twitter/.test(e),C=/Chrome/.test(e)&&!m&&!g&&!_&&!b&&!y&&!p&&!v,A=/Safari/.test(e)&&!/Chrome|CriOS|FxiOS|EdgiOS/.test(e)&&/Apple Computer/.test(n),k=/Firefox|FxiOS/.test(e),D=r&&A,L=r&&/CriOS/.test(e),I=r&&/FxiOS/.test(e),P=r&&/EdgiOS/.test(e),R=w||S||T||E||M,O=a&&/wv/.test(e)||r&&!D&&!L&&!I&&!P,N=r&&/iPad/.test(e)||a&&!/Mobile/.test(e)&&/Android/.test(e)||"MacIntel"===t&&i>1||l,B=(r||a||s||o)&&!N||/Mobile/.test(e)&&!N,F=!B&&!N,U=window.screen.width,z=window.screen.height,V=Math.min(U,z)<768,H=window.devicePixelRatio>1;let $="other";p?$="brave":m||f?$="edge":g?$="opera":v?$="vivaldi":_?$="yandex":b?$="samsung":y?$="uc":x?$="miui":C?$="chrome":A||D?$="safari":k||I?$="firefox":L?$="chrome-ios":O?$="webview":R&&($=w?"wechat":S?"facebook":T?"instagram":"in-app");let W="unknown";return r?W="ios":a?W="android":c?W="mac":d?W="windows":u?W="linux":h?W="chromeos":s?W="windows-phone":o?W="blackberry":l&&(W="kindle"),{isIOS:r,isAndroid:a,isMac:c,isWindows:d,isLinux:u,isChromeOS:h,isWindowsPhone:s,isBlackBerry:o,isKindle:l,os:W,isChrome:C,isSafari:A,isFirefox:k,isEdge:m,isEdgeLegacy:f,isOpera:g,isVivaldi:v,isYandex:_,isBrave:p,isSamsung:b,isUCBrowser:y,isMiui:x,isMobileSafari:D,isChromeIOS:L,isFirefoxIOS:I,isEdgeIOS:P,isWebView:O,isInAppBrowser:R,isWeChat:w,isFacebook:S,isInstagram:T,browser:$,isMobile:B,isTablet:N,isDesktop:F,isTouchDevice:i>0||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,isSmallScreen:V,isRetina:H,userAgent:e,platform:t,vendor:n,screenWidth:U,screenHeight:z,maxTouchPoints:i,devicePixelRatio:window.devicePixelRatio}}}};var Ds=n(9755);const Ls={variables:{serviceBookingForm:".service-booking__form",serviceBookingMobile:".service-booking__form--mobile",serviceBookingNumeric:".service-booking__form-input--numeric",serviceBookingOtpInputs:".service-booking__form--otp__input",serviceBookingOtpBtn:".service-booking__form--otp__btn",serviceBookingOtpScreen:".service-booking__form--otp-screen",serviceBookingOtpGroup:".service-booking__form--otp__group",serviceBookingError:".service-booking__form--error",serviceBookingInputs:".service-booking__form--input",serviceBookingSubmit:".service-booking__form--submit",serviceBookingBack:".service-booking__form--back",serviceBookingDealership:".service-booking__form--dealership",serviceBookingServiceType:".service-booking__form--servicetype",serviceBookingServiceTypeOption:".service-booking__form--servicetype__option",serviceBookingResendText:".service-booking__form--otp__resend",serviceBookingConsent:".service-booking__form--footer__consent",serviceBookingAddress:".service-booking__form--pincode__address",serviceBookingDetailScreen:".service-booking__form--last__screen",serviceBookingFormScroll:".service-booking__form--scroll",serviceBookingPincodeScreen:".service-booking__form--pincode__screen",serviceBookingServiceScreen:".service-booking__form--service__screen",serviceBookingAddressScreen:".service-booking__form--address__screen",serviceBookingSlotScreen:".service-booking__form--slot__screen",serviceBookingFeatureScreen:".service-booking__form--feature-screen",serviceBookingSecondScreen:".service-booking__form--personal-details",serviceBookingModal:".service-booking__modal",serviceBookingConsentGroup:".service-booking__form--group__consent",serviceBookingConfetti:".service-booking__confetti",serviceBookingRadioInput:".service-booking__variation--radio",serviceBookingVariationModel:".service-booking__variation--model",serviceBookingVariationImage:".service-booking__variation--image",serviceBookingVariationNumber:".service-booking__variation--number",serviceBookingCustomerAddress:".service-booking__address--customer",serviceBookingAddressRadio:".service-booking__address--radio",serviceBookingRegisteredAddress:".service-booking__address--registered",serviceBookingNewAddress:".service-booking__address--new",togglePickupInput:".service-booking__switch--input",serviceBookingAddressMain:".service-booking__address--main",serviceBookingTextarea:".service-booking__form--textarea",serviceBookingDate:".service-booking__date",serviceBookingDateInput:".service-booking__date-input",serviceBookingDateNext:".service-booking__date-next",serviceBookingDatePrev:".service-booking__date-prev",serviceBookingTime:".service-booking__time",serviceBookingTimeInput:".service-booking__time-input",serviceBookingTimeLabel:".service-booking__time-label",isFeatureScreen:!0,isServiceScreen:!1,isAddressScreen:!1,isPincodeScreen:!1,isSlotScreen:!1,isPersonalDetailScreen:!1,ctaLabel:".cta-section__label ",ctaSection:".cta-section__main",otpAttempts:0,state:"",city:null,modal:null,customerId:"",customerEmail:"",customerName:"",OTPtxtID:null,customerPincode:"",date:""},methods:{generateValidationSchema(){const{serviceBookingForm:e,serviceBookingInputs:t}=this.variables,n=[];Ds(t).each((function(){n.push(Ds(this).attr("name"))})),Ct.methods.generateFormSchema.call(Ct,n,e,e)},handleNumberField(){const{serviceBookingNumeric:e}=this.variables;Ds(e).each((function(){Ct.methods.handleNumberInput(this)}))},handleDisableOtpFields(){const{serviceBookingMobile:e,serviceBookingOtpInputs:t}=this.variables;Ds(e).on(i.eventsListeners.INPUT,(function(){"false"==Ds(`${e}:visible`).attr("aria-valid")&&Ds(t).attr("disabled",!0)}))},handleOtpFields(){const{serviceBookingOtpInputs:e}=this.variables;Ct.methods.handleOtpEvents(Ds(e))},initModal(){const{serviceBookingModal:e}=this.variables;Ls.variables.modal=Cs.methods.initModal(Ds(e))},showModal(e){const{modal:t,serviceBookingModal:n}=this.variables,i=Ds(n).find(Cs.variables.modalTitle),r=Ds(n).find(Cs.variables.modalMessage),a=Ds(n).data(`${e}-title`)??"",s=Ds(n).data(`${e}-subtitle`)??"";Ds(i).text(a),Ds(r).text(s),t.show()},resendOtpTimer(){const{serviceBookingResendText:e,serviceBookingOtpBtn:t,ctaLabel:n}=this.variables;let r=i.timeIntervals.OTP_RESEND_TIME;const a=Ds(e).data("message"),s=Ds(t).data("resend-otp");if(a.length>0){const t=a.replace("{time}s",`<span class='text-brown-50'>00:${r}S</span>`);Ds(e).html(t)}Ds(e).removeClass("opacity-0"),Os.variables.isResendTimerActive=!0,Ds(t).addClass("pe-none opacity-80"),Ds(t).find(n).text(s);const o=setInterval((function(){const n=a.replace("{time}s",`<span class='text-brown-50'>00:${r<10?"0":""}${r}S</span>`);Ds(e).html(n),r--,r<0&&(Os.variables.isResendTimerActive=!1,clearInterval(o),Ds(t).removeClass("pe-none opacity-80"),Ds(e).addClass("opacity-0"))}),1e3)},generateOtp(){const e=this,{serviceBookingOtpBtn:t,serviceBookingOtpInputs:n,serviceBookingInputs:r,serviceBookingMobile:a,serviceBookingForm:s,serviceBookingError:o}=this.variables,{resendOtpTimer:l,showModal:c}=this.methods,d=Ds(s).data("service-details-otp-url"),u=Ds(s).data("service-details-otp-apikey"),h=i.validationLimits.MAX_OTP_ATTEMPTS;Ds(t).on(i.eventsListeners.CLICK,(async function(){if("true"==Ds(`${a}:visible`).attr("aria-valid"))if(Bt.method.showLoader(),i.eventsListeners.ADOBE_DATA_LAYER.push(Ps.methods.createDatalayer("request otp",{webInteraction:Ps.methods.createWebInteraction(Ds(t).find(".cta-section__label").text().trim(),"service booking form"),form:Ps.methods.createFormFillDatalayer("step1.1 - request otp",0,0,1),userDetails:{phoneNumber:Ds(`${r}[name="mobilePhone"]`).val()}})),e.variables.otpAttempts<h){e.variables.otpAttempts++,Ds(n).attr("disabled",!1),1==e.variables.otpAttempts&&setTimeout((function(){e.variables.otpAttempts=0}),1e3*i.timeIntervals.OTP_RESET_TIME);let r={otpsource:"VF",ZINT_WEBSITE_SERVICE_BOOKING:{IV_MOBILE:Ds(`${a}:visible`).val(),verifycode:"",Pagename:"book_service"}};r=JSON.stringify(r);kt.ajaxHit(d,"POST",r,u).done((e=>{if(Bt.method.hideLoader(),e.errorType&&"RangeError"===e.errorType)return void c.call(Ls,"max-attempts");if("Success"!==e["ns0:ZINT_WEBSITE_SERVICE_BOOKINGResponse"].EV_RESULT)return Ds(`${a}:visible`).siblings(o).text(Ds(`${a}:visible`).data("not-registered-error")).removeClass("opacity-0"),void Ds(`${a}:visible`).addClass("input-error");Ls.variables.OTPtxtID=e.OTPtxtID;if("limitReached"==e.TransactionId)return i.eventsListeners.ADOBE_DATA_LAYER.push(Ps.methods.createDatalayer("form error",{webInteraction:Ps.methods.createWebInteraction(Ds(t).find(".cta-section__label").text().trim(),"service booking form",Ds(`${serviceBookingRadioInput}:checked`).parent().data("model-line")),form:Ps.methods.createFormFillDatalayer(),errorDetails:{errorType:"OTP limit error",errorMessage:e.Error,errorCode:200}})),void c.call(Ls,"max-attempts");Ds(n).eq(0).focus(),l.call(Ls)})).fail((e=>{Bt.method.hideLoader(),c.call(Ls,"api-failure"),console.error(e)}))}else Bt.method.hideLoader(),c.call(Ls,"max-attempts");else Os.methods.validateField(Ds(`${a}:visible`),s,"submit",Ds(t).find(".cta-section__main").attr("title"))}))},async isOtpValid(){const{serviceBookingForm:e,serviceBookingMobile:t,serviceBookingError:n,serviceBookingCustomerAddress:r,serviceBookingOtpInputs:a,serviceBookingOtpGroup:s,serviceBookingSubmit:o,serviceBookingRadioInput:l}=this.variables,{showModal:c,addVehicleDetails:d}=this.methods;try{Bt.method.showLoader();const u=Ds(e).data("service-details-otp-url"),h=Ds(e).data("service-details-otp-apikey"),p=Ds(a).map((function(){return this.value.trim()})).get().join("");let m={otpsource:"VF",OTPtxtID:Ls.variables.OTPtxtID,ZINT_WEBSITE_SERVICE_BOOKING:{IV_MOBILE:Ds(`${t}:visible`).val(),verifycode:p,Pagename:"book_service"}};m=JSON.stringify(m);const f=(await kt.ajaxHit(u,"POST",m,h))["ns0:ZINT_WEBSITE_SERVICE_BOOKINGResponse"];if("c3VjY2Vzcw=="==f.verifyStatus){if("Success"!==f.EV_RESULT)return c.call(Ls,"api-failure"),void Bt.method.hideLoader();if(!f.ET_VEHICLE_DATA)return c.call(Ls,"zero-vehicle-data"),void Bt.method.hideLoader();const e=f.ES_CUSTOMER;Ls.variables.customerId=e.CUSTOMER,Ls.variables.customerEmail=e.EMAIL,Ls.variables.customerName=e.CUSTOMER_NAME,Ls.variables.customerPincode=e.PIN_CODE;const t=[e.ADDRESS_LINE1,e.ADDRESS_LINE2,e.CITY,e.STATE,e.COUNTRY,e.PIN_CODE].filter(Boolean).join(", ");Ds(r).text(t);const n=f.ET_VEHICLE_DATA.item;return void d.call(Ls,n)}const g=Ds(s).siblings(n),v=Ds(a).data("otp-failure-error");i.eventsListeners.ADOBE_DATA_LAYER.push(Ps.methods.createDatalayer("form error",{webInteraction:Ps.methods.createWebInteraction(Ds(o).data("next-label"),"service booking form",Ds(`${l}:checked`).parent().data("model-line")),form:Ps.methods.createFormFillDatalayer(),errorDetails:{errorType:"OTP error",errorMessage:v,errorCode:200}})),Ds(a).addClass("input-error"),Ds(g).text(v).removeClass("opacity-0")}catch(e){c.call(Ls,"api-failure"),console.error("An error occurred: ",e),Bt.method.hideLoader()}},addVehicleDetails(e){const{serviceBookingConsentGroup:t,serviceBookingOtpScreen:n,serviceBookingFeatureScreen:i,serviceBookingForm:r,serviceBookingInputs:a,serviceBookingSubmit:o}=this.variables,l=Ds(r).data("variant-colors"),c=Ds(r).data("fallback-image"),d=Ds(r).data("fallback-alt-text");let u="";if(1==e.length){const t=e[0],n=s(),i=t.REGISTRATION_NO.replace(/(.{2})(?=.{4,})/g,"$1 "),r=t.MODEL_LINE.replace(/_/g," "),a=t.VIN_NUMBER,o=l[`${t.VARIANT}_${t.CAR_COLOR_MAT}`]||c,h=l[`${t.VARIANT}_${t.CAR_COLOR_MAT}`]?t.CAR_COLOR_FEAT_TEXT:d;u=`\n                    <div\n                        class="service-booking__variation mt-10 flex-fill pb-6 d-flex flex-column">\n                        <div class="mg-select__form-group d-flex gap-2" data-last-service-dealer="${t.LAST_SRV_DEALER}" data-model-line="${t.MODEL_LINE}">\n                            <input id=${n} type="radio" name="variation" class="mg-select__form-input service-booking__variation--radio" value=${a} checked>\n                            <label for=${n} class="mg-select__form-label d-flex flex-column">\n                                <span class="ff-sequel fvs-light text-black fs-18 lh-20 service-booking__variation--model">${r}</span>\n                                <span class="text-black opacity-40 fs-14 lh-18 mt-1 service-booking__variation--number" data-registration="${t.REGISTRATION_NO}">${i}</span>\n                            </label>\n                        </div>\n                        <div class="service-booking__variation--image single-variation py-10 mx-auto d-flex">\n                            <picture>\n                                <source \n                                    media="(min-width:650px)" \n                                    srcset="\n                                        ${o}&wid=1920\n                                    " />\n                                <img class="w-100 h-100 object-fit-contain" \n                                    src="${o}&wid=1080"\n                                    alt="${h}" \n                                    title="${h}">\n                            </picture>\n                        </div>\n                    </div>\n                `}else u+='<div class="service-booking__variation mt-8 flex-fill pb-6 d-flex flex-column gap-8">',u+=e.map(((e,t)=>{const n=s(),i=e.REGISTRATION_NO.replace(/(.{2})(?=.{4,})/g,"$1 "),r=e.MODEL_LINE.replace(/_/g," "),a=e.VIN_NUMBER,o=l[`${e.VARIANT}_${e.CAR_COLOR_MAT}`]||c,u=l[`${e.VARIANT}_${e.CAR_COLOR_MAT}`]?e.CAR_COLOR_FEAT_TEXT:d;return`\n                        <div class="mg-select__form-group d-flex gap-2 align-items-md-center" data-last-service-dealer="${e.LAST_SRV_DEALER}" data-model-line="${e.MODEL_LINE}">\n                            <input id=${n} type="radio" name="variation" class="mg-select__form-input service-booking__variation--radio multiple-variation" value=${a} ${0===t?"checked":""}>\n                            <label for=${n} class="mg-select__form-label flex-fill d-flex flex-column flex-md-row align-items-md-center gap-5 justify-content-between">\n                                <div class="d-flex flex-column">\n                                    <span class="ff-sequel fvs-light text-black fs-18 lh-20 service-booking__variation--model">${r}</span>\n                                    <span class="text-black opacity-40 fs-14 lh-18 mt-1 service-booking__variation--number" data-registration="${e.REGISTRATION_NO}">${i}</span>\n                                </div>\n                                <div class="service-booking__variation--image d-flex">\n                                    <picture>\n                                        <source \n                                            media="(min-width:650px)" \n                                            srcset="\n                                                ${o}&wid=1920\n                                            " />\n                                        <img class="w-100 h-100 object-fit-contain" \n                                            src="${o}&wid=1080"\n                                            alt="${u}" \n                                            title="${u}">\n                                    </picture>\n                                </div>\n                            </label>\n                        </div>\n                    `})).join(""),u+="</div>";Ds(i).append(u),Ds(n).addClass("d-none").removeClass("d-flex"),Ds(t).addClass("d-none").removeClass("d-grid"),Bt.method.hideLoader()},async fetchServiceTypes(){const{serviceBookingForm:e,serviceBookingRadioInput:t}=this.variables,{showModal:n,addServiceTypes:i}=this.methods,r=Ds(e).data("service-type-url"),a=Ds(e).data("service-type-apikey"),s=Ds(`${t}:checked`).val(),o=Ds(e).find('[name="mobilePhone"]').val();Bt.method.showLoader();let l={ServiceTypeSet:{ServiceType:{Vhvin:s,MobileNumber:o}}};l=JSON.stringify(l);try{const e=await kt.ajaxHit(r,"POST",l,a);if("error"===e.status||"failed"===e.Status)throw new Error("Technical Error");return Bt.method.hideLoader(),e?.root?.properties?.length?(i.call(Ls,e.root.properties),!0):(n.call(Ls,"service-not-found"),!1)}catch(e){return n.call(Ls,"api-failure"),console.error("An error occurred: ",e),Bt.method.hideLoader(),!1}},onChangeAddressType(){const{serviceBookingAddressRadio:e,serviceBookingRegisteredAddress:t,serviceBookingNewAddress:n}=this.variables;Ds(e).on(i.eventsListeners.CHANGE,(function(){"registered"===Ds(`${e}:checked`).val()?(Ds(t).removeClass("d-none"),Ds(n).addClass("d-none")):(Ds(t).addClass("d-none"),Ds(n).removeClass("d-none"))}))},togglePickup(){const{togglePickupInput:e,serviceBookingAddressMain:t}=this.variables;Ds(e).on(i.eventsListeners.CHANGE,(function(){Ds(this).is(":checked")?Ds(t).removeClass("d-none").hide().addClass("d-flex").slideDown(300):Ds(t).slideUp(300,(function(){Ds(this).removeClass("d-flex").addClass("d-none")}))}))},addServiceTypes(e){const{serviceBookingServiceType:t}=this.variables;Ds(t).html(`\n                <option disabled selected hidden value="" >${Ds(t).data("placeholder")}</option>\n            `),Ds.each(e,(function(e,n){const i=`\n                    <option class="service-booking__form--servicetype__option" \n                        value="${n.ServType}"\n                        ${0==e?"selected":""}>\n                        ${n.Desc}\n                    </option>`;Ds(t).append(i)}))},handleSubmit:function(){const{serviceBookingForm:e,serviceBookingOtpScreen:t,serviceBookingDetailScreen:n,serviceBookingPincodeScreen:r,serviceBookingFeatureScreen:a,serviceBookingSecondScreen:s,serviceBookingFormScroll:o,serviceBookingSubmit:l,ctaSection:c,ctaLabel:d,serviceBookingServiceScreen:u,serviceBookingAddressScreen:h,serviceBookingSlotScreen:p,serviceBookingRadioInput:m,serviceBookingServiceTypeOption:f,serviceBookingAddressRadio:g,serviceBookingInputs:v,togglePickupInput:_,serviceBookingDealership:b,serviceBookingDateInput:y,serviceBookingTimeLabel:x,serviceBookingTimeInput:w}=Ls.variables,{isOtpValid:S,handleBookService:T,fetchServiceTypes:E,fetchAvailableDates:M,toggleArrows:C,confirmScreenDetails:A}=Ls.methods;Ds(e).on(i.eventsListeners.SUBMIT,(async function(g){g.preventDefault();let k=Os.methods.handleSubmitValidation(this,e);if(!k){let t=[];Ds(`${v}:visible`).each((function(){if(""!==Ds(this).val()||Ds(this).prop("required")){let n=Ds(this).val();const i=Ct.variables.zodSchemas[e].shape[Ds(this).attr("name")];"consent"===Ds(this).attr("name")&&(n=!!Ds(this).is(":checked")),null==n&&(n="");try{i.parse(n)}catch(e){e instanceof Et.ZodError&&t.push(e.errors[0].message)}}else;}));const n=t.join(" | ");i.eventsListeners.ADOBE_DATA_LAYER.push(Ps.methods.createDatalayer("form error",{webInteraction:Ps.methods.createWebInteraction(Ds(l).data("next-label"),"service booking form",Ds(`${m}:checked`).parent().data("model-line")),form:Ps.methods.createFormFillDatalayer(),errorDetails:{errorType:"submission errors",errorMessage:n}}))}if(k){if(Ds(`${t}:visible`).length>0)await S.call(Ls),Ps.methods.verifyOtp(Ds(l));else if(Ls.variables.isFeatureScreen){if(!await E.call(Ls))return;Ds(s).removeClass("d-none").addClass("d-flex"),Ds(a).addClass("d-none"),Ls.variables.isServiceScreen=!0,Ls.variables.isFeatureScreen=!1,i.eventsListeners.ADOBE_DATA_LAYER.push(Ps.methods.createDatalayer("form journey tracking",{webInteraction:Ps.methods.createWebInteraction(Ds(l).data("next-label"),"service booking form",Ds(`${m}:checked`).parent().data("model-line")),form:Ps.methods.formDatalayer("step2.0 - choose your car"),userDetails:{phoneNumber:Ds(e).find('[name="mobilePhone"]').val()}}))}else if(Ls.variables.isServiceScreen)Ds(h).removeClass("d-none"),Ds(u).addClass("d-none"),Ls.variables.isAddressScreen=!0,Ls.variables.isServiceScreen=!1,i.eventsListeners.ADOBE_DATA_LAYER.push(Ps.methods.createDatalayer("form journey tracking",{webInteraction:Ps.methods.createWebInteraction(Ds(l).data("next-label"),"service booking form",Ds(`${m}:checked`).parent().data("model-line")),form:Ps.methods.formDatalayer("step2.1 - service information",Ds(`${f}:selected`).text().trim()),userDetails:{phoneNumber:Ds(e).find('[name="mobilePhone"]').val()}}));else if(Ls.variables.isAddressScreen)Ds(h).addClass("d-none"),Ds(r).removeClass("d-none"),Ls.variables.isAddressScreen=!1,Ls.variables.isPincodeScreen=!0,i.eventsListeners.ADOBE_DATA_LAYER.push(Ps.methods.createDatalayer("form journey tracking",{webInteraction:Ps.methods.createWebInteraction(Ds(l).data("next-label"),"service booking form",Ds(`${m}:checked`).parent().data("model-line")),form:Ps.methods.formDatalayer("step2.2 - pickup information",Ds(`${f}:selected`).text().trim()),userDetails:Ps.methods.userDetails(Ds(_).is(":checked"))}));else if(Ls.variables.isPincodeScreen){if(!await M.call(Ls))return;Ds(p).removeClass("d-none"),Ds(r).addClass("d-none"),C.call(Ls),Ls.variables.isPincodeScreen=!1,Ls.variables.isSlotScreen=!0,i.eventsListeners.ADOBE_DATA_LAYER.push(Ps.methods.createDatalayer("form journey tracking",{webInteraction:Ps.methods.createWebInteraction(Ds(l).data("next-label"),"service booking form",Ds(`${m}:checked`).parent().data("model-line")),form:Ps.methods.formDatalayer("step2.3 - dealer information",Ds(`${f}:selected`).text().trim(),Ds(`${b} option:selected`).data("dealer-name"),Ds(r).find(`${v}[name="pincode"]`).val()),userDetails:Ps.methods.userDetails(Ds(_).is(":checked"))}))}else Ls.variables.isSlotScreen?(A.call(Ls),Ds(p).addClass("d-none"),Ds(n).removeClass("d-none"),Ls.variables.isSlotScreen=!1,Ls.variables.isPersonalDetailScreen=!0,i.eventsListeners.ADOBE_DATA_LAYER.push(Ps.methods.createDatalayer("form journey tracking",{webInteraction:Ps.methods.createWebInteraction(Ds(l).data("next-label"),"service booking form",Ds(`${m}:checked`).parent().data("model-line")),form:Ps.methods.formDatalayer("step2.4 - slot booking",Ds(`${f}:selected`).text().trim(),Ds(`${b} option:selected`).data("dealer-name"),Ds(r).find(`${v}[name="pincode"]`).val(),Ds(`${y}:checked`).data("confirm-date").replace(/^[A-Za-z]+,\s*/,""),Ds(`${w}:checked`).siblings(x).text().trim()),userDetails:Ps.methods.userDetails(Ds(_).is(":checked"))})),Ds(l).find(d).text(Ds(l).data("submit-label")),Ds(l).find(c).attr("title",Ds(l).data("submit-label"))):await T.call(Ls);Ds(o).animate({scrollTop:0},500),Ds("body, html").animate({scrollTop:0},500)}}))},initGeocoderScript(){const{serviceBookingForm:e}=Ls.variables,t=Ds(e).data("geocoder-url");null!=Ut.variables.googleGeocoder||Ds("main").data("iseditmode")||Ut.methods.loadScript(t)},confirmScreenDetails(){const{serviceBookingServiceTypeOption:e,serviceBookingVariationImage:t,serviceBookingVariationModel:n,serviceBookingVariationNumber:i,serviceBookingInputs:r,serviceBookingDealership:a,serviceBookingDateInput:s,serviceBookingAddressRadio:o,serviceBookingCustomerAddress:l,togglePickupInput:c,serviceBookingRadioInput:d,serviceBookingTimeInput:u,serviceBookingTimeLabel:h}=this.variables;let p;p=Ds(c).is(":checked")?"registered"===Ds(`${o}:checked`).val()?Ds(l).text().trim():Ds(`${r}[name="address1"]`).val()+", "+Ds(`${r}[name="pincode"]`).val():Ds(c).data("no-pickup"),Ds(".service-booking__details--serviceType").each((function(){Ds(this).text(Ds(`${e}:selected`).text().trim())})),Ds(".service-booking__details--reading").each((function(){Ds(this).text(Ds(`${r}[name="mileage"]`).val())})),Ds(".service-booking__details--dealer").each((function(){Ds(this).text(Ds(`${a} option:selected`).data("dealer-name"))})),Ds(".service-booking__details--time").each((function(){Ds(this).text(Ds(`${u}:checked`).siblings(h).text().trim())})),Ds(".service-booking__details--date").each((function(){Ds(this).text(Ds(`${s}:checked`).data("confirm-date"))})),Ds(".service-booking__details--address").each((function(){Ds(this).text(p)})),Ds(".service-booking__details--model").text(Ds(`${d}:checked`).parent().find(n).text().trim()),Ds(".service-booking__details--number").text(Ds(`${d}:checked`).parent().find(i).text().trim()),Ds(".service-booking__details--img").html(Ds(`${d}:checked`).parent().find(t).html())},handleBackBtn(){const{serviceBookingBack:e,serviceBookingDetailScreen:t,serviceBookingPincodeScreen:n,serviceBookingFeatureScreen:r,serviceBookingFormScroll:a,serviceBookingSubmit:s,ctaSection:o,ctaLabel:l,serviceBookingServiceScreen:c,serviceBookingAddressScreen:d,serviceBookingSlotScreen:u,serviceBookingSecondScreen:h}=this.variables;Ds(e).on(i.eventsListeners.CLICK,(function(){Ls.variables.isServiceScreen?(Ds(h).addClass("d-none").removeClass("d-flex"),Ds(r).removeClass("d-none"),Ls.variables.isFeatureScreen=!0,Ls.variables.isServiceScreen=!1):Ls.variables.isAddressScreen?(Ds(d).addClass("d-none"),Ds(c).removeClass("d-none"),Ls.variables.isAddressScreen=!1,Ls.variables.isServiceScreen=!0):Ls.variables.isPincodeScreen?(Ds(d).removeClass("d-none"),Ds(n).addClass("d-none"),Ls.variables.isPincodeScreen=!1,Ls.variables.isAddressScreen=!0):Ls.variables.isSlotScreen?(Ds(u).addClass("d-none"),Ds(n).removeClass("d-none"),Ls.variables.isSlotScreen=!1,Ls.variables.isPincodeScreen=!0):(Ds(t).addClass("d-none"),Ds(u).removeClass("d-none"),Ls.variables.isPersonalDetailScreen=!1,Ls.variables.isSlotScreen=!0,Ds(s).find(l).text(Ds(s).data("next-label")),Ds(s).find(o).attr("title",Ds(s).data("next-label"))),Ds(a).animate({scrollTop:0},500),Ds("html, body").animate({scrollTop:0},500)}))},handlePincodeFields(){const{serviceBookingInputs:e,serviceBookingAddress:t,serviceBookingDealership:n}=this.variables,{fetchCityByPincode:r,fetchLatLngByPincode:a,getDealerData:s}=this.methods,{INPUT:o}=i.eventsListeners;Ds(`${e}[name="pincode"]`).each((function(){Ds(this).on(o,(async function(){const i=Ds(this).val();if(Ds(`${e}[name="pincode"]`).each((function(){Ds(this).val(i)})),"true"==Ds(this).attr("aria-valid")){Bt.method.showLoader();if(await r.call(Ls)){const e=await a.call(Ls);if(e.lat&&e.lng){await s.call(Ls,e.lat,e.lng)}}}else Ds(t).text("").addClass("opacity-0"),Ds(n).html(`\n                                <option disabled selected hidden value="" >${Ds(n).data("placeholder")}</option>\n                            `),Ds(n).attr("disabled",!0)}))}))},async fetchCityByPincode(){const{serviceBookingForm:e,serviceBookingAddress:t,serviceBookingError:n,serviceBookingInputs:i}=this.variables,{showModal:r}=this.methods,a=Ds(e).data("fetch-by-pincode-url"),s=Ds(e).data("fetch-by-pincode-apikey"),o={pincode:Ds(`${i}[name="pincode"]`).eq(1).val()};try{const e=await kt.ajaxHit(a,"GET",o,s);if(e[0]){let n=e[0].City;return Ls.variables.city=n,Ls.variables.state=e[0].StateName,e[0].StateName.length&&(n+=", "+e[0].StateName),Ds(t).text(n).removeClass("opacity-0"),!0}return Ds(`${i}[name="pincode"]`).siblings(n).removeClass("opacity-0").text(Ds(`${i}[name="pincode"]`).data("invalid-error")),Ds(`${i}[name="pincode"]`).addClass("input-error"),Bt.method.hideLoader(),!1}catch(e){Bt.method.hideLoader(),console.error(e),r.call(Ls,"api-failure")}},async fetchLatLngByPincode(){const{serviceBookingInputs:e}=this.variables,{showModal:t}=this.methods;try{return await Ut.methods.getLatLngFromPincode(Ds(`${e}[name="pincode"]`).eq(1).val())}catch(e){Bt.method.hideLoader(),console.error(e),t.call(Ls,"api-failure")}},async getDealerData(e,t){const{serviceBookingForm:n,serviceBookingDealership:i,serviceBookingRadioInput:r}=this.variables,{showModal:a}=this.methods,s=Ds(n).data("dealer-url"),o=Ds(n).data("dealer-apikey"),l=Ds(n).find('[name="site"]').val(),c=Ds(`${r}:checked`).parent().data("model-line"),d=Ds(n).find('[name="dealerRequestType"]').val(),u=Ds(n).find('[name="noOfDealers"]').val()||3,h={latitude:e,longitude:t,Source:l,modelLine:c,type:d};try{const e=await kt.ajaxHit(s,"GET",h,o);return Bt.method.hideLoader(),Ds(i).html(`\n                    <option disabled selected hidden value="" >${Ds(i).data("placeholder")}</option>\n                `),Ds(i).attr("disabled",!0),e.DealerList?(Ds.each(e.DealerList.slice(0,u),(function(e,t){const n=`\n                            <option class="service-booking__form--dealership__option" \n                                data-sales-manager-email="${t.Sales_Manager_Email}" \n                                data-merchant-id="${t.MerchantID}" \n                                data-dealer-name="${t.DealerName}"\n                                value="${t.DealerCode}"\n                                ${0==e?"selected":""}>\n                                ${t.DealerName}\n                            </option>`;Ds(i).append(n),Ds(i).attr("disabled",!1)})),Os.methods.validateField(Ds(i),n,"submit"),!0):(a.call(Ls,"dealer-not-found"),!1)}catch(e){Bt.method.hideLoader(),console.error(e),a.call(Ls,"api-failure")}},resizeTextarea(){const{serviceBookingTextarea:e}=this.variables;Ds(e).on(i.eventsListeners.INPUT,(function(){Ds(this).css("height","auto"),Ds(this).css("height",this.scrollHeight+"px")}))},toggleArrows(){const{serviceBookingDate:e,serviceBookingDateNext:t,serviceBookingDatePrev:n}=this.variables,i=Ds(e),r=i.scrollLeft(),a=i[0].scrollWidth-i.outerWidth();if(a<=0)return Ds(n).addClass("opacity-0"),void Ds(t).addClass("opacity-0");Ds(n).removeClass("opacity-0"),Ds(t).removeClass("opacity-0"),r<=0?Ds(n).addClass("opacity-40").removeClass("opacity-0"):Ds(n).removeClass("opacity-40"),r>=a?Ds(t).addClass("opacity-40").removeClass("opacity-0"):Ds(t).removeClass("opacity-40")},initScrollArrows(){const{serviceBookingDate:e}=this.variables,{toggleArrows:t,scrollDateContainer:n}=this.methods;Ds(e).on(i.eventsListeners.SCROLL,(()=>t.call(this))),n.call(this)},scrollDateContainer(){const{serviceBookingDate:e,serviceBookingDateNext:t,serviceBookingDatePrev:n}=this.variables,{toggleArrows:r}=this.methods;Ds(t).on(i.eventsListeners.CLICK,(()=>{const t=Ds(e),n=t.outerWidth();t.animate({scrollLeft:t.scrollLeft()+n},400,(()=>r.call(this)))})),Ds(n).on(i.eventsListeners.CLICK,(()=>{const t=Ds(e),n=t.outerWidth();t.animate({scrollLeft:t.scrollLeft()-n},400,(()=>r.call(this)))}))},async fetchAvailableDates(){const{serviceBookingForm:e,togglePickupInput:t,serviceBookingDealership:n}=this.variables,{showModal:i,addAvailableDates:r}=this.methods,a=Ds(e).data("available-dates-url"),s=Ds(e).data("available-dates-apikey");let o={Color_CodingSet:{Color_Coding:{Dealer:Ds(`${n} option:selected`).val(),Type:Ds(t).is(":checked")?"DR":"SA"}}};o=JSON.stringify(o),Bt.method.showLoader();try{const e=await kt.ajaxHit(a,"POST",o,s);return Bt.method.hideLoader(),e?.root?.properties?.length?(r.call(Ls,e.root.properties),!0):(i.call(Ls,"no-available-dates"),!1)}catch(e){return Bt.method.hideLoader(),console.error(e),i.call(Ls,"api-failure"),!1}},addAvailableDates(e){const{serviceBookingDate:t,serviceBookingDateInput:n}=this.variables,{addDatesEventListener:i,fetchAvailableTimeSlots:r}=this.methods;Ds(t).html("");const a=e.map(((e,t)=>{const n=ks.methods.getFormattedDate(e.Date),i=s(),r=e.Date.replace(/-/g,"");return`\n                <div class="mg-select__form-group service-booking__date-group bg-white rounded-2 overflow-hidden position-relative flex-shrink-0">\n                    <input\n                        type="radio"\n                        id="${i}"\n                        data-confirm-date="${ks.methods.formatDateCustom(e.Date)}"\n                        class="service-booking__date-input mg-select__form-input position-absolute top-0 start-0 z-n1"\n                        name="PICKUP_DATE"\n                        ${0===t?"checked":""}\n                        value="${r}"/>\n                    <label \n                        for="${i}"\n                        class="service-booking__date-label cursor-pointer d-flex flex-column align-items-center justify-content-center mg-select__form-label w-100 h-100 rounded-2">\n                        <span class="fs-16 lh-20 text-center text-opacity">${n.day}</span>\n                        <span class="fs-12 lh-16 ff-roboto mt-2 text-opacity">${n.month}</span>\n                        <span class="fs-20 lh-26 text-center ff-sequel fvs-light mt-1">${n.date}</span>\n                    </label>\n                </div>`})).join("");Ds(t).html(a),r.call(Ls,Ds(`${n}:checked`).val()),i.call(Ls)},addDatesEventListener(){const{serviceBookingDateInput:e}=this.variables,{fetchAvailableTimeSlots:t}=this.methods;Ds(e).each((function(){Ds(this).on(i.eventsListeners.CHANGE,(function(){t.call(Ls,Ds(`${e}:checked`).val())}))}))},async fetchAvailableTimeSlots(e){const{serviceBookingForm:t,togglePickupInput:n,serviceBookingDealership:i,serviceBookingTime:r,serviceBookingSubmit:a}=this.variables,{showModal:s,addAvailableTimeSlots:o}=this.methods,l=Ds(t).data("available-time-url"),c=Ds(t).data("available-time-apikey");let d={Slot_DetailSet:{Slot_Detail:{Dealer:Ds(`${i} option:selected`).val(),Type:Ds(n).is(":checked")?"DR":"SA",Date:e}}};d=JSON.stringify(d),Bt.method.showLoader();try{const e=await kt.ajaxHit(l,"POST",d,c);if(Bt.method.hideLoader(),e?.root?.properties?.length)return void o.call(Ls,e.root.properties);Ds(r).html(""),Ds(a).addClass("opacity-40 pe-none"),s.call(Ls,"no-available-time")}catch(e){Bt.method.hideLoader(),console.error(e),s.call(Ls,"api-failure")}},addAvailableTimeSlots(e){const{serviceBookingTime:t,serviceBookingSubmit:n}=this.variables;Ds(t).html("");const i=e.map(((e,t)=>{const n=ks.methods.convertTo12Hour(e.From_Time),i=s();return`\n                        <div class="mg-select__form-group service-booking__time-group bg-white rounded-2 overflow-hidden position-relative">\n                            <input\n                                id="${i}"\n                                ${0===t?"checked":""}\n                                type="radio"\n                                value="${ks.methods.convertTimeToHHMMSS(e.From_Time)}"\n                                class="service-booking__time-input mg-select__form-input position-absolute top-0 start-0 z-n1"\n                                name="PICKUPTIME"/>\n                            <label\n                                for="${i}"\n                                class="service-booking__time-label cursor-pointer d-flex text-center align-items-center justify-content-center mg-select__form-label w-100 h-100 rounded-2 ff-roboto fs-16 lh-20">\n                                ${n}\n                            </label>\n                        </div>`})).join("");Ds(t).html(i),Ds(n).removeClass("opacity-40 pe-none")},createConfetti(e){const{serviceBookingConfetti:t}=this.variables,n=Ds("<div>").addClass("confetti"),r=i.confettiColors,a=r[Math.floor(Math.random()*r.length)],s=6*Math.random()+4;n.css({width:`${s}px`,height:`${s}px`,backgroundColor:a,left:e?"0px":"100%",bottom:"0px",transform:e?"translateX(0)":"translateX(-100%)"});const o=e?Math.random()*(.7*Ds(window).width()):-Math.random()*(.7*Ds(window).width()),l=-Math.random()*Ds(window).height()-200;n.css("--x",`${o}px`),n.css("--y",`${l}px`);const c=2+1.5*Math.random();n.css("animation",`fly ${c}s ease-out forwards`),Ds(t).append(n),setTimeout((()=>n.remove()),1e3*c)},launchConfetti(){const{createConfetti:e}=this.methods,{serviceBookingConfetti:t}=this.variables,n=1e3*Ds(t).data("confetti-duration"),i=setInterval((()=>{for(let t=0;t<10;t++)e.call(Ls,!0),e.call(Ls,!1)}),300);setTimeout((()=>clearInterval(i)),n)},async handleBookService(){const{serviceBookingForm:e,serviceBookingRadioInput:t,serviceBookingDealership:n,serviceBookingServiceType:r,togglePickupInput:a,serviceBookingInputs:s,serviceBookingDateInput:o,serviceBookingVariationNumber:l,serviceBookingCustomerAddress:c,serviceBookingAddressRadio:d,serviceBookingTimeInput:u,serviceBookingPincodeScreen:h,serviceBookingServiceTypeOption:p,serviceBookingSubmit:m,serviceBookingTimeLabel:f}=this.variables,{showModal:g,launchConfetti:v}=this.methods,_=Ds(e).data("book-service-url"),b=Ds(e).data("book-service-apikey"),y=Ds(`${t}:checked`).val(),x=Ls.variables.customerId,w=Ls.variables.customerName,S=Ls.variables.customerEmail,T=Ds(a).is(":checked")?Ls.variables.city:"",E=Ds(a).is(":checked")?Ls.variables.state:"",M=Ds(`${n} option:selected`).val(),C=Ds(`${r} option:selected`).val(),A=Ds(`${n} option:selected`).text().trim(),k=Ds(`${r} option:selected`).text().trim(),D=Ds(a).is(":checked")?"":"SA",L=Ds(a).is(":checked")?"DR":"",I=Ds(`${s}[name="mileage"]`).val(),P=Ds(`${s}[name="REMARKS"]`).val(),R=Ds(`${s}[name="mobilePhone"]`).val(),O=Ds(`${s}[name="pincode"]`).eq(1).val();let N={STATUS:"",VHVIN:y,EXT_FLAG:"",CRE_NO:"",CRE_NAME:"",MSG:"",DEALERCODE:M,APPT_DATE:Ds(`${o}:checked`).val(),CUSTID:x,LINE_NO:"",APPT_TIME:"",MILEAGE:I,BOOKREASON:C,REMARKS:P,APPOINTTYPE:"",PICKUP_DATE:"",PICKUPTIME:"",STREET:Ds(a).is(":checked")?"registered"===Ds(`${d}:checked`).val()?Ds(c).text().trim():Ds(`${s}[name="address1"]`).val():"",POSTAL_CODE:O,CITY:T,COUNTRY:"",REGION:E,HOUSE_NO:"",CUSTOMER_NAME:w,MOBILE_NO:R,PLATE_NO:Ds(`${t}:checked`).parent().find(l).data("registration"),DRIVER_NO:"",SA_NO:"",ZOPTION:"",APPLICATION_TYPE:"WEB",LST_SRV_DEALER:Ds(`${t}:checked`).parent().data("last-service-dealer"),LST_SRV_DATE:"",LST_SRV_KM:"",BOOKING_DESC:k,DRIVER_NAME:"",SA_NAME:"",SLOT_SA:D,PERSON_TYPE:"",SLOT:"",EMAIL_ID:S,SLOTID:"",PLAN_CALL_DATE:"",FLAG:"",REQ_SA_SLOT:D,REQ_DR_SLOT:L,REQ_TIME:Ds(".service-booking__time-input:checked").val(),LONGITUDE:"",LATITUDE:"",MSG_TYPE:"",DEALER_NAME:A,BOOKING_REASON_DESC:"",BATCH:""};N=JSON.stringify(N),Bt.method.showLoader();try{const r=await kt.ajaxHit(_,"POST",N,b);Bt.method.hideLoader();const l=r["ns0:ZINT_WEBSITE_SRV_EBOOKINGResponse"];if(!l)throw new Error("Something went wrong");const c=l.EV_STATUS;if(!c)throw new Error("Something went wrong");Ds(e).addClass("d-none").removeClass("d-flex"),Ds(".service-booking__post-submit").removeClass("d-none").addClass("d-flex"),"S"===c?(Ds(".service-booking__post-submit__id").text(l.EV_BOOKID),Ds(".service-booking__post-submit__number").text(l.EV_MOBILE),Ds(".service-booking__booking-confirm").removeClass("d-none").addClass("d-flex"),Ds(".service-booking__post-submit__success").removeClass("d-none").addClass("d-flex"),v.call(Ls),i.eventsListeners.ADOBE_DATA_LAYER.push(Ps.methods.createDatalayer("form success",{webInteraction:Ps.methods.createWebInteraction(Ds(m).data("submit-label"),"service booking form",Ds(`${t}:checked`).parent().data("model-line")),form:{formName:"service booking form",formSection:"step3.0 - service booking form submit",serviceType:Ds(`${p}:selected`).text().trim(),dealerPincode:Ds(h).find(`${s}[name="pincode"]`).val(),dealership:Ds(`${n} option:selected`).data("dealer-name"),slotbookingDate:Ds(`${o}:checked`).data("confirm-date").replace(/^[A-Za-z]+,\s*/,""),slotbookingTime:Ds(`${u}:checked`).siblings(f).text().trim(),bookingID:l.EV_BOOKID,statusMessage:"successful submission",statusCode:200,formSuccess:1},userDetails:Ps.methods.userDetails(Ds(a).is(":checked"))}))):l.EV_MESSAGE.includes("WIP")?(Ds(".service-booking__post-submit__id").text(l.EV_BOOKID),Ds(".service-booking__post-submit__number").text(l.EV_MOBILE),Ds(".service-booking__booked").removeClass("d-none").addClass("d-flex"),Ds(".service-booking__post-submit__success").removeClass("d-none").addClass("d-flex"),i.eventsListeners.ADOBE_DATA_LAYER.push(Ps.methods.createDatalayer("form failure",{webInteraction:Ps.methods.createWebInteraction(Ds(m).data("submit-label"),"service booking form",Ds(`${t}:checked`).parent().data("model-line")),form:{formName:"service booking form",formSection:"step3.1 - service booking form failure",serviceType:Ds(`${p}:selected`).text().trim(),dealerPincode:Ds(`${s}[name="pincode"]`).val(),dealership:Ds(`${n} option:selected`).data("dealer-name"),slotbookingDate:Ds(`${o}:checked`).data("confirm-date").replace(/^[A-Za-z]+,\s*/,""),slotbookingTime:Ds(`${u}:checked`).siblings(f).text().trim(),bookingID:l.EV_BOOKID,statusMessage:l.EV_MESSAGE,statusCode:200,formfailure:1},userDetails:Ps.methods.userDetails(Ds(a).is(":checked"))}))):(Ds(".service-booking__post-submit__failure").removeClass("d-none").addClass("d-flex"),i.eventsListeners.ADOBE_DATA_LAYER.push(Ps.methods.createDatalayer("form failure",{webInteraction:Ps.methods.createWebInteraction(Ds(m).data("submit-label"),"service booking form",Ds(`${t}:checked`).parent().data("model-line")),form:{formName:"service booking form",formSection:"step3.1 - service booking form failure",serviceType:Ds(`${p}:selected`).text().trim(),dealerPincode:Ds(`${s}[name="pincode"]`).val(),dealership:Ds(`${n} option:selected`).data("dealer-name"),slotbookingDate:Ds(`${o}:checked`).data("confirm-date").replace(/^[A-Za-z]+,\s*/,""),slotbookingTime:Ds(`${u}:checked`).siblings(f).text().trim(),bookingID:l.EV_BOOKID,statusMessage:l.EV_MESSAGE,statusCode:200,formfailure:1},userDetails:Ps.methods.userDetails(Ds(a).is(":checked"))})))}catch(e){Bt.method.hideLoader(),console.error(e),g.call(Ls,"api-failure")}},init(){const{serviceBookingForm:e}=Ls.variables;Ds(e).length&&(this.initGeocoderScript.call(Ls),this.generateValidationSchema.call(Ls),Os.methods.handleBlurValidation(Ds(e),e),Os.methods.handleInputValidation(Ds(e),e),this.handleDisableOtpFields.call(Ls),this.generateOtp.call(Ls),this.handleNumberField.call(Ls),this.handlePincodeFields.call(Ls),this.handleOtpFields.call(Ls),this.handleSubmit.call(Ls),this.handleBackBtn.call(Ls),this.initModal.call(Ls),this.onChangeAddressType.call(Ls),this.togglePickup.call(Ls),this.resizeTextarea.call(Ls),this.initScrollArrows.call(Ls))}}};var Is=n(9755);const Ps={variables:{serviceBookingForm:".service-booking__form",serviceBookingAddressRadio:".service-booking__address--radio",togglePickupInput:".service-booking__switch--input",serviceBookingInputs:".service-booking__form--input"},methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e,t,n){const i={linkName:e,brand:"mg select",channel:this.isMobile()?"msite|"+Lt.methods.getChannelName(Lt.methods.getPageName()):"web|"+Lt.methods.getChannelName(Lt.methods.getPageName()),pageName:Lt.methods.getPageName()};return n&&(i.model="MG_M9"==n?"m9":"cyberster"),t&&(i.linkPosition=t),i},removeNullValues(e){for(let t in e)e.hasOwnProperty(t)&&0==e.key&&(console.log(t,e[t]),delete e[t]);return e},createFormFillDatalayer(e,t,n,i,r,a,s){const o={formName:Lt.methods.getChannelName(Lt.methods.getPageName())};return e&&(o.formSection=e),t&&(o.formSuccess=t),n&&(o.formfailure=n),i&&(o.requestOtp=i),r&&(o.validateOtp=r),a&&(o.statusMessage=a),"step1.0 - service booking form start"==e&&(o.formStart=1),s&&(o.statusCode=s),this.removeNullValues(o)},formDatalayer(e,t,n,i,r,a){const s={formName:Lt.methods.getChannelName(Lt.methods.getPageName()),journeyTracking:1};return e&&(s.formSection=e),t&&(s.serviceType=t),i&&(s.dealerPincode=i),n&&(s.dealership=n),r&&(s.slotbookingDate=r),a&&(s.slotbookingTime=a),s},userDetails(e){const{serviceBookingForm:t,serviceBookingAddressRadio:n,togglePickupInput:i,serviceBookingInputs:r}=Ps.variables,a={phoneNumber:Is(t).find('[name="mobilePhone"]').val()};return e&&(a.pickupaddressType=Is(`${n}:checked`).val(),a.pincode=Is(i).is(":checked")?"registered"===Is(`${n}:checked`).val()?Ls.variables.customerPincode:Is(`${r}[name="pincode"]`).val():""),a},verifyOtp(e){let t=Is(e).data("next-label");console.log("Next button text:",t),i.eventsListeners.ADOBE_DATA_LAYER.push(Ps.methods.createDatalayer("validate otp",{webInteraction:Ps.methods.createWebInteraction(t,"service booking form"),form:Ps.methods.createFormFillDatalayer("step1.2 - validate otp",0,0,0,1),userDetails:{phoneNumber:Is(".service-booking__form--mobile[name='mobilePhone']").val()}}))},init(){const{serviceBookingForm:e}=Ps.variables;Is(e).length&&Is(".service-booking__form--mobile").on(i.eventsListeners.CLICK,(e=>{i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("form start",{webInteraction:this.createWebInteraction("form start"),form:this.createFormFillDatalayer("step1.0 - service booking form start")})),Is(".service-booking__form--mobile").off("click")}))}}};var Rs=n(9755);const Os={variables:{validateFieldsOnBlur:".validate-blur",validateFieldsOnSubmit:".validate-submit",validateFieldsOnInput:".validate-input",formGroup:".mg-select__form-group",errorField:".mg-select__form-validate",otpBtn:".mg-select__form-otp",inputs:".mg-select__form-input",isResendTimerActive:!1},methods:{isEmailValid(e){const t=Rs(e).val(),n=Rs(e).data("email-api-url"),i=Rs(e).data("email-api-key"),r=`${n}?email=${t}`;return kt.ajaxHit(r,"GET","",i)},isOtpValid(e,t){const n=Rs(e).find("input[name='otp']"),i=Rs(n).data("otp-verify-url"),r=Rs(n).data("otp-verify-apikey");let a="";Rs(n).each((function(){a+=Rs(this).val()}));let s=t?{BookingStatusSet:{BookingStatus:{Bookingnumber:Rs(e).find("input[name='mobilePhone']").val(),Pagename:"book_completion",verifycode:a,TPIN:"VF"}},otpsource:"VF",OTPtxtID:t,source:"ebooking"}:{numbers:Rs(e).find("input[name='mobilePhone']").val(),verifycode:a,TPIN:"VF",OTPtxtID:sessionStorage.getItem("otpTransactionId")};return s=JSON.stringify(s),kt.ajaxHit(i,"POST",s,r)},showEmailError(e){const{errorField:t}=Os.variables,n=Rs(e).siblings(t),i=Rs(e).data("email-invalid-error");Rs(n).removeClass("opacity-0"),Rs(e).addClass("input-error").focus(),Rs(n).text(i)},validateField(e,t,n,r){if("radio"==Rs(e).attr("type"))return;const{inputs:a,errorField:s}=Os.variables;let o=Rs(e).val();const l=Ct.variables.zodSchemas[t].shape[Rs(e).attr("name")];let c=Rs(e).siblings(s);"consent"===Rs(e).attr("name")&&(o=!!Rs(e).is(":checked")),"otp"===Rs(e).attr("name")&&(c=Rs(e).closest(a).siblings(s)),null==o&&(o="");try{return l.parse(o),Rs(e).removeClass("input-error"),c.text("Field Valid").addClass("opacity-0"),Rs(e).attr("aria-valid",!0),!0}catch(t){if(n!=i.eventsListeners.BLUR&&n!=i.eventsListeners.SUBMIT||requestAnimationFrame((()=>{c.removeClass("opacity-0"),Rs(e).addClass("input-error")})),n==i.eventsListeners.SUBMIT&&Rs(e).focus(),Rs(e).attr("aria-valid",!1),t instanceof Et.ZodError&&(requestAnimationFrame((()=>{c.text(t.errors[0].message)})),n==i.eventsListeners.SUBMIT)){const n={errorMessage:t.errors[0].message,errorField:Rs(e).attr("name"),errorType:t.errors[0].code};e.classList?.contains("newsletter__form-input")||("pre reserve"==Lt.methods.getPageName()?i.eventsListeners.ADOBE_DATA_LAYER.push(Pt.methods.createDatalayer("form error",{webInteraction:Pt.methods.createWebInteraction("proceed to pay","pre reserve form-proceed to pay"),form:Pt.methods.createFormFillDatalayer("",0,0,0,"",""),errorDetails:n})):"service booking"==Lt.methods.getPageName()&&r&&i.eventsListeners.ADOBE_DATA_LAYER.push(Ps.methods.createDatalayer("form error",{webInteraction:Ps.methods.createWebInteraction(r,"service booking form"),form:Ps.methods.createFormFillDatalayer(),errorDetails:{errorType:"submission error",errorMessage:t.errors[0].message}})))}return!1}},handleBlurValidation(e,t){const n=this,{validateFieldsOnBlur:r}=Os.variables;Rs(e).find(r).each((function(){Rs(this).on(i.eventsListeners.BLUR,(function(){if(""==Rs(this).val()&&!Rs(this).attr("required"))return!0;n.validateField(this,t,i.eventsListeners.BLUR)}))}))},handleSubmitValidation(e,t,n){const r=this,{validateFieldsOnSubmit:a}=Os.variables,s=Rs(e).find(`${a}:visible`);if(0==s.length)return!0;let o=!1;return s.each((function(){if(""===Rs(this).val()&&!Rs(this).prop("required"))return;const e=r.validateField(this,t,i.eventsListeners.SUBMIT,n);return o=e,e})),o},handleInputValidation(e,t){const n=this,{validateFieldsOnInput:r,otpBtn:a}=Os.variables,s=Rs(e).find(r),o=Rs(e).find(`${r}[name="mobilePhone"]:visible`),l=Rs(e).find(`${r}[name="email"]:visible`),c=Rs(e).find(a);s.each((function(){Rs(this).on(i.eventsListeners.INPUT,(function(e){if(""==Rs(this).val()&&!Rs(this).attr("required"))return Rs(this).addClass("input-error"),Rs(this).siblings(Os.variables.errorField).addClass("opacity-0"),!0;n.validateField(this,t,i.eventsListeners.INPUT),!Os.variables.isResendTimerActive&&(Rs(e.target).is(Rs(o))||Rs(e.target).is(Rs(l)))&&Rs(o).length&&Rs(l).length&&Rs(c).length&&("true"==Rs(o).attr("aria-valid")&&"true"==Rs(l).attr("aria-valid")?Rs(c).removeClass("pe-none opacity-60"):Rs(c).addClass("pe-none opacity-60"))}))}))}}};var Ns=n(9755);const Bs={variables:{leadGenContainer:".lead-generation",leadGenForm:".lead-generation__form",leadGenInput:".lead-generation__form-input",otpContainer:".lead-generation__form-otp",otpBtn:".lead-generation__form-otp__btn",leadGenError:".lead-generation__form--error",leadGenResendMsg:".lead-generation__resend-otp",leadGenResendTime:".lead-generation__resend-otp__time",ctaLabel:".cta-section__label",leadGenModal:".lead-generation__modal",leadGenCity:".lead-generation__pincode-city",dealerForm:"dealer__form",leadGenDealership:".lead-generation__dealership",leadGenDealershipOption:".lead-generation__dealership--option",otpAttempts:0,modal:null,firstName:"",lastName:"",mobilePhone:"",email:"",city:null,pincode:"",dealership:""},methods:{handleOtpFields(e){const{otpContainer:t,leadGenInput:n}=this.variables,i=Ns(e).find(t).find(n);Ct.methods.handleOtpEvents(i)},async fetchLatLngByPincode(e){const{leadGenInput:t}=this.variables,{showModal:n}=this.methods;try{return await Ut.methods.getLatLngFromPincode(Ns(e).find(`${t}[name="pincode"]`).val())}catch(t){Bt.method.hideLoader(),console.error(t),n.call(Bs,e,"api-failure")}},async fetchCityByPincode(e){const{leadGenForm:t,leadGenCity:n,leadGenError:i,leadGenInput:r}=this.variables,{showModal:a}=this.methods,s=Ns(e).find(t).data("fetch-by-pincode-url"),o=Ns(e).find(t).data("fetch-by-pincode-apikey"),l={pincode:Ns(e).find(`${r}[name="pincode"]`).val()};try{const t=await kt.ajaxHit(s,"GET",l,o);if(t[0]){let i=t[0].City;return Bs.variables.city=i,t[0].StateName.length&&(i+=", "+t[0].StateName),Ns(e).find(n).text(i).removeClass("opacity-0"),!0}return Ns(e).find(`${r}[name="pincode"]`).siblings(i).removeClass("opacity-0").text(Ns(e).find(`${r}[name="pincode"]`).data("invalid-error")),Ns(e).find(`${r}[name="pincode"]`).addClass("input-error"),Bt.method.hideLoader(),!1}catch(t){Bt.method.hideLoader(),console.error(t),a.call(Bs,e,"api-failure")}},async getDealerData(e,t,n){const{leadGenDealership:i,leadGenContainer:r,leadGenForm:a}=this.variables,{showModal:s}=this.methods,o=Ns(e).find(a).data("dealer-url"),l=Ns(e).find(a).data("dealer-apikey"),c=Ns(e).find('[name="site"]').val(),d=Ns(e).find('[name="model"]').val(),u=Ns(e).find('[name="dealerRequestType"]').val(),h=Ns(e).find('[name="noOfDealers"]').val()||3,p={latitude:t,longitude:n,Source:c,modelLine:d,type:u};try{const t=await kt.ajaxHit(o,"GET",p,l);return Bt.method.hideLoader(),Ns(e).find(i).html(`\n                    <option disabled selected hidden value="" >${Ns(e).find(i).data("placeholder")}</option>\n                `),Ns(e).find(i).attr("disabled",!0),t.DealerList?(Ns.each(t.DealerList.slice(0,h),(function(t,n){const r=`\n                            <option class="lead-generation__dealership--option" \n                                data-sales-manager-email="${n.Sales_Manager_Email}" \n                                data-merchant-id="${n.MerchantID}" \n                                data-dealer-name="${n.DealerName}"\n                                value="${n.DealerCode}"\n                                ${0==t?"selected":""}>\n                                ${n.DealerName}\n                            </option>`;Ns(e).find(i).append(r),Ns(e).find(i).attr("disabled",!1)})),Os.methods.validateField(Ns(e).find(i),r,"submit"),!0):(s.call(Bs,e,"dealer-not-found"),!1)}catch(t){Bt.method.hideLoader(),console.error(t),s.call(Bs,e,"api-failure")}},handlePincodeFields(e){const{leadGenInput:t,leadGenCity:n,leadGenDealership:r}=this.variables,{fetchCityByPincode:a,fetchLatLngByPincode:s,getDealerData:o}=this.methods,{INPUT:l}=i.eventsListeners;Ns(e).find(`${t}[name="pincode"]`).on(l,(async function(){if("true"==Ns(this).attr("aria-valid")){Bt.method.showLoader();if(await a.call(Bs,e)){const t=await s.call(Bs,e);t.lat&&t.lng&&await o.call(Bs,e,t.lat,t.lng)}}else Ns(e).find(n).text("").addClass("opacity-0"),Ns(e).find(r).html(`\n                            <option disabled selected hidden value="" >${Ns(e).find(r).data("placeholder")}</option>\n                        `),Ns(e).find(r).attr("disabled",!0)}))},handleNumberField(e){const t=Ns(e).find('input[name="mobilePhone"]'),n=Ns(e).find('input[name="dealerEmpID"]'),i=Ns(e).find('input[name="pincode"]');Ct.methods.handleNumberInput(t),n.length&&Ct.methods.handleNumberInput(n),i.length&&Ct.methods.handleNumberInput(i)},validateForm(e){const{leadGenContainer:t}=this.variables;return Os.methods.handleSubmitValidation(e,t)},async isEmailValid(e){try{const{leadGenInput:t}=this.variables,n=Ns(e).find(`${t}[name="email"]`);Bt.method.showLoader();return"clean"==(await Os.methods.isEmailValid(n)).email_status||(Os.methods.showEmailError(n),Bt.method.hideLoader(),!1)}catch(t){const{showModal:n}=this.methods;return n.call(Bs,e,"api-failure"),console.error("An error occured: ",t),Bt.method.hideLoader(),!1}},async isOtpValid(e){try{Bt.method.showLoader();if("c3VjY2Vzcw=="==(await Os.methods.isOtpValid(e)).status)return!0;{const{otpContainer:e,leadGenError:t}=this.variables,n=Ns(e).siblings(t),r=Ns(e).find("input[name='otp']").data("otp-failure-error");Ns(n).removeClass("opacity-0"),Ns(n).text(r),Bt.method.hideLoader();const a={errorMessage:r,errorCode:200,errorType:"Invalid OTP"};return i.eventsListeners.ADOBE_DATA_LAYER.push(Pt.methods.createDatalayer("form error",{webInteraction:Pt.methods.createWebInteraction("submit","kmi form"),form:Pt.methods.createFormFillDatalayer("",0,0,0,"",""),errorDetails:a})),!1}}catch(t){const{showModal:n}=this.methods;return n.call(Bs,e,"api-failure"),console.error("An error occured: ",t),Bt.method.hideLoader(),i.eventsListeners.ADOBE_DATA_LAYER.push(Pt.methods.createDatalayer("otp failure",{webInteraction:Pt.methods.createWebInteraction("get otp","kmi form"),form:Pt.methods.createFormFillDatalayer("step3.1 - kmi form failure",0,0,0,"",t),userDetails:{email:Bs.variables.email,firstName:Bs.variables.firstName,lastName:Bs.variables.lastName,phoneNumber:Bs.variables.mobilePhone}})),!1}},resendOtpTimer(e,t){const{leadGenResendTime:n,leadGenResendMsg:r,ctaLabel:a}=this.variables;let s=i.timeIntervals.OTP_RESEND_TIME;Ns(t).find(n).text(` ${s} `),Ns(t).find(r).removeClass("opacity-0").addClass("opacity-50"),Ns(e).find(a).text(Ns(e).data("resend-otp-label")),Ns(e).addClass("pe-none opacity-60"),Os.variables.isResendTimerActive=!0,Bt.method.hideLoader();const o=setInterval((function(){Ns(t).find(n).text(` ${s} `),s--,s<0&&(Os.variables.isResendTimerActive=!1,clearInterval(o),Ns(e).removeClass("pe-none opacity-60"),Ns(t).find(r).addClass("opacity-0").removeClass("opacity-50"))}),1e3)},generateOtp(e){const t=this,{leadGenInput:n,otpBtn:r}=this.variables,{isEmailValid:a,resendOtpTimer:s,showModal:o}=this.methods,l=Ns(e).find(`${n}[name = "otp"]`).data("otp-generate-url"),c=Ns(e).find(`${n}[name = "otp"]`).data("otp-generate-apikey"),d=Ns(e).find(r),u=i.validationLimits.MAX_OTP_ATTEMPTS;Ns(d).on(i.eventsListeners.CLICK,(async function(){if(t.variables.otpAttempts<u){t.variables.otpAttempts++,1==t.variables.otpAttempts&&setTimeout((function(){t.variables.otpAttempts=0}),1e3*i.timeIntervals.OTP_RESET_TIME);if(!await a.call(Bs,e))return;let d={email:Ns(e).find(`${n}[name = "email"]`).val(),numbers:Ns(e).find(`${n}[name = "mobilePhone"]`).val(),otpsource:"kmi"};d=JSON.stringify(d);kt.ajaxHit(l,"POST",d,c).done((t=>{const n=t.TransactionId;if("limitReached"==n)return i.eventsListeners.ADOBE_DATA_LAYER.push(Pt.methods.createDatalayer("form error",{webInteraction:Pt.methods.createWebInteraction("submit","kmi form"),form:Pt.methods.createFormFillDatalayer("",0,0,0,"",""),errorDetails:{errorType:"OTP limit error",errorMessage:t.Error,errorCode:200}})),void o.call(Bs,e,"max-attempts");sessionStorage.setItem("otpTransactionId",n),s.call(Bs,r,e)})).fail((t=>{Bt.method.hideLoader(),o.call(Bs,e,"api-failure"),console.error(t)}))}else o.call(Bs,e,"max-attempts"),Bt.method.hideLoader()}))},getRequestData(e){const{leadGenInput:t,dealerForm:n,leadGenDealershipOption:i}=this.variables;let r,a=Ns(e).find(`${t}[name="city"] option:selected`).text().trim();if("Bengaluru - Richmond Circle, Lavelle Road"===a&&(a="Bengaluru"),Ns(e).hasClass(n))r={model:Ns(e).find('[name="model"]').val(),firstName:Ns(e).find(`${t}[name="firstName"]`).val(),lastName:Ns(e).find(`${t}[name="lastName"]`).val(),email:Ns(e).find(`${t}[name="email"]`).val(),mobilePhone:Ns(e).find(`${t}[name="mobilePhone"]`).val(),emailValidated:1,city:a,dealerCode:Ns(e).find(`${t}[name="city"] option:selected`).data("dealerCode").trim(),dealerEmpID:Ns(e).find(`${t}[name="dealerEmpID"]`).val()};else{const n=ks.methods.formatDateParams(new Date);r={marketingConsentTimestamp:n,leadCaptureTimestamp:n,MID:1234554401535,source:"mg_select_kmi",intent:"",dealerEmail:"",model:Ns(e).find('input[name="modelName"]').val(),marketingConsent:"1",kmidocpath:"",city:Bs.variables.city,gclid:"",fbclid:"",ecid:"",cid:"2091955782.1677499653",utmCampaign:"",utmMedium:"",utmSource:"",utmTerm:"",utmContent:"",firstName:Ns(e).find(`${t}[name="firstName"]`).val(),lastName:Ns(e).find(`${t}[name="lastName"]`).val(),email:Ns(e).find(`${t}[name="email"]`).val(),mobilePhone:Ns(e).find(`${t}[name="mobilePhone"]`).val(),emailValidated:1,dealerCode:Ns(e).find(`${i}:selected`).val(),pincode:Ns(e).find(`${t}[name="pincode"]`).val()}}return r},getLeadGenResponse(e){const{getRequestData:t,leadGenInput:n}=this.methods,i=Ns(e).data("lead-generation-url"),r=Ns(e).data("lead-generation-api-key");let a=t.call(Bs,e);return Bs.variables.firstName=a.firstName,Bs.variables.lastName=a.lastName,Bs.variables.email=a.email,Bs.variables.mobilePhone=a.mobilePhone,Bs.variables.dealership=Ns(e).find(".lead-generation__dealership option:selected").data("dealer-name"),Bs.variables.pincode=Ns("input[name='pincode']").val(),a=JSON.stringify(a),kt.ajaxHit(i,"POST",a,r)},async useLeadGenResponse(e){const{leadGenResendMsg:t,otpBtn:n,ctaLabel:r,leadGenCity:a,leadGenDealership:s}=this.variables,{getLeadGenResponse:o,showModal:l}=this.methods;try{const c=await o.call(Bs,e);Bt.method.hideLoader(),null!=c.MID?(Ns(e).find(t).addClass("opacity-0").removeClass("opacity-50"),Ns(n).addClass("pe-none opacity-60"),Ns(n).find(r).text(Ns(n).data("get-otp-label")),e.reset(),Ns(e).find(a).text("").addClass("opacity-0"),Ns(e).find(s).html(`\n                        <option disabled selected hidden value="" >${Ns(e).find(s).data("placeholder")}</option>\n                    `),Ns(e).find(s).attr("disabled",!0),l.call(Bs,e,"success"),""!=c.c4cLeadID?i.eventsListeners.ADOBE_DATA_LAYER.push(Pt.methods.createDatalayer("form success",{webInteraction:Pt.methods.createWebInteraction("submit","kmi form"),form:Pt.methods.createFormFillDatalayer("step3.0 - kmi form submit",1,0,0,c.c4cLeadID,Bs.variables.dealership,"successful submission"),userDetails:{email:Bs.variables.email,firstName:Bs.variables.firstName,lastName:Bs.variables.lastName,phoneNumber:Bs.variables.mobilePhone,pincode:Bs.variables.pincode}})):i.eventsListeners.ADOBE_DATA_LAYER.push(Pt.methods.createDatalayer("form failure",{webInteraction:Pt.methods.createWebInteraction("submit","kmi form"),form:Pt.methods.createFormFillDatalayer("step3.1 - kmi form failure",0,1,0,"",Bs.variables.dealership,"user already exists",200),userDetails:{email:Bs.variables.email,firstName:Bs.variables.firstName,lastName:Bs.variables.lastName,phoneNumber:Bs.variables.mobilePhone,pincode:Bs.variables.pincode}}))):"failure"==c.Status?(l.call(Bs,e,"submit-failure"),i.eventsListeners.ADOBE_DATA_LAYER.push(Pt.methods.createDatalayer("form failure",{webInteraction:Pt.methods.createWebInteraction("submit","kmi form"),form:Pt.methods.createFormFillDatalayer("step3.1 - kmi form failure",0,1,0,"",Bs.variables.dealership,"submission failure",200),userDetails:{email:Bs.variables.email,firstName:Bs.variables.firstName,lastName:Bs.variables.lastName,phoneNumber:Bs.variables.mobilePhone,pincode:Bs.variables.pincode}}))):(l.call(Bs,e,"api-failure"),i.eventsListeners.ADOBE_DATA_LAYER.push(Pt.methods.createDatalayer("form failure",{webInteraction:Pt.methods.createWebInteraction("submit","kmi form"),form:Pt.methods.createFormFillDatalayer("step3.1 - kmi form failure",0,1,0,"",Bs.variables.dealership,"api failure"),userDetails:{email:Bs.variables.email,firstName:Bs.variables.firstName,lastName:Bs.variables.lastName,phoneNumber:Bs.variables.mobilePhone,pincode:Bs.variables.pincode}})))}catch(t){l.call(Bs,e,"api-failure"),console.error("An error occured: ",t),Bt.method.hideLoader(),i.eventsListeners.ADOBE_DATA_LAYER.push(Pt.methods.createDatalayer("form failure",{webInteraction:Pt.methods.createWebInteraction("submit","kmi form"),form:Pt.methods.createFormFillDatalayer("step3.1 - kmi form failure",0,1,0,"",Bs.variables.dealership,t),userDetails:{email:Bs.variables.email,firstName:Bs.variables.firstName,lastName:Bs.variables.lastName,phoneNumber:Bs.variables.mobilePhone,pincode:Bs.variables.pincode}}))}},getDealerEnquiryResponse(e){const{getRequestData:t}=this.methods,n=Ns(e).data("dealer-enquiry-url"),i=Ns(e).data("dealer-enquiry-api-key");let r=t.call(Bs,e);return Bs.variables.firstName=r.firstName,Bs.variables.lastName=r.lastName,Bs.variables.email=r.email,Bs.variables.mobilePhone=r.mobilePhone,Bs.variables.dealership=Ns(e).find(".lead-generation__dealership option:selected").data("dealer-name"),Bs.variables.pincode=Ns("input[name='pincode']").val(),r=JSON.stringify(r),kt.ajaxHit(n,"POST",r,i)},async dealerEnquiryResponse(e){const{otpBtn:t,ctaLabel:n,leadGenResendMsg:i}=this.variables,{getDealerEnquiryResponse:r,showModal:a}=this.methods;try{const s=await r.call(Bs,e);Bt.method.hideLoader(),"Success"==s.status?(a.call(Bs,e,"success"),Ns(e).find(i).addClass("opacity-0").removeClass("opacity-50"),Ns(t).addClass("pe-none opacity-60"),Ns(t).find(n).text(Ns(t).data("get-otp-label")),e.reset()):a.call(Bs,e,"submit-failure")}catch(t){a.call(Bs,e,"api-failure"),console.error("An error occured: ",t),Bt.method.hideLoader()}},submitForm(e){const{leadGenForm:t,dealerForm:n,leadGenInput:r,leadGenContainer:a}=this.variables,{validateForm:s,isOtpValid:o,useLeadGenResponse:l,dealerEnquiryResponse:c}=this.methods;Ns(e).find(t).on(i.eventsListeners.SUBMIT,(async function(e){e.preventDefault();const t=s.call(Bs,this);if(!t){let e=[];Ns(r).each((function(){if(""!==Ns(this).val()||Ns(this).prop("required")){let t=Ns(this).val();const n=Ct.variables.zodSchemas[a].shape[Ns(this).attr("name")];"consent"===Ns(this).attr("name")&&(t=!!Ns(this).is(":checked")),null==t&&(t="");try{n.parse(t)}catch(t){t instanceof Et.ZodError&&e.push(t.errors[0].message)}}else;}));const t=e.join(" | ");i.eventsListeners.ADOBE_DATA_LAYER.push(Pt.methods.createDatalayer("form error",{webInteraction:Pt.methods.createWebInteraction("submit","kmi form"),form:Pt.methods.createFormFillDatalayer("",0,0,0,"",""),errorDetails:{errorType:"submission errors",errorMessage:t}}))}if(t){await o.call(Bs,this)&&(Ns(this).hasClass(n)?await c.call(Bs,this):await l.call(Bs,this))}}))},generateValidationSchema(e){const{leadGenInput:t,leadGenContainer:n}=this.variables,i=[];Ns(e).find(t).each((function(){i.push(Ns(this).attr("name"))})),Ct.methods.generateFormSchema.call(Ct,i,e,n)},initModal(e){const{leadGenModal:t}=this.variables;Bs.variables.modal=Cs.methods.initModal(Ns(e).find(t))},showModal(e,t){const{modal:n,leadGenContainer:i,leadGenModal:r}=this.variables,a=Ns(e).closest(i).find(Cs.variables.modalTitle),s=Ns(e).closest(i).find(Cs.variables.modalMessage),o=Ns(e).closest(i).find(r).data(`${t}-title`)??"",l=Ns(e).closest(i).find(r).data(`${t}-subtitle`)??"";Ns(a).text(o),Ns(s).text(l),n.show()},initGeocoderScript(e){const{leadGenForm:t}=this.variables,n=Ns(e).find(t).data("geocoder-url");null!=Ut.variables.googleGeocoder||Ns("main").data("iseditmode")||Ut.methods.loadScript(n)},init(){const e=this,{leadGenContainer:t}=Bs.variables,n=Ns(t);n.length&&n.each((function(){e.initGeocoderScript.call(Bs,this),e.initModal.call(Bs,this),e.submitForm.call(Bs,this),e.generateValidationSchema.call(Bs,this),e.generateOtp.call(Bs,this),Os.methods.handleBlurValidation(this,t),Os.methods.handleInputValidation(this,t),e.handleOtpFields.call(Bs,this),e.handleNumberField.call(Bs,this),e.handlePincodeFields.call(Bs,this)}))}}};var Fs=n(9755);const Us={variables:{testDriveContainer:".test-drive",testDriveForm:".test-drive__form"},methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e,t){const n={linkName:e,brand:"mg select",channel:this.isMobile()?"msite|"+Lt.methods.getChannelName(Lt.methods.getPageName()):"web|"+Lt.methods.getChannelName(Lt.methods.getPageName()),pageName:Lt.methods.getPageName()},i=Fs(".test-drive__form").find("[name='model']"),r=i.val()?i.find("option:selected").text().toLowerCase():"";return r&&(n.model=r),t&&(n.linkPosition=t),n},removeNullValues(e){for(let t in e)e.hasOwnProperty(t)&&0==e.key&&(console.log(t,e[t]),delete e[t]);return e},createFormFillDatalayer(e,t,n,i,r,a,s,o){const l={formName:Lt.methods.getChannelName(Lt.methods.getPageName())};return e&&(l.formSection=e),t&&(l.formSuccess=t),n&&(l.formfailure=n),i&&(l.requestOtp=i),r&&(l.leadID=r),a&&(l.dealership=a),s&&(l.statusMessage=s),"step1.0 - test drive form start"==e&&(l.formStart=1),o&&(l.statusCode=o),this.removeNullValues(l)},createUserDetails(){const{testDriveForm:e}=Us.variables;return{firstName:Fs(e).find('[name="firstName"]').val(),lastName:Fs(e).find('[name="lastName"]').val(),email:Fs(e).find('[name="email"]').val(),phoneNumber:Fs(e).find('[name="mobilePhone"]').val(),pincode:Fs(e).find('[name="pincode"]').val()}},init(){const{testDriveContainer:e}=Us.variables;Fs(e).length&&Fs(".test-drive__form-group input").on(i.eventsListeners.CLICK,(e=>{i.eventsListeners.WINDOW.adobeDataLayer.push(this.createDatalayer("form start",{webInteraction:this.createWebInteraction("form start"),form:this.createFormFillDatalayer("step1.0 - test drive form start")})),Fs(".test-drive__form-group input").off("click")}))}}};n(4414);var zs=n(9755);const Vs={variables:{testDriveInput:".test-drive__form-input",testDriveContainer:".test-drive",testDriveOtpInput:".test-drive__form-otp__input",testDriveOtpBtn:".test-drive__form-otp__btn",testDriveForm:".test-drive__form",testDriveDealership:".test-drive__dealership",testDriveDealershipOption:".test-drive__dealership--option",testDriveModal:".test-drive__modal",testDriveOtpContainer:".test-drive__form-otp",testDriveError:".test-drive__form--error",testDriveResendMsg:".test-drive__resend-otp",testDriveResendTime:".test-drive__resend-otp__time",ctaLabel:".cta-section__label",testDriveCity:".test-drive__pincode-city",testDriveDatePicker:".test-drive__date-picker",otpAttempts:0,city:null,state:null,modal:null,email:"",mobile:"",pincode:""},methods:{focusDateField(){const{testDriveDatePicker:e}=this.variables;ks.methods.isMobile()&&zs(e).each((function(){zs(this).on(i.eventsListeners.FOCUS,(function(){const e=this;setTimeout((()=>{const t=e.getBoundingClientRect();window.innerHeight-t.bottom>=t.top?(e.scrollIntoView({block:"start",behavior:"smooth"}),window.scrollBy(0,-30)):(e.scrollIntoView({block:"end",behavior:"smooth"}),window.scrollBy(0,30))}),500)}))}))},handleDateInput(){const{testDriveDatePicker:e}=this.variables;zs(e).each((function(){Ct.methods.handleDateField(zs(this))}))},initDatePicker(){const{testDriveDatePicker:e,testDriveError:t}=this.variables,{validateDate:n,showValidationMessage:i}=this.methods;zs(e).each((function(){zs(this).datepicker({dateFormat:"dd/mm/yy",minDate:0,showAnim:"fadeIn",changeMonth:!0,changeYear:!0,onClose:function(){const e=zs(this),r=n(e);i(e,r,t)}})}))},validateDate(e){const t=e.val().trim();if(!t)return e.data("required-error");if(!i.validationPatterns.DATE_REGEX.test(t))return e.data("format-error");const[n,r,a]=t.split("/").map(Number),s=new Date(a,r-1,n);if(!(s.getFullYear()===a&&s.getMonth()===r-1&&s.getDate()===n))return e.data("invalid-error");const o=new Date;return o.setHours(0,0,0,0),s<o?e.data("past-date-error"):"valid"},showValidationMessage(e,t,n){const i=e.siblings(n);"valid"===t?(i.addClass("opacity-0"),e.removeClass("input-error").attr("aria-valid",!0)):(i.text(t).removeClass("opacity-0"),e.addClass("input-error").attr("aria-valid",!1))},generateValidationSchema(){const{testDriveInput:e,testDriveForm:t,testDriveContainer:n}=this.variables,i=[];zs(e).each((function(){i.push(zs(this).attr("name"))})),Ct.methods.generateFormSchema.call(Ct,i,zs(t),n)},handleOtpFields(){const{testDriveOtpInput:e}=this.variables;Ct.methods.handleOtpEvents(zs(e))},handleNumberField(){const{testDriveForm:e}=this.variables,t=zs(e).find('input[name="mobilePhone"]'),n=zs(e).find('input[name="pincode"]');Ct.methods.handleNumberInput(t),Ct.methods.handleNumberInput(n)},validateForm(){const{testDriveContainer:e,testDriveInput:t}=this.variables;let n=Os.methods.handleSubmitValidation(zs(e),e);if(n&&(n="true"==zs(`${t}[name="BookedDateValue"]`).attr("aria-valid")),!n){let n=[];zs(t).each((function(){if(""!==zs(this).val()||zs(this).prop("required")){let t=zs(this).val();const i=Ct.variables.zodSchemas[e].shape[zs(this).attr("name")];"consent"===zs(this).attr("name")&&(t=!!zs(this).is(":checked")),null==t&&(t="");try{i.parse(t)}catch(e){e instanceof Et.ZodError&&n.push(e.errors[0].message)}}else;}));const r=n.join(" | ");i.eventsListeners.ADOBE_DATA_LAYER.push(Us.methods.createDatalayer("form error",{webInteraction:Us.methods.createWebInteraction("submit","test drive form"),form:Us.methods.createFormFillDatalayer(),errorDetails:{errorType:"submission errors",errorMessage:r}}))}return n},async isEmailValid(){try{const{testDriveInput:e}=this.variables,t=zs(`${e}[name="email"]`);Bt.method.showLoader();return"clean"==(await Os.methods.isEmailValid(t)).email_status||(Os.methods.showEmailError(t),Bt.method.hideLoader(),!1)}catch(e){const{showModal:t}=this.methods;return t.call(Vs,"api-failure"),console.error("An error occured: ",e),Bt.method.hideLoader(),!1}},async fetchLatLngByPincode(){const{testDriveInput:e}=this.variables,{showModal:t}=this.methods;try{return await Ut.methods.getLatLngFromPincode(zs(`${e}[name="pincode"]`).val())}catch(e){Bt.method.hideLoader(),console.error(e),t.call(Vs,"api-failure")}},async getDealerData(e,t){const{testDriveDealership:n,testDriveContainer:i,testDriveForm:r}=this.variables,{showModal:a}=this.methods,s=zs(r).data("dealer-url"),o=zs(r).data("dealer-apikey"),l=zs(r).find('[name="site"]').val(),c=zs(r).find('[name="noOfDealers"]').val()||5,d={latitude:e,longitude:t,Source:l,modelLine:zs(r).find('[name="model"] option:selected').val(),type:zs(r).find('[name="dealerRequestType"]').val()};try{const e=await kt.ajaxHit(s,"GET",d,o);return Bt.method.hideLoader(),zs(n).html(`\n                    <option disabled selected hidden value="" >${zs(n).data("placeholder")}</option>\n                `),zs(n).attr("disabled",!0),e.DealerList?(zs.each(e.DealerList.slice(0,c),(function(e,t){const i=`\n                            <option class="test-drive__dealership--option" \n                                data-sales-manager-email="${t.Sales_Manager_Email}" \n                                data-merchant-id="${t.MerchantID}" \n                                data-dealer-name="${t.DealerName}"\n                                value="${t.DealerCode}"\n                                ${0==e?"selected":""}>\n                                ${t.DealerName}\n                            </option>`;zs(n).append(i),zs(n).attr("disabled",!1)})),Os.methods.validateField(zs(n),i,"submit"),!0):(a.call(Vs,"dealer-not-found"),!1)}catch(e){Bt.method.hideLoader(),console.error(e),a.call(Vs,"api-failure")}},formatDate(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`},getRequestData(){const{testDriveForm:e,city:t,state:n,testDriveOtpInput:i,testDriveDealership:r}=this.variables,a=ks.methods.formatDateParams(new Date),s=zs(e).find('[name="mobilePhone"]').val(),o=zs(e).find('[name="sourceOtp"]').val()||"testDrive",l=_satellite?.getVar("MCID")||zs(e).find('[name="mid"]').val()||"63187727463346165432919796667760418581",c=gaGlobal?.vid||zs(e).find('[name="cid"]').val()||"1245921524.1679379906",d=zs(e).find('[name="firstName"]').val(),u=zs(e).find('[name="lastName"]').val(),h=zs(e).find('[name="email"]').val(),p=zs(e).find('[name="pincode"]').val(),m=ks.methods.formatDateToISO(zs(e).find('[name="BookedDateValue"]').val()),f=zs(r).find("option:selected").val(),g=zs(e).find('[name="dealerEmail"]').val(),v=zs(e).find('[name="model"] option:selected').val(),_=zs(e).find('[name="ExpectedPurchaseDate"] option:selected').val(),b=zs(e).find('[name="Fueltype"]').val()||"5",y=zs(e).find('[name="Transmissiontype"]').val()||"AUTM",x=zs(e).find('[name="source"]').val()||"Test Drive Leads",w=zs(e).find('[name="Status"]').val()||"RQD",S=zs(e).find('[name="TPIN"]').val()||"VF",T=sessionStorage.getItem("otpTransactionId");let E="";return zs(i).each((function(){E+=zs(this).val()})),{numbers:s,verifycode:E,TPIN:S,OTPtxtID:T,source:o,testDrive:{MID:l,firstName:d,lastName:u,email:h,PhoneNumber:s,mobilePhone:s,source:x,DealerId:f,dealerEmail:g,leadCaptureTimestamp:a,emailValidated:1,CarVariantId:"",BookedDateValue:m,ExpectedPurchaseDate:_,addressLine1:"",addressLine2:"",pincode:p,modelName:v,Fueltype:b,Transmissiontype:y,city:t,state:n,StartTime:"",EndTime:"",Variant:"",marketingConsent:"1",marketingConsentTimestamp:a,Status:w,gclid:"",cid:c,ecid:"",utm_campaign:"",utm_medium:"",utm_source:"",utm_term:"",utm_content:""}}},resetForm(){const{testDriveForm:e,testDriveDealership:t,testDriveCity:n,testDriveOtpBtn:i,testDriveResendMsg:r,ctaLabel:a}=this.variables;zs(r).addClass("opacity-0").removeClass("opacity-50"),zs(i).addClass("pe-none opacity-60"),zs(i).find(a).text(zs(i).data("get-otp-label")),zs(e).get(0).reset(),zs(n).text("").addClass("opacity-0"),zs(t).html(`\n                <option disabled selected hidden value="" >${zs(t).data("placeholder")}</option>\n            `),zs(t).attr("disabled",!0)},async useTestDriveResponse(){const{testDriveForm:e,testDriveOtpInput:t,testDriveError:n,testDriveOtpContainer:r,testDriveDealership:a}=this.variables,{showModal:s,getRequestData:o,resetForm:l}=this.methods,c=zs(e).data("test-drive-url"),d=zs(e).data("test-drive-apikey"),u=o.call(Vs),h=JSON.stringify(u);Bt.method.showLoader();try{const e=await kt.ajaxHit(c,"POST",h,d);if(Bt.method.hideLoader(),"Success"==e.c4cTestDrive_Status||e.c4cTestDrive_LeadID)i.eventsListeners.ADOBE_DATA_LAYER.push(Us.methods.createDatalayer("form success",{webInteraction:Us.methods.createWebInteraction("submit","test drive form"),form:Us.methods.createFormFillDatalayer("step3.0 - test drive form submit",1,0,0,e.c4cTestDrive_LeadID,zs(a).find("option:selected").data("dealer-name"),"successful submission"),userDetails:Us.methods.createUserDetails()})),l.call(Vs),s.call(Vs,"success");else if("ZmFpbHVyZQ=="==e.status){const e=zs(r).siblings(n),a=zs(t).eq(0).data("otp-failure-error");zs(e).removeClass("opacity-0"),zs(e).text(a),i.eventsListeners.ADOBE_DATA_LAYER.push(Us.methods.createDatalayer("form error",{webInteraction:Us.methods.createWebInteraction("submit","test drive form"),form:Us.methods.createFormFillDatalayer(),errorDetails:{errorType:"OTP error",errorMessage:a,errorCode:200}}))}else"failure"==e.Status||"error"==e.status?(i.eventsListeners.ADOBE_DATA_LAYER.push(Us.methods.createDatalayer("form failure",{webInteraction:Us.methods.createWebInteraction("submit","test drive form"),form:Us.methods.createFormFillDatalayer("step3.1 - test drive form failure",0,1,0,"",zs(a).find("option:selected").data("dealer-name"),"failure"===e.Status?e.Message:e.msg,200),userDetails:Us.methods.createUserDetails()})),l.call(Vs),s.call(Vs,"success")):(s.call(Vs,"submit-failure"),i.eventsListeners.ADOBE_DATA_LAYER.push(Us.methods.createDatalayer("form failure",{webInteraction:Us.methods.createWebInteraction("submit","test drive form"),form:Us.methods.createFormFillDatalayer("step3.1 - test drive form failure",0,1,0,"",zs(a).find("option:selected").data("dealer-name"),"failure"===e.Status?e.Message:e.msg,200),userDetails:Us.methods.createUserDetails()})))}catch(e){s.call(Vs,"api-failure"),console.error("An error occured: ",e),Bt.method.hideLoader(),i.eventsListeners.ADOBE_DATA_LAYER.push(Us.methods.createDatalayer("form failure",{webInteraction:Us.methods.createWebInteraction("submit","test drive form"),form:Us.methods.createFormFillDatalayer("step3.1 - test drive form failure",0,1,0,"","",e.message),userDetails:Us.methods.createUserDetails()}))}},async fetchCityByPincode(){const{testDriveInput:e,testDriveError:t,testDriveCity:n,testDriveForm:i}=this.variables,{showModal:r}=this.methods,a=zs(i).data("fetch-by-pincode-url"),s=zs(i).data("fetch-by-pincode-apikey"),o={pincode:zs(`${e}[name="pincode"]`).val()};try{const i=await kt.ajaxHit(a,"GET",o,s);if(i[0]){let e=i[0].City;return Vs.variables.city=e,i[0].StateName.length&&(e+=", "+i[0].StateName,Vs.variables.state=i[0].StateName),zs(n).text(e).removeClass("opacity-0"),!0}return zs(`${e}[name="pincode"]`).siblings(t).removeClass("opacity-0").text(zs(`${e}[name="pincode"]`).data("invalid-error")),zs(`${e}[name="pincode"]`).addClass("input-error"),Bt.method.hideLoader(),!1}catch(e){Bt.method.hideLoader(),console.error(e),r.call(Vs,"api-failure")}},resendOtpTimer(){const{testDriveResendTime:e,testDriveResendMsg:t,ctaLabel:n,testDriveOtpBtn:r}=this.variables;let a=i.timeIntervals.OTP_RESEND_TIME;zs(e).text(` ${a} `),zs(t).removeClass("opacity-0").addClass("opacity-50"),zs(r).find(n).text(zs(r).data("resend-otp-label")),zs(r).addClass("pe-none opacity-60"),Os.variables.isResendTimerActive=!0,Bt.method.hideLoader();const s=setInterval((function(){zs(e).text(` ${a} `),a--,a<0&&(Os.variables.isResendTimerActive=!1,clearInterval(s),zs(r).removeClass("pe-none opacity-60"),zs(t).addClass("opacity-0").removeClass("opacity-50"))}),1e3)},handlePincodeFields(){const{testDriveInput:e,testDriveCity:t,testDriveDealership:n}=this.variables,{fetchCityByPincode:r,fetchLatLngByPincode:a,getDealerData:s}=this.methods,{INPUT:o}=i.eventsListeners;zs(`${e}[name="pincode"]`).on(o,(async function(){if("true"==zs(this).attr("aria-valid")){Bt.method.showLoader();if(await r.call(Vs)){const e=await a.call(Vs);e.lat&&e.lng&&await s.call(Vs,e.lat,e.lng)}}else zs(t).text("").addClass("opacity-0"),zs(n).html(`\n                            <option disabled selected hidden value="" >${zs(n).data("placeholder")}</option>\n                        `),zs(n).attr("disabled",!0)}))},disablePreviousDates(){const{testDriveForm:e}=this.variables,t=(new Date).toISOString().split("T")[0];zs(e).find('[name="BookedDateValue"]').attr("min",t),zs(e).find('[name="BookedDateValue"]').on(i.eventsListeners.CLICK,(function(){this.showPicker()}))},generateOtp(){const{testDriveInput:e,testDriveOtpBtn:t,testDriveOtpInput:n,testDriveForm:r}=this.variables,{isEmailValid:a,resendOtpTimer:s,showModal:o}=this.methods,l=zs(`${e}[name = "otp"]`).data("otp-generate-url"),c=zs(`${e}[name = "otp"]`).data("otp-generate-apikey"),d=i.validationLimits.MAX_OTP_ATTEMPTS;zs(t).on(i.eventsListeners.CLICK,(async function(){if(i.eventsListeners.ADOBE_DATA_LAYER.push(Us.methods.createDatalayer("request otp",{webInteraction:Us.methods.createWebInteraction(zs(t).find(".cta-section__label").text().trim(),"test drive form"),form:Us.methods.createFormFillDatalayer("step2.0 - request otp",0,0,1),userDetails:Us.methods.createUserDetails()})),Vs.variables.otpAttempts<d){Vs.variables.otpAttempts++,1==Vs.variables.otpAttempts&&setTimeout((function(){Vs.variables.otpAttempts=0}),1e3*i.timeIntervals.OTP_RESET_TIME);if(!await a.call(Vs))return;let r={email:zs(`${e}[name = "email"]`).val(),numbers:zs(`${e}[name = "mobilePhone"]`).val(),otpsource:"VF"};r=JSON.stringify(r);kt.ajaxHit(l,"POST",r,c).done((e=>{const r=e.TransactionId;if("limitReached"==r)return i.eventsListeners.ADOBE_DATA_LAYER.push(Us.methods.createDatalayer("form error",{webInteraction:Us.methods.createWebInteraction(zs(t).find(".cta-section__label").text().trim(),"test drive form"),form:Us.methods.createFormFillDatalayer(),errorDetails:{errorType:"OTP limit error",errorMessage:e.Error,errorCode:200}})),void o.call(Vs,"max-attempts");zs(n).eq(0).focus(),sessionStorage.setItem("otpTransactionId",r),s.call(Vs)})).fail((e=>{Bt.method.hideLoader(),o.call(Vs,"api-failure"),console.error(e)}))}else o.call(Vs,"max-attempts"),Bt.method.hideLoader()}))},submitForm(){const{testDriveForm:e}=this.variables,{validateForm:t,useTestDriveResponse:n}=this.methods;zs(e).on(i.eventsListeners.SUBMIT,(async function(e){e.preventDefault();t.call(Vs)&&await n.call(Vs)}))},initModal(){const{testDriveModal:e}=this.variables;Vs.variables.modal=Cs.methods.initModal(zs(e))},showModal(e){const{modal:t,testDriveModal:n}=this.variables,i=zs(n).find(Cs.variables.modalTitle),r=zs(n).find(Cs.variables.modalMessage),a=zs(n).data(`${e}-title`)??"",s=zs(n).data(`${e}-subtitle`)??"";zs(i).text(a),zs(r).text(s),t.show()},initGeocoderScript(){const{testDriveForm:e}=this.variables,t=zs(e).data("geocoder-url");null!=Ut.variables.googleGeocoder||zs("main").data("iseditmode")||Ut.methods.loadScript(t)},init(){const{testDriveContainer:e}=Vs.variables;zs(e).length&&(this.initGeocoderScript.call(Vs),this.initModal.call(Vs),this.submitForm.call(Vs),this.generateValidationSchema.call(Vs),this.generateOtp.call(Vs),Os.methods.handleBlurValidation(zs(e),e),Os.methods.handleInputValidation(zs(e),e),this.handleOtpFields.call(Vs),this.handleNumberField.call(Vs),this.handlePincodeFields.call(Vs),this.disablePreviousDates.call(Vs),this.initDatePicker.call(Vs),this.focusDateField.call(Vs),this.handleDateInput.call(Vs))}}};var Hs=n(9755);const $s={variables:{tablistSelector:".cmp-tabs__tablist",leftArrowSelector:".left-arrow",rightArrowSelector:".right-arrow",tabsItemSelector:".tabs-item",tabsContainerSelector:".mg-select-tabs",scrollHiddenStyles:"overflow-x-hidden",scrollAutoStyle:"overflow-x-auto",animationDuration:100},methods:{checkScrollNecessity(e,t,n){const{scrollWidth:r,clientWidth:a}=e[0],{scrollHiddenStyles:s,scrollAutoStyle:o}=$s.variables;r<=a?(e.removeClass(o).addClass(s),t.hide(),n.hide()):(e.removeClass(s).addClass(o),window.innerWidth>i.breakPoints.LARGE?(t.show(),n.show()):(t.hide(),n.hide()))},scrollToItem(e,t){const n=e.offset().left,i=n+e.width(),r=t.offset().left,a=r+t.outerWidth();let s=0;r<n?s=r-n:a>i&&(s=a-i),0!==s&&e.scrollLeft(e.scrollLeft()+s)},handleArrowScroll(e,t){const{animationDuration:n}=$s.variables,i=e[0].clientWidth,r=e.scrollLeft(),a=e[0].scrollWidth-e[0].clientWidth;let s=r+("left"===t?-i:i);s=Math.max(0,Math.min(s,a)),e.animate({scrollLeft:s},n)},attachEventListeners(e){const{tablistSelector:t,leftArrowSelector:n,rightArrowSelector:r,tabsItemSelector:a}=$s.variables,s=e.find(t),o=e.find(n),l=e.find(r);s.on(i.eventsListeners.CLICK,a,(e=>{this.scrollToItem(s,Hs(e.currentTarget))})),o.on(i.eventsListeners.CLICK,(()=>{this.handleArrowScroll(s,"left")})),l.on(i.eventsListeners.CLICK,(()=>{this.handleArrowScroll(s,"right")})),Hs(window).on(i.eventsListeners.RESIZE,(()=>{this.checkScrollNecessity(s,o,l)})),this.checkScrollNecessity(s,o,l)},initializeComponent(e){this.attachEventListeners(e)},handleTabUrl(e){const{tabsItemSelector:t}=$s.variables;e.find(t).each(((e,t)=>{Hs(t).on(i.eventsListeners.CLICK,(function(e){e.preventDefault(),history.pushState("",document.title,window.location.pathname)}))}))},init(){const{tabsContainerSelector:e}=$s.variables,t=Hs(e);t.length&&t.each(((e,t)=>{this.initializeComponent(Hs(t)),this.handleTabUrl(Hs(t))}))}}};function Ws(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gs(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var js,qs,Ys,Xs,Ks,Zs,Js,Qs,eo,to,no,io,ro,ao,so,oo={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},lo={duration:.5,overwrite:!1,delay:0},co=1e8,uo=1e-8,ho=2*Math.PI,po=ho/4,mo=0,fo=Math.sqrt,go=Math.cos,vo=Math.sin,_o=function(e){return"string"==typeof e},bo=function(e){return"function"==typeof e},yo=function(e){return"number"==typeof e},xo=function(e){return void 0===e},wo=function(e){return"object"==typeof e},So=function(e){return!1!==e},To=function(){return"undefined"!=typeof window},Eo=function(e){return bo(e)||_o(e)},Mo="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Co=Array.isArray,Ao=/(?:-?\.?\d|\.)+/gi,ko=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Do=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Lo=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Io=/[+-]=-?[.\d]+/,Po=/[^,'"\[\]\s]+/gi,Ro=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Oo={},No={},Bo=function(e){return(No=hl(e,Oo))&&md},Fo=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Uo=function(e,t){return!t&&console.warn(e)},zo=function(e,t){return e&&(Oo[e]=t)&&No&&(No[e]=t)||Oo},Vo=function(){return 0},Ho={suppressEvents:!0,isStart:!0,kill:!1},$o={suppressEvents:!0,kill:!1},Wo={suppressEvents:!0},Go={},jo=[],qo={},Yo={},Xo={},Ko=30,Zo=[],Jo="",Qo=function(e){var t,n,i=e[0];if(wo(i)||bo(i)||(e=[e]),!(t=(i._gsap||{}).harness)){for(n=Zo.length;n--&&!Zo[n].targetTest(i););t=Zo[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new Ac(e[n],t)))||e.splice(n,1);return e},el=function(e){return e._gsap||Qo(Gl(e))[0]._gsap},tl=function(e,t,n){return(n=e[t])&&bo(n)?e[t]():xo(n)&&e.getAttribute&&e.getAttribute(t)||n},nl=function(e,t){return(e=e.split(",")).forEach(t)||e},il=function(e){return Math.round(1e5*e)/1e5||0},rl=function(e){return Math.round(1e7*e)/1e7||0},al=function(e,t){var n=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),"+"===n?e+i:"-"===n?e-i:"*"===n?e*i:e/i},sl=function(e,t){for(var n=t.length,i=0;e.indexOf(t[i])<0&&++i<n;);return i<n},ol=function(){var e,t,n=jo.length,i=jo.slice(0);for(qo={},jo.length=0,e=0;e<n;e++)(t=i[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},ll=function(e,t,n,i){jo.length&&!qs&&ol(),e.render(t,n,i||qs&&t<0&&(e._initted||e._startAt)),jo.length&&!qs&&ol()},cl=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(Po).length<2?t:_o(e)?e.trim():e},dl=function(e){return e},ul=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},hl=function(e,t){for(var n in t)e[n]=t[n];return e},pl=function e(t,n){for(var i in n)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(t[i]=wo(n[i])?e(t[i]||(t[i]={}),n[i]):n[i]);return t},ml=function(e,t){var n,i={};for(n in e)n in t||(i[n]=e[n]);return i},fl=function(e){var t,n=e.parent||Xs,i=e.keyframes?(t=Co(e.keyframes),function(e,n){for(var i in n)i in e||"duration"===i&&t||"ease"===i||(e[i]=n[i])}):ul;if(So(e.inherit))for(;n;)i(e,n.vars.defaults),n=n.parent||n._dp;return e},gl=function(e,t,n,i,r){void 0===n&&(n="_first"),void 0===i&&(i="_last");var a,s=e[i];if(r)for(a=t[r];s&&s[r]>a;)s=s._prev;return s?(t._next=s._next,s._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[i]=t,t._prev=s,t.parent=t._dp=e,t},vl=function(e,t,n,i){void 0===n&&(n="_first"),void 0===i&&(i="_last");var r=t._prev,a=t._next;r?r._next=a:e[n]===t&&(e[n]=a),a?a._prev=r:e[i]===t&&(e[i]=r),t._next=t._prev=t.parent=null},_l=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},bl=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},yl=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},xl=function(e,t,n,i){return e._startAt&&(qs?e._startAt.revert($o):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},wl=function e(t){return!t||t._ts&&e(t.parent)},Sl=function(e){return e._repeat?Tl(e._tTime,e=e.duration()+e._rDelay)*e:0},Tl=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},El=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Ml=function(e){return e._end=rl(e._start+(e._tDur/Math.abs(e._ts||e._rts||uo)||0))},Cl=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=rl(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Ml(e),n._dirty||bl(n,e)),e},Al=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=El(e.rawTime(),t),(!t._dur||zl(0,t.totalDuration(),n)-t._tTime>uo)&&t.render(n,!0)),bl(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},kl=function(e,t,n,i){return t.parent&&_l(t),t._start=rl((yo(n)?n:n||e!==Xs?Bl(e,n,t):e._time)+t._delay),t._end=rl(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),gl(e,t,"_first","_last",e._sort?"_start":0),Pl(t)||(e._recent=t),i||Al(e,t),e._ts<0&&Cl(e,e._tTime),e},Dl=function(e,t){return(Oo.ScrollTrigger||Fo("scrollTrigger",t))&&Oo.ScrollTrigger.create(t,e)},Ll=function(e,t,n,i,r){return Nc(e,t,r),e._initted?!n&&e._pt&&!qs&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&eo!==fc.frame?(jo.push(e),e._lazy=[r,i],1):void 0:1},Il=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},Pl=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Rl=function(e,t,n,i){var r=e._repeat,a=rl(t)||0,s=e._tTime/e._tDur;return s&&!i&&(e._time*=a/e._dur),e._dur=a,e._tDur=r?r<0?1e10:rl(a*(r+1)+e._rDelay*r):a,s>0&&!i&&Cl(e,e._tTime=e._tDur*s),e.parent&&Ml(e),n||bl(e.parent,e),e},Ol=function(e){return e instanceof Dc?bl(e):Rl(e,e._dur)},Nl={_start:0,endTime:Vo,totalDuration:Vo},Bl=function e(t,n,i){var r,a,s,o=t.labels,l=t._recent||Nl,c=t.duration()>=co?l.endTime(!1):t._dur;return _o(n)&&(isNaN(n)||n in o)?(a=n.charAt(0),s="%"===n.substr(-1),r=n.indexOf("="),"<"===a||">"===a?(r>=0&&(n=n.replace(/=/,"")),("<"===a?l._start:l.endTime(l._repeat>=0))+(parseFloat(n.substr(1))||0)*(s?(r<0?l:i).totalDuration()/100:1)):r<0?(n in o||(o[n]=c),o[n]):(a=parseFloat(n.charAt(r-1)+n.substr(r+1)),s&&i&&(a=a/100*(Co(i)?i[0]:i).totalDuration()),r>1?e(t,n.substr(0,r-1),i)+a:c+a)):null==n?c:+n},Fl=function(e,t,n){var i,r,a=yo(t[1]),s=(a?2:1)+(e<2?0:1),o=t[s];if(a&&(o.duration=t[1]),o.parent=n,e){for(i=o,r=n;r&&!("immediateRender"in i);)i=r.vars.defaults||{},r=So(r.vars.inherit)&&r.parent;o.immediateRender=So(i.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Vc(t[0],o,t[s+1])},Ul=function(e,t){return e||0===e?t(e):t},zl=function(e,t,n){return n<e?e:n>t?t:n},Vl=function(e,t){return _o(e)&&(t=Ro.exec(e))?t[1]:""},Hl=[].slice,$l=function(e,t){return e&&wo(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&wo(e[0]))&&!e.nodeType&&e!==Ks},Wl=function(e,t,n){return void 0===n&&(n=[]),e.forEach((function(e){var i;return _o(e)&&!t||$l(e,1)?(i=n).push.apply(i,Gl(e)):n.push(e)}))||n},Gl=function(e,t,n){return Ys&&!t&&Ys.selector?Ys.selector(e):!_o(e)||n||!Zs&&gc()?Co(e)?Wl(e,n):$l(e)?Hl.call(e,0):e?[e]:[]:Hl.call((t||Js).querySelectorAll(e),0)},jl=function(e){return e=Gl(e)[0]||Uo("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Gl(t,n.querySelectorAll?n:n===e?Uo("Invalid scope")||Js.createElement("div"):e)}},ql=function(e){return e.sort((function(){return.5-Math.random()}))},Yl=function(e){if(bo(e))return e;var t=wo(e)?e:{each:e},n=Sc(t.ease),i=t.from||0,r=parseFloat(t.base)||0,a={},s=i>0&&i<1,o=isNaN(i)||s,l=t.axis,c=i,d=i;return _o(i)?c=d={center:.5,edges:.5,end:1}[i]||0:!s&&o&&(c=i[0],d=i[1]),function(e,s,u){var h,p,m,f,g,v,_,b,y,x=(u||t).length,w=a[x];if(!w){if(!(y="auto"===t.grid?0:(t.grid||[1,co])[1])){for(_=-co;_<(_=u[y++].getBoundingClientRect().left)&&y<x;);y<x&&y--}for(w=a[x]=[],h=o?Math.min(y,x)*c-.5:i%y,p=y===co?0:o?x*d/y-.5:i/y|0,_=0,b=co,v=0;v<x;v++)m=v%y-h,f=p-(v/y|0),w[v]=g=l?Math.abs("y"===l?f:m):fo(m*m+f*f),g>_&&(_=g),g<b&&(b=g);"random"===i&&ql(w),w.max=_-b,w.min=b,w.v=x=(parseFloat(t.amount)||parseFloat(t.each)*(y>x?x-1:l?"y"===l?x/y:y:Math.max(y,x/y))||0)*("edges"===i?-1:1),w.b=x<0?r-x:r,w.u=Vl(t.amount||t.each)||0,n=n&&x<0?xc(n):n}return x=(w[e]-w.min)/w.max||0,rl(w.b+(n?n(x):x)*w.v)+w.u}},Xl=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var i=rl(Math.round(parseFloat(n)/e)*e*t);return(i-i%1)/t+(yo(n)?0:Vl(n))}},Kl=function(e,t){var n,i,r=Co(e);return!r&&wo(e)&&(n=r=e.radius||co,e.values?(e=Gl(e.values),(i=!yo(e[0]))&&(n*=n)):e=Xl(e.increment)),Ul(t,r?bo(e)?function(t){return i=e(t),Math.abs(i-t)<=n?i:t}:function(t){for(var r,a,s=parseFloat(i?t.x:t),o=parseFloat(i?t.y:0),l=co,c=0,d=e.length;d--;)(r=i?(r=e[d].x-s)*r+(a=e[d].y-o)*a:Math.abs(e[d]-s))<l&&(l=r,c=d);return c=!n||l<=n?e[c]:t,i||c===t||yo(t)?c:c+Vl(t)}:Xl(e))},Zl=function(e,t,n,i){return Ul(Co(e)?!t:!0===n?!!(n=0):!i,(function(){return Co(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*i)/i}))},Jl=function(e,t,n){return Ul(n,(function(n){return e[~~t(n)]}))},Ql=function(e){for(var t,n,i,r,a=0,s="";~(t=e.indexOf("random(",a));)i=e.indexOf(")",t),r="["===e.charAt(t+7),n=e.substr(t+7,i-t-7).match(r?Po:Ao),s+=e.substr(a,t-a)+Zl(r?n:+n[0],r?0:+n[1],+n[2]||1e-5),a=i+1;return s+e.substr(a,e.length-a)},ec=function(e,t,n,i,r){var a=t-e,s=i-n;return Ul(r,(function(t){return n+((t-e)/a*s||0)}))},tc=function(e,t,n){var i,r,a,s=e.labels,o=co;for(i in s)(r=s[i]-t)<0==!!n&&r&&o>(r=Math.abs(r))&&(a=i,o=r);return a},nc=function(e,t,n){var i,r,a,s=e.vars,o=s[t],l=Ys,c=e._ctx;if(o)return i=s[t+"Params"],r=s.callbackScope||e,n&&jo.length&&ol(),c&&(Ys=c),a=i?o.apply(r,i):o.call(r),Ys=l,a},ic=function(e){return _l(e),e.scrollTrigger&&e.scrollTrigger.kill(!!qs),e.progress()<1&&nc(e,"onInterrupt"),e},rc=[],ac=function(e){if(e)if(e=!e.name&&e.default||e,To()||e.headless){var t=e.name,n=bo(e),i=t&&!n&&e.init?function(){this._props=[]}:e,r={init:Vo,render:Kc,add:Rc,kill:Jc,modifier:Zc,rawVars:0},a={targetTest:0,get:0,getSetter:jc,aliases:{},register:0};if(gc(),e!==i){if(Yo[t])return;ul(i,ul(ml(e,r),a)),hl(i.prototype,hl(r,ml(e,a))),Yo[i.prop=t]=i,e.targetTest&&(Zo.push(i),Go[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}zo(t,i),e.register&&e.register(md,i,td)}else rc.push(e)},sc=255,oc={aqua:[0,sc,sc],lime:[0,sc,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,sc],navy:[0,0,128],white:[sc,sc,sc],olive:[128,128,0],yellow:[sc,sc,0],orange:[sc,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[sc,0,0],pink:[sc,192,203],cyan:[0,sc,sc],transparent:[sc,sc,sc,0]},lc=function(e,t,n){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*sc+.5|0},cc=function(e,t,n){var i,r,a,s,o,l,c,d,u,h,p=e?yo(e)?[e>>16,e>>8&sc,e&sc]:0:oc.black;if(!p){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),oc[e])p=oc[e];else if("#"===e.charAt(0)){if(e.length<6&&(i=e.charAt(1),r=e.charAt(2),a=e.charAt(3),e="#"+i+i+r+r+a+a+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(p=parseInt(e.substr(1,6),16))>>16,p>>8&sc,p&sc,parseInt(e.substr(7),16)/255];p=[(e=parseInt(e.substr(1),16))>>16,e>>8&sc,e&sc]}else if("hsl"===e.substr(0,3))if(p=h=e.match(Ao),t){if(~e.indexOf("="))return p=e.match(ko),n&&p.length<4&&(p[3]=1),p}else s=+p[0]%360/360,o=+p[1]/100,i=2*(l=+p[2]/100)-(r=l<=.5?l*(o+1):l+o-l*o),p.length>3&&(p[3]*=1),p[0]=lc(s+1/3,i,r),p[1]=lc(s,i,r),p[2]=lc(s-1/3,i,r);else p=e.match(Ao)||oc.transparent;p=p.map(Number)}return t&&!h&&(i=p[0]/sc,r=p[1]/sc,a=p[2]/sc,l=((c=Math.max(i,r,a))+(d=Math.min(i,r,a)))/2,c===d?s=o=0:(u=c-d,o=l>.5?u/(2-c-d):u/(c+d),s=c===i?(r-a)/u+(r<a?6:0):c===r?(a-i)/u+2:(i-r)/u+4,s*=60),p[0]=~~(s+.5),p[1]=~~(100*o+.5),p[2]=~~(100*l+.5)),n&&p.length<4&&(p[3]=1),p},dc=function(e){var t=[],n=[],i=-1;return e.split(hc).forEach((function(e){var r=e.match(Do)||[];t.push.apply(t,r),n.push(i+=r.length+1)})),t.c=n,t},uc=function(e,t,n){var i,r,a,s,o="",l=(e+o).match(hc),c=t?"hsla(":"rgba(",d=0;if(!l)return e;if(l=l.map((function(e){return(e=cc(e,t,1))&&c+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),n&&(a=dc(e),(i=n.c).join(o)!==a.c.join(o)))for(s=(r=e.replace(hc,"1").split(Do)).length-1;d<s;d++)o+=r[d]+(~i.indexOf(d)?l.shift()||c+"0,0,0,0)":(a.length?a:l.length?l:n).shift());if(!r)for(s=(r=e.split(hc)).length-1;d<s;d++)o+=r[d]+l[d];return o+r[s]},hc=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in oc)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),pc=/hsl[a]?\(/,mc=function(e){var t,n=e.join(" ");if(hc.lastIndex=0,hc.test(n))return t=pc.test(n),e[1]=uc(e[1],t),e[0]=uc(e[0],t,dc(e[1])),!0},fc=function(){var e,t,n,i,r,a,s=Date.now,o=500,l=33,c=s(),d=c,u=1e3/240,h=u,p=[],m=function n(m){var f,g,v,_,b=s()-d,y=!0===m;if((b>o||b<0)&&(c+=b-l),((f=(v=(d+=b)-c)-h)>0||y)&&(_=++i.frame,r=v-1e3*i.time,i.time=v/=1e3,h+=f+(f>=u?4:u-f),g=1),y||(e=t(n)),g)for(a=0;a<p.length;a++)p[a](v,r,_,m)};return i={time:0,frame:0,tick:function(){m(!0)},deltaRatio:function(e){return r/(1e3/(e||60))},wake:function(){Qs&&(!Zs&&To()&&(Ks=Zs=window,Js=Ks.document||{},Oo.gsap=md,(Ks.gsapVersions||(Ks.gsapVersions=[])).push(md.version),Bo(No||Ks.GreenSockGlobals||!Ks.gsap&&Ks||{}),rc.forEach(ac)),n="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,e&&i.sleep(),t=n||function(e){return setTimeout(e,h-1e3*i.time+1|0)},no=1,m(2))},sleep:function(){(n?cancelAnimationFrame:clearTimeout)(e),no=0,t=Vo},lagSmoothing:function(e,t){o=e||1/0,l=Math.min(t||33,o)},fps:function(e){u=1e3/(e||240),h=1e3*i.time+u},add:function(e,t,n){var r=t?function(t,n,a,s){e(t,n,a,s),i.remove(r)}:e;return i.remove(e),p[n?"unshift":"push"](r),gc(),r},remove:function(e,t){~(t=p.indexOf(e))&&p.splice(t,1)&&a>=t&&a--},_listeners:p},i}(),gc=function(){return!no&&fc.wake()},vc={},_c=/^[\d.\-M][\d.\-,\s]/,bc=/["']/g,yc=function(e){for(var t,n,i,r={},a=e.substr(1,e.length-3).split(":"),s=a[0],o=1,l=a.length;o<l;o++)n=a[o],t=o!==l-1?n.lastIndexOf(","):n.length,i=n.substr(0,t),r[s]=isNaN(i)?i.replace(bc,"").trim():+i,s=n.substr(t+1).trim();return r},xc=function(e){return function(t){return 1-e(1-t)}},wc=function e(t,n){for(var i,r=t._first;r;)r instanceof Dc?e(r,n):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===n||(r.timeline?e(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},Sc=function(e,t){return e&&(bo(e)?e:vc[e]||function(e){var t,n,i,r,a=(e+"").split("("),s=vc[a[0]];return s&&a.length>1&&s.config?s.config.apply(null,~e.indexOf("{")?[yc(a[1])]:(t=e,n=t.indexOf("(")+1,i=t.indexOf(")"),r=t.indexOf("(",n),t.substring(n,~r&&r<i?t.indexOf(")",i+1):i)).split(",").map(cl)):vc._CE&&_c.test(e)?vc._CE("",e):s}(e))||t},Tc=function(e,t,n,i){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===i&&(i=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var r,a={easeIn:t,easeOut:n,easeInOut:i};return nl(e,(function(e){for(var t in vc[e]=Oo[e]=a,vc[r=e.toLowerCase()]=n,a)vc[r+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=vc[e+"."+t]=a[t]})),a},Ec=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},Mc=function e(t,n,i){var r=n>=1?n:1,a=(i||(t?.3:.45))/(n<1?n:1),s=a/ho*(Math.asin(1/r)||0),o=function(e){return 1===e?1:r*Math.pow(2,-10*e)*vo((e-s)*a)+1},l="out"===t?o:"in"===t?function(e){return 1-o(1-e)}:Ec(o);return a=ho/a,l.config=function(n,i){return e(t,n,i)},l},Cc=function e(t,n){void 0===n&&(n=1.70158);var i=function(e){return e?--e*e*((n+1)*e+n)+1:0},r="out"===t?i:"in"===t?function(e){return 1-i(1-e)}:Ec(i);return r.config=function(n){return e(t,n)},r};nl("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var n=t<5?t+1:t;Tc(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},(function(e){return 1-Math.pow(1-e,n)}),(function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2}))})),vc.Linear.easeNone=vc.none=vc.Linear.easeIn,Tc("Elastic",Mc("in"),Mc("out"),Mc()),io=7.5625,ao=1/(ro=2.75),Tc("Bounce",(function(e){return 1-so(1-e)}),so=function(e){return e<ao?io*e*e:e<.7272727272727273?io*Math.pow(e-1.5/ro,2)+.75:e<.9090909090909092?io*(e-=2.25/ro)*e+.9375:io*Math.pow(e-2.625/ro,2)+.984375}),Tc("Expo",(function(e){return e?Math.pow(2,10*(e-1)):0})),Tc("Circ",(function(e){return-(fo(1-e*e)-1)})),Tc("Sine",(function(e){return 1===e?1:1-go(e*po)})),Tc("Back",Cc("in"),Cc("out"),Cc()),vc.SteppedEase=vc.steps=Oo.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,i=e+(t?0:1),r=t?1:0;return function(e){return((i*zl(0,.99999999,e)|0)+r)*n}}},lo.ease=vc["quad.out"],nl("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(e){return Jo+=e+","+e+"Params,"}));var Ac=function(e,t){this.id=mo++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:tl,this.set=t?t.getSetter:jc},kc=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Rl(this,+e.duration,1,1),this.data=e.data,Ys&&(this._ctx=Ys,Ys.data.push(this)),no||fc.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,Rl(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(gc(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Cl(this,e),!n._dp||n.parent||Al(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&kl(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===uo||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),ll(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+Sl(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+Sl(this),t):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?Tl(this._tTime,n)+1:1},t.timeScale=function(e,t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var n=this.parent&&this._ts?El(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(zl(-Math.abs(this._delay),this._tDur,n),!1!==t),Ml(this),yl(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(gc(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==uo&&(this._tTime-=uo)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&kl(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(So(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?El(t.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){void 0===e&&(e=Wo);var t=qs;return qs=e,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),qs=t,this},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(Math.abs(t._ts)||1),t=t._dp;return!this.parent&&this._sat?this._sat.globalTime(e):n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,Ol(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,Ol(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(Bl(this,e),So(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,So(t))},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-uo))},t.eventCallback=function(e,t,n){var i=this.vars;return arguments.length>1?(t?(i[e]=t,n&&(i[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete i[e],this):i[e]},t.then=function(e){var t=this;return new Promise((function(n){var i=bo(e)?e:dl,r=function(){var e=t.then;t.then=null,bo(i)&&(i=i(t))&&(i.then||i===t)&&(t.then=e),n(i),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?r():t._prom=r}))},t.kill=function(){ic(this)},e}();ul(kc.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Dc=function(e){function t(t,n){var i;return void 0===t&&(t={}),(i=e.call(this,t)||this).labels={},i.smoothChildTiming=!!t.smoothChildTiming,i.autoRemoveChildren=!!t.autoRemoveChildren,i._sort=So(t.sortChildren),Xs&&kl(t.parent||Xs,Ws(i),n),t.reversed&&i.reverse(),t.paused&&i.paused(!0),t.scrollTrigger&&Dl(Ws(i),t.scrollTrigger),i}Gs(t,e);var n=t.prototype;return n.to=function(e,t,n){return Fl(0,arguments,this),this},n.from=function(e,t,n){return Fl(1,arguments,this),this},n.fromTo=function(e,t,n,i){return Fl(2,arguments,this),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,fl(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new Vc(e,t,Bl(this,n),1),this},n.call=function(e,t,n){return kl(this,Vc.delayedCall(0,e,t),n)},n.staggerTo=function(e,t,n,i,r,a,s){return n.duration=t,n.stagger=n.stagger||i,n.onComplete=a,n.onCompleteParams=s,n.parent=this,new Vc(e,n,Bl(this,r)),this},n.staggerFrom=function(e,t,n,i,r,a,s){return n.runBackwards=1,fl(n).immediateRender=So(n.immediateRender),this.staggerTo(e,t,n,i,r,a,s)},n.staggerFromTo=function(e,t,n,i,r,a,s,o){return i.startAt=n,fl(i).immediateRender=So(i.immediateRender),this.staggerTo(e,t,i,r,a,s,o)},n.render=function(e,t,n){var i,r,a,s,o,l,c,d,u,h,p,m,f=this._time,g=this._dirty?this.totalDuration():this._tDur,v=this._dur,_=e<=0?0:rl(e),b=this._zTime<0!=e<0&&(this._initted||!v);if(this!==Xs&&_>g&&e>=0&&(_=g),_!==this._tTime||n||b){if(f!==this._time&&v&&(_+=this._time-f,e+=this._time-f),i=_,u=this._start,l=!(d=this._ts),b&&(v||(f=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(p=this._yoyo,o=v+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*o+e,t,n);if(i=rl(_%o),_===g?(s=this._repeat,i=v):((s=~~(_/o))&&s===_/o&&(i=v,s--),i>v&&(i=v)),h=Tl(this._tTime,o),!f&&this._tTime&&h!==s&&this._tTime-h*o-this._dur<=0&&(h=s),p&&1&s&&(i=v-i,m=1),s!==h&&!this._lock){var y=p&&1&h,x=y===(p&&1&s);if(s<h&&(y=!y),f=y?0:_%v?v:_,this._lock=1,this.render(f||(m?0:rl(s*o)),t,!v)._lock=0,this._tTime=_,!t&&this.parent&&nc(this,"onRepeat"),this.vars.repeatRefresh&&!m&&(this.invalidate()._lock=1),f&&f!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(v=this._dur,g=this._tDur,x&&(this._lock=2,f=y?v:-1e-4,this.render(f,!0),this.vars.repeatRefresh&&!m&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;wc(this,m)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(e,t,n){var i;if(n>t)for(i=e._first;i&&i._start<=n;){if("isPause"===i.data&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if("isPause"===i.data&&i._start<t)return i;i=i._prev}}(this,rl(f),rl(i)),c&&(_-=i-(i=c._start))),this._tTime=_,this._time=i,this._act=!d,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,f=0),!f&&i&&!t&&!s&&(nc(this,"onStart"),this._tTime!==_))return this;if(i>=f&&e>=0)for(r=this._first;r;){if(a=r._next,(r._act||i>=r._start)&&r._ts&&c!==r){if(r.parent!==this)return this.render(e,t,n);if(r.render(r._ts>0?(i-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(i-r._start)*r._ts,t,n),i!==this._time||!this._ts&&!l){c=0,a&&(_+=this._zTime=-1e-8);break}}r=a}else{r=this._last;for(var w=e<0?e:i;r;){if(a=r._prev,(r._act||w<=r._end)&&r._ts&&c!==r){if(r.parent!==this)return this.render(e,t,n);if(r.render(r._ts>0?(w-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(w-r._start)*r._ts,t,n||qs&&(r._initted||r._startAt)),i!==this._time||!this._ts&&!l){c=0,a&&(_+=this._zTime=w?-1e-8:uo);break}}r=a}}if(c&&!t&&(this.pause(),c.render(i>=f?0:-1e-8)._zTime=i>=f?1:-1,this._ts))return this._start=u,Ml(this),this.render(e,t,n);this._onUpdate&&!t&&nc(this,"onUpdate",!0),(_===g&&this._tTime>=this.totalDuration()||!_&&f)&&(u!==this._start&&Math.abs(d)===Math.abs(this._ts)||this._lock||((e||!v)&&(_===g&&this._ts>0||!_&&this._ts<0)&&_l(this,1),t||e<0&&!f||!_&&!f&&g||(nc(this,_===g&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(_<g&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(e,t){var n=this;if(yo(t)||(t=Bl(this,t,e)),!(e instanceof kc)){if(Co(e))return e.forEach((function(e){return n.add(e,t)})),this;if(_o(e))return this.addLabel(e,t);if(!bo(e))return this;e=Vc.delayedCall(0,e)}return this!==e?kl(this,e,t):this},n.getChildren=function(e,t,n,i){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===i&&(i=-co);for(var r=[],a=this._first;a;)a._start>=i&&(a instanceof Vc?t&&r.push(a):(n&&r.push(a),e&&r.push.apply(r,a.getChildren(!0,t,n)))),a=a._next;return r},n.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return _o(e)?this.removeLabel(e):bo(e)?this.killTweensOf(e):(vl(this,e),e===this._recent&&(this._recent=this._last),bl(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=rl(fc.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=Bl(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var i=Vc.delayedCall(0,t||Vo,n);return i.data="isPause",this._hasPause=1,kl(this,i,Bl(this,e))},n.removePause=function(e){var t=this._first;for(e=Bl(this,e);t;)t._start===e&&"isPause"===t.data&&_l(t),t=t._next},n.killTweensOf=function(e,t,n){for(var i=this.getTweensOf(e,n),r=i.length;r--;)Lc!==i[r]&&i[r].kill(e,t);return this},n.getTweensOf=function(e,t){for(var n,i=[],r=Gl(e),a=this._first,s=yo(t);a;)a instanceof Vc?sl(a._targets,r)&&(s?(!Lc||a._initted&&a._ts)&&a.globalTime(0)<=t&&a.globalTime(a.totalDuration())>t:!t||a.isActive())&&i.push(a):(n=a.getTweensOf(r,t)).length&&i.push.apply(i,n),a=a._next;return i},n.tweenTo=function(e,t){t=t||{};var n,i=this,r=Bl(i,e),a=t,s=a.startAt,o=a.onStart,l=a.onStartParams,c=a.immediateRender,d=Vc.to(i,ul({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:t.duration||Math.abs((r-(s&&"time"in s?s.time:i._time))/i.timeScale())||uo,onStart:function(){if(i.pause(),!n){var e=t.duration||Math.abs((r-(s&&"time"in s?s.time:i._time))/i.timeScale());d._dur!==e&&Rl(d,e,0,1).render(d._time,!0,!0),n=1}o&&o.apply(d,l||[])}},t));return c?d.render(0):d},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,ul({startAt:{time:Bl(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),tc(this,Bl(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),tc(this,Bl(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+uo)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var i,r=this._first,a=this.labels;r;)r._start>=n&&(r._start+=e,r._end+=e),r=r._next;if(t)for(i in a)a[i]>=n&&(a[i]+=e);return bl(this)},n.invalidate=function(t){var n=this._first;for(this._lock=0;n;)n.invalidate(t),n=n._next;return e.prototype.invalidate.call(this,t)},n.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),bl(this)},n.totalDuration=function(e){var t,n,i,r=0,a=this,s=a._last,o=co;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-e:e));if(a._dirty){for(i=a.parent;s;)t=s._prev,s._dirty&&s.totalDuration(),(n=s._start)>o&&a._sort&&s._ts&&!a._lock?(a._lock=1,kl(a,s,n-s._delay,1)._lock=0):o=n,n<0&&s._ts&&(r-=n,(!i&&!a._dp||i&&i.smoothChildTiming)&&(a._start+=n/a._ts,a._time-=n,a._tTime-=n),a.shiftChildren(-n,!1,-Infinity),o=0),s._end>r&&s._ts&&(r=s._end),s=t;Rl(a,a===Xs&&a._time>r?a._time:r,1,1),a._dirty=0}return a._tDur},t.updateRoot=function(e){if(Xs._ts&&(ll(Xs,El(e,Xs)),eo=fc.frame),fc.frame>=Ko){Ko+=oo.autoSleep||120;var t=Xs._first;if((!t||!t._ts)&&oo.autoSleep&&fc._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||fc.sleep()}}},t}(kc);ul(Dc.prototype,{_lock:0,_hasPause:0,_forcing:0});var Lc,Ic,Pc=function(e,t,n,i,r,a,s){var o,l,c,d,u,h,p,m,f=new td(this._pt,e,t,0,1,Xc,null,r),g=0,v=0;for(f.b=n,f.e=i,n+="",(p=~(i+="").indexOf("random("))&&(i=Ql(i)),a&&(a(m=[n,i],e,t),n=m[0],i=m[1]),l=n.match(Lo)||[];o=Lo.exec(i);)d=o[0],u=i.substring(g,o.index),c?c=(c+1)%5:"rgba("===u.substr(-5)&&(c=1),d!==l[v++]&&(h=parseFloat(l[v-1])||0,f._pt={_next:f._pt,p:u||1===v?u:",",s:h,c:"="===d.charAt(1)?al(h,d)-h:parseFloat(d)-h,m:c&&c<4?Math.round:0},g=Lo.lastIndex);return f.c=g<i.length?i.substring(g,i.length):"",f.fp=s,(Io.test(i)||p)&&(f.e=0),this._pt=f,f},Rc=function(e,t,n,i,r,a,s,o,l,c){bo(i)&&(i=i(r||0,e,a));var d,u=e[t],h="get"!==n?n:bo(u)?l?e[t.indexOf("set")||!bo(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():u,p=bo(u)?l?Wc:$c:Hc;if(_o(i)&&(~i.indexOf("random(")&&(i=Ql(i)),"="===i.charAt(1)&&((d=al(h,i)+(Vl(h)||0))||0===d)&&(i=d)),!c||h!==i||Ic)return isNaN(h*i)||""===i?(!u&&!(t in e)&&Fo(t,i),Pc.call(this,e,t,h,i,p,o||oo.stringFilter,l)):(d=new td(this._pt,e,t,+h||0,i-(h||0),"boolean"==typeof u?Yc:qc,0,p),l&&(d.fp=l),s&&d.modifier(s,this,e),this._pt=d)},Oc=function(e,t,n,i,r,a){var s,o,l,c;if(Yo[e]&&!1!==(s=new Yo[e]).init(r,s.rawVars?t[e]:function(e,t,n,i,r){if(bo(e)&&(e=Fc(e,r,t,n,i)),!wo(e)||e.style&&e.nodeType||Co(e)||Mo(e))return _o(e)?Fc(e,r,t,n,i):e;var a,s={};for(a in e)s[a]=Fc(e[a],r,t,n,i);return s}(t[e],i,r,a,n),n,i,a)&&(n._pt=o=new td(n._pt,r,e,0,1,s.render,s,0,s.priority),n!==to))for(l=n._ptLookup[n._targets.indexOf(r)],c=s._props.length;c--;)l[s._props[c]]=o;return s},Nc=function e(t,n,i){var r,a,s,o,l,c,d,u,h,p,m,f,g,v=t.vars,_=v.ease,b=v.startAt,y=v.immediateRender,x=v.lazy,w=v.onUpdate,S=v.runBackwards,T=v.yoyoEase,E=v.keyframes,M=v.autoRevert,C=t._dur,A=t._startAt,k=t._targets,D=t.parent,L=D&&"nested"===D.data?D.vars.targets:k,I="auto"===t._overwrite&&!js,P=t.timeline;if(P&&(!E||!_)&&(_="none"),t._ease=Sc(_,lo.ease),t._yEase=T?xc(Sc(!0===T?_:T,lo.ease)):0,T&&t._yoyo&&!t._repeat&&(T=t._yEase,t._yEase=t._ease,t._ease=T),t._from=!P&&!!v.runBackwards,!P||E&&!v.stagger){if(f=(u=k[0]?el(k[0]).harness:0)&&v[u.prop],r=ml(v,Go),A&&(A._zTime<0&&A.progress(1),n<0&&S&&y&&!M?A.render(-1,!0):A.revert(S&&C?$o:Ho),A._lazy=0),b){if(_l(t._startAt=Vc.set(k,ul({data:"isStart",overwrite:!1,parent:D,immediateRender:!0,lazy:!A&&So(x),startAt:null,delay:0,onUpdate:w&&function(){return nc(t,"onUpdate")},stagger:0},b))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(qs||!y&&!M)&&t._startAt.revert($o),y&&C&&n<=0&&i<=0)return void(n&&(t._zTime=n))}else if(S&&C&&!A)if(n&&(y=!1),s=ul({overwrite:!1,data:"isFromStart",lazy:y&&!A&&So(x),immediateRender:y,stagger:0,parent:D},r),f&&(s[u.prop]=f),_l(t._startAt=Vc.set(k,s)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(qs?t._startAt.revert($o):t._startAt.render(-1,!0)),t._zTime=n,y){if(!n)return}else e(t._startAt,uo,uo);for(t._pt=t._ptCache=0,x=C&&So(x)||x&&!C,a=0;a<k.length;a++){if(d=(l=k[a])._gsap||Qo(k)[a]._gsap,t._ptLookup[a]=p={},qo[d.id]&&jo.length&&ol(),m=L===k?a:L.indexOf(l),u&&!1!==(h=new u).init(l,f||r,t,m,L)&&(t._pt=o=new td(t._pt,l,h.name,0,1,h.render,h,0,h.priority),h._props.forEach((function(e){p[e]=o})),h.priority&&(c=1)),!u||f)for(s in r)Yo[s]&&(h=Oc(s,r,t,m,l,L))?h.priority&&(c=1):p[s]=o=Rc.call(t,l,s,"get",r[s],m,L,0,v.stringFilter);t._op&&t._op[a]&&t.kill(l,t._op[a]),I&&t._pt&&(Lc=t,Xs.killTweensOf(l,p,t.globalTime(n)),g=!t.parent,Lc=0),t._pt&&x&&(qo[d.id]=1)}c&&ed(t),t._onInit&&t._onInit(t)}t._onUpdate=w,t._initted=(!t._op||t._pt)&&!g,E&&n<=0&&P.render(co,!0,!0)},Bc=function(e,t,n,i){var r,a,s=t.ease||i||"power1.inOut";if(Co(t))a=n[e]||(n[e]=[]),t.forEach((function(e,n){return a.push({t:n/(t.length-1)*100,v:e,e:s})}));else for(r in t)a=n[r]||(n[r]=[]),"ease"===r||a.push({t:parseFloat(e),v:t[r],e:s})},Fc=function(e,t,n,i,r){return bo(e)?e.call(t,n,i,r):_o(e)&&~e.indexOf("random(")?Ql(e):e},Uc=Jo+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",zc={};nl(Uc+",id,stagger,delay,duration,paused,scrollTrigger",(function(e){return zc[e]=1}));var Vc=function(e){function t(t,n,i,r){var a;"number"==typeof n&&(i.duration=n,n=i,i=null);var s,o,l,c,d,u,h,p,m=(a=e.call(this,r?n:fl(n))||this).vars,f=m.duration,g=m.delay,v=m.immediateRender,_=m.stagger,b=m.overwrite,y=m.keyframes,x=m.defaults,w=m.scrollTrigger,S=m.yoyoEase,T=n.parent||Xs,E=(Co(t)||Mo(t)?yo(t[0]):"length"in n)?[t]:Gl(t);if(a._targets=E.length?Qo(E):Uo("GSAP target "+t+" not found. https://gsap.com",!oo.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=b,y||_||Eo(f)||Eo(g)){if(n=a.vars,(s=a.timeline=new Dc({data:"nested",defaults:x||{},targets:T&&"nested"===T.data?T.vars.targets:E})).kill(),s.parent=s._dp=Ws(a),s._start=0,_||Eo(f)||Eo(g)){if(c=E.length,h=_&&Yl(_),wo(_))for(d in _)~Uc.indexOf(d)&&(p||(p={}),p[d]=_[d]);for(o=0;o<c;o++)(l=ml(n,zc)).stagger=0,S&&(l.yoyoEase=S),p&&hl(l,p),u=E[o],l.duration=+Fc(f,Ws(a),o,u,E),l.delay=(+Fc(g,Ws(a),o,u,E)||0)-a._delay,!_&&1===c&&l.delay&&(a._delay=g=l.delay,a._start+=g,l.delay=0),s.to(u,l,h?h(o,u,E):0),s._ease=vc.none;s.duration()?f=g=0:a.timeline=0}else if(y){fl(ul(s.vars.defaults,{ease:"none"})),s._ease=Sc(y.ease||n.ease||"none");var M,C,A,k=0;if(Co(y))y.forEach((function(e){return s.to(E,e,">")})),s.duration();else{for(d in l={},y)"ease"===d||"easeEach"===d||Bc(d,y[d],l,y.easeEach);for(d in l)for(M=l[d].sort((function(e,t){return e.t-t.t})),k=0,o=0;o<M.length;o++)(A={ease:(C=M[o]).e,duration:(C.t-(o?M[o-1].t:0))/100*f})[d]=C.v,s.to(E,A,k),k+=A.duration;s.duration()<f&&s.to({},{duration:f-s.duration()})}}f||a.duration(f=s.duration())}else a.timeline=0;return!0!==b||js||(Lc=Ws(a),Xs.killTweensOf(E),Lc=0),kl(T,Ws(a),i),n.reversed&&a.reverse(),n.paused&&a.paused(!0),(v||!f&&!y&&a._start===rl(T._time)&&So(v)&&wl(Ws(a))&&"nested"!==T.data)&&(a._tTime=-1e-8,a.render(Math.max(0,-g)||0)),w&&Dl(Ws(a),w),a}Gs(t,e);var n=t.prototype;return n.render=function(e,t,n){var i,r,a,s,o,l,c,d,u,h=this._time,p=this._tDur,m=this._dur,f=e<0,g=e>p-uo&&!f?p:e<uo?0:e;if(m){if(g!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==f){if(i=g,d=this.timeline,this._repeat){if(s=m+this._rDelay,this._repeat<-1&&f)return this.totalTime(100*s+e,t,n);if(i=rl(g%s),g===p?(a=this._repeat,i=m):((a=~~(g/s))&&a===rl(g/s)&&(i=m,a--),i>m&&(i=m)),(l=this._yoyo&&1&a)&&(u=this._yEase,i=m-i),o=Tl(this._tTime,s),i===h&&!n&&this._initted&&a===o)return this._tTime=g,this;a!==o&&(d&&this._yEase&&wc(d,l),this.vars.repeatRefresh&&!l&&!this._lock&&this._time!==s&&this._initted&&(this._lock=n=1,this.render(rl(s*a),!0).invalidate()._lock=0))}if(!this._initted){if(Ll(this,f?e:i,n,t,g))return this._tTime=0,this;if(!(h===this._time||n&&this.vars.repeatRefresh&&a!==o))return this;if(m!==this._dur)return this.render(e,t,n)}if(this._tTime=g,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(u||this._ease)(i/m),this._from&&(this.ratio=c=1-c),i&&!h&&!t&&!a&&(nc(this,"onStart"),this._tTime!==g))return this;for(r=this._pt;r;)r.r(c,r.d),r=r._next;d&&d.render(e<0?e:d._dur*d._ease(i/this._dur),t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(f&&xl(this,e,0,n),nc(this,"onUpdate")),this._repeat&&a!==o&&this.vars.onRepeat&&!t&&this.parent&&nc(this,"onRepeat"),g!==this._tDur&&g||this._tTime!==g||(f&&!this._onUpdate&&xl(this,e,0,!0),(e||!m)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&_l(this,1),t||f&&!h||!(g||h||l)||(nc(this,g===p?"onComplete":"onReverseComplete",!0),this._prom&&!(g<p&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,i){var r,a,s,o=e.ratio,l=t<0||!t&&(!e._start&&Il(e)&&(e._initted||!Pl(e))||(e._ts<0||e._dp._ts<0)&&!Pl(e))?0:1,c=e._rDelay,d=0;if(c&&e._repeat&&(d=zl(0,e._tDur,t),a=Tl(d,c),e._yoyo&&1&a&&(l=1-l),a!==Tl(e._tTime,c)&&(o=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==o||qs||i||e._zTime===uo||!t&&e._zTime){if(!e._initted&&Ll(e,t,i,n,d))return;for(s=e._zTime,e._zTime=t||(n?uo:0),n||(n=t&&!s),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=d,r=e._pt;r;)r.r(l,r.d),r=r._next;t<0&&xl(e,t,0,!0),e._onUpdate&&!n&&nc(e,"onUpdate"),d&&e._repeat&&!n&&e.parent&&nc(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&_l(e,1),n||qs||(nc(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(t){return(!t||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(t),e.prototype.invalidate.call(this,t)},n.resetTo=function(e,t,n,i,r){no||fc.wake(),this._ts||this.play();var a=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||Nc(this,a),function(e,t,n,i,r,a,s,o){var l,c,d,u,h=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!h)for(h=e._ptCache[t]=[],d=e._ptLookup,u=e._targets.length;u--;){if((l=d[u][t])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return Ic=1,e.vars[t]="+=0",Nc(e,s),Ic=0,o?Uo(t+" not eligible for reset"):1;h.push(l)}for(u=h.length;u--;)(l=(c=h[u])._pt||c).s=!i&&0!==i||r?l.s+(i||0)+a*l.c:i,l.c=n-l.s,c.e&&(c.e=il(n)+Vl(c.e)),c.b&&(c.b=l.s+Vl(c.b))}(this,e,t,n,i,this._ease(a/this._dur),a,r)?this.resetTo(e,t,n,i,1):(Cl(this,0),this.parent||gl(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t))return this._lazy=this._pt=0,this.parent?ic(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,Lc&&!0!==Lc.vars.overwrite)._first||ic(this),this.parent&&n!==this.timeline.totalDuration()&&Rl(this,this._dur*this.timeline._tDur/n,0,1),this}var i,r,a,s,o,l,c,d=this._targets,u=e?Gl(e):d,h=this._ptLookup,p=this._pt;if((!t||"all"===t)&&function(e,t){for(var n=e.length,i=n===t.length;i&&n--&&e[n]===t[n];);return n<0}(d,u))return"all"===t&&(this._pt=0),ic(this);for(i=this._op=this._op||[],"all"!==t&&(_o(t)&&(o={},nl(t,(function(e){return o[e]=1})),t=o),t=function(e,t){var n,i,r,a,s=e[0]?el(e[0]).harness:0,o=s&&s.aliases;if(!o)return t;for(i in n=hl({},t),o)if(i in n)for(r=(a=o[i].split(",")).length;r--;)n[a[r]]=n[i];return n}(d,t)),c=d.length;c--;)if(~u.indexOf(d[c]))for(o in r=h[c],"all"===t?(i[c]=t,s=r,a={}):(a=i[c]=i[c]||{},s=t),s)(l=r&&r[o])&&("kill"in l.d&&!0!==l.d.kill(o)||vl(this,l,"_pt"),delete r[o]),"all"!==a&&(a[o]=1);return this._initted&&!this._pt&&p&&ic(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,t){return Fl(1,arguments)},t.delayedCall=function(e,n,i,r){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:r})},t.fromTo=function(e,t,n){return Fl(2,arguments)},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return Xs.killTweensOf(e,t,n)},t}(kc);ul(Vc.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),nl("staggerTo,staggerFrom,staggerFromTo",(function(e){Vc[e]=function(){var t=new Dc,n=Hl.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}}));var Hc=function(e,t,n){return e[t]=n},$c=function(e,t,n){return e[t](n)},Wc=function(e,t,n,i){return e[t](i.fp,n)},Gc=function(e,t,n){return e.setAttribute(t,n)},jc=function(e,t){return bo(e[t])?$c:xo(e[t])&&e.setAttribute?Gc:Hc},qc=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},Yc=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Xc=function(e,t){var n=t._pt,i="";if(!e&&t.b)i=t.b;else if(1===e&&t.e)i=t.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+i,n=n._next;i+=t.c}t.set(t.t,t.p,i,t)},Kc=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},Zc=function(e,t,n,i){for(var r,a=this._pt;a;)r=a._next,a.p===i&&a.modifier(e,t,n),a=r},Jc=function(e){for(var t,n,i=this._pt;i;)n=i._next,i.p===e&&!i.op||i.op===e?vl(this,i,"_pt"):i.dep||(t=1),i=n;return!t},Qc=function(e,t,n,i){i.mSet(e,t,i.m.call(i.tween,n,i.mt),i)},ed=function(e){for(var t,n,i,r,a=e._pt;a;){for(t=a._next,n=i;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:r)?a._prev._next=a:i=a,(a._next=n)?n._prev=a:r=a,a=t}e._pt=i},td=function(){function e(e,t,n,i,r,a,s,o,l){this.t=t,this.s=i,this.c=r,this.p=n,this.r=a||qc,this.d=s||this,this.set=o||Hc,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=Qc,this.m=e,this.mt=n,this.tween=t},e}();nl(Jo+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(e){return Go[e]=1})),Oo.TweenMax=Oo.TweenLite=Vc,Oo.TimelineLite=Oo.TimelineMax=Dc,Xs=new Dc({sortChildren:!1,defaults:lo,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),oo.stringFilter=mc;var nd=[],id={},rd=[],ad=0,sd=0,od=function(e){return(id[e]||rd).map((function(e){return e()}))},ld=function(){var e=Date.now(),t=[];e-ad>2&&(od("matchMediaInit"),nd.forEach((function(e){var n,i,r,a,s=e.queries,o=e.conditions;for(i in s)(n=Ks.matchMedia(s[i]).matches)&&(r=1),n!==o[i]&&(o[i]=n,a=1);a&&(e.revert(),r&&t.push(e))})),od("matchMediaRevert"),t.forEach((function(e){return e.onMatch(e,(function(t){return e.add(null,t)}))})),ad=e,od("matchMedia"))},cd=function(){function e(e,t){this.selector=t&&jl(t),this.data=[],this._r=[],this.isReverted=!1,this.id=sd++,e&&this.add(e)}var t=e.prototype;return t.add=function(e,t,n){bo(e)&&(n=t,t=e,e=bo);var i=this,r=function(){var e,r=Ys,a=i.selector;return r&&r!==i&&r.data.push(i),n&&(i.selector=jl(n)),Ys=i,e=t.apply(i,arguments),bo(e)&&i._r.push(e),Ys=r,i.selector=a,i.isReverted=!1,e};return i.last=r,e===bo?r(i,(function(e){return i.add(null,e)})):e?i[e]=r:r},t.ignore=function(e){var t=Ys;Ys=null,e(this),Ys=t},t.getTweens=function(){var t=[];return this.data.forEach((function(n){return n instanceof e?t.push.apply(t,n.getTweens()):n instanceof Vc&&!(n.parent&&"nested"===n.parent.data)&&t.push(n)})),t},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,t){var n=this;if(e?function(){for(var t,i=n.getTweens(),r=n.data.length;r--;)"isFlip"===(t=n.data[r]).data&&(t.revert(),t.getChildren(!0,!0,!1).forEach((function(e){return i.splice(i.indexOf(e),1)})));for(i.map((function(e){return{g:e._dur||e._delay||e._sat&&!e._sat.vars.immediateRender?e.globalTime(0):-1/0,t:e}})).sort((function(e,t){return t.g-e.g||-1/0})).forEach((function(t){return t.t.revert(e)})),r=n.data.length;r--;)(t=n.data[r])instanceof Dc?"nested"!==t.data&&(t.scrollTrigger&&t.scrollTrigger.revert(),t.kill()):!(t instanceof Vc)&&t.revert&&t.revert(e);n._r.forEach((function(t){return t(e,n)})),n.isReverted=!0}():this.data.forEach((function(e){return e.kill&&e.kill()})),this.clear(),t)for(var i=nd.length;i--;)nd[i].id===this.id&&nd.splice(i,1)},t.revert=function(e){this.kill(e||{})},e}(),dd=function(){function e(e){this.contexts=[],this.scope=e,Ys&&Ys.data.push(this)}var t=e.prototype;return t.add=function(e,t,n){wo(e)||(e={matches:e});var i,r,a,s=new cd(0,n||this.scope),o=s.conditions={};for(r in Ys&&!s.selector&&(s.selector=Ys.selector),this.contexts.push(s),t=s.add("onMatch",t),s.queries=e,e)"all"===r?a=1:(i=Ks.matchMedia(e[r]))&&(nd.indexOf(s)<0&&nd.push(s),(o[r]=i.matches)&&(a=1),i.addListener?i.addListener(ld):i.addEventListener("change",ld));return a&&t(s,(function(e){return s.add(null,e)})),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach((function(t){return t.kill(e,!0)}))},e}(),ud={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){return ac(e)}))},timeline:function(e){return new Dc(e)},getTweensOf:function(e,t){return Xs.getTweensOf(e,t)},getProperty:function(e,t,n,i){_o(e)&&(e=Gl(e)[0]);var r=el(e||{}).get,a=n?dl:cl;return"native"===n&&(n=""),e?t?a((Yo[t]&&Yo[t].get||r)(e,t,n,i)):function(t,n,i){return a((Yo[t]&&Yo[t].get||r)(e,t,n,i))}:e},quickSetter:function(e,t,n){if((e=Gl(e)).length>1){var i=e.map((function(e){return md.quickSetter(e,t,n)})),r=i.length;return function(e){for(var t=r;t--;)i[t](e)}}e=e[0]||{};var a=Yo[t],s=el(e),o=s.harness&&(s.harness.aliases||{})[t]||t,l=a?function(t){var i=new a;to._pt=0,i.init(e,n?t+n:t,to,0,[e]),i.render(1,i),to._pt&&Kc(1,to)}:s.set(e,o);return a?l:function(t){return l(e,o,n?t+n:t,s,1)}},quickTo:function(e,t,n){var i,r=md.to(e,hl(((i={})[t]="+=0.1",i.paused=!0,i),n||{})),a=function(e,n,i){return r.resetTo(t,e,n,i)};return a.tween=r,a},isTweening:function(e){return Xs.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Sc(e.ease,lo.ease)),pl(lo,e||{})},config:function(e){return pl(oo,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,i=e.plugins,r=e.defaults,a=e.extendTimeline;(i||"").split(",").forEach((function(e){return e&&!Yo[e]&&!Oo[e]&&Uo(t+" effect requires "+e+" plugin.")})),Xo[t]=function(e,t,i){return n(Gl(e),ul(t||{},r),i)},a&&(Dc.prototype[t]=function(e,n,i){return this.add(Xo[t](e,wo(n)?n:(i=n)&&{},this),i)})},registerEase:function(e,t){vc[e]=Sc(t)},parseEase:function(e,t){return arguments.length?Sc(e,t):vc},getById:function(e){return Xs.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,i,r=new Dc(e);for(r.smoothChildTiming=So(e.smoothChildTiming),Xs.remove(r),r._dp=0,r._time=r._tTime=Xs._time,n=Xs._first;n;)i=n._next,!t&&!n._dur&&n instanceof Vc&&n.vars.onComplete===n._targets[0]||kl(r,n,n._start-n._delay),n=i;return kl(Xs,r,0),r},context:function(e,t){return e?new cd(e,t):Ys},matchMedia:function(e){return new dd(e)},matchMediaRefresh:function(){return nd.forEach((function(e){var t,n,i=e.conditions;for(n in i)i[n]&&(i[n]=!1,t=1);t&&e.revert()}))||ld()},addEventListener:function(e,t){var n=id[e]||(id[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=id[e],i=n&&n.indexOf(t);i>=0&&n.splice(i,1)},utils:{wrap:function e(t,n,i){var r=n-t;return Co(t)?Jl(t,e(0,t.length),n):Ul(i,(function(e){return(r+(e-t)%r)%r+t}))},wrapYoyo:function e(t,n,i){var r=n-t,a=2*r;return Co(t)?Jl(t,e(0,t.length-1),n):Ul(i,(function(e){return t+((e=(a+(e-t)%a)%a||0)>r?a-e:e)}))},distribute:Yl,random:Zl,snap:Kl,normalize:function(e,t,n){return ec(e,t,0,1,n)},getUnit:Vl,clamp:function(e,t,n){return Ul(n,(function(n){return zl(e,t,n)}))},splitColor:cc,toArray:Gl,selector:jl,mapRange:ec,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||Vl(n))}},interpolate:function e(t,n,i,r){var a=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!a){var s,o,l,c,d,u=_o(t),h={};if(!0===i&&(r=1)&&(i=null),u)t={p:t},n={p:n};else if(Co(t)&&!Co(n)){for(l=[],c=t.length,d=c-2,o=1;o<c;o++)l.push(e(t[o-1],t[o]));c--,a=function(e){e*=c;var t=Math.min(d,~~e);return l[t](e-t)},i=n}else r||(t=hl(Co(t)?[]:{},t));if(!l){for(s in n)Rc.call(h,t,s,"get",n[s]);a=function(e){return Kc(e,h)||(u?t.p:t)}}}return Ul(i,a)},shuffle:ql},install:Bo,effects:Xo,ticker:fc,updateRoot:Dc.updateRoot,plugins:Yo,globalTimeline:Xs,core:{PropTween:td,globals:zo,Tween:Vc,Timeline:Dc,Animation:kc,getCache:el,_removeLinkedListItem:vl,reverting:function(){return qs},context:function(e){return e&&Ys&&(Ys.data.push(e),e._ctx=Ys),Ys},suppressOverwrites:function(e){return js=e}}};nl("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return ud[e]=Vc[e]})),fc.add(Dc.updateRoot),to=ud.to({},{duration:0});var hd=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},pd=function(e,t){return{name:e,rawVars:1,init:function(e,n,i){i._onInit=function(e){var i,r;if(_o(n)&&(i={},nl(n,(function(e){return i[e]=1})),n=i),t){for(r in i={},n)i[r]=t(n[r]);n=i}!function(e,t){var n,i,r,a=e._targets;for(n in t)for(i=a.length;i--;)(r=e._ptLookup[i][n])&&(r=r.d)&&(r._pt&&(r=hd(r,n)),r&&r.modifier&&r.modifier(t[n],e,a[i],n))}(e,n)}}}},md=ud.registerPlugin({name:"attr",init:function(e,t,n,i,r){var a,s,o;for(a in this.tween=n,t)o=e.getAttribute(a)||"",(s=this.add(e,"setAttribute",(o||0)+"",t[a],i,r,0,0,a)).op=a,s.b=o,this._props.push(a)},render:function(e,t){for(var n=t._pt;n;)qs?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},pd("roundProps",Xl),pd("modifiers"),pd("snap",Kl))||ud;Vc.version=Dc.version=md.version="3.12.5",Qs=1,To()&&gc();vc.Power0,vc.Power1,vc.Power2,vc.Power3,vc.Power4,vc.Linear,vc.Quad,vc.Cubic,vc.Quart,vc.Quint,vc.Strong,vc.Elastic,vc.Back,vc.SteppedEase,vc.Bounce,vc.Sine,vc.Expo,vc.Circ;var fd,gd,vd,_d,bd,yd,xd,wd,Sd={},Td=180/Math.PI,Ed=Math.PI/180,Md=Math.atan2,Cd=/([A-Z])/g,Ad=/(left|right|width|margin|padding|x)/i,kd=/[\s,\(]\S/,Dd={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Ld=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Id=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Pd=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},Rd=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},Od=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Nd=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},Bd=function(e,t,n){return e.style[t]=n},Fd=function(e,t,n){return e.style.setProperty(t,n)},Ud=function(e,t,n){return e._gsap[t]=n},zd=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},Vd=function(e,t,n,i,r){var a=e._gsap;a.scaleX=a.scaleY=n,a.renderTransform(r,a)},Hd=function(e,t,n,i,r){var a=e._gsap;a[t]=n,a.renderTransform(r,a)},$d="transform",Wd=$d+"Origin",Gd=function e(t,n){var i=this,r=this.target,a=r.style,s=r._gsap;if(t in Sd&&a){if(this.tfm=this.tfm||{},"transform"===t)return Dd.transform.split(",").forEach((function(t){return e.call(i,t,n)}));if(~(t=Dd[t]||t).indexOf(",")?t.split(",").forEach((function(e){return i.tfm[e]=cu(r,e)})):this.tfm[t]=s.x?s[t]:cu(r,t),t===Wd&&(this.tfm.zOrigin=s.zOrigin),this.props.indexOf($d)>=0)return;s.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Wd,n,"")),t=$d}(a||n)&&this.props.push(t,n,a[t])},jd=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},qd=function(){var e,t,n=this.props,i=this.target,r=i.style,a=i._gsap;for(e=0;e<n.length;e+=3)n[e+1]?i[n[e]]=n[e+2]:n[e+2]?r[n[e]]=n[e+2]:r.removeProperty("--"===n[e].substr(0,2)?n[e]:n[e].replace(Cd,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)a[t]=this.tfm[t];a.svg&&(a.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),(e=xd())&&e.isStart||r[$d]||(jd(r),a.zOrigin&&r[Wd]&&(r[Wd]+=" "+a.zOrigin+"px",a.zOrigin=0,a.renderTransform()),a.uncache=1)}},Yd=function(e,t){var n={target:e,props:[],revert:qd,save:Gd};return e._gsap||md.core.getCache(e),t&&t.split(",").forEach((function(e){return n.save(e)})),n},Xd=function(e,t){var n=gd.createElementNS?gd.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):gd.createElement(e);return n&&n.style?n:gd.createElement(e)},Kd=function e(t,n,i){var r=getComputedStyle(t);return r[n]||r.getPropertyValue(n.replace(Cd,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&e(t,Jd(n)||n,1)||""},Zd="O,Moz,ms,Ms,Webkit".split(","),Jd=function(e,t,n){var i=(t||bd).style,r=5;if(e in i&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);r--&&!(Zd[r]+e in i););return r<0?null:(3===r?"ms":r>=0?Zd[r]:"")+e},Qd=function(){"undefined"!=typeof window&&window.document&&(fd=window,gd=fd.document,vd=gd.documentElement,bd=Xd("div")||{style:{}},Xd("div"),$d=Jd($d),Wd=$d+"Origin",bd.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",wd=!!Jd("perspective"),xd=md.core.reverting,_d=1)},eu=function e(t){var n,i=Xd("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,a=this.nextSibling,s=this.style.cssText;if(vd.appendChild(i),i.appendChild(this),this.style.display="block",t)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch(e){}else this._gsapBBox&&(n=this._gsapBBox());return r&&(a?r.insertBefore(this,a):r.appendChild(this)),vd.removeChild(i),this.style.cssText=s,n},tu=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},nu=function(e){var t;try{t=e.getBBox()}catch(n){t=eu.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===eu||(t=eu.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+tu(e,["x","cx","x1"])||0,y:+tu(e,["y","cy","y1"])||0,width:0,height:0}},iu=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!nu(e))},ru=function(e,t){if(t){var n,i=e.style;t in Sd&&t!==Wd&&(t=$d),i.removeProperty?("ms"!==(n=t.substr(0,2))&&"webkit"!==t.substr(0,6)||(t="-"+t),i.removeProperty("--"===n?t:t.replace(Cd,"-$1").toLowerCase())):i.removeAttribute(t)}},au=function(e,t,n,i,r,a){var s=new td(e._pt,t,n,0,1,a?Nd:Od);return e._pt=s,s.b=i,s.e=r,e._props.push(n),s},su={deg:1,rad:1,turn:1},ou={grid:1,flex:1},lu=function e(t,n,i,r){var a,s,o,l,c=parseFloat(i)||0,d=(i+"").trim().substr((c+"").length)||"px",u=bd.style,h=Ad.test(n),p="svg"===t.tagName.toLowerCase(),m=(p?"client":"offset")+(h?"Width":"Height"),f=100,g="px"===r,v="%"===r;if(r===d||!c||su[r]||su[d])return c;if("px"!==d&&!g&&(c=e(t,n,i,"px")),l=t.getCTM&&iu(t),(v||"%"===d)&&(Sd[n]||~n.indexOf("adius")))return a=l?t.getBBox()[h?"width":"height"]:t[m],il(v?c/a*f:c/100*a);if(u[h?"width":"height"]=f+(g?d:r),s=~n.indexOf("adius")||"em"===r&&t.appendChild&&!p?t:t.parentNode,l&&(s=(t.ownerSVGElement||{}).parentNode),s&&s!==gd&&s.appendChild||(s=gd.body),(o=s._gsap)&&v&&o.width&&h&&o.time===fc.time&&!o.uncache)return il(c/o.width*f);if(!v||"height"!==n&&"width"!==n)(v||"%"===d)&&!ou[Kd(s,"display")]&&(u.position=Kd(t,"position")),s===t&&(u.position="static"),s.appendChild(bd),a=bd[m],s.removeChild(bd),u.position="absolute";else{var _=t.style[n];t.style[n]=f+r,a=t[m],_?t.style[n]=_:ru(t,n)}return h&&v&&((o=el(s)).time=fc.time,o.width=s[m]),il(g?a*c/f:a&&c?f/a*c:0)},cu=function(e,t,n,i){var r;return _d||Qd(),t in Dd&&"transform"!==t&&~(t=Dd[t]).indexOf(",")&&(t=t.split(",")[0]),Sd[t]&&"transform"!==t?(r=xu(e,i),r="transformOrigin"!==t?r[t]:r.svg?r.origin:wu(Kd(e,Wd))+" "+r.zOrigin+"px"):(!(r=e.style[t])||"auto"===r||i||~(r+"").indexOf("calc("))&&(r=mu[t]&&mu[t](e,t,n)||Kd(e,t)||tl(e,t)||("opacity"===t?1:0)),n&&!~(r+"").trim().indexOf(" ")?lu(e,t,r,n)+n:r},du=function(e,t,n,i){if(!n||"none"===n){var r=Jd(t,e,1),a=r&&Kd(e,r,1);a&&a!==n?(t=r,n=a):"borderColor"===t&&(n=Kd(e,"borderTopColor"))}var s,o,l,c,d,u,h,p,m,f,g,v=new td(this._pt,e.style,t,0,1,Xc),_=0,b=0;if(v.b=n,v.e=i,n+="","auto"===(i+="")&&(u=e.style[t],e.style[t]=i,i=Kd(e,t)||i,u?e.style[t]=u:ru(e,t)),mc(s=[n,i]),i=s[1],l=(n=s[0]).match(Do)||[],(i.match(Do)||[]).length){for(;o=Do.exec(i);)h=o[0],m=i.substring(_,o.index),d?d=(d+1)%5:"rgba("!==m.substr(-5)&&"hsla("!==m.substr(-5)||(d=1),h!==(u=l[b++]||"")&&(c=parseFloat(u)||0,g=u.substr((c+"").length),"="===h.charAt(1)&&(h=al(c,h)+g),p=parseFloat(h),f=h.substr((p+"").length),_=Do.lastIndex-f.length,f||(f=f||oo.units[t]||g,_===i.length&&(i+=f,v.e+=f)),g!==f&&(c=lu(e,t,u,f)||0),v._pt={_next:v._pt,p:m||1===b?m:",",s:c,c:p-c,m:d&&d<4||"zIndex"===t?Math.round:0});v.c=_<i.length?i.substring(_,i.length):""}else v.r="display"===t&&"none"===i?Nd:Od;return Io.test(i)&&(v.e=0),this._pt=v,v},uu={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},hu=function(e){var t=e.split(" "),n=t[0],i=t[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==i&&"right"!==i||(e=n,n=i,i=e),t[0]=uu[n]||n,t[1]=uu[i]||i,t.join(" ")},pu=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,i,r,a=t.t,s=a.style,o=t.u,l=a._gsap;if("all"===o||!0===o)s.cssText="",i=1;else for(r=(o=o.split(",")).length;--r>-1;)n=o[r],Sd[n]&&(i=1,n="transformOrigin"===n?Wd:$d),ru(a,n);i&&(ru(a,$d),l&&(l.svg&&a.removeAttribute("transform"),xu(a,1),l.uncache=1,jd(s)))}},mu={clearProps:function(e,t,n,i,r){if("isFromStart"!==r.data){var a=e._pt=new td(e._pt,t,n,0,0,pu);return a.u=i,a.pr=-10,a.tween=r,e._props.push(n),1}}},fu=[1,0,0,1,0,0],gu={},vu=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},_u=function(e){var t=Kd(e,$d);return vu(t)?fu:t.substr(7).match(ko).map(il)},bu=function(e,t){var n,i,r,a,s=e._gsap||el(e),o=e.style,l=_u(e);return s.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(r=e.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?fu:l:(l!==fu||e.offsetParent||e===vd||s.svg||(r=o.display,o.display="block",(n=e.parentNode)&&e.offsetParent||(a=1,i=e.nextElementSibling,vd.appendChild(e)),l=_u(e),r?o.display=r:ru(e,"display"),a&&(i?n.insertBefore(e,i):n?n.appendChild(e):vd.removeChild(e))),t&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},yu=function(e,t,n,i,r,a){var s,o,l,c=e._gsap,d=r||bu(e,!0),u=c.xOrigin||0,h=c.yOrigin||0,p=c.xOffset||0,m=c.yOffset||0,f=d[0],g=d[1],v=d[2],_=d[3],b=d[4],y=d[5],x=t.split(" "),w=parseFloat(x[0])||0,S=parseFloat(x[1])||0;n?d!==fu&&(o=f*_-g*v)&&(l=w*(-g/o)+S*(f/o)-(f*y-g*b)/o,w=w*(_/o)+S*(-v/o)+(v*y-_*b)/o,S=l):(w=(s=nu(e)).x+(~x[0].indexOf("%")?w/100*s.width:w),S=s.y+(~(x[1]||x[0]).indexOf("%")?S/100*s.height:S)),i||!1!==i&&c.smooth?(b=w-u,y=S-h,c.xOffset=p+(b*f+y*v)-b,c.yOffset=m+(b*g+y*_)-y):c.xOffset=c.yOffset=0,c.xOrigin=w,c.yOrigin=S,c.smooth=!!i,c.origin=t,c.originIsAbsolute=!!n,e.style[Wd]="0px 0px",a&&(au(a,c,"xOrigin",u,w),au(a,c,"yOrigin",h,S),au(a,c,"xOffset",p,c.xOffset),au(a,c,"yOffset",m,c.yOffset)),e.setAttribute("data-svg-origin",w+" "+S)},xu=function(e,t){var n=e._gsap||new Ac(e);if("x"in n&&!t&&!n.uncache)return n;var i,r,a,s,o,l,c,d,u,h,p,m,f,g,v,_,b,y,x,w,S,T,E,M,C,A,k,D,L,I,P,R,O=e.style,N=n.scaleX<0,B="px",F="deg",U=getComputedStyle(e),z=Kd(e,Wd)||"0";return i=r=a=l=c=d=u=h=p=0,s=o=1,n.svg=!(!e.getCTM||!iu(e)),U.translate&&("none"===U.translate&&"none"===U.scale&&"none"===U.rotate||(O[$d]=("none"!==U.translate?"translate3d("+(U.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==U.rotate?"rotate("+U.rotate+") ":"")+("none"!==U.scale?"scale("+U.scale.split(" ").join(",")+") ":"")+("none"!==U[$d]?U[$d]:"")),O.scale=O.rotate=O.translate="none"),g=bu(e,n.svg),n.svg&&(n.uncache?(C=e.getBBox(),z=n.xOrigin-C.x+"px "+(n.yOrigin-C.y)+"px",M=""):M=!t&&e.getAttribute("data-svg-origin"),yu(e,M||z,!!M||n.originIsAbsolute,!1!==n.smooth,g)),m=n.xOrigin||0,f=n.yOrigin||0,g!==fu&&(y=g[0],x=g[1],w=g[2],S=g[3],i=T=g[4],r=E=g[5],6===g.length?(s=Math.sqrt(y*y+x*x),o=Math.sqrt(S*S+w*w),l=y||x?Md(x,y)*Td:0,(u=w||S?Md(w,S)*Td+l:0)&&(o*=Math.abs(Math.cos(u*Ed))),n.svg&&(i-=m-(m*y+f*w),r-=f-(m*x+f*S))):(R=g[6],I=g[7],k=g[8],D=g[9],L=g[10],P=g[11],i=g[12],r=g[13],a=g[14],c=(v=Md(R,L))*Td,v&&(M=T*(_=Math.cos(-v))+k*(b=Math.sin(-v)),C=E*_+D*b,A=R*_+L*b,k=T*-b+k*_,D=E*-b+D*_,L=R*-b+L*_,P=I*-b+P*_,T=M,E=C,R=A),d=(v=Md(-w,L))*Td,v&&(_=Math.cos(-v),P=S*(b=Math.sin(-v))+P*_,y=M=y*_-k*b,x=C=x*_-D*b,w=A=w*_-L*b),l=(v=Md(x,y))*Td,v&&(M=y*(_=Math.cos(v))+x*(b=Math.sin(v)),C=T*_+E*b,x=x*_-y*b,E=E*_-T*b,y=M,T=C),c&&Math.abs(c)+Math.abs(l)>359.9&&(c=l=0,d=180-d),s=il(Math.sqrt(y*y+x*x+w*w)),o=il(Math.sqrt(E*E+R*R)),v=Md(T,E),u=Math.abs(v)>2e-4?v*Td:0,p=P?1/(P<0?-P:P):0),n.svg&&(M=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!vu(Kd(e,$d)),M&&e.setAttribute("transform",M))),Math.abs(u)>90&&Math.abs(u)<270&&(N?(s*=-1,u+=l<=0?180:-180,l+=l<=0?180:-180):(o*=-1,u+=u<=0?180:-180)),t=t||n.uncache,n.x=i-((n.xPercent=i&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-i)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+B,n.y=r-((n.yPercent=r&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-r)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+B,n.z=a+B,n.scaleX=il(s),n.scaleY=il(o),n.rotation=il(l)+F,n.rotationX=il(c)+F,n.rotationY=il(d)+F,n.skewX=u+F,n.skewY=h+F,n.transformPerspective=p+B,(n.zOrigin=parseFloat(z.split(" ")[2])||!t&&n.zOrigin||0)&&(O[Wd]=wu(z)),n.xOffset=n.yOffset=0,n.force3D=oo.force3D,n.renderTransform=n.svg?ku:wd?Au:Tu,n.uncache=0,n},wu=function(e){return(e=e.split(" "))[0]+" "+e[1]},Su=function(e,t,n){var i=Vl(t);return il(parseFloat(t)+parseFloat(lu(e,"x",n+"px",i)))+i},Tu=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Au(e,t)},Eu="0deg",Mu="0px",Cu=") ",Au=function(e,t){var n=t||this,i=n.xPercent,r=n.yPercent,a=n.x,s=n.y,o=n.z,l=n.rotation,c=n.rotationY,d=n.rotationX,u=n.skewX,h=n.skewY,p=n.scaleX,m=n.scaleY,f=n.transformPerspective,g=n.force3D,v=n.target,_=n.zOrigin,b="",y="auto"===g&&e&&1!==e||!0===g;if(_&&(d!==Eu||c!==Eu)){var x,w=parseFloat(c)*Ed,S=Math.sin(w),T=Math.cos(w);w=parseFloat(d)*Ed,x=Math.cos(w),a=Su(v,a,S*x*-_),s=Su(v,s,-Math.sin(w)*-_),o=Su(v,o,T*x*-_+_)}f!==Mu&&(b+="perspective("+f+Cu),(i||r)&&(b+="translate("+i+"%, "+r+"%) "),(y||a!==Mu||s!==Mu||o!==Mu)&&(b+=o!==Mu||y?"translate3d("+a+", "+s+", "+o+") ":"translate("+a+", "+s+Cu),l!==Eu&&(b+="rotate("+l+Cu),c!==Eu&&(b+="rotateY("+c+Cu),d!==Eu&&(b+="rotateX("+d+Cu),u===Eu&&h===Eu||(b+="skew("+u+", "+h+Cu),1===p&&1===m||(b+="scale("+p+", "+m+Cu),v.style[$d]=b||"translate(0, 0)"},ku=function(e,t){var n,i,r,a,s,o=t||this,l=o.xPercent,c=o.yPercent,d=o.x,u=o.y,h=o.rotation,p=o.skewX,m=o.skewY,f=o.scaleX,g=o.scaleY,v=o.target,_=o.xOrigin,b=o.yOrigin,y=o.xOffset,x=o.yOffset,w=o.forceCSS,S=parseFloat(d),T=parseFloat(u);h=parseFloat(h),p=parseFloat(p),(m=parseFloat(m))&&(p+=m=parseFloat(m),h+=m),h||p?(h*=Ed,p*=Ed,n=Math.cos(h)*f,i=Math.sin(h)*f,r=Math.sin(h-p)*-g,a=Math.cos(h-p)*g,p&&(m*=Ed,s=Math.tan(p-m),r*=s=Math.sqrt(1+s*s),a*=s,m&&(s=Math.tan(m),n*=s=Math.sqrt(1+s*s),i*=s)),n=il(n),i=il(i),r=il(r),a=il(a)):(n=f,a=g,i=r=0),(S&&!~(d+"").indexOf("px")||T&&!~(u+"").indexOf("px"))&&(S=lu(v,"x",d,"px"),T=lu(v,"y",u,"px")),(_||b||y||x)&&(S=il(S+_-(_*n+b*r)+y),T=il(T+b-(_*i+b*a)+x)),(l||c)&&(s=v.getBBox(),S=il(S+l/100*s.width),T=il(T+c/100*s.height)),s="matrix("+n+","+i+","+r+","+a+","+S+","+T+")",v.setAttribute("transform",s),w&&(v.style[$d]=s)},Du=function(e,t,n,i,r){var a,s,o=360,l=_o(r),c=parseFloat(r)*(l&&~r.indexOf("rad")?Td:1)-i,d=i+c+"deg";return l&&("short"===(a=r.split("_")[1])&&(c%=o)!==c%180&&(c+=c<0?o:-360),"cw"===a&&c<0?c=(c+36e9)%o-~~(c/o)*o:"ccw"===a&&c>0&&(c=(c-36e9)%o-~~(c/o)*o)),e._pt=s=new td(e._pt,t,n,i,c,Id),s.e=d,s.u="deg",e._props.push(n),s},Lu=function(e,t){for(var n in t)e[n]=t[n];return e},Iu=function(e,t,n){var i,r,a,s,o,l,c,d=Lu({},n._gsap),u=n.style;for(r in d.svg?(a=n.getAttribute("transform"),n.setAttribute("transform",""),u[$d]=t,i=xu(n,1),ru(n,$d),n.setAttribute("transform",a)):(a=getComputedStyle(n)[$d],u[$d]=t,i=xu(n,1),u[$d]=a),Sd)(a=d[r])!==(s=i[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(o=Vl(a)!==(c=Vl(s))?lu(n,r,a,c):parseFloat(a),l=parseFloat(s),e._pt=new td(e._pt,i,r,o,l-o,Ld),e._pt.u=c||0,e._props.push(r));Lu(i,d)};nl("padding,margin,Width,Radius",(function(e,t){var n="Top",i="Right",r="Bottom",a="Left",s=(t<3?[n,i,r,a]:[n+a,n+i,r+i,r+a]).map((function(n){return t<2?e+n:"border"+n+e}));mu[t>1?"border"+e:e]=function(e,t,n,i,r){var a,o;if(arguments.length<4)return a=s.map((function(t){return cu(e,t,n)})),5===(o=a.join(" ")).split(a[0]).length?a[0]:o;a=(i+"").split(" "),o={},s.forEach((function(e,t){return o[e]=a[t]=a[t]||a[(t-1)/2|0]})),e.init(t,o,r)}}));var Pu,Ru,Ou,Nu={name:"css",register:Qd,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,i,r){var a,s,o,l,c,d,u,h,p,m,f,g,v,_,b,y,x=this._props,w=e.style,S=n.vars.startAt;for(u in _d||Qd(),this.styles=this.styles||Yd(e),y=this.styles.props,this.tween=n,t)if("autoRound"!==u&&(s=t[u],!Yo[u]||!Oc(u,t,n,i,e,r)))if(c=typeof s,d=mu[u],"function"===c&&(c=typeof(s=s.call(n,i,e,r))),"string"===c&&~s.indexOf("random(")&&(s=Ql(s)),d)d(this,e,u,s,n)&&(b=1);else if("--"===u.substr(0,2))a=(getComputedStyle(e).getPropertyValue(u)+"").trim(),s+="",hc.lastIndex=0,hc.test(a)||(h=Vl(a),p=Vl(s)),p?h!==p&&(a=lu(e,u,a,p)+p):h&&(s+=h),this.add(w,"setProperty",a,s,i,r,0,0,u),x.push(u),y.push(u,0,w[u]);else if("undefined"!==c){if(S&&u in S?(a="function"==typeof S[u]?S[u].call(n,i,e,r):S[u],_o(a)&&~a.indexOf("random(")&&(a=Ql(a)),Vl(a+"")||"auto"===a||(a+=oo.units[u]||Vl(cu(e,u))||""),"="===(a+"").charAt(1)&&(a=cu(e,u))):a=cu(e,u),l=parseFloat(a),(m="string"===c&&"="===s.charAt(1)&&s.substr(0,2))&&(s=s.substr(2)),o=parseFloat(s),u in Dd&&("autoAlpha"===u&&(1===l&&"hidden"===cu(e,"visibility")&&o&&(l=0),y.push("visibility",0,w.visibility),au(this,w,"visibility",l?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==u&&"transform"!==u&&~(u=Dd[u]).indexOf(",")&&(u=u.split(",")[0])),f=u in Sd)if(this.styles.save(u),g||((v=e._gsap).renderTransform&&!t.parseTransform||xu(e,t.parseTransform),_=!1!==t.smoothOrigin&&v.smooth,(g=this._pt=new td(this._pt,w,$d,0,1,v.renderTransform,v,0,-1)).dep=1),"scale"===u)this._pt=new td(this._pt,v,"scaleY",v.scaleY,(m?al(v.scaleY,m+o):o)-v.scaleY||0,Ld),this._pt.u=0,x.push("scaleY",u),u+="X";else{if("transformOrigin"===u){y.push(Wd,0,w[Wd]),s=hu(s),v.svg?yu(e,s,0,_,0,this):((p=parseFloat(s.split(" ")[2])||0)!==v.zOrigin&&au(this,v,"zOrigin",v.zOrigin,p),au(this,w,u,wu(a),wu(s)));continue}if("svgOrigin"===u){yu(e,s,1,_,0,this);continue}if(u in gu){Du(this,v,u,l,m?al(l,m+s):s);continue}if("smoothOrigin"===u){au(this,v,"smooth",v.smooth,s);continue}if("force3D"===u){v[u]=s;continue}if("transform"===u){Iu(this,s,e);continue}}else u in w||(u=Jd(u)||u);if(f||(o||0===o)&&(l||0===l)&&!kd.test(s)&&u in w)o||(o=0),(h=(a+"").substr((l+"").length))!==(p=Vl(s)||(u in oo.units?oo.units[u]:h))&&(l=lu(e,u,a,p)),this._pt=new td(this._pt,f?v:w,u,l,(m?al(l,m+o):o)-l,f||"px"!==p&&"zIndex"!==u||!1===t.autoRound?Ld:Rd),this._pt.u=p||0,h!==p&&"%"!==p&&(this._pt.b=a,this._pt.r=Pd);else if(u in w)du.call(this,e,u,a,m?m+s:s);else if(u in e)this.add(e,u,a||e[u],m?m+s:s,i,r);else if("parseTransform"!==u){Fo(u,s);continue}f||(u in w?y.push(u,0,w[u]):y.push(u,1,a||e[u])),x.push(u)}b&&ed(this)},render:function(e,t){if(t.tween._time||!xd())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:cu,aliases:Dd,getSetter:function(e,t,n){var i=Dd[t];return i&&i.indexOf(",")<0&&(t=i),t in Sd&&t!==Wd&&(e._gsap.x||cu(e,"x"))?n&&yd===n?"scale"===t?zd:Ud:(yd=n||{})&&("scale"===t?Vd:Hd):e.style&&!xo(e.style[t])?Bd:~t.indexOf("-")?Fd:jc(e,t)},core:{_removeProperty:ru,_getMatrix:bu}};md.utils.checkPrefix=Jd,md.core.getStyleSaver=Yd,Ou=nl((Pu="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(Ru="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(e){Sd[e]=1})),nl(Ru,(function(e){oo.units[e]="deg",gu[e]=1})),Dd[Ou[13]]=Pu+","+Ru,nl("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(e){var t=e.split(":");Dd[t[1]]=Ou[t[0]]})),nl("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){oo.units[e]="px"})),md.registerPlugin(Nu);var Bu=md.registerPlugin(Nu)||md;Bu.core.Tween;function Fu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Uu,zu,Vu,Hu,$u,Wu,Gu,ju,qu,Yu,Xu,Ku,Zu,Ju=function(){return Uu||"undefined"!=typeof window&&(Uu=window.gsap)&&Uu.registerPlugin&&Uu},Qu=1,eh=[],th=[],nh=[],ih=Date.now,rh=function(e,t){return t},ah=function(e){return!!~Yu.indexOf(e)},sh=function(e,t,n,i,r){return e.addEventListener(t,n,{passive:!1!==i,capture:!!r})},oh=function(e,t,n,i){return e.removeEventListener(t,n,!!i)},lh="scrollLeft",ch="scrollTop",dh=function(){return Xu&&Xu.isPressed||th.cache++},uh=function(e,t){var n=function n(i){if(i||0===i){Qu&&(Vu.history.scrollRestoration="manual");var r=Xu&&Xu.isPressed;i=n.v=Math.round(i)||(Xu&&Xu.iOS?1:0),e(i),n.cacheID=th.cache,r&&rh("ss",i)}else(t||th.cache!==n.cacheID||rh("ref"))&&(n.cacheID=th.cache,n.v=e());return n.v+n.offset};return n.offset=0,e&&n},hh={s:lh,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:uh((function(e){return arguments.length?Vu.scrollTo(e,ph.sc()):Vu.pageXOffset||Hu.scrollLeft||$u.scrollLeft||Wu.scrollLeft||0}))},ph={s:ch,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:hh,sc:uh((function(e){return arguments.length?Vu.scrollTo(hh.sc(),e):Vu.pageYOffset||Hu.scrollTop||$u.scrollTop||Wu.scrollTop||0}))},mh=function(e,t){var n=t.s,i=t.sc;ah(e)&&(e=Hu.scrollingElement||$u);var r=th.indexOf(e),a=i===ph.sc?1:2;!~r&&(r=th.push(e)-1),th[r+a]||sh(e,"scroll",dh);var s=th[r+a],o=s||(th[r+a]=uh(function(e,t){return~nh.indexOf(e)&&nh[nh.indexOf(e)+1][t]}(e,n),!0)||(ah(e)?i:uh((function(t){return arguments.length?e[n]=t:e[n]}))));return o.target=e,s||(o.smooth="smooth"===Uu.getProperty(e,"scrollBehavior")),o},fh=function(e,t,n){var i=e,r=e,a=ih(),s=a,o=t||50,l=Math.max(500,3*o),c=function(e,t){var l=ih();t||l-a>o?(r=i,i=e,s=a,a=l):n?i+=e:i=r+(e-r)/(l-s)*(a-s)};return{update:c,reset:function(){r=i=n?0:i,s=a=0},getVelocity:function(e){var t=s,o=r,d=ih();return(e||0===e)&&e!==i&&c(e),a===s||d-s>l?0:(i+(n?o:-o))/((n?d:a)-t)*1e3}}},gh=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},vh=function(e){var t=Math.max.apply(Math,e),n=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(n)?t:n},_h=function(){var e,t,n,i;(qu=Uu.core.globals().ScrollTrigger)&&qu.core&&(e=qu.core,t=e.bridge||{},n=e._scrollers,i=e._proxies,n.push.apply(n,th),i.push.apply(i,nh),th=n,nh=i,rh=function(e,n){return t[e](n)})},bh=function(e){return Uu=e||Ju(),!zu&&Uu&&"undefined"!=typeof document&&document.body&&(Vu=window,Hu=document,$u=Hu.documentElement,Wu=Hu.body,Yu=[Vu,Hu,$u,Wu],Uu.utils.clamp,Zu=Uu.core.context||function(){},ju="onpointerenter"in Wu?"pointer":"mouse",Gu=yh.isTouch=Vu.matchMedia&&Vu.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in Vu||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Ku=yh.eventTypes=("ontouchstart"in $u?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in $u?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout((function(){return Qu=0}),500),_h(),zu=1),zu};hh.op=ph,th.cache=0;var yh=function(){function e(e){this.init(e)}var t,n,i;return e.prototype.init=function(e){zu||bh(Uu)||console.warn("Please gsap.registerPlugin(Observer)"),qu||_h();var t=e.tolerance,n=e.dragMinimum,i=e.type,r=e.target,a=e.lineHeight,s=e.debounce,o=e.preventDefault,l=e.onStop,c=e.onStopDelay,d=e.ignore,u=e.wheelSpeed,h=e.event,p=e.onDragStart,m=e.onDragEnd,f=e.onDrag,g=e.onPress,v=e.onRelease,_=e.onRight,b=e.onLeft,y=e.onUp,x=e.onDown,w=e.onChangeX,S=e.onChangeY,T=e.onChange,E=e.onToggleX,M=e.onToggleY,C=e.onHover,A=e.onHoverEnd,k=e.onMove,D=e.ignoreCheck,L=e.isNormalizer,I=e.onGestureStart,P=e.onGestureEnd,R=e.onWheel,O=e.onEnable,N=e.onDisable,B=e.onClick,F=e.scrollSpeed,U=e.capture,z=e.allowClicks,V=e.lockAxis,H=e.onLockAxis;this.target=r=function(e,t){return(t&&t._ctx&&t._ctx.selector||Uu.utils.toArray)(e)[0]||("string"==typeof e&&!1!==Uu.config().nullTargetWarn?console.warn("Element not found:",e):null)}(r)||$u,this.vars=e,d&&(d=Uu.utils.toArray(d)),t=t||1e-9,n=n||0,u=u||1,F=F||1,i=i||"wheel,touch,pointer",s=!1!==s,a||(a=parseFloat(Vu.getComputedStyle(Wu).lineHeight)||22);var $,W,G,j,q,Y,X,K=this,Z=0,J=0,Q=e.passive||!o,ee=mh(r,hh),te=mh(r,ph),ne=ee(),ie=te(),re=~i.indexOf("touch")&&!~i.indexOf("pointer")&&"pointerdown"===Ku[0],ae=ah(r),se=r.ownerDocument||Hu,oe=[0,0,0],le=[0,0,0],ce=0,de=function(){return ce=ih()},ue=function(e,t){return(K.event=e)&&d&&~d.indexOf(e.target)||t&&re&&"touch"!==e.pointerType||D&&D(e,t)},he=function(){var e=K.deltaX=vh(oe),n=K.deltaY=vh(le),i=Math.abs(e)>=t,r=Math.abs(n)>=t;T&&(i||r)&&T(K,e,n,oe,le),i&&(_&&K.deltaX>0&&_(K),b&&K.deltaX<0&&b(K),w&&w(K),E&&K.deltaX<0!=Z<0&&E(K),Z=K.deltaX,oe[0]=oe[1]=oe[2]=0),r&&(x&&K.deltaY>0&&x(K),y&&K.deltaY<0&&y(K),S&&S(K),M&&K.deltaY<0!=J<0&&M(K),J=K.deltaY,le[0]=le[1]=le[2]=0),(j||G)&&(k&&k(K),G&&(f(K),G=!1),j=!1),Y&&!(Y=!1)&&H&&H(K),q&&(R(K),q=!1),$=0},pe=function(e,t,n){oe[n]+=e,le[n]+=t,K._vx.update(e),K._vy.update(t),s?$||($=requestAnimationFrame(he)):he()},me=function(e,t){V&&!X&&(K.axis=X=Math.abs(e)>Math.abs(t)?"x":"y",Y=!0),"y"!==X&&(oe[2]+=e,K._vx.update(e,!0)),"x"!==X&&(le[2]+=t,K._vy.update(t,!0)),s?$||($=requestAnimationFrame(he)):he()},fe=function(e){if(!ue(e,1)){var t=(e=gh(e,o)).clientX,i=e.clientY,r=t-K.x,a=i-K.y,s=K.isDragging;K.x=t,K.y=i,(s||Math.abs(K.startX-t)>=n||Math.abs(K.startY-i)>=n)&&(f&&(G=!0),s||(K.isDragging=!0),me(r,a),s||p&&p(K))}},ge=K.onPress=function(e){ue(e,1)||e&&e.button||(K.axis=X=null,W.pause(),K.isPressed=!0,e=gh(e),Z=J=0,K.startX=K.x=e.clientX,K.startY=K.y=e.clientY,K._vx.reset(),K._vy.reset(),sh(L?r:se,Ku[1],fe,Q,!0),K.deltaX=K.deltaY=0,g&&g(K))},ve=K.onRelease=function(e){if(!ue(e,1)){oh(L?r:se,Ku[1],fe,!0);var t=!isNaN(K.y-K.startY),n=K.isDragging,i=n&&(Math.abs(K.x-K.startX)>3||Math.abs(K.y-K.startY)>3),a=gh(e);!i&&t&&(K._vx.reset(),K._vy.reset(),o&&z&&Uu.delayedCall(.08,(function(){if(ih()-ce>300&&!e.defaultPrevented)if(e.target.click)e.target.click();else if(se.createEvent){var t=se.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,Vu,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(t)}}))),K.isDragging=K.isGesturing=K.isPressed=!1,l&&n&&!L&&W.restart(!0),m&&n&&m(K),v&&v(K,i)}},_e=function(e){return e.touches&&e.touches.length>1&&(K.isGesturing=!0)&&I(e,K.isDragging)},be=function(){return(K.isGesturing=!1)||P(K)},ye=function(e){if(!ue(e)){var t=ee(),n=te();pe((t-ne)*F,(n-ie)*F,1),ne=t,ie=n,l&&W.restart(!0)}},xe=function(e){if(!ue(e)){e=gh(e,o),R&&(q=!0);var t=(1===e.deltaMode?a:2===e.deltaMode?Vu.innerHeight:1)*u;pe(e.deltaX*t,e.deltaY*t,0),l&&!L&&W.restart(!0)}},we=function(e){if(!ue(e)){var t=e.clientX,n=e.clientY,i=t-K.x,r=n-K.y;K.x=t,K.y=n,j=!0,l&&W.restart(!0),(i||r)&&me(i,r)}},Se=function(e){K.event=e,C(K)},Te=function(e){K.event=e,A(K)},Ee=function(e){return ue(e)||gh(e,o)&&B(K)};W=K._dc=Uu.delayedCall(c||.25,(function(){K._vx.reset(),K._vy.reset(),W.pause(),l&&l(K)})).pause(),K.deltaX=K.deltaY=0,K._vx=fh(0,50,!0),K._vy=fh(0,50,!0),K.scrollX=ee,K.scrollY=te,K.isDragging=K.isGesturing=K.isPressed=!1,Zu(this),K.enable=function(e){return K.isEnabled||(sh(ae?se:r,"scroll",dh),i.indexOf("scroll")>=0&&sh(ae?se:r,"scroll",ye,Q,U),i.indexOf("wheel")>=0&&sh(r,"wheel",xe,Q,U),(i.indexOf("touch")>=0&&Gu||i.indexOf("pointer")>=0)&&(sh(r,Ku[0],ge,Q,U),sh(se,Ku[2],ve),sh(se,Ku[3],ve),z&&sh(r,"click",de,!0,!0),B&&sh(r,"click",Ee),I&&sh(se,"gesturestart",_e),P&&sh(se,"gestureend",be),C&&sh(r,ju+"enter",Se),A&&sh(r,ju+"leave",Te),k&&sh(r,ju+"move",we)),K.isEnabled=!0,e&&e.type&&ge(e),O&&O(K)),K},K.disable=function(){K.isEnabled&&(eh.filter((function(e){return e!==K&&ah(e.target)})).length||oh(ae?se:r,"scroll",dh),K.isPressed&&(K._vx.reset(),K._vy.reset(),oh(L?r:se,Ku[1],fe,!0)),oh(ae?se:r,"scroll",ye,U),oh(r,"wheel",xe,U),oh(r,Ku[0],ge,U),oh(se,Ku[2],ve),oh(se,Ku[3],ve),oh(r,"click",de,!0),oh(r,"click",Ee),oh(se,"gesturestart",_e),oh(se,"gestureend",be),oh(r,ju+"enter",Se),oh(r,ju+"leave",Te),oh(r,ju+"move",we),K.isEnabled=K.isPressed=K.isDragging=!1,N&&N(K))},K.kill=K.revert=function(){K.disable();var e=eh.indexOf(K);e>=0&&eh.splice(e,1),Xu===K&&(Xu=0)},eh.push(K),L&&ah(r)&&(Xu=K),K.enable(h)},t=e,(n=[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}])&&Fu(t.prototype,n),i&&Fu(t,i),e}();yh.version="3.12.5",yh.create=function(e){return new yh(e)},yh.register=bh,yh.getAll=function(){return eh.slice()},yh.getById=function(e){return eh.filter((function(t){return t.vars.id===e}))[0]},Ju()&&Uu.registerPlugin(yh);var xh=n(9755);const wh={variables:{sectionSelector:".mg-select-scroller:visible",paginationContainerSelector:".mg-select__pagination-container",paginationDotClass:"mg-select__pagination-indicator",activeDotClass:"mg-dot--active"},methods:{createPaginationDots(){const{sectionSelector:e,paginationDotClass:t,paginationContainerSelector:n,activeDotClass:i}=this.variables;xh(e).each((e=>{let r=t;e==Qp.variables.currentIndex&&(r+=" "+i);const a=`<span class="${r} d-inline-block"></span>`;xh(n).append(a)}))},initializeClickHandlers(){const{paginationDotClass:e}=this.variables,{showPreviousSection:t,showNextSection:n}=Qp.methods;xh(`.${e}`).each((function(e,r){xh(this).on(i.eventsListeners.CLICK,(function(){Qp.variables.disableUp=!1,Qp.variables.disableDown=!1,e<Qp.variables.currentIndex?t.call(Qp,e+1,.8):e>Qp.variables.currentIndex&&n.call(Qp,e-1,!0,.8)}))}))},init(){const{sectionSelector:e,paginationContainerSelector:t}=wh.variables,n=xh(e),i=xh(t);n.length&&i.length&&(this.createPaginationDots.call(wh),this.initializeClickHandlers.call(wh))}}};var Sh=n(9755);const Th={variable:{heroBanner:".hero__banner--wrapper",isHeroTray:".hero__banner--istray",heroBannerContentContainer:".hero__banner__content--container",heroBannerTrayContainer:".hero__banner__tray--container",heroBannerTrayTranslate:".hero__banner--translate",isTrayVisible:".hero__banner--trayvisible",heroBannerScroll:".hero__banner--scroll",trayDelay:"transition__delay",muteButton:".mute-icon__wrapper--mute-icon",unmuteButton:".mute-icon__wrapper--unmute-icon",videoWrapper:".hero__banner__video--wrapper",videoElement:".hero__banner--video",delayTime:3e3},methods:{revealTray:function(){const{heroBannerContentContainer:e,heroBannerTrayContainer:t,heroBannerTrayTranslate:n,isTrayVisible:i,trayDelay:r,delayTime:a}=Th.variable,s=Sh(e),o=Sh(t);o.removeClass(n.substr(1)),s.addClass(i.substr(1)),setTimeout((function(){o.removeClass(r)}),a)},hideTray:function(e){const{heroBannerTrayContainer:t,heroBannerTrayTranslate:n,heroBannerContentContainer:i,isTrayVisible:r,isHeroTray:a,heroBannerScroll:s}=Th.variable;0!==Sh(s).length&&Sh(a).length>0&&e>0&&(Sh(t).addClass(n.substr(1)),Sh(i).removeClass(r.substr(1)),Sh(a).removeClass(s.substr(1)))},handleMuteUnmute:function(){const{muteButton:e,unmuteButton:t,videoWrapper:n,videoElement:r}=Th.variable;Sh(n).each(((n,a)=>{const s=Sh(a).find(e),o=Sh(a).find(t),l=Sh(a).find(r),c=l.data("mute-option");l[0].plyr.muted=!0,c&&(o.on(i.eventsListeners.CLICK,(e=>{o.addClass("d-none"),s.removeClass("d-none"),l[0].plyr.muted=!0})),s.on(i.eventsListeners.CLICK,(e=>{s.addClass("d-none"),o.removeClass("d-none"),l[0].plyr.muted=!1})))}))},init:function(){const{heroBanner:e}=Th.variable;Sh(e).length&&(this.revealTray.call(Th),this.handleMuteUnmute.call(Th))}}};var Eh=n(9755);const Mh={variables:{mainSection:".top-features",background:".top-features__bg",textContainer:".top-features__text",featureItems:".top-features__main",disclaimerText:".top-features__disclaimer",carImage:".top-features__car",isAnimating:!1,isSecondState:!1},methods:{triggerUpAnimation(e){const{isAnimating:t,isSecondState:n,background:i,textContainer:r,featureItems:a,carImage:s,disclaimerText:o}=Mh.variables;t||(Mh.variables.isAnimating=!0,Qp.variables.disableDown=!0,n&&(Qp.variables.disableUp=!1),Eh(s).addClass("translate-up"),Eh(i).addClass("translate-up"),Eh(r).removeClass("translate-down"),Eh(a).removeClass("translate-down"),Eh(o).removeClass("translate-down"),setTimeout((()=>{Mh.variables.isAnimating=!1,Mh.variables.isSecondState=!0}),1e3*e))},triggerDownAnimation(e){const{isAnimating:t,isSecondState:n,background:i,textContainer:r,featureItems:a,carImage:s,disclaimerText:o}=Mh.variables;t||(Mh.variables.isAnimating=!0,Qp.variables.disableUp=!0,n||(Qp.variables.disableDown=!1),Eh(s).removeClass("translate-up"),Eh(i).removeClass("translate-up"),Eh(r).addClass("translate-down"),Eh(a).addClass("translate-down"),Eh(o).addClass("translate-down"),setTimeout((()=>{Mh.variables.isAnimating=!1,Mh.variables.isSecondState=!1}),1e3*e))}}};function Ch(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function Ah(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach((n=>{void 0===e[n]?e[n]=t[n]:Ch(t[n])&&Ch(e[n])&&Object.keys(t[n]).length>0&&Ah(e[n],t[n])}))}const kh={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Dh(){const e="undefined"!=typeof document?document:{};return Ah(e,kh),e}const Lh={document:kh,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function Ih(){const e="undefined"!=typeof window?window:{};return Ah(e,Lh),e}function Ph(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function Rh(){return Date.now()}function Oh(e,t){void 0===t&&(t="x");const n=Ih();let i,r,a;const s=function(e){const t=Ih();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}(e);return n.WebKitCSSMatrix?(r=s.transform||s.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map((e=>e.replace(",","."))).join(", ")),a=new n.WebKitCSSMatrix("none"===r?"":r)):(a=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=a.toString().split(",")),"x"===t&&(r=n.WebKitCSSMatrix?a.m41:16===i.length?parseFloat(i[12]):parseFloat(i[4])),"y"===t&&(r=n.WebKitCSSMatrix?a.m42:16===i.length?parseFloat(i[13]):parseFloat(i[5])),r||0}function Nh(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function Bh(e){return"undefined"!=typeof window&&void 0!==window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType)}function Fh(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const i=n<0||arguments.length<=n?void 0:arguments[n];if(null!=i&&!Bh(i)){const n=Object.keys(Object(i)).filter((e=>t.indexOf(e)<0));for(let t=0,r=n.length;t<r;t+=1){const r=n[t],a=Object.getOwnPropertyDescriptor(i,r);void 0!==a&&a.enumerable&&(Nh(e[r])&&Nh(i[r])?i[r].__swiper__?e[r]=i[r]:Fh(e[r],i[r]):!Nh(e[r])&&Nh(i[r])?(e[r]={},i[r].__swiper__?e[r]=i[r]:Fh(e[r],i[r])):e[r]=i[r])}}}return e}function Uh(e,t,n){e.style.setProperty(t,n)}function zh(e){let{swiper:t,targetPosition:n,side:i}=e;const r=Ih(),a=-t.translate;let s,o=null;const l=t.params.speed;t.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(t.cssModeFrameID);const c=n>a?"next":"prev",d=(e,t)=>"next"===c&&e>=t||"prev"===c&&e<=t,u=()=>{s=(new Date).getTime(),null===o&&(o=s);const e=Math.max(Math.min((s-o)/l,1),0),c=.5-Math.cos(e*Math.PI)/2;let h=a+c*(n-a);if(d(h,n)&&(h=n),t.wrapperEl.scrollTo({[i]:h}),d(h,n))return t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout((()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[i]:h})})),void r.cancelAnimationFrame(t.cssModeFrameID);t.cssModeFrameID=r.requestAnimationFrame(u)};u()}function Vh(e){return e.querySelector(".swiper-slide-transform")||e.shadowRoot&&e.shadowRoot.querySelector(".swiper-slide-transform")||e}function Hh(e,t){void 0===t&&(t="");const n=[...e.children];return e instanceof HTMLSlotElement&&n.push(...e.assignedElements()),t?n.filter((e=>e.matches(t))):n}function $h(e){try{return void console.warn(e)}catch(e){}}function Wh(e,t){void 0===t&&(t=[]);const n=document.createElement(e);return n.classList.add(...Array.isArray(t)?t:function(e){return void 0===e&&(e=""),e.trim().split(" ").filter((e=>!!e.trim()))}(t)),n}function Gh(e,t){return Ih().getComputedStyle(e,null).getPropertyValue(t)}function jh(e){let t,n=e;if(n){for(t=0;null!==(n=n.previousSibling);)1===n.nodeType&&(t+=1);return t}}function qh(e,t){const n=[];let i=e.parentElement;for(;i;)t?i.matches(t)&&n.push(i):n.push(i),i=i.parentElement;return n}function Yh(e,t,n){const i=Ih();return n?e["width"===t?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-left":"margin-bottom")):e.offsetWidth}function Xh(e){return(Array.isArray(e)?e:[e]).filter((e=>!!e))}let Kh,Zh,Jh;function Qh(){return Kh||(Kh=function(){const e=Ih(),t=Dh();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}()),Kh}function ep(e){return void 0===e&&(e={}),Zh||(Zh=function(e){let{userAgent:t}=void 0===e?{}:e;const n=Qh(),i=Ih(),r=i.navigator.platform,a=t||i.navigator.userAgent,s={ios:!1,android:!1},o=i.screen.width,l=i.screen.height,c=a.match(/(Android);?[\s\/]+([\d.]+)?/);let d=a.match(/(iPad).*OS\s([\d_]+)/);const u=a.match(/(iPod)(.*OS\s([\d_]+))?/),h=!d&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p="Win32"===r;let m="MacIntel"===r;return!d&&m&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${o}x${l}`)>=0&&(d=a.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),m=!1),c&&!p&&(s.os="android",s.android=!0),(d||h||u)&&(s.os="ios",s.ios=!0),s}(e)),Zh}function tp(){return Jh||(Jh=function(){const e=Ih(),t=ep();let n=!1;function i(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}if(i()){const t=String(e.navigator.userAgent);if(t.includes("Version/")){const[e,i]=t.split("Version/")[1].split(" ")[0].split(".").map((e=>Number(e)));n=e<16||16===e&&i<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),a=i();return{isSafari:n||a,needPerspectiveFix:n,need3dFix:a||r&&t.ios,isWebView:r}}()),Jh}var np={on(e,t,n){const i=this;if(!i.eventsListeners||i.destroyed)return i;if("function"!=typeof t)return i;const r=n?"unshift":"push";return e.split(" ").forEach((e=>{i.eventsListeners[e]||(i.eventsListeners[e]=[]),i.eventsListeners[e][r](t)})),i},once(e,t,n){const i=this;if(!i.eventsListeners||i.destroyed)return i;if("function"!=typeof t)return i;function r(){i.off(e,r),r.__emitterProxy&&delete r.__emitterProxy;for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];t.apply(i,a)}return r.__emitterProxy=t,i.on(e,r,n)},onAny(e,t){const n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!=typeof e)return n;const i=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[i](e),n},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(e.split(" ").forEach((e=>{void 0===t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach(((i,r)=>{(i===t||i.__emitterProxy&&i.__emitterProxy===t)&&n.eventsListeners[e].splice(r,1)}))})),n):n},emit(){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsListeners)return e;let t,n,i;for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];"string"==typeof a[0]||Array.isArray(a[0])?(t=a[0],n=a.slice(1,a.length),i=e):(t=a[0].events,n=a[0].data,i=a[0].context||e),n.unshift(i);return(Array.isArray(t)?t:t.split(" ")).forEach((t=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach((e=>{e.apply(i,[t,...n])})),e.eventsListeners&&e.eventsListeners[t]&&e.eventsListeners[t].forEach((e=>{e.apply(i,n)}))})),e}};const ip=(e,t,n)=>{t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n)};const rp=(e,t,n)=>{t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n)};const ap=(e,t)=>{if(!e||e.destroyed||!e.params)return;const n=t.closest(e.isElement?"swiper-slide":`.${e.params.slideClass}`);if(n){let t=n.querySelector(`.${e.params.lazyPreloaderClass}`);!t&&e.isElement&&(n.shadowRoot?t=n.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`):requestAnimationFrame((()=>{n.shadowRoot&&(t=n.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`),t&&t.remove())}))),t&&t.remove()}},sp=(e,t)=>{if(!e.slides[t])return;const n=e.slides[t].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},op=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const n=e.slides.length;if(!n||!t||t<0)return;t=Math.min(t,n);const i="auto"===e.params.slidesPerView?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),r=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const n=r,a=[n-t];return a.push(...Array.from({length:t}).map(((e,t)=>n+i+t))),void e.slides.forEach(((t,n)=>{a.includes(t.column)&&sp(e,n)}))}const a=r+i-1;if(e.params.rewind||e.params.loop)for(let i=r-t;i<=a+t;i+=1){const t=(i%n+n)%n;(t<r||t>a)&&sp(e,t)}else for(let i=Math.max(r-t,0);i<=Math.min(a+t,n-1);i+=1)i!==r&&(i>a||i<r)&&sp(e,i)};var lp={updateSize:function(){const e=this;let t,n;const i=e.el;t=void 0!==e.params.width&&null!==e.params.width?e.params.width:i.clientWidth,n=void 0!==e.params.height&&null!==e.params.height?e.params.height:i.clientHeight,0===t&&e.isHorizontal()||0===n&&e.isVertical()||(t=t-parseInt(Gh(i,"padding-left")||0,10)-parseInt(Gh(i,"padding-right")||0,10),n=n-parseInt(Gh(i,"padding-top")||0,10)-parseInt(Gh(i,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))},updateSlides:function(){const e=this;function t(t,n){return parseFloat(t.getPropertyValue(e.getDirectionLabel(n))||0)}const n=e.params,{wrapperEl:i,slidesEl:r,size:a,rtlTranslate:s,wrongRTL:o}=e,l=e.virtual&&n.virtual.enabled,c=l?e.virtual.slides.length:e.slides.length,d=Hh(r,`.${e.params.slideClass}, swiper-slide`),u=l?e.virtual.slides.length:d.length;let h=[];const p=[],m=[];let f=n.slidesOffsetBefore;"function"==typeof f&&(f=n.slidesOffsetBefore.call(e));let g=n.slidesOffsetAfter;"function"==typeof g&&(g=n.slidesOffsetAfter.call(e));const v=e.snapGrid.length,_=e.slidesGrid.length;let b=n.spaceBetween,y=-f,x=0,w=0;if(void 0===a)return;"string"==typeof b&&b.indexOf("%")>=0?b=parseFloat(b.replace("%",""))/100*a:"string"==typeof b&&(b=parseFloat(b)),e.virtualSize=-b,d.forEach((e=>{s?e.style.marginLeft="":e.style.marginRight="",e.style.marginBottom="",e.style.marginTop=""})),n.centeredSlides&&n.cssMode&&(Uh(i,"--swiper-centered-offset-before",""),Uh(i,"--swiper-centered-offset-after",""));const S=n.grid&&n.grid.rows>1&&e.grid;let T;S?e.grid.initSlides(d):e.grid&&e.grid.unsetSlides();const E="auto"===n.slidesPerView&&n.breakpoints&&Object.keys(n.breakpoints).filter((e=>void 0!==n.breakpoints[e].slidesPerView)).length>0;for(let i=0;i<u;i+=1){let r;if(T=0,d[i]&&(r=d[i]),S&&e.grid.updateSlide(i,r,d),!d[i]||"none"!==Gh(r,"display")){if("auto"===n.slidesPerView){E&&(d[i].style[e.getDirectionLabel("width")]="");const a=getComputedStyle(r),s=r.style.transform,o=r.style.webkitTransform;if(s&&(r.style.transform="none"),o&&(r.style.webkitTransform="none"),n.roundLengths)T=e.isHorizontal()?Yh(r,"width",!0):Yh(r,"height",!0);else{const e=t(a,"width"),n=t(a,"padding-left"),i=t(a,"padding-right"),s=t(a,"margin-left"),o=t(a,"margin-right"),l=a.getPropertyValue("box-sizing");if(l&&"border-box"===l)T=e+s+o;else{const{clientWidth:t,offsetWidth:a}=r;T=e+n+i+s+o+(a-t)}}s&&(r.style.transform=s),o&&(r.style.webkitTransform=o),n.roundLengths&&(T=Math.floor(T))}else T=(a-(n.slidesPerView-1)*b)/n.slidesPerView,n.roundLengths&&(T=Math.floor(T)),d[i]&&(d[i].style[e.getDirectionLabel("width")]=`${T}px`);d[i]&&(d[i].swiperSlideSize=T),m.push(T),n.centeredSlides?(y=y+T/2+x/2+b,0===x&&0!==i&&(y=y-a/2-b),0===i&&(y=y-a/2-b),Math.abs(y)<.001&&(y=0),n.roundLengths&&(y=Math.floor(y)),w%n.slidesPerGroup==0&&h.push(y),p.push(y)):(n.roundLengths&&(y=Math.floor(y)),(w-Math.min(e.params.slidesPerGroupSkip,w))%e.params.slidesPerGroup==0&&h.push(y),p.push(y),y=y+T+b),e.virtualSize+=T+b,x=T,w+=1}}if(e.virtualSize=Math.max(e.virtualSize,a)+g,s&&o&&("slide"===n.effect||"coverflow"===n.effect)&&(i.style.width=`${e.virtualSize+b}px`),n.setWrapperSize&&(i.style[e.getDirectionLabel("width")]=`${e.virtualSize+b}px`),S&&e.grid.updateWrapperSize(T,h),!n.centeredSlides){const t=[];for(let i=0;i<h.length;i+=1){let r=h[i];n.roundLengths&&(r=Math.floor(r)),h[i]<=e.virtualSize-a&&t.push(r)}h=t,Math.floor(e.virtualSize-a)-Math.floor(h[h.length-1])>1&&h.push(e.virtualSize-a)}if(l&&n.loop){const t=m[0]+b;if(n.slidesPerGroup>1){const i=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/n.slidesPerGroup),r=t*n.slidesPerGroup;for(let e=0;e<i;e+=1)h.push(h[h.length-1]+r)}for(let i=0;i<e.virtual.slidesBefore+e.virtual.slidesAfter;i+=1)1===n.slidesPerGroup&&h.push(h[h.length-1]+t),p.push(p[p.length-1]+t),e.virtualSize+=t}if(0===h.length&&(h=[0]),0!==b){const t=e.isHorizontal()&&s?"marginLeft":e.getDirectionLabel("marginRight");d.filter(((e,t)=>!(n.cssMode&&!n.loop)||t!==d.length-1)).forEach((e=>{e.style[t]=`${b}px`}))}if(n.centeredSlides&&n.centeredSlidesBounds){let e=0;m.forEach((t=>{e+=t+(b||0)})),e-=b;const t=e>a?e-a:0;h=h.map((e=>e<=0?-f:e>t?t+g:e))}if(n.centerInsufficientSlides){let e=0;m.forEach((t=>{e+=t+(b||0)})),e-=b;const t=(n.slidesOffsetBefore||0)+(n.slidesOffsetAfter||0);if(e+t<a){const n=(a-e-t)/2;h.forEach(((e,t)=>{h[t]=e-n})),p.forEach(((e,t)=>{p[t]=e+n}))}}if(Object.assign(e,{slides:d,snapGrid:h,slidesGrid:p,slidesSizesGrid:m}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){Uh(i,"--swiper-centered-offset-before",-h[0]+"px"),Uh(i,"--swiper-centered-offset-after",e.size/2-m[m.length-1]/2+"px");const t=-e.snapGrid[0],n=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((e=>e+t)),e.slidesGrid=e.slidesGrid.map((e=>e+n))}if(u!==c&&e.emit("slidesLengthChange"),h.length!==v&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),p.length!==_&&e.emit("slidesGridLengthChange"),n.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!(l||n.cssMode||"slide"!==n.effect&&"fade"!==n.effect)){const t=`${n.containerModifierClass}backface-hidden`,i=e.el.classList.contains(t);u<=n.maxBackfaceHiddenSlides?i||e.el.classList.add(t):i&&e.el.classList.remove(t)}},updateAutoHeight:function(e){const t=this,n=[],i=t.virtual&&t.params.virtual.enabled;let r,a=0;"number"==typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const s=e=>i?t.slides[t.getSlideIndexByData(e)]:t.slides[e];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach((e=>{n.push(e)}));else for(r=0;r<Math.ceil(t.params.slidesPerView);r+=1){const e=t.activeIndex+r;if(e>t.slides.length&&!i)break;n.push(s(e))}else n.push(s(t.activeIndex));for(r=0;r<n.length;r+=1)if(void 0!==n[r]){const e=n[r].offsetHeight;a=e>a?e:a}(a||0===a)&&(t.wrapperEl.style.height=`${a}px`)},updateSlidesOffset:function(){const e=this,t=e.slides,n=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let i=0;i<t.length;i+=1)t[i].swiperSlideOffset=(e.isHorizontal()?t[i].offsetLeft:t[i].offsetTop)-n-e.cssOverflowAdjustment()},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);const t=this,n=t.params,{slides:i,rtlTranslate:r,snapGrid:a}=t;if(0===i.length)return;void 0===i[0].swiperSlideOffset&&t.updateSlidesOffset();let s=-e;r&&(s=e),t.visibleSlidesIndexes=[],t.visibleSlides=[];let o=n.spaceBetween;"string"==typeof o&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*t.size:"string"==typeof o&&(o=parseFloat(o));for(let e=0;e<i.length;e+=1){const l=i[e];let c=l.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(c-=i[0].swiperSlideOffset);const d=(s+(n.centeredSlides?t.minTranslate():0)-c)/(l.swiperSlideSize+o),u=(s-a[0]+(n.centeredSlides?t.minTranslate():0)-c)/(l.swiperSlideSize+o),h=-(s-c),p=h+t.slidesSizesGrid[e],m=h>=0&&h<=t.size-t.slidesSizesGrid[e],f=h>=0&&h<t.size-1||p>1&&p<=t.size||h<=0&&p>=t.size;f&&(t.visibleSlides.push(l),t.visibleSlidesIndexes.push(e)),ip(l,f,n.slideVisibleClass),ip(l,m,n.slideFullyVisibleClass),l.progress=r?-d:d,l.originalProgress=r?-u:u}},updateProgress:function(e){const t=this;if(void 0===e){const n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}const n=t.params,i=t.maxTranslate()-t.minTranslate();let{progress:r,isBeginning:a,isEnd:s,progressLoop:o}=t;const l=a,c=s;if(0===i)r=0,a=!0,s=!0;else{r=(e-t.minTranslate())/i;const n=Math.abs(e-t.minTranslate())<1,o=Math.abs(e-t.maxTranslate())<1;a=n||r<=0,s=o||r>=1,n&&(r=0),o&&(r=1)}if(n.loop){const n=t.getSlideIndexByData(0),i=t.getSlideIndexByData(t.slides.length-1),r=t.slidesGrid[n],a=t.slidesGrid[i],s=t.slidesGrid[t.slidesGrid.length-1],l=Math.abs(e);o=l>=r?(l-r)/s:(l+s-a)/s,o>1&&(o-=1)}Object.assign(t,{progress:r,progressLoop:o,isBeginning:a,isEnd:s}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),a&&!l&&t.emit("reachBeginning toEdge"),s&&!c&&t.emit("reachEnd toEdge"),(l&&!a||c&&!s)&&t.emit("fromEdge"),t.emit("progress",r)},updateSlidesClasses:function(){const e=this,{slides:t,params:n,slidesEl:i,activeIndex:r}=e,a=e.virtual&&n.virtual.enabled,s=e.grid&&n.grid&&n.grid.rows>1,o=e=>Hh(i,`.${n.slideClass}${e}, swiper-slide${e}`)[0];let l,c,d;if(a)if(n.loop){let t=r-e.virtual.slidesBefore;t<0&&(t=e.virtual.slides.length+t),t>=e.virtual.slides.length&&(t-=e.virtual.slides.length),l=o(`[data-swiper-slide-index="${t}"]`)}else l=o(`[data-swiper-slide-index="${r}"]`);else s?(l=t.filter((e=>e.column===r))[0],d=t.filter((e=>e.column===r+1))[0],c=t.filter((e=>e.column===r-1))[0]):l=t[r];l&&(s||(d=function(e,t){const n=[];for(;e.nextElementSibling;){const i=e.nextElementSibling;t?i.matches(t)&&n.push(i):n.push(i),e=i}return n}(l,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!d&&(d=t[0]),c=function(e,t){const n=[];for(;e.previousElementSibling;){const i=e.previousElementSibling;t?i.matches(t)&&n.push(i):n.push(i),e=i}return n}(l,`.${n.slideClass}, swiper-slide`)[0],n.loop&&0===!c&&(c=t[t.length-1]))),t.forEach((e=>{rp(e,e===l,n.slideActiveClass),rp(e,e===d,n.slideNextClass),rp(e,e===c,n.slidePrevClass)})),e.emitSlidesClasses()},updateActiveIndex:function(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{snapGrid:i,params:r,activeIndex:a,realIndex:s,snapIndex:o}=t;let l,c=e;const d=e=>{let n=e-t.virtual.slidesBefore;return n<0&&(n=t.virtual.slides.length+n),n>=t.virtual.slides.length&&(n-=t.virtual.slides.length),n};if(void 0===c&&(c=function(e){const{slidesGrid:t,params:n}=e,i=e.rtlTranslate?e.translate:-e.translate;let r;for(let e=0;e<t.length;e+=1)void 0!==t[e+1]?i>=t[e]&&i<t[e+1]-(t[e+1]-t[e])/2?r=e:i>=t[e]&&i<t[e+1]&&(r=e+1):i>=t[e]&&(r=e);return n.normalizeSlideIndex&&(r<0||void 0===r)&&(r=0),r}(t)),i.indexOf(n)>=0)l=i.indexOf(n);else{const e=Math.min(r.slidesPerGroupSkip,c);l=e+Math.floor((c-e)/r.slidesPerGroup)}if(l>=i.length&&(l=i.length-1),c===a&&!t.params.loop)return void(l!==o&&(t.snapIndex=l,t.emit("snapIndexChange")));if(c===a&&t.params.loop&&t.virtual&&t.params.virtual.enabled)return void(t.realIndex=d(c));const u=t.grid&&r.grid&&r.grid.rows>1;let h;if(t.virtual&&r.virtual.enabled&&r.loop)h=d(c);else if(u){const e=t.slides.filter((e=>e.column===c))[0];let n=parseInt(e.getAttribute("data-swiper-slide-index"),10);Number.isNaN(n)&&(n=Math.max(t.slides.indexOf(e),0)),h=Math.floor(n/r.grid.rows)}else if(t.slides[c]){const e=t.slides[c].getAttribute("data-swiper-slide-index");h=e?parseInt(e,10):c}else h=c;Object.assign(t,{previousSnapIndex:o,snapIndex:l,previousRealIndex:s,realIndex:h,previousIndex:a,activeIndex:c}),t.initialized&&op(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(s!==h&&t.emit("realIndexChange"),t.emit("slideChange"))},updateClickedSlide:function(e,t){const n=this,i=n.params;let r=e.closest(`.${i.slideClass}, swiper-slide`);!r&&n.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach((e=>{!r&&e.matches&&e.matches(`.${i.slideClass}, swiper-slide`)&&(r=e)}));let a,s=!1;if(r)for(let e=0;e<n.slides.length;e+=1)if(n.slides[e]===r){s=!0,a=e;break}if(!r||!s)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=r,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=a,i.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}};var cp={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");const{params:t,rtlTranslate:n,translate:i,wrapperEl:r}=this;if(t.virtualTranslate)return n?-i:i;if(t.cssMode)return i;let a=Oh(r,e);return a+=this.cssOverflowAdjustment(),n&&(a=-a),a||0},setTranslate:function(e,t){const n=this,{rtlTranslate:i,params:r,wrapperEl:a,progress:s}=n;let o,l=0,c=0;n.isHorizontal()?l=i?-e:e:c=e,r.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?l:c,r.cssMode?a[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-l:-c:r.virtualTranslate||(n.isHorizontal()?l-=n.cssOverflowAdjustment():c-=n.cssOverflowAdjustment(),a.style.transform=`translate3d(${l}px, ${c}px, 0px)`);const d=n.maxTranslate()-n.minTranslate();o=0===d?0:(e-n.minTranslate())/d,o!==s&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,n,i,r){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),void 0===i&&(i=!0);const a=this,{params:s,wrapperEl:o}=a;if(a.animating&&s.preventInteractionOnTransition)return!1;const l=a.minTranslate(),c=a.maxTranslate();let d;if(d=i&&e>l?l:i&&e<c?c:e,a.updateProgress(d),s.cssMode){const e=a.isHorizontal();if(0===t)o[e?"scrollLeft":"scrollTop"]=-d;else{if(!a.support.smoothScroll)return zh({swiper:a,targetPosition:-d,side:e?"left":"top"}),!0;o.scrollTo({[e?"left":"top"]:-d,behavior:"smooth"})}return!0}return 0===t?(a.setTransition(0),a.setTranslate(d),n&&(a.emit("beforeTransitionStart",t,r),a.emit("transitionEnd"))):(a.setTransition(t),a.setTranslate(d),n&&(a.emit("beforeTransitionStart",t,r),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(e){a&&!a.destroyed&&e.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,a.animating=!1,n&&a.emit("transitionEnd"))}),a.wrapperEl.addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd))),!0}};function dp(e){let{swiper:t,runCallbacks:n,direction:i,step:r}=e;const{activeIndex:a,previousIndex:s}=t;let o=i;if(o||(o=a>s?"next":a<s?"prev":"reset"),t.emit(`transition${r}`),n&&a!==s){if("reset"===o)return void t.emit(`slideResetTransition${r}`);t.emit(`slideChangeTransition${r}`),"next"===o?t.emit(`slideNextTransition${r}`):t.emit(`slidePrevTransition${r}`)}}var up={slideTo:function(e,t,n,i,r){void 0===e&&(e=0),void 0===n&&(n=!0),"string"==typeof e&&(e=parseInt(e,10));const a=this;let s=e;s<0&&(s=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:d,activeIndex:u,rtlTranslate:h,wrapperEl:p,enabled:m}=a;if(!m&&!i&&!r||a.destroyed||a.animating&&o.preventInteractionOnTransition)return!1;void 0===t&&(t=a.params.speed);const f=Math.min(a.params.slidesPerGroupSkip,s);let g=f+Math.floor((s-f)/a.params.slidesPerGroup);g>=l.length&&(g=l.length-1);const v=-l[g];if(o.normalizeSlideIndex)for(let e=0;e<c.length;e+=1){const t=-Math.floor(100*v),n=Math.floor(100*c[e]),i=Math.floor(100*c[e+1]);void 0!==c[e+1]?t>=n&&t<i-(i-n)/2?s=e:t>=n&&t<i&&(s=e+1):t>=n&&(s=e)}if(a.initialized&&s!==u){if(!a.allowSlideNext&&(h?v>a.translate&&v>a.minTranslate():v<a.translate&&v<a.minTranslate()))return!1;if(!a.allowSlidePrev&&v>a.translate&&v>a.maxTranslate()&&(u||0)!==s)return!1}let _;s!==(d||0)&&n&&a.emit("beforeSlideChangeStart"),a.updateProgress(v),_=s>u?"next":s<u?"prev":"reset";const b=a.virtual&&a.params.virtual.enabled;if(!(b&&r)&&(h&&-v===a.translate||!h&&v===a.translate))return a.updateActiveIndex(s),o.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),"slide"!==o.effect&&a.setTranslate(v),"reset"!==_&&(a.transitionStart(n,_),a.transitionEnd(n,_)),!1;if(o.cssMode){const e=a.isHorizontal(),n=h?v:-v;if(0===t)b&&(a.wrapperEl.style.scrollSnapType="none",a._immediateVirtual=!0),b&&!a._cssModeVirtualInitialSet&&a.params.initialSlide>0?(a._cssModeVirtualInitialSet=!0,requestAnimationFrame((()=>{p[e?"scrollLeft":"scrollTop"]=n}))):p[e?"scrollLeft":"scrollTop"]=n,b&&requestAnimationFrame((()=>{a.wrapperEl.style.scrollSnapType="",a._immediateVirtual=!1}));else{if(!a.support.smoothScroll)return zh({swiper:a,targetPosition:n,side:e?"left":"top"}),!0;p.scrollTo({[e?"left":"top"]:n,behavior:"smooth"})}return!0}return a.setTransition(t),a.setTranslate(v),a.updateActiveIndex(s),a.updateSlidesClasses(),a.emit("beforeTransitionStart",t,i),a.transitionStart(n,_),0===t?a.transitionEnd(n,_):a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(e){a&&!a.destroyed&&e.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(n,_))}),a.wrapperEl.addEventListener("transitionend",a.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e,t,n,i){if(void 0===e&&(e=0),void 0===n&&(n=!0),"string"==typeof e){e=parseInt(e,10)}const r=this;if(r.destroyed)return;void 0===t&&(t=r.params.speed);const a=r.grid&&r.params.grid&&r.params.grid.rows>1;let s=e;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)s+=r.virtual.slidesBefore;else{let e;if(a){const t=s*r.params.grid.rows;e=r.slides.filter((e=>1*e.getAttribute("data-swiper-slide-index")===t))[0].column}else e=r.getSlideIndexByData(s);const t=a?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:n}=r.params;let o=r.params.slidesPerView;"auto"===o?o=r.slidesPerViewDynamic():(o=Math.ceil(parseFloat(r.params.slidesPerView,10)),n&&o%2==0&&(o+=1));let l=t-e<o;if(n&&(l=l||e<Math.ceil(o/2)),i&&n&&"auto"!==r.params.slidesPerView&&!a&&(l=!1),l){const i=n?e<r.activeIndex?"prev":"next":e-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:i,slideTo:!0,activeSlideIndex:"next"===i?e+1:e-t+1,slideRealIndex:"next"===i?r.realIndex:void 0})}if(a){const e=s*r.params.grid.rows;s=r.slides.filter((t=>1*t.getAttribute("data-swiper-slide-index")===e))[0].column}else s=r.getSlideIndexByData(s)}return requestAnimationFrame((()=>{r.slideTo(s,t,n,i)})),r},slideNext:function(e,t,n){void 0===t&&(t=!0);const i=this,{enabled:r,params:a,animating:s}=i;if(!r||i.destroyed)return i;void 0===e&&(e=i.params.speed);let o=a.slidesPerGroup;"auto"===a.slidesPerView&&1===a.slidesPerGroup&&a.slidesPerGroupAuto&&(o=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<a.slidesPerGroupSkip?1:o,c=i.virtual&&a.virtual.enabled;if(a.loop){if(s&&!c&&a.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&a.cssMode)return requestAnimationFrame((()=>{i.slideTo(i.activeIndex+l,e,t,n)})),!0}return a.rewind&&i.isEnd?i.slideTo(0,e,t,n):i.slideTo(i.activeIndex+l,e,t,n)},slidePrev:function(e,t,n){void 0===t&&(t=!0);const i=this,{params:r,snapGrid:a,slidesGrid:s,rtlTranslate:o,enabled:l,animating:c}=i;if(!l||i.destroyed)return i;void 0===e&&(e=i.params.speed);const d=i.virtual&&r.virtual.enabled;if(r.loop){if(c&&!d&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}function u(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const h=u(o?i.translate:-i.translate),p=a.map((e=>u(e)));let m=a[p.indexOf(h)-1];if(void 0===m&&r.cssMode){let e;a.forEach(((t,n)=>{h>=t&&(e=n)})),void 0!==e&&(m=a[e>0?e-1:e])}let f=0;if(void 0!==m&&(f=s.indexOf(m),f<0&&(f=i.activeIndex-1),"auto"===r.slidesPerView&&1===r.slidesPerGroup&&r.slidesPerGroupAuto&&(f=f-i.slidesPerViewDynamic("previous",!0)+1,f=Math.max(f,0))),r.rewind&&i.isBeginning){const r=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(r,e,t,n)}return r.loop&&0===i.activeIndex&&r.cssMode?(requestAnimationFrame((()=>{i.slideTo(f,e,t,n)})),!0):i.slideTo(f,e,t,n)},slideReset:function(e,t,n){void 0===t&&(t=!0);const i=this;if(!i.destroyed)return void 0===e&&(e=i.params.speed),i.slideTo(i.activeIndex,e,t,n)},slideToClosest:function(e,t,n,i){void 0===t&&(t=!0),void 0===i&&(i=.5);const r=this;if(r.destroyed)return;void 0===e&&(e=r.params.speed);let a=r.activeIndex;const s=Math.min(r.params.slidesPerGroupSkip,a),o=s+Math.floor((a-s)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[o]){const e=r.snapGrid[o];l-e>(r.snapGrid[o+1]-e)*i&&(a+=r.params.slidesPerGroup)}else{const e=r.snapGrid[o-1];l-e<=(r.snapGrid[o]-e)*i&&(a-=r.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,r.slidesGrid.length-1),r.slideTo(a,e,t,n)},slideToClickedSlide:function(){const e=this;if(e.destroyed)return;const{params:t,slidesEl:n}=e,i="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let r,a=e.clickedIndex;const s=e.isElement?"swiper-slide":`.${t.slideClass}`;if(t.loop){if(e.animating)return;r=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?a<e.loopedSlides-i/2||a>e.slides.length-e.loopedSlides+i/2?(e.loopFix(),a=e.getSlideIndex(Hh(n,`${s}[data-swiper-slide-index="${r}"]`)[0]),Ph((()=>{e.slideTo(a)}))):e.slideTo(a):a>e.slides.length-i?(e.loopFix(),a=e.getSlideIndex(Hh(n,`${s}[data-swiper-slide-index="${r}"]`)[0]),Ph((()=>{e.slideTo(a)}))):e.slideTo(a)}else e.slideTo(a)}};var hp={loopCreate:function(e){const t=this,{params:n,slidesEl:i}=t;if(!n.loop||t.virtual&&t.params.virtual.enabled)return;const r=()=>{Hh(i,`.${n.slideClass}, swiper-slide`).forEach(((e,t)=>{e.setAttribute("data-swiper-slide-index",t)}))},a=t.grid&&n.grid&&n.grid.rows>1,s=n.slidesPerGroup*(a?n.grid.rows:1),o=t.slides.length%s!=0,l=a&&t.slides.length%n.grid.rows!=0,c=e=>{for(let i=0;i<e;i+=1){const e=t.isElement?Wh("swiper-slide",[n.slideBlankClass]):Wh("div",[n.slideClass,n.slideBlankClass]);t.slidesEl.append(e)}};if(o){if(n.loopAddBlankSlides){c(s-t.slides.length%s),t.recalcSlides(),t.updateSlides()}else $h("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else if(l){if(n.loopAddBlankSlides){c(n.grid.rows-t.slides.length%n.grid.rows),t.recalcSlides(),t.updateSlides()}else $h("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");r()}else r();t.loopFix({slideRealIndex:e,direction:n.centeredSlides?void 0:"next"})},loopFix:function(e){let{slideRealIndex:t,slideTo:n=!0,direction:i,setTranslate:r,activeSlideIndex:a,byController:s,byMousewheel:o}=void 0===e?{}:e;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:c,allowSlidePrev:d,allowSlideNext:u,slidesEl:h,params:p}=l,{centeredSlides:m}=p;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&p.virtual.enabled)return n&&(p.centeredSlides||0!==l.snapIndex?p.centeredSlides&&l.snapIndex<p.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0):l.slideTo(l.virtual.slides.length,0,!1,!0)),l.allowSlidePrev=d,l.allowSlideNext=u,void l.emit("loopFix");let f=p.slidesPerView;"auto"===f?f=l.slidesPerViewDynamic():(f=Math.ceil(parseFloat(p.slidesPerView,10)),m&&f%2==0&&(f+=1));const g=p.slidesPerGroupAuto?f:p.slidesPerGroup;let v=g;v%g!=0&&(v+=g-v%g),v+=p.loopAdditionalSlides,l.loopedSlides=v;const _=l.grid&&p.grid&&p.grid.rows>1;c.length<f+v?$h("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):_&&"row"===p.grid.fill&&$h("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const b=[],y=[];let x=l.activeIndex;void 0===a?a=l.getSlideIndex(c.filter((e=>e.classList.contains(p.slideActiveClass)))[0]):x=a;const w="next"===i||!i,S="prev"===i||!i;let T=0,E=0;const M=_?Math.ceil(c.length/p.grid.rows):c.length,C=(_?c[a].column:a)+(m&&void 0===r?-f/2+.5:0);if(C<v){T=Math.max(v-C,g);for(let e=0;e<v-C;e+=1){const t=e-Math.floor(e/M)*M;if(_){const e=M-t-1;for(let t=c.length-1;t>=0;t-=1)c[t].column===e&&b.push(t)}else b.push(M-t-1)}}else if(C+f>M-v){E=Math.max(C-(M-2*v),g);for(let e=0;e<E;e+=1){const t=e-Math.floor(e/M)*M;_?c.forEach(((e,n)=>{e.column===t&&y.push(n)})):y.push(t)}}if(l.__preventObserver__=!0,requestAnimationFrame((()=>{l.__preventObserver__=!1})),S&&b.forEach((e=>{c[e].swiperLoopMoveDOM=!0,h.prepend(c[e]),c[e].swiperLoopMoveDOM=!1})),w&&y.forEach((e=>{c[e].swiperLoopMoveDOM=!0,h.append(c[e]),c[e].swiperLoopMoveDOM=!1})),l.recalcSlides(),"auto"===p.slidesPerView?l.updateSlides():_&&(b.length>0&&S||y.length>0&&w)&&l.slides.forEach(((e,t)=>{l.grid.updateSlide(t,e,l.slides)})),p.watchSlidesProgress&&l.updateSlidesOffset(),n)if(b.length>0&&S){if(void 0===t){const e=l.slidesGrid[x],t=l.slidesGrid[x+T]-e;o?l.setTranslate(l.translate-t):(l.slideTo(x+Math.ceil(T),0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-t,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-t))}else if(r){const e=_?b.length/p.grid.rows:b.length;l.slideTo(l.activeIndex+e,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(y.length>0&&w)if(void 0===t){const e=l.slidesGrid[x],t=l.slidesGrid[x-E]-e;o?l.setTranslate(l.translate-t):(l.slideTo(x-E,0,!1,!0),r&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-t,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-t))}else{const e=_?y.length/p.grid.rows:y.length;l.slideTo(l.activeIndex-e,0,!1,!0)}if(l.allowSlidePrev=d,l.allowSlideNext=u,l.controller&&l.controller.control&&!s){const e={slideRealIndex:t,direction:i,setTranslate:r,activeSlideIndex:a,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach((t=>{!t.destroyed&&t.params.loop&&t.loopFix({...e,slideTo:t.params.slidesPerView===p.slidesPerView&&n})})):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...e,slideTo:l.controller.control.params.slidesPerView===p.slidesPerView&&n})}l.emit("loopFix")},loopDestroy:function(){const e=this,{params:t,slidesEl:n}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const i=[];e.slides.forEach((e=>{const t=void 0===e.swiperSlideIndex?1*e.getAttribute("data-swiper-slide-index"):e.swiperSlideIndex;i[t]=e})),e.slides.forEach((e=>{e.removeAttribute("data-swiper-slide-index")})),i.forEach((e=>{n.append(e)})),e.recalcSlides(),e.slideTo(e.realIndex,0)}};function pp(e,t,n){const i=Ih(),{params:r}=e,a=r.edgeSwipeDetection,s=r.edgeSwipeThreshold;return!a||!(n<=s||n>=i.innerWidth-s)||"prevent"===a&&(t.preventDefault(),!0)}function mp(e){const t=this,n=Dh();let i=e;i.originalEvent&&(i=i.originalEvent);const r=t.touchEventsData;if("pointerdown"===i.type){if(null!==r.pointerId&&r.pointerId!==i.pointerId)return;r.pointerId=i.pointerId}else"touchstart"===i.type&&1===i.targetTouches.length&&(r.touchId=i.targetTouches[0].identifier);if("touchstart"===i.type)return void pp(t,i,i.targetTouches[0].pageX);const{params:a,touches:s,enabled:o}=t;if(!o)return;if(!a.simulateTouch&&"mouse"===i.pointerType)return;if(t.animating&&a.preventInteractionOnTransition)return;!t.animating&&a.cssMode&&a.loop&&t.loopFix();let l=i.target;if("wrapper"===a.touchEventsTarget&&!function(e,t){const n=t.contains(e);if(!n&&t instanceof HTMLSlotElement)return[...t.assignedElements()].includes(e);return n}(l,t.wrapperEl))return;if("which"in i&&3===i.which)return;if("button"in i&&i.button>0)return;if(r.isTouched&&r.isMoved)return;const c=!!a.noSwipingClass&&""!==a.noSwipingClass,d=i.composedPath?i.composedPath():i.path;c&&i.target&&i.target.shadowRoot&&d&&(l=d[0]);const u=a.noSwipingSelector?a.noSwipingSelector:`.${a.noSwipingClass}`,h=!(!i.target||!i.target.shadowRoot);if(a.noSwiping&&(h?function(e,t){return void 0===t&&(t=this),function t(n){if(!n||n===Dh()||n===Ih())return null;n.assignedSlot&&(n=n.assignedSlot);const i=n.closest(e);return i||n.getRootNode?i||t(n.getRootNode().host):null}(t)}(u,l):l.closest(u)))return void(t.allowClick=!0);if(a.swipeHandler&&!l.closest(a.swipeHandler))return;s.currentX=i.pageX,s.currentY=i.pageY;const p=s.currentX,m=s.currentY;if(!pp(t,i,p))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),s.startX=p,s.startY=m,r.touchStartTime=Rh(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,a.threshold>0&&(r.allowThresholdMove=!1);let f=!0;l.matches(r.focusableElements)&&(f=!1,"SELECT"===l.nodeName&&(r.isTouched=!1)),n.activeElement&&n.activeElement.matches(r.focusableElements)&&n.activeElement!==l&&("mouse"===i.pointerType||"mouse"!==i.pointerType&&!l.matches(r.focusableElements))&&n.activeElement.blur();const g=f&&t.allowTouchMove&&a.touchStartPreventDefault;!a.touchStartForcePreventDefault&&!g||l.isContentEditable||i.preventDefault(),a.freeMode&&a.freeMode.enabled&&t.freeMode&&t.animating&&!a.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",i)}function fp(e){const t=Dh(),n=this,i=n.touchEventsData,{params:r,touches:a,rtlTranslate:s,enabled:o}=n;if(!o)return;if(!r.simulateTouch&&"mouse"===e.pointerType)return;let l,c=e;if(c.originalEvent&&(c=c.originalEvent),"pointermove"===c.type){if(null!==i.touchId)return;if(c.pointerId!==i.pointerId)return}if("touchmove"===c.type){if(l=[...c.changedTouches].filter((e=>e.identifier===i.touchId))[0],!l||l.identifier!==i.touchId)return}else l=c;if(!i.isTouched)return void(i.startMoving&&i.isScrolling&&n.emit("touchMoveOpposite",c));const d=l.pageX,u=l.pageY;if(c.preventedByNestedSwiper)return a.startX=d,void(a.startY=u);if(!n.allowTouchMove)return c.target.matches(i.focusableElements)||(n.allowClick=!1),void(i.isTouched&&(Object.assign(a,{startX:d,startY:u,currentX:d,currentY:u}),i.touchStartTime=Rh()));if(r.touchReleaseOnEdges&&!r.loop)if(n.isVertical()){if(u<a.startY&&n.translate<=n.maxTranslate()||u>a.startY&&n.translate>=n.minTranslate())return i.isTouched=!1,void(i.isMoved=!1)}else if(d<a.startX&&n.translate<=n.maxTranslate()||d>a.startX&&n.translate>=n.minTranslate())return;if(t.activeElement&&t.activeElement.matches(i.focusableElements)&&t.activeElement!==c.target&&"mouse"!==c.pointerType&&t.activeElement.blur(),t.activeElement&&c.target===t.activeElement&&c.target.matches(i.focusableElements))return i.isMoved=!0,void(n.allowClick=!1);i.allowTouchCallbacks&&n.emit("touchMove",c),a.previousX=a.currentX,a.previousY=a.currentY,a.currentX=d,a.currentY=u;const h=a.currentX-a.startX,p=a.currentY-a.startY;if(n.params.threshold&&Math.sqrt(h**2+p**2)<n.params.threshold)return;if(void 0===i.isScrolling){let e;n.isHorizontal()&&a.currentY===a.startY||n.isVertical()&&a.currentX===a.startX?i.isScrolling=!1:h*h+p*p>=25&&(e=180*Math.atan2(Math.abs(p),Math.abs(h))/Math.PI,i.isScrolling=n.isHorizontal()?e>r.touchAngle:90-e>r.touchAngle)}if(i.isScrolling&&n.emit("touchMoveOpposite",c),void 0===i.startMoving&&(a.currentX===a.startX&&a.currentY===a.startY||(i.startMoving=!0)),i.isScrolling||"touchmove"===c.type&&i.preventTouchMoveFromPointerMove)return void(i.isTouched=!1);if(!i.startMoving)return;n.allowClick=!1,!r.cssMode&&c.cancelable&&c.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&c.stopPropagation();let m=n.isHorizontal()?h:p,f=n.isHorizontal()?a.currentX-a.previousX:a.currentY-a.previousY;r.oneWayMovement&&(m=Math.abs(m)*(s?1:-1),f=Math.abs(f)*(s?1:-1)),a.diff=m,m*=r.touchRatio,s&&(m=-m,f=-f);const g=n.touchesDirection;n.swipeDirection=m>0?"prev":"next",n.touchesDirection=f>0?"prev":"next";const v=n.params.loop&&!r.cssMode,_="next"===n.touchesDirection&&n.allowSlideNext||"prev"===n.touchesDirection&&n.allowSlidePrev;if(!i.isMoved){if(v&&_&&n.loopFix({direction:n.swipeDirection}),i.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});n.wrapperEl.dispatchEvent(e)}i.allowMomentumBounce=!1,!r.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",c)}if((new Date).getTime(),i.isMoved&&i.allowThresholdMove&&g!==n.touchesDirection&&v&&_&&Math.abs(m)>=1)return Object.assign(a,{startX:d,startY:u,currentX:d,currentY:u,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,void(i.startTranslate=i.currentTranslate);n.emit("sliderMove",c),i.isMoved=!0,i.currentTranslate=m+i.startTranslate;let b=!0,y=r.resistanceRatio;if(r.touchReleaseOnEdges&&(y=0),m>0?(v&&_&&i.allowThresholdMove&&i.currentTranslate>(r.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]-("auto"!==r.slidesPerView&&n.slides.length-r.slidesPerView>=2?n.slidesSizesGrid[n.activeIndex+1]+n.params.spaceBetween:0)-n.params.spaceBetween:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>n.minTranslate()&&(b=!1,r.resistance&&(i.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+i.startTranslate+m)**y))):m<0&&(v&&_&&i.allowThresholdMove&&i.currentTranslate<(r.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween+("auto"!==r.slidesPerView&&n.slides.length-r.slidesPerView>=2?n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween:0):n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-("auto"===r.slidesPerView?n.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<n.maxTranslate()&&(b=!1,r.resistance&&(i.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-i.startTranslate-m)**y))),b&&(c.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),n.allowSlidePrev||n.allowSlideNext||(i.currentTranslate=i.startTranslate),r.threshold>0){if(!(Math.abs(m)>r.threshold||i.allowThresholdMove))return void(i.currentTranslate=i.startTranslate);if(!i.allowThresholdMove)return i.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,i.currentTranslate=i.startTranslate,void(a.diff=n.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY)}r.followFinger&&!r.cssMode&&((r.freeMode&&r.freeMode.enabled&&n.freeMode||r.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(i.currentTranslate),n.setTranslate(i.currentTranslate))}function gp(e){const t=this,n=t.touchEventsData;let i,r=e;r.originalEvent&&(r=r.originalEvent);if("touchend"===r.type||"touchcancel"===r.type){if(i=[...r.changedTouches].filter((e=>e.identifier===n.touchId))[0],!i||i.identifier!==n.touchId)return}else{if(null!==n.touchId)return;if(r.pointerId!==n.pointerId)return;i=r}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(r.type)){if(!(["pointercancel","contextmenu"].includes(r.type)&&(t.browser.isSafari||t.browser.isWebView)))return}n.pointerId=null,n.touchId=null;const{params:a,touches:s,rtlTranslate:o,slidesGrid:l,enabled:c}=t;if(!c)return;if(!a.simulateTouch&&"mouse"===r.pointerType)return;if(n.allowTouchCallbacks&&t.emit("touchEnd",r),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&a.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);a.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const d=Rh(),u=d-n.touchStartTime;if(t.allowClick){const e=r.path||r.composedPath&&r.composedPath();t.updateClickedSlide(e&&e[0]||r.target,e),t.emit("tap click",r),u<300&&d-n.lastClickTime<300&&t.emit("doubleTap doubleClick",r)}if(n.lastClickTime=Rh(),Ph((()=>{t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===s.diff&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);let h;if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,h=a.followFinger?o?t.translate:-t.translate:-n.currentTranslate,a.cssMode)return;if(a.freeMode&&a.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:h});const p=h>=-t.maxTranslate()&&!t.params.loop;let m=0,f=t.slidesSizesGrid[0];for(let e=0;e<l.length;e+=e<a.slidesPerGroupSkip?1:a.slidesPerGroup){const t=e<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;void 0!==l[e+t]?(p||h>=l[e]&&h<l[e+t])&&(m=e,f=l[e+t]-l[e]):(p||h>=l[e])&&(m=e,f=l[l.length-1]-l[l.length-2])}let g=null,v=null;a.rewind&&(t.isBeginning?v=a.virtual&&a.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(g=0));const _=(h-l[m])/f,b=m<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;if(u>a.longSwipesMs){if(!a.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(_>=a.longSwipesRatio?t.slideTo(a.rewind&&t.isEnd?g:m+b):t.slideTo(m)),"prev"===t.swipeDirection&&(_>1-a.longSwipesRatio?t.slideTo(m+b):null!==v&&_<0&&Math.abs(_)>a.longSwipesRatio?t.slideTo(v):t.slideTo(m))}else{if(!a.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(r.target===t.navigation.nextEl||r.target===t.navigation.prevEl)?r.target===t.navigation.nextEl?t.slideTo(m+b):t.slideTo(m):("next"===t.swipeDirection&&t.slideTo(null!==g?g:m+b),"prev"===t.swipeDirection&&t.slideTo(null!==v?v:m))}}function vp(){const e=this,{params:t,el:n}=e;if(n&&0===n.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:r,snapGrid:a}=e,s=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const o=s&&t.loop;!("auto"===t.slidesPerView||t.slidesPerView>1)||!e.isEnd||e.isBeginning||e.params.centeredSlides||o?e.params.loop&&!s?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0):e.slideTo(e.slides.length-1,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout((()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()}),500)),e.allowSlidePrev=r,e.allowSlideNext=i,e.params.watchOverflow&&a!==e.snapGrid&&e.checkOverflow()}function _p(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function bp(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:i}=e;if(!i)return;let r;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const a=e.maxTranslate()-e.minTranslate();r=0===a?0:(e.translate-e.minTranslate())/a,r!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function yp(e){const t=this;ap(t,e.target),t.params.cssMode||"auto"!==t.params.slidesPerView&&!t.params.autoHeight||t.update()}function xp(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const wp=(e,t)=>{const n=Dh(),{params:i,el:r,wrapperEl:a,device:s}=e,o=!!i.nested,l="on"===t?"addEventListener":"removeEventListener",c=t;r&&"string"!=typeof r&&(n[l]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:o}),r[l]("touchstart",e.onTouchStart,{passive:!1}),r[l]("pointerdown",e.onTouchStart,{passive:!1}),n[l]("touchmove",e.onTouchMove,{passive:!1,capture:o}),n[l]("pointermove",e.onTouchMove,{passive:!1,capture:o}),n[l]("touchend",e.onTouchEnd,{passive:!0}),n[l]("pointerup",e.onTouchEnd,{passive:!0}),n[l]("pointercancel",e.onTouchEnd,{passive:!0}),n[l]("touchcancel",e.onTouchEnd,{passive:!0}),n[l]("pointerout",e.onTouchEnd,{passive:!0}),n[l]("pointerleave",e.onTouchEnd,{passive:!0}),n[l]("contextmenu",e.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[l]("click",e.onClick,!0),i.cssMode&&a[l]("scroll",e.onScroll),i.updateOnWindowResize?e[c](s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",vp,!0):e[c]("observerUpdate",vp,!0),r[l]("load",e.onLoad,{capture:!0}))};const Sp=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;var Tp={setBreakpoint:function(){const e=this,{realIndex:t,initialized:n,params:i,el:r}=e,a=i.breakpoints;if(!a||a&&0===Object.keys(a).length)return;const s=e.getBreakpoint(a,e.params.breakpointsBase,e.el);if(!s||e.currentBreakpoint===s)return;const o=(s in a?a[s]:void 0)||e.originalParams,l=Sp(e,i),c=Sp(e,o),d=e.params.grabCursor,u=o.grabCursor,h=i.enabled;l&&!c?(r.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),e.emitContainerClasses()):!l&&c&&(r.classList.add(`${i.containerModifierClass}grid`),(o.grid.fill&&"column"===o.grid.fill||!o.grid.fill&&"column"===i.grid.fill)&&r.classList.add(`${i.containerModifierClass}grid-column`),e.emitContainerClasses()),d&&!u?e.unsetGrabCursor():!d&&u&&e.setGrabCursor(),["navigation","pagination","scrollbar"].forEach((t=>{if(void 0===o[t])return;const n=i[t]&&i[t].enabled,r=o[t]&&o[t].enabled;n&&!r&&e[t].disable(),!n&&r&&e[t].enable()}));const p=o.direction&&o.direction!==i.direction,m=i.loop&&(o.slidesPerView!==i.slidesPerView||p),f=i.loop;p&&n&&e.changeDirection(),Fh(e.params,o);const g=e.params.enabled,v=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),h&&!g?e.disable():!h&&g&&e.enable(),e.currentBreakpoint=s,e.emit("_beforeBreakpoint",o),n&&(m?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!f&&v?(e.loopCreate(t),e.updateSlides()):f&&!v&&e.loopDestroy()),e.emit("breakpoint",o)},getBreakpoint:function(e,t,n){if(void 0===t&&(t="window"),!e||"container"===t&&!n)return;let i=!1;const r=Ih(),a="window"===t?r.innerHeight:n.clientHeight,s=Object.keys(e).map((e=>{if("string"==typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1));return{value:a*t,point:e}}return{value:e,point:e}}));s.sort(((e,t)=>parseInt(e.value,10)-parseInt(t.value,10)));for(let e=0;e<s.length;e+=1){const{point:a,value:o}=s[e];"window"===t?r.matchMedia(`(min-width: ${o}px)`).matches&&(i=a):o<=n.clientWidth&&(i=a)}return i||"max"}};var Ep={addClasses:function(){const e=this,{classNames:t,params:n,rtl:i,el:r,device:a}=e,s=function(e,t){const n=[];return e.forEach((e=>{"object"==typeof e?Object.keys(e).forEach((i=>{e[i]&&n.push(t+i)})):"string"==typeof e&&n.push(t+e)})),n}(["initialized",n.direction,{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:i},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:a.android},{ios:a.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...s),r.classList.add(...t),e.emitContainerClasses()},removeClasses:function(){const{el:e,classNames:t}=this;e&&"string"!=typeof e&&(e.classList.remove(...t),this.emitContainerClasses())}};var Mp={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function Cp(e,t){return function(n){void 0===n&&(n={});const i=Object.keys(n)[0],r=n[i];"object"==typeof r&&null!==r?(!0===e[i]&&(e[i]={enabled:!0}),"navigation"===i&&e[i]&&e[i].enabled&&!e[i].prevEl&&!e[i].nextEl&&(e[i].auto=!0),["pagination","scrollbar"].indexOf(i)>=0&&e[i]&&e[i].enabled&&!e[i].el&&(e[i].auto=!0),i in e&&"enabled"in r?("object"!=typeof e[i]||"enabled"in e[i]||(e[i].enabled=!0),e[i]||(e[i]={enabled:!1}),Fh(t,n)):Fh(t,n)):Fh(t,n)}}const Ap={eventsEmitter:np,update:lp,translate:cp,transition:{setTransition:function(e,t){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${e}ms`,n.wrapperEl.style.transitionDelay=0===e?"0ms":""),n.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);const n=this,{params:i}=n;i.cssMode||(i.autoHeight&&n.updateAutoHeight(),dp({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e,t){void 0===e&&(e=!0);const n=this,{params:i}=n;n.animating=!1,i.cssMode||(n.setTransition(0),dp({swiper:n,runCallbacks:e,direction:t,step:"End"}))}},slide:up,loop:hp,grabCursor:{setGrabCursor:function(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame((()=>{t.__preventObserver__=!1}))},unsetGrabCursor:function(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame((()=>{e.__preventObserver__=!1})))}},events:{attachEvents:function(){const e=this,{params:t}=e;e.onTouchStart=mp.bind(e),e.onTouchMove=fp.bind(e),e.onTouchEnd=gp.bind(e),e.onDocumentTouchStart=xp.bind(e),t.cssMode&&(e.onScroll=bp.bind(e)),e.onClick=_p.bind(e),e.onLoad=yp.bind(e),wp(e,"on")},detachEvents:function(){wp(this,"off")}},breakpoints:Tp,checkOverflow:{checkOverflow:function(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:i}=n;if(i){const t=e.slides.length-1,n=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*i;e.isLocked=e.size>n}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},classes:Ep},kp={};class Dp{constructor(){let e,t;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];1===i.length&&i[0].constructor&&"Object"===Object.prototype.toString.call(i[0]).slice(8,-1)?t=i[0]:[e,t]=i,t||(t={}),t=Fh({},t),e&&!t.el&&(t.el=e);const a=Dh();if(t.el&&"string"==typeof t.el&&a.querySelectorAll(t.el).length>1){const e=[];return a.querySelectorAll(t.el).forEach((n=>{const i=Fh({},t,{el:n});e.push(new Dp(i))})),e}const s=this;s.__swiper__=!0,s.support=Qh(),s.device=ep({userAgent:t.userAgent}),s.browser=tp(),s.eventsListeners={},s.eventsAnyListeners=[],s.modules=[...s.__modules__],t.modules&&Array.isArray(t.modules)&&s.modules.push(...t.modules);const o={};s.modules.forEach((e=>{e({params:t,swiper:s,extendParams:Cp(t,o),on:s.on.bind(s),once:s.once.bind(s),off:s.off.bind(s),emit:s.emit.bind(s)})}));const l=Fh({},Mp,o);return s.params=Fh({},l,kp,t),s.originalParams=Fh({},s.params),s.passedParams=Fh({},t),s.params&&s.params.on&&Object.keys(s.params.on).forEach((e=>{s.on(e,s.params.on[e])})),s.params&&s.params.onAny&&s.onAny(s.params.onAny),Object.assign(s,{enabled:s.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return"horizontal"===s.params.direction},isVertical(){return"vertical"===s.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:s.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.emit("_swiper"),s.params.init&&s.init(),s}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:n}=this,i=jh(Hh(t,`.${n.slideClass}, swiper-slide`)[0]);return jh(e)-i}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter((t=>1*t.getAttribute("data-swiper-slide-index")===e))[0])}recalcSlides(){const{slidesEl:e,params:t}=this;this.slides=Hh(e,`.${t.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const n=this;e=Math.min(Math.max(e,0),1);const i=n.minTranslate(),r=(n.maxTranslate()-i)*e+i;n.translateTo(r,void 0===t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter((t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter((e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass))).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach((n=>{const i=e.getSlideClasses(n);t.push({slideEl:n,classNames:i}),e.emit("_slideClass",n,i)})),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);const{params:n,slides:i,slidesGrid:r,slidesSizesGrid:a,size:s,activeIndex:o}=this;let l=1;if("number"==typeof n.slidesPerView)return n.slidesPerView;if(n.centeredSlides){let e,t=i[o]?Math.ceil(i[o].swiperSlideSize):0;for(let n=o+1;n<i.length;n+=1)i[n]&&!e&&(t+=Math.ceil(i[n].swiperSlideSize),l+=1,t>s&&(e=!0));for(let n=o-1;n>=0;n-=1)i[n]&&!e&&(t+=i[n].swiperSlideSize,l+=1,t>s&&(e=!0))}else if("current"===e)for(let e=o+1;e<i.length;e+=1){(t?r[e]+a[e]-r[o]<s:r[e]-r[o]<s)&&(l+=1)}else for(let e=o-1;e>=0;e-=1){r[o]-r[e]<s&&(l+=1)}return l}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:n}=e;function i(){const t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}let r;if(n.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach((t=>{t.complete&&ap(e,t)})),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),n.freeMode&&n.freeMode.enabled&&!n.cssMode)i(),n.autoHeight&&e.updateAutoHeight();else{if(("auto"===n.slidesPerView||n.slidesPerView>1)&&e.isEnd&&!n.centeredSlides){const t=e.virtual&&n.virtual.enabled?e.virtual.slides:e.slides;r=e.slideTo(t.length-1,0,!1,!0)}else r=e.slideTo(e.activeIndex,0,!1,!0);r||i()}n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){void 0===t&&(t=!0);const n=this,i=n.params.direction;return e||(e="horizontal"===i?"vertical":"horizontal"),e===i||"horizontal"!==e&&"vertical"!==e||(n.el.classList.remove(`${n.params.containerModifierClass}${i}`),n.el.classList.add(`${n.params.containerModifierClass}${e}`),n.emitContainerClasses(),n.params.direction=e,n.slides.forEach((t=>{"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n}changeLanguageDirection(e){const t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let n=e||t.params.el;if("string"==typeof n&&(n=document.querySelector(n)),!n)return!1;n.swiper=t,n.parentNode&&n.parentNode.host&&n.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const i=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let r=(()=>{if(n&&n.shadowRoot&&n.shadowRoot.querySelector){return n.shadowRoot.querySelector(i())}return Hh(n,i())[0]})();return!r&&t.params.createElements&&(r=Wh("div",t.params.wrapperClass),n.append(r),Hh(n,`.${t.params.slideClass}`).forEach((e=>{r.append(e)}))),Object.assign(t,{el:n,wrapperEl:r,slidesEl:t.isElement&&!n.parentNode.host.slideSlots?n.parentNode.host:r,hostEl:t.isElement?n.parentNode.host:n,mounted:!0,rtl:"rtl"===n.dir.toLowerCase()||"rtl"===Gh(n,"direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===n.dir.toLowerCase()||"rtl"===Gh(n,"direction")),wrongRTL:"-webkit-box"===Gh(r,"display")}),!0}init(e){const t=this;if(t.initialized)return t;if(!1===t.mount(e))return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const n=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&n.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),n.forEach((e=>{e.complete?ap(t,e):e.addEventListener("load",(e=>{ap(t,e.target)}))})),op(t),t.initialized=!0,op(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);const n=this,{params:i,el:r,wrapperEl:a,slides:s}=n;return void 0===n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),i.loop&&n.loopDestroy(),t&&(n.removeClasses(),r&&"string"!=typeof r&&r.removeAttribute("style"),a&&a.removeAttribute("style"),s&&s.length&&s.forEach((e=>{e.classList.remove(i.slideVisibleClass,i.slideFullyVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),e.removeAttribute("style"),e.removeAttribute("data-swiper-slide-index")}))),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((e=>{n.off(e)})),!1!==e&&(n.el&&"string"!=typeof n.el&&(n.el.swiper=null),function(e){const t=e;Object.keys(t).forEach((e=>{try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}}))}(n)),n.destroyed=!0),null}static extendDefaults(e){Fh(kp,e)}static get extendedDefaults(){return kp}static get defaults(){return Mp}static installModule(e){Dp.prototype.__modules__||(Dp.prototype.__modules__=[]);const t=Dp.prototype.__modules__;"function"==typeof e&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach((e=>Dp.installModule(e))),Dp):(Dp.installModule(e),Dp)}}function Lp(e){let{swiper:t,extendParams:n,on:i,emit:r}=e;const a=Dh(),s=Ih();function o(e){if(!t.enabled)return;const{rtlTranslate:n}=t;let i=e;i.originalEvent&&(i=i.originalEvent);const o=i.keyCode||i.charCode,l=t.params.keyboard.pageUpDown,c=l&&33===o,d=l&&34===o,u=37===o,h=39===o,p=38===o,m=40===o;if(!t.allowSlideNext&&(t.isHorizontal()&&h||t.isVertical()&&m||d))return!1;if(!t.allowSlidePrev&&(t.isHorizontal()&&u||t.isVertical()&&p||c))return!1;if(!(i.shiftKey||i.altKey||i.ctrlKey||i.metaKey||a.activeElement&&a.activeElement.nodeName&&("input"===a.activeElement.nodeName.toLowerCase()||"textarea"===a.activeElement.nodeName.toLowerCase()))){if(t.params.keyboard.onlyInViewport&&(c||d||u||h||p||m)){let e=!1;if(qh(t.el,`.${t.params.slideClass}, swiper-slide`).length>0&&0===qh(t.el,`.${t.params.slideActiveClass}`).length)return;const i=t.el,r=i.clientWidth,a=i.clientHeight,o=s.innerWidth,l=s.innerHeight,c=function(e){const t=Ih(),n=Dh(),i=e.getBoundingClientRect(),r=n.body,a=e.clientTop||r.clientTop||0,s=e.clientLeft||r.clientLeft||0,o=e===t?t.scrollY:e.scrollTop,l=e===t?t.scrollX:e.scrollLeft;return{top:i.top+o-a,left:i.left+l-s}}(i);n&&(c.left-=i.scrollLeft);const d=[[c.left,c.top],[c.left+r,c.top],[c.left,c.top+a],[c.left+r,c.top+a]];for(let t=0;t<d.length;t+=1){const n=d[t];if(n[0]>=0&&n[0]<=o&&n[1]>=0&&n[1]<=l){if(0===n[0]&&0===n[1])continue;e=!0}}if(!e)return}t.isHorizontal()?((c||d||u||h)&&(i.preventDefault?i.preventDefault():i.returnValue=!1),((d||h)&&!n||(c||u)&&n)&&t.slideNext(),((c||u)&&!n||(d||h)&&n)&&t.slidePrev()):((c||d||p||m)&&(i.preventDefault?i.preventDefault():i.returnValue=!1),(d||m)&&t.slideNext(),(c||p)&&t.slidePrev()),r("keyPress",o)}}function l(){t.keyboard.enabled||(a.addEventListener("keydown",o),t.keyboard.enabled=!0)}function c(){t.keyboard.enabled&&(a.removeEventListener("keydown",o),t.keyboard.enabled=!1)}t.keyboard={enabled:!1},n({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}}),i("init",(()=>{t.params.keyboard.enabled&&l()})),i("destroy",(()=>{t.keyboard.enabled&&c()})),Object.assign(t.keyboard,{enable:l,disable:c})}function Ip(e){let{swiper:t,extendParams:n,on:i,emit:r}=e;const a=Ih();let s;n({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),t.mousewheel={enabled:!1};let o,l=Rh();const c=[];function d(){t.enabled&&(t.mouseEntered=!0)}function u(){t.enabled&&(t.mouseEntered=!1)}function h(e){return!(t.params.mousewheel.thresholdDelta&&e.delta<t.params.mousewheel.thresholdDelta)&&(!(t.params.mousewheel.thresholdTime&&Rh()-l<t.params.mousewheel.thresholdTime)&&(e.delta>=6&&Rh()-l<60||(e.direction<0?t.isEnd&&!t.params.loop||t.animating||(t.slideNext(),r("scroll",e.raw)):t.isBeginning&&!t.params.loop||t.animating||(t.slidePrev(),r("scroll",e.raw)),l=(new a.Date).getTime(),!1)))}function p(e){let n=e,i=!0;if(!t.enabled)return;if(e.target.closest(`.${t.params.mousewheel.noMousewheelClass}`))return;const a=t.params.mousewheel;t.params.cssMode&&n.preventDefault();let l=t.el;"container"!==t.params.mousewheel.eventsTarget&&(l=document.querySelector(t.params.mousewheel.eventsTarget));const d=l&&l.contains(n.target);if(!t.mouseEntered&&!d&&!a.releaseOnEdges)return!0;n.originalEvent&&(n=n.originalEvent);let u=0;const p=t.rtlTranslate?-1:1,m=function(e){let t=0,n=0,i=0,r=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),i=10*t,r=10*n,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(i=e.deltaX),e.shiftKey&&!i&&(i=r,r=0),(i||r)&&e.deltaMode&&(1===e.deltaMode?(i*=40,r*=40):(i*=800,r*=800)),i&&!t&&(t=i<1?-1:1),r&&!n&&(n=r<1?-1:1),{spinX:t,spinY:n,pixelX:i,pixelY:r}}(n);if(a.forceToAxis)if(t.isHorizontal()){if(!(Math.abs(m.pixelX)>Math.abs(m.pixelY)))return!0;u=-m.pixelX*p}else{if(!(Math.abs(m.pixelY)>Math.abs(m.pixelX)))return!0;u=-m.pixelY}else u=Math.abs(m.pixelX)>Math.abs(m.pixelY)?-m.pixelX*p:-m.pixelY;if(0===u)return!0;a.invert&&(u=-u);let f=t.getTranslate()+u*a.sensitivity;if(f>=t.minTranslate()&&(f=t.minTranslate()),f<=t.maxTranslate()&&(f=t.maxTranslate()),i=!!t.params.loop||!(f===t.minTranslate()||f===t.maxTranslate()),i&&t.params.nested&&n.stopPropagation(),t.params.freeMode&&t.params.freeMode.enabled){const e={time:Rh(),delta:Math.abs(u),direction:Math.sign(u)},i=o&&e.time<o.time+500&&e.delta<=o.delta&&e.direction===o.direction;if(!i){o=void 0;let l=t.getTranslate()+u*a.sensitivity;const d=t.isBeginning,h=t.isEnd;if(l>=t.minTranslate()&&(l=t.minTranslate()),l<=t.maxTranslate()&&(l=t.maxTranslate()),t.setTransition(0),t.setTranslate(l),t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses(),(!d&&t.isBeginning||!h&&t.isEnd)&&t.updateSlidesClasses(),t.params.loop&&t.loopFix({direction:e.direction<0?"next":"prev",byMousewheel:!0}),t.params.freeMode.sticky){clearTimeout(s),s=void 0,c.length>=15&&c.shift();const n=c.length?c[c.length-1]:void 0,i=c[0];if(c.push(e),n&&(e.delta>n.delta||e.direction!==n.direction))c.splice(0);else if(c.length>=15&&e.time-i.time<500&&i.delta-e.delta>=1&&e.delta<=6){const n=u>0?.8:.2;o=e,c.splice(0),s=Ph((()=>{!t.destroyed&&t.params&&t.slideToClosest(t.params.speed,!0,void 0,n)}),0)}s||(s=Ph((()=>{if(t.destroyed||!t.params)return;o=e,c.splice(0),t.slideToClosest(t.params.speed,!0,void 0,.5)}),500))}if(i||r("scroll",n),t.params.autoplay&&t.params.autoplayDisableOnInteraction&&t.autoplay.stop(),a.releaseOnEdges&&(l===t.minTranslate()||l===t.maxTranslate()))return!0}}else{const n={time:Rh(),delta:Math.abs(u),direction:Math.sign(u),raw:e};c.length>=2&&c.shift();const i=c.length?c[c.length-1]:void 0;if(c.push(n),i?(n.direction!==i.direction||n.delta>i.delta||n.time>i.time+150)&&h(n):h(n),function(e){const n=t.params.mousewheel;if(e.direction<0){if(t.isEnd&&!t.params.loop&&n.releaseOnEdges)return!0}else if(t.isBeginning&&!t.params.loop&&n.releaseOnEdges)return!0;return!1}(n))return!0}return n.preventDefault?n.preventDefault():n.returnValue=!1,!1}function m(e){let n=t.el;"container"!==t.params.mousewheel.eventsTarget&&(n=document.querySelector(t.params.mousewheel.eventsTarget)),n[e]("mouseenter",d),n[e]("mouseleave",u),n[e]("wheel",p)}function f(){return t.params.cssMode?(t.wrapperEl.removeEventListener("wheel",p),!0):!t.mousewheel.enabled&&(m("addEventListener"),t.mousewheel.enabled=!0,!0)}function g(){return t.params.cssMode?(t.wrapperEl.addEventListener(event,p),!0):!!t.mousewheel.enabled&&(m("removeEventListener"),t.mousewheel.enabled=!1,!0)}i("init",(()=>{!t.params.mousewheel.enabled&&t.params.cssMode&&g(),t.params.mousewheel.enabled&&f()})),i("destroy",(()=>{t.params.cssMode&&f(),t.mousewheel.enabled&&g()})),Object.assign(t.mousewheel,{enable:f,disable:g})}function Pp(e,t,n,i){return e.params.createElements&&Object.keys(i).forEach((r=>{if(!n[r]&&!0===n.auto){let a=Hh(e.el,`.${i[r]}`)[0];a||(a=Wh("div",i[r]),a.className=i[r],e.el.append(a)),n[r]=a,t[r]=a}})),n}function Rp(e){let{swiper:t,extendParams:n,on:i,emit:r}=e;function a(e){let n;return e&&"string"==typeof e&&t.isElement&&(n=t.el.querySelector(e)||t.hostEl.querySelector(e),n)?n:(e&&("string"==typeof e&&(n=[...document.querySelectorAll(e)]),t.params.uniqueNavElements&&"string"==typeof e&&n&&n.length>1&&1===t.el.querySelectorAll(e).length?n=t.el.querySelector(e):n&&1===n.length&&(n=n[0])),e&&!n?e:n)}function s(e,n){const i=t.params.navigation;(e=Xh(e)).forEach((e=>{e&&(e.classList[n?"add":"remove"](...i.disabledClass.split(" ")),"BUTTON"===e.tagName&&(e.disabled=n),t.params.watchOverflow&&t.enabled&&e.classList[t.isLocked?"add":"remove"](i.lockClass))}))}function o(){const{nextEl:e,prevEl:n}=t.navigation;if(t.params.loop)return s(n,!1),void s(e,!1);s(n,t.isBeginning&&!t.params.rewind),s(e,t.isEnd&&!t.params.rewind)}function l(e){e.preventDefault(),(!t.isBeginning||t.params.loop||t.params.rewind)&&(t.slidePrev(),r("navigationPrev"))}function c(e){e.preventDefault(),(!t.isEnd||t.params.loop||t.params.rewind)&&(t.slideNext(),r("navigationNext"))}function d(){const e=t.params.navigation;if(t.params.navigation=Pp(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!e.nextEl&&!e.prevEl)return;let n=a(e.nextEl),i=a(e.prevEl);Object.assign(t.navigation,{nextEl:n,prevEl:i}),n=Xh(n),i=Xh(i);const r=(n,i)=>{n&&n.addEventListener("click","next"===i?c:l),!t.enabled&&n&&n.classList.add(...e.lockClass.split(" "))};n.forEach((e=>r(e,"next"))),i.forEach((e=>r(e,"prev")))}function u(){let{nextEl:e,prevEl:n}=t.navigation;e=Xh(e),n=Xh(n);const i=(e,n)=>{e.removeEventListener("click","next"===n?c:l),e.classList.remove(...t.params.navigation.disabledClass.split(" "))};e.forEach((e=>i(e,"next"))),n.forEach((e=>i(e,"prev")))}n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null},i("init",(()=>{!1===t.params.navigation.enabled?h():(d(),o())})),i("toEdge fromEdge lock unlock",(()=>{o()})),i("destroy",(()=>{u()})),i("enable disable",(()=>{let{nextEl:e,prevEl:n}=t.navigation;e=Xh(e),n=Xh(n),t.enabled?o():[...e,...n].filter((e=>!!e)).forEach((e=>e.classList.add(t.params.navigation.lockClass)))})),i("click",((e,n)=>{let{nextEl:i,prevEl:a}=t.navigation;i=Xh(i),a=Xh(a);const s=n.target;let o=a.includes(s)||i.includes(s);if(t.isElement&&!o){const e=n.path||n.composedPath&&n.composedPath();e&&(o=e.find((e=>i.includes(e)||a.includes(e))))}if(t.params.navigation.hideOnClick&&!o){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===s||t.pagination.el.contains(s)))return;let e;i.length?e=i[0].classList.contains(t.params.navigation.hiddenClass):a.length&&(e=a[0].classList.contains(t.params.navigation.hiddenClass)),r(!0===e?"navigationShow":"navigationHide"),[...i,...a].filter((e=>!!e)).forEach((e=>e.classList.toggle(t.params.navigation.hiddenClass)))}}));const h=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),u()};Object.assign(t.navigation,{enable:()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),d(),o()},disable:h,update:o,init:d,destroy:u})}function Op(e){return void 0===e&&(e=""),`.${e.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function Np(e){let{swiper:t,extendParams:n,on:i,emit:r}=e;const a="swiper-pagination";let s;n({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:e=>e,formatFractionTotal:e=>e,bulletClass:`${a}-bullet`,bulletActiveClass:`${a}-bullet-active`,modifierClass:`${a}-`,currentClass:`${a}-current`,totalClass:`${a}-total`,hiddenClass:`${a}-hidden`,progressbarFillClass:`${a}-progressbar-fill`,progressbarOppositeClass:`${a}-progressbar-opposite`,clickableClass:`${a}-clickable`,lockClass:`${a}-lock`,horizontalClass:`${a}-horizontal`,verticalClass:`${a}-vertical`,paginationDisabledClass:`${a}-disabled`}}),t.pagination={el:null,bullets:[]};let o=0;function l(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&0===t.pagination.el.length}function c(e,n){const{bulletActiveClass:i}=t.params.pagination;e&&(e=e[("prev"===n?"previous":"next")+"ElementSibling"])&&(e.classList.add(`${i}-${n}`),(e=e[("prev"===n?"previous":"next")+"ElementSibling"])&&e.classList.add(`${i}-${n}-${n}`))}function d(e){const n=e.target.closest(Op(t.params.pagination.bulletClass));if(!n)return;e.preventDefault();const i=jh(n)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===i)return;const e=(r=t.realIndex,a=i,s=t.slides.length,(a%=s)==1+(r%=s)?"next":a===r-1?"previous":void 0);"next"===e?t.slideNext():"previous"===e?t.slidePrev():t.slideToLoop(i)}else t.slideTo(i);var r,a,s}function u(){const e=t.rtl,n=t.params.pagination;if(l())return;let i,a,d=t.pagination.el;d=Xh(d);const u=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,h=t.params.loop?Math.ceil(u/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(a=t.previousRealIndex||0,i=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex):void 0!==t.snapIndex?(i=t.snapIndex,a=t.previousSnapIndex):(a=t.previousIndex||0,i=t.activeIndex||0),"bullets"===n.type&&t.pagination.bullets&&t.pagination.bullets.length>0){const r=t.pagination.bullets;let l,u,h;if(n.dynamicBullets&&(s=Yh(r[0],t.isHorizontal()?"width":"height",!0),d.forEach((e=>{e.style[t.isHorizontal()?"width":"height"]=s*(n.dynamicMainBullets+4)+"px"})),n.dynamicMainBullets>1&&void 0!==a&&(o+=i-(a||0),o>n.dynamicMainBullets-1?o=n.dynamicMainBullets-1:o<0&&(o=0)),l=Math.max(i-o,0),u=l+(Math.min(r.length,n.dynamicMainBullets)-1),h=(u+l)/2),r.forEach((e=>{const t=[...["","-next","-next-next","-prev","-prev-prev","-main"].map((e=>`${n.bulletActiveClass}${e}`))].map((e=>"string"==typeof e&&e.includes(" ")?e.split(" "):e)).flat();e.classList.remove(...t)})),d.length>1)r.forEach((e=>{const r=jh(e);r===i?e.classList.add(...n.bulletActiveClass.split(" ")):t.isElement&&e.setAttribute("part","bullet"),n.dynamicBullets&&(r>=l&&r<=u&&e.classList.add(...`${n.bulletActiveClass}-main`.split(" ")),r===l&&c(e,"prev"),r===u&&c(e,"next"))}));else{const e=r[i];if(e&&e.classList.add(...n.bulletActiveClass.split(" ")),t.isElement&&r.forEach(((e,t)=>{e.setAttribute("part",t===i?"bullet-active":"bullet")})),n.dynamicBullets){const e=r[l],t=r[u];for(let e=l;e<=u;e+=1)r[e]&&r[e].classList.add(...`${n.bulletActiveClass}-main`.split(" "));c(e,"prev"),c(t,"next")}}if(n.dynamicBullets){const i=Math.min(r.length,n.dynamicMainBullets+4),a=(s*i-s)/2-h*s,o=e?"right":"left";r.forEach((e=>{e.style[t.isHorizontal()?o:"top"]=`${a}px`}))}}d.forEach(((e,a)=>{if("fraction"===n.type&&(e.querySelectorAll(Op(n.currentClass)).forEach((e=>{e.textContent=n.formatFractionCurrent(i+1)})),e.querySelectorAll(Op(n.totalClass)).forEach((e=>{e.textContent=n.formatFractionTotal(h)}))),"progressbar"===n.type){let r;r=n.progressbarOpposite?t.isHorizontal()?"vertical":"horizontal":t.isHorizontal()?"horizontal":"vertical";const a=(i+1)/h;let s=1,o=1;"horizontal"===r?s=a:o=a,e.querySelectorAll(Op(n.progressbarFillClass)).forEach((e=>{e.style.transform=`translate3d(0,0,0) scaleX(${s}) scaleY(${o})`,e.style.transitionDuration=`${t.params.speed}ms`}))}"custom"===n.type&&n.renderCustom?(e.innerHTML=n.renderCustom(t,i+1,h),0===a&&r("paginationRender",e)):(0===a&&r("paginationRender",e),r("paginationUpdate",e)),t.params.watchOverflow&&t.enabled&&e.classList[t.isLocked?"add":"remove"](n.lockClass)}))}function h(){const e=t.params.pagination;if(l())return;const n=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.grid&&t.params.grid.rows>1?t.slides.length/Math.ceil(t.params.grid.rows):t.slides.length;let i=t.pagination.el;i=Xh(i);let a="";if("bullets"===e.type){let i=t.params.loop?Math.ceil(n/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&i>n&&(i=n);for(let n=0;n<i;n+=1)e.renderBullet?a+=e.renderBullet.call(t,n,e.bulletClass):a+=`<${e.bulletElement} ${t.isElement?'part="bullet"':""} class="${e.bulletClass}"></${e.bulletElement}>`}"fraction"===e.type&&(a=e.renderFraction?e.renderFraction.call(t,e.currentClass,e.totalClass):`<span class="${e.currentClass}"></span> / <span class="${e.totalClass}"></span>`),"progressbar"===e.type&&(a=e.renderProgressbar?e.renderProgressbar.call(t,e.progressbarFillClass):`<span class="${e.progressbarFillClass}"></span>`),t.pagination.bullets=[],i.forEach((n=>{"custom"!==e.type&&(n.innerHTML=a||""),"bullets"===e.type&&t.pagination.bullets.push(...n.querySelectorAll(Op(e.bulletClass)))})),"custom"!==e.type&&r("paginationRender",i[0])}function p(){t.params.pagination=Pp(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const e=t.params.pagination;if(!e.el)return;let n;"string"==typeof e.el&&t.isElement&&(n=t.el.querySelector(e.el)),n||"string"!=typeof e.el||(n=[...document.querySelectorAll(e.el)]),n||(n=e.el),n&&0!==n.length&&(t.params.uniqueNavElements&&"string"==typeof e.el&&Array.isArray(n)&&n.length>1&&(n=[...t.el.querySelectorAll(e.el)],n.length>1&&(n=n.filter((e=>qh(e,".swiper")[0]===t.el))[0])),Array.isArray(n)&&1===n.length&&(n=n[0]),Object.assign(t.pagination,{el:n}),n=Xh(n),n.forEach((n=>{"bullets"===e.type&&e.clickable&&n.classList.add(...(e.clickableClass||"").split(" ")),n.classList.add(e.modifierClass+e.type),n.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass),"bullets"===e.type&&e.dynamicBullets&&(n.classList.add(`${e.modifierClass}${e.type}-dynamic`),o=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&n.classList.add(e.progressbarOppositeClass),e.clickable&&n.addEventListener("click",d),t.enabled||n.classList.add(e.lockClass)})))}function m(){const e=t.params.pagination;if(l())return;let n=t.pagination.el;n&&(n=Xh(n),n.forEach((n=>{n.classList.remove(e.hiddenClass),n.classList.remove(e.modifierClass+e.type),n.classList.remove(t.isHorizontal()?e.horizontalClass:e.verticalClass),e.clickable&&(n.classList.remove(...(e.clickableClass||"").split(" ")),n.removeEventListener("click",d))}))),t.pagination.bullets&&t.pagination.bullets.forEach((t=>t.classList.remove(...e.bulletActiveClass.split(" "))))}i("changeDirection",(()=>{if(!t.pagination||!t.pagination.el)return;const e=t.params.pagination;let{el:n}=t.pagination;n=Xh(n),n.forEach((n=>{n.classList.remove(e.horizontalClass,e.verticalClass),n.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass)}))})),i("init",(()=>{!1===t.params.pagination.enabled?f():(p(),h(),u())})),i("activeIndexChange",(()=>{void 0===t.snapIndex&&u()})),i("snapIndexChange",(()=>{u()})),i("snapGridLengthChange",(()=>{h(),u()})),i("destroy",(()=>{m()})),i("enable disable",(()=>{let{el:e}=t.pagination;e&&(e=Xh(e),e.forEach((e=>e.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass))))})),i("lock unlock",(()=>{u()})),i("click",((e,n)=>{const i=n.target,a=Xh(t.pagination.el);if(t.params.pagination.el&&t.params.pagination.hideOnClick&&a&&a.length>0&&!i.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&i===t.navigation.nextEl||t.navigation.prevEl&&i===t.navigation.prevEl))return;const e=a[0].classList.contains(t.params.pagination.hiddenClass);r(!0===e?"paginationShow":"paginationHide"),a.forEach((e=>e.classList.toggle(t.params.pagination.hiddenClass)))}}));const f=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:e}=t.pagination;e&&(e=Xh(e),e.forEach((e=>e.classList.add(t.params.pagination.paginationDisabledClass)))),m()};Object.assign(t.pagination,{enable:()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:e}=t.pagination;e&&(e=Xh(e),e.forEach((e=>e.classList.remove(t.params.pagination.paginationDisabledClass)))),p(),h(),u()},disable:f,render:h,update:u,init:p,destroy:m})}function Bp(e){let t,n,{swiper:i,extendParams:r,on:a,emit:s,params:o}=e;i.autoplay={running:!1,paused:!1,timeLeft:0},r({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let l,c,d,u,h,p,m,f,g=o&&o.autoplay?o.autoplay.delay:3e3,v=o&&o.autoplay?o.autoplay.delay:3e3,_=(new Date).getTime();function b(e){i&&!i.destroyed&&i.wrapperEl&&e.target===i.wrapperEl&&(i.wrapperEl.removeEventListener("transitionend",b),f||e.detail&&e.detail.bySwiperTouchMove||E())}const y=()=>{if(i.destroyed||!i.autoplay.running)return;i.autoplay.paused?c=!0:c&&(v=l,c=!1);const e=i.autoplay.paused?l:_+v-(new Date).getTime();i.autoplay.timeLeft=e,s("autoplayTimeLeft",e,e/g),n=requestAnimationFrame((()=>{y()}))},x=e=>{if(i.destroyed||!i.autoplay.running)return;cancelAnimationFrame(n),y();let r=void 0===e?i.params.autoplay.delay:e;g=i.params.autoplay.delay,v=i.params.autoplay.delay;const a=(()=>{let e;if(e=i.virtual&&i.params.virtual.enabled?i.slides.filter((e=>e.classList.contains("swiper-slide-active")))[0]:i.slides[i.activeIndex],!e)return;return parseInt(e.getAttribute("data-swiper-autoplay"),10)})();!Number.isNaN(a)&&a>0&&void 0===e&&(r=a,g=a,v=a),l=r;const o=i.params.speed,c=()=>{i&&!i.destroyed&&(i.params.autoplay.reverseDirection?!i.isBeginning||i.params.loop||i.params.rewind?(i.slidePrev(o,!0,!0),s("autoplay")):i.params.autoplay.stopOnLastSlide||(i.slideTo(i.slides.length-1,o,!0,!0),s("autoplay")):!i.isEnd||i.params.loop||i.params.rewind?(i.slideNext(o,!0,!0),s("autoplay")):i.params.autoplay.stopOnLastSlide||(i.slideTo(0,o,!0,!0),s("autoplay")),i.params.cssMode&&(_=(new Date).getTime(),requestAnimationFrame((()=>{x()}))))};return r>0?(clearTimeout(t),t=setTimeout((()=>{c()}),r)):requestAnimationFrame((()=>{c()})),r},w=()=>{_=(new Date).getTime(),i.autoplay.running=!0,x(),s("autoplayStart")},S=()=>{i.autoplay.running=!1,clearTimeout(t),cancelAnimationFrame(n),s("autoplayStop")},T=(e,n)=>{if(i.destroyed||!i.autoplay.running)return;clearTimeout(t),e||(m=!0);const r=()=>{s("autoplayPause"),i.params.autoplay.waitForTransition?i.wrapperEl.addEventListener("transitionend",b):E()};if(i.autoplay.paused=!0,n)return p&&(l=i.params.autoplay.delay),p=!1,void r();const a=l||i.params.autoplay.delay;l=a-((new Date).getTime()-_),i.isEnd&&l<0&&!i.params.loop||(l<0&&(l=0),r())},E=()=>{i.isEnd&&l<0&&!i.params.loop||i.destroyed||!i.autoplay.running||(_=(new Date).getTime(),m?(m=!1,x(l)):x(),i.autoplay.paused=!1,s("autoplayResume"))},M=()=>{if(i.destroyed||!i.autoplay.running)return;const e=Dh();"hidden"===e.visibilityState&&(m=!0,T(!0)),"visible"===e.visibilityState&&E()},C=e=>{"mouse"===e.pointerType&&(m=!0,f=!0,i.animating||i.autoplay.paused||T(!0))},A=e=>{"mouse"===e.pointerType&&(f=!1,i.autoplay.paused&&E())};a("init",(()=>{i.params.autoplay.enabled&&(i.params.autoplay.pauseOnMouseEnter&&(i.el.addEventListener("pointerenter",C),i.el.addEventListener("pointerleave",A)),Dh().addEventListener("visibilitychange",M),w())})),a("destroy",(()=>{i.el&&"string"!=typeof i.el&&(i.el.removeEventListener("pointerenter",C),i.el.removeEventListener("pointerleave",A)),Dh().removeEventListener("visibilitychange",M),i.autoplay.running&&S()})),a("_freeModeStaticRelease",(()=>{(u||m)&&E()})),a("_freeModeNoMomentumRelease",(()=>{i.params.autoplay.disableOnInteraction?S():T(!0,!0)})),a("beforeTransitionStart",((e,t,n)=>{!i.destroyed&&i.autoplay.running&&(n||!i.params.autoplay.disableOnInteraction?T(!0,!0):S())})),a("sliderFirstMove",(()=>{!i.destroyed&&i.autoplay.running&&(i.params.autoplay.disableOnInteraction?S():(d=!0,u=!1,m=!1,h=setTimeout((()=>{m=!0,u=!0,T(!0)}),200)))})),a("touchEnd",(()=>{if(!i.destroyed&&i.autoplay.running&&d){if(clearTimeout(h),clearTimeout(t),i.params.autoplay.disableOnInteraction)return u=!1,void(d=!1);u&&i.params.cssMode&&E(),u=!1,d=!1}})),a("slideChange",(()=>{!i.destroyed&&i.autoplay.running&&(p=!0)})),Object.assign(i.autoplay,{start:w,stop:S,pause:T,resume:E})}function Fp(e){const{effect:t,swiper:n,on:i,setTranslate:r,setTransition:a,overwriteParams:s,perspective:o,recreateShadows:l,getEffectParams:c}=e;let d;i("beforeInit",(()=>{if(n.params.effect!==t)return;n.classNames.push(`${n.params.containerModifierClass}${t}`),o&&o()&&n.classNames.push(`${n.params.containerModifierClass}3d`);const e=s?s():{};Object.assign(n.params,e),Object.assign(n.originalParams,e)})),i("setTranslate",(()=>{n.params.effect===t&&r()})),i("setTransition",((e,i)=>{n.params.effect===t&&a(i)})),i("transitionEnd",(()=>{if(n.params.effect===t&&l){if(!c||!c().slideShadows)return;n.slides.forEach((e=>{e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach((e=>e.remove()))})),l()}})),i("virtualUpdate",(()=>{n.params.effect===t&&(n.slides.length||(d=!0),requestAnimationFrame((()=>{d&&n.slides&&n.slides.length&&(r(),d=!1)})))}))}function Up(e,t){const n=Vh(t);return n!==t&&(n.style.backfaceVisibility="hidden",n.style["-webkit-backface-visibility"]="hidden"),n}function zp(e){let{swiper:t,duration:n,transformElements:i,allSlides:r}=e;const{activeIndex:a}=t;if(t.params.virtualTranslate&&0!==n){let e,n=!1;e=r?i:i.filter((e=>{const n=e.classList.contains("swiper-slide-transform")?(e=>{if(!e.parentElement)return t.slides.filter((t=>t.shadowRoot&&t.shadowRoot===e.parentNode))[0];return e.parentElement})(e):e;return t.getSlideIndex(n)===a})),e.forEach((e=>{!function(e,t){t&&e.addEventListener("transitionend",(function n(i){i.target===e&&(t.call(e,i),e.removeEventListener("transitionend",n))}))}(e,(()=>{if(n)return;if(!t||t.destroyed)return;n=!0,t.animating=!1;const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(e)}))}))}}function Vp(e){let{swiper:t,extendParams:n,on:i}=e;n({fadeEffect:{crossFade:!1}});Fp({effect:"fade",swiper:t,on:i,setTranslate:()=>{const{slides:e}=t;t.params.fadeEffect;for(let n=0;n<e.length;n+=1){const e=t.slides[n];let i=-e.swiperSlideOffset;t.params.virtualTranslate||(i-=t.translate);let r=0;t.isHorizontal()||(r=i,i=0);const a=t.params.fadeEffect.crossFade?Math.max(1-Math.abs(e.progress),0):1+Math.min(Math.max(e.progress,-1),0),s=Up(0,e);s.style.opacity=a,s.style.transform=`translate3d(${i}px, ${r}px, 0px)`}},setTransition:e=>{const n=t.slides.map((e=>Vh(e)));n.forEach((t=>{t.style.transitionDuration=`${e}ms`})),zp({swiper:t,duration:e,transformElements:n,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!t.params.cssMode})})}function Hp(e,t,n){const i=`swiper-slide-shadow${n?`-${n}`:""}${e?` swiper-slide-shadow-${e}`:""}`,r=Vh(t);let a=r.querySelector(`.${i.split(" ").join(".")}`);return a||(a=Wh("div",i.split(" ")),r.append(a)),a}function $p(e){let{swiper:t,extendParams:n,on:i}=e;n({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}});Fp({effect:"coverflow",swiper:t,on:i,setTranslate:()=>{const{width:e,height:n,slides:i,slidesSizesGrid:r}=t,a=t.params.coverflowEffect,s=t.isHorizontal(),o=t.translate,l=s?e/2-o:n/2-o,c=s?a.rotate:-a.rotate,d=a.depth,u=function(e){return t=>Math.abs(t)>0&&e.browser&&e.browser.need3dFix&&Math.abs(t)%90==0?t+.001:t}(t);for(let e=0,t=i.length;e<t;e+=1){const t=i[e],n=r[e],o=(l-t.swiperSlideOffset-n/2)/n,h="function"==typeof a.modifier?a.modifier(o):o*a.modifier;let p=s?c*h:0,m=s?0:c*h,f=-d*Math.abs(h),g=a.stretch;"string"==typeof g&&-1!==g.indexOf("%")&&(g=parseFloat(a.stretch)/100*n);let v=s?0:g*h,_=s?g*h:0,b=1-(1-a.scale)*Math.abs(h);Math.abs(_)<.001&&(_=0),Math.abs(v)<.001&&(v=0),Math.abs(f)<.001&&(f=0),Math.abs(p)<.001&&(p=0),Math.abs(m)<.001&&(m=0),Math.abs(b)<.001&&(b=0);const y=`translate3d(${_}px,${v}px,${f}px)  rotateX(${u(m)}deg) rotateY(${u(p)}deg) scale(${b})`;if(Up(0,t).style.transform=y,t.style.zIndex=1-Math.abs(Math.round(h)),a.slideShadows){let e=s?t.querySelector(".swiper-slide-shadow-left"):t.querySelector(".swiper-slide-shadow-top"),n=s?t.querySelector(".swiper-slide-shadow-right"):t.querySelector(".swiper-slide-shadow-bottom");e||(e=Hp("coverflow",t,s?"left":"top")),n||(n=Hp("coverflow",t,s?"right":"bottom")),e&&(e.style.opacity=h>0?h:0),n&&(n.style.opacity=-h>0?-h:0)}}},setTransition:e=>{t.slides.map((e=>Vh(e))).forEach((t=>{t.style.transitionDuration=`${e}ms`,t.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach((t=>{t.style.transitionDuration=`${e}ms`}))}))},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}Object.keys(Ap).forEach((e=>{Object.keys(Ap[e]).forEach((t=>{Dp.prototype[t]=Ap[e][t]}))})),Dp.use([function(e){let{swiper:t,on:n,emit:i}=e;const r=Ih();let a=null,s=null;const o=()=>{t&&!t.destroyed&&t.initialized&&(i("beforeResize"),i("resize"))},l=()=>{t&&!t.destroyed&&t.initialized&&i("orientationchange")};n("init",(()=>{t.params.resizeObserver&&void 0!==r.ResizeObserver?t&&!t.destroyed&&t.initialized&&(a=new ResizeObserver((e=>{s=r.requestAnimationFrame((()=>{const{width:n,height:i}=t;let r=n,a=i;e.forEach((e=>{let{contentBoxSize:n,contentRect:i,target:s}=e;s&&s!==t.el||(r=i?i.width:(n[0]||n).inlineSize,a=i?i.height:(n[0]||n).blockSize)})),r===n&&a===i||o()}))})),a.observe(t.el)):(r.addEventListener("resize",o),r.addEventListener("orientationchange",l))})),n("destroy",(()=>{s&&r.cancelAnimationFrame(s),a&&a.unobserve&&t.el&&(a.unobserve(t.el),a=null),r.removeEventListener("resize",o),r.removeEventListener("orientationchange",l)}))},function(e){let{swiper:t,extendParams:n,on:i,emit:r}=e;const a=[],s=Ih(),o=function(e,n){void 0===n&&(n={});const i=new(s.MutationObserver||s.WebkitMutationObserver)((e=>{if(t.__preventObserver__)return;if(1===e.length)return void r("observerUpdate",e[0]);const n=function(){r("observerUpdate",e[0])};s.requestAnimationFrame?s.requestAnimationFrame(n):s.setTimeout(n,0)}));i.observe(e,{attributes:void 0===n.attributes||n.attributes,childList:t.isElement||(void 0===n.childList||n).childList,characterData:void 0===n.characterData||n.characterData}),a.push(i)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",(()=>{if(t.params.observer){if(t.params.observeParents){const e=qh(t.hostEl);for(let t=0;t<e.length;t+=1)o(e[t])}o(t.hostEl,{childList:t.params.observeSlideChildren}),o(t.wrapperEl,{attributes:!1})}})),i("destroy",(()=>{a.forEach((e=>{e.disconnect()})),a.splice(0,a.length)}))}]);var Wp=n(9755);const Gp={variables:{brandManifestoSection:".brand-manifesto",brandManifestoGreeting:".brand-manifesto__greeting",brandManifestoSwiper:".brand-manifesto__swiper",brandManifestoSlide:".brand-manifesto__swiper .swiper-slide",brandManifestoTitle:".brand-manifesto__title",brandManifestoHeading:".brand-manifesto__heading",brandManifestoText:".brand-manifesto__text",brandManifestoDesc:".brand-manifesto__desc",brandManifestoGallery:".brand-manifesto__gallery",swiperSlide:".swiper-slide",isAnimating:!1,isSecondFold:!1},methods:{triggerDownAnimation(e){const{isAnimating:t,isSecondFold:n,brandManifestoHeading:i,brandManifestoText:r}=Gp.variables;t||(Gp.variables.isAnimating=!0,n?(Qp.variables.disableUp=!0,Wp(i).removeClass("slide-up"),Wp(r).removeClass("slide-up")):Qp.variables.disableDown=!1,setTimeout((()=>{Gp.variables.isAnimating=!1,n&&(Gp.variables.isSecondFold=!1)}),1e3*e))},triggerUpAnimation(e){const{isAnimating:t,isSecondFold:n,brandManifestoHeading:i,brandManifestoText:r}=Gp.variables;t||(Gp.variables.isAnimating=!0,n?Qp.variables.disableUp=!1:(Qp.variables.disableDown=!0,Wp(i).addClass("slide-up"),Wp(r).addClass("slide-up")),setTimeout((()=>{Gp.variables.isAnimating=!1,n||(Gp.variables.isSecondFold=!0)}),1e3*e))},animateOnViewport(){const{brandManifestoGreeting:e,brandManifestoSlide:t,brandManifestoTitle:n}=Gp.variables;Wp(e).addClass("slide-down"),Wp(t).addClass("slide-up"),Wp(n).addClass("animate-title")},removeEmptyParagraphs(){const{brandManifestoDesc:e}=this.variables;Wp(`${e} p`).filter((function(){return"&nbsp;"===Wp(this).html().trim()})).remove()},initSwiper(){const{brandManifestoSwiper:e,brandManifestoGallery:t,swiperSlide:n}=this.variables,r=Wp(`${t} ${n}`).width(),a=Wp(window).width();new Dp(e,{modules:[Bp],slidesPerView:a/r,spaceBetween:9.5,loop:!0,speed:3e3,allowTouchMove:!1,simulateTouch:!1,noSwiping:!0,noSwipingClass:"swiper-slide",loopAdditionalSlides:3,autoplay:{delay:0,disableOnInteraction:!1},breakpoints:{[i.breakPoints.MEDIUM]:{spaceBetween:16},[i.breakPoints.EXTRA_EXTRA_EXTRA_LARGE]:{spaceBetween:19}}})},init(){this.initSwiper.call(Gp),this.removeEmptyParagraphs.call(Gp)}}};var jp=n(9755);const qp={variables:{feature:".feature-banner",featureWrapper:".feature-banner__swiper--wrapper",featureBannerSwiper:".feature-banner__swiper",featureBannerSlide:".feature-banner__swiper-slide",featureBannerPagination:".feature-banner__swiper--pagination",featureBannerVideo:".feature-banner__swiper-slide--video",featuredesktopVideo:".feature-banner__desktop-video",featuremobileVideo:".feature-banner__mobile-video",featurBannerSteps:".feature-banner__mode-details--steps",featureBannerDetails:".feature-banner__swiper-slide--details",featureBannerModeDetails:".feature-banner__mode-details",swiper:null,isAnimating:!1,count:0},methods:{handleVideoVisibility:function(e,t){const n=new IntersectionObserver(((e,n)=>{e.forEach((e=>{const n=e.target;e.isIntersecting&&!t.has(n)?n.play().catch((e=>console.log("Video play error:",e))):e.isIntersecting||n.pause()}))}),{root:null,rootMargin:"0px",threshold:.5});return e.each((function(){n.observe(this),this.addEventListener("ended",(function(){t.add(this)}))})),n},addSteps:function(e){const{featureBannerSlide:t,featurBannerSteps:n}=qp.variables,i=jp(e).find(t);i.each(((e,t)=>{jp(t).find(n).html(`${e+1}/${i.length}`)}))},handleSwiper:function(e){const{featureBannerSwiper:t,featureBannerSlide:n,featurBannerSteps:r,featureBannerPagination:a,featuredesktopVideo:s,featuremobileVideo:o}=qp.variables,l=jp(e).find(t),c=jp(e).find(n),d=window.innerWidth<=i.breakPoints.LARGE?o:s,u=jp(c).find(d),h=new Set;qp.variables.swiper=new Dp(l.get(0),{modules:[Np],freeMode:!0,spaceBetween:10,slidesPerView:"auto",speed:1e3,pagination:{el:a,clickable:!0},on:{init:function(){const e=qp.methods.handleVideoVisibility(u,h);this.observer=e;const t=jp(this.slides[0]).find(d).get(0);t&&!h.has(t)&&t.play().catch((e=>console.log("Video play error:",e)))},slideChange:function(){u.each((function(){this.pause()}));const e=this.activeIndex,t=jp(this.slides[e]).find(d).get(0);t&&!h.has(t)&&t.play().catch((e=>console.log("Video play error:",e)))},destroy:function(){this.observer&&this.observer.disconnect()}}})},handleScrollTriggerAnimation:function(e,t,n){const{swiper:i,isAnimating:r}=qp.variables;if(!r){qp.variables.isAnimating=!0,Qp.variables.disableUp=!0,Qp.variables.disableDown=!0;let e,r=i.activeIndex,a=i.slides.length;"next"!==t?(i.slidePrev(),e=r-1):(i.slideNext(),e=r+1),setTimeout((function(){qp.variables.isAnimating=!1,e<=0?(Qp.variables.disableUp=!0,Qp.variables.disableDown=!1):e>=a-1?(Qp.variables.disableUp=!1,Qp.variables.disableDown=!0):(Qp.variables.disableUp=!0,Qp.variables.disableDown=!0)}),1e3*n)}},addInitialStyle:function(e,t){e.removeClass("opacity-0"),e.css({opacity:0,transform:"translateY(100%)"}),t.css({opacity:0,transform:"translateX(-100%)"})},handleTranslation:function(e){const{featureBannerDetails:t,featureBannerModeDetails:n,featureBannerSlide:r,featuredesktopVideo:a,featuremobileVideo:s}=qp.variables;jp(e).find(r).each(((e,r)=>{const o=jp(r).find(t),l=jp(r).find(n),c=jp(r).find(a),d=jp(r).find(s);jp(r).data("add-animation")&&(qp.methods.addInitialStyle(o,l),window.innerWidth<=i.breakPoints.LARGE?qp.methods.handleFirstSlideAnimation(d[0],o,l):qp.methods.handleFirstSlideAnimation(c[0],o,l))}))},handleFirstSlideAnimation:function(e,t,n){e.addEventListener("ended",(function(){t.css({transition:"opacity 0.8s ease, transform 0.8s ease",opacity:1,transform:"translateY(0)"}),setTimeout((()=>{n.css({transition:"opacity 0.8s ease, transform 0.8s ease",opacity:1,transform:"translateX(0)"})}),300)}))},init:function(){const{feature:e}=qp.variables;jp(e).length>0&&jp(e).each(((e,t)=>{qp.methods.handleSwiper(t),qp.methods.addSteps(t),qp.methods.handleTranslation(t)}))}}};var Yp=n(9755);const Xp={variables:{mgFooterContainer:".mg-select__footer",mgFooterListHeading:".footer__navigation--heading",mgFooterListItem:".footer__navigation--content",mgFooterAccordionBTN:".footer__navigation__acc--btn",mgFooterScrolled:!1,mgFooterAnimating:!1},methods:{accordion:function(e,t=!0){if(!t)return;const{mgFooterListHeading:n,mgFooterListItem:r,mgFooterAccordionBTN:a}=this.variables,{CLICK:s}=i.eventsListeners,o=e.find(n),l=e.find(r);l.slideUp(300),e.find(n).addClass("active"),l.eq(0).addClass("active"),l.eq(0).siblings(`${a}.plus`).addClass("opacity-0"),l.eq(0).siblings(`${a}.minus`).removeClass("opacity-0"),l.eq(0).slideDown(300),o.on(s,(function(){const e=Yp(this),t=e.next(r);t.hasClass("active")?(t.removeClass("active"),e.siblings(`${a}.plus`).removeClass("opacity-0"),e.siblings(`${a}.minus`).addClass("opacity-0"),t.slideUp(300)):(t.addClass("active"),e.siblings(`${a}.plus`).addClass("opacity-0"),e.siblings(`${a}.minus`).removeClass("opacity-0"),t.slideDown(300))}))},mgFooterIsScrollable:function(e){const t=Yp(e)[0];if(!t)return!1;const n=t.scrollHeight>t.clientHeight,i=window.getComputedStyle(t).overflowY,r=["auto","scroll"].includes(i);return n&&r},mgFooterScrollHandle:function(e){const{WHEEL:t,TOUCHMOVE:n,TOUCHSTART:r}=i.eventsListeners;if(!Yp(Qp.variables.section).length)return;e.on(t,(function(e){const t=e.originalEvent.deltaY,n=Yp(this),i=n.scrollTop();t>0?Xp.variables.mgFooterScrolled=!0:t<0&&(Xp.variables.mgFooterScrolled?0===i&&setTimeout((()=>{Xp.variables.mgFooterScrolled=!1}),1400):Xp.variables.mgFooterAnimating||(Xp.variables.mgFooterAnimating=!0,Qp.variables.observer.enable(),Qp.variables.disableUp=!1,Qp.variables.disableDown=!1,n.addClass("overflow-hidden"),setTimeout((()=>{Xp.variables.mgFooterAnimating=!1,n.removeClass("overflow-hidden")}),1500)))}));let a=0;e.on(r,(function(e){a=e.originalEvent.touches[0].clientY})),e.on(n,(function(e){const t=e.originalEvent.touches[0].clientY,n=a-t,i=Yp(this),r=i.scrollTop();n>0?Xp.variables.mgFooterScrolled=!0:n<0&&(Xp.variables.mgFooterScrolled?0===r&&setTimeout((()=>{Xp.variables.mgFooterScrolled=!1}),100):Xp.variables.mgFooterAnimating||(Xp.variables.mgFooterAnimating=!0,Qp.variables.observer.enable(),Qp.variables.disableUp=!1,Qp.variables.disableDown=!1,Qp.methods.showPreviousSection.call(Qp,Qp.variables.currentIndex,.8),i.addClass("overflow-hidden"),setTimeout((()=>{Xp.variables.mgFooterAnimating=!1,i.removeClass("overflow-hidden")}),1100))),a=t}))},init:function(){const e=this,{mgFooterContainer:t}=Xp.variables,{MEDIUM:n}=i.breakPoints,r=Yp(t),a=Yp(window).width()<n;r.length&&r.each((function(t,n){const i=Yp(n);e.accordion.call(Xp,i,a),e.mgFooterScrollHandle.call(Xp,i)}))}}};var Kp=n(9755);const Zp={variables:{faqSection:".faq-accordion",faqPrevBtn:".faq-accordion__navigation--prev",faqNextBtn:".faq-accordion__navigation--next",faqHeading:".cmp-accordion__heading",faqFooter:".cmp-accordion__footer",faqAnimating:!1},methods:{bindEventListeners(){const{WHEEL:e,TOUCHMOVE:t}=i.eventsListeners,{faqSection:n,faqHeading:r,faqFooter:a}=this.variables;Kp(n).each((function(){Kp(this).on(`${e} ${t}`,(function(e){(Kp(e.target).is(`${n}`)||Kp(e.target).closest(`${r}, ${a}`).length)&&(Zp.variables.faqAnimating||(Zp.variables.faqAnimating=!0,Qp.variables.observer.enable(),Qp.variables.disableUp=!1,Qp.variables.disableDown=!1,setTimeout((()=>{Zp.variables.faqAnimating=!1}),1500)))}))}))},navigateToPrev(){const{faqPrevBtn:e}=this.variables;Kp(e).each((function(){Kp(this).on(i.eventsListeners.CLICK,(function(){Qp.methods.showPreviousSection.call(Qp,Qp.variables.currentIndex,.8)}))}))},navigateToNext(){const{faqNextBtn:e}=this.variables;Kp(e).each((function(){Kp(this).on(i.eventsListeners.CLICK,(function(){Qp.methods.showNextSection.call(Qp,Qp.variables.currentIndex,!1,.8)}))}))},init(){const{faqSection:e}=Zp.variables;Kp(e).length&&(this.navigateToNext.call(Zp),this.navigateToPrev.call(Zp),this.bindEventListeners.call(Zp))}}};var Jp=n(9755);const Qp={variables:{scrollerClass:"mg-select-scroller",section:".mg-select-scroller:visible",animating:!1,observer:null,whiteHeader:"mg-header-white",headerOverlay:Jp(".header__overlay"),headerHamburger:Jp(".header__hamburger"),lightHeader:"light-header",darkHeader:"dark-header",hideHeader:".hide-header",currentIndex:0,observerTimeout:null,disableUp:!1,disableDown:!1,scrollPercentage:0},methods:{showPreviousSection(e=Qp.variables.currentIndex,t=1.4){const{section:n,whiteHeader:r,headerOverlay:a,headerHamburger:s,lightHeader:o,darkHeader:l,disableDown:c,hideHeader:d}=this.variables,{paginationDotClass:u,activeDotClass:h}=wh.variables,p=Jp(n),m=Jp(window).height();if(clearTimeout(Qp.variables.observerTimeout),!Qp.variables.animating&&e>0&&!c){Qp.variables.animating=!0,Qp.variables.observer.disable(),Qp.variables.observerTimeout=setTimeout((()=>{n.find(Zp.variables.faqSection).length||Qp.variables.observer.enable()}),1e3*t);const n=Jp(p).eq(e-1),c=Jp(`.${u}`);c.length&&setTimeout((()=>{c.eq(Qp.variables.currentIndex).removeClass(h),c.eq(e-1).addClass(h)}),500*t);let f=Bu.timeline({onComplete:()=>{Qp.variables.animating=!1,Qp.variables.currentIndex=e-1,Jp(window).width()>=i.breakPoints.LARGE&&n.find(Mh.variables.mainSection).length||n.find(Gp.variables.brandManifestoSection).length?Qp.variables.disableDown=!0:(Qp.variables.disableDown=!1,Qp.variables.disableUp=!1),Jp(qp.variables.feature).data("scroll-section")&&n.find(qp.variables.feature).length&&(Qp.variables.disableDown=!0)}});if(Jp(n).hasClass(r)){setTimeout((()=>tm.methods.enableDarkHeader()),1e3);let i=Jp(n),r=Jp(a).height(),o=e-1;for(Jp(s).removeClass("slide-up"),Jp(a).removeClass("slide-up");Jp(i).length&&(f.to(i,{y:`${r}px`,duration:t,ease:"power1.inOut"},"start"),Jp(i).height()<m-r);)r+=Jp(i).height(),o++,i=Jp(p).eq(o);p.each(((e,n)=>{if(e<=o)return!0;f.to(n,{y:`${m}px`,duration:t,ease:"power1.inOut"},"start")}))}else{p.each(((n,i)=>{if(n<e)return!0;f.to(i,{y:`${m}px`,duration:t,ease:"power1.inOut"},"start")}));let i=n,r=i.height(),c=m,u=e-1;for(r<m||i.find(d).length?(Jp(s).addClass("slide-up"),Jp(a).addClass("slide-up")):(Jp(s).removeClass("slide-up"),Jp(a).removeClass("slide-up"));i.length;){const e=i.height();if(!(e<c)){f.to(i,{y:-1*(e-c)+"px",duration:t,ease:"power1.inOut"},"start"),i.hasClass(o)?setTimeout((()=>tm.methods.enableLightHeader()),1e3):i.hasClass(l)&&setTimeout((()=>tm.methods.enableDarkHeader()),1e3);break}f.to(i,{y:m-r+"px",duration:t,ease:"power1.inOut"},"start"),c-=e,u--,i=Jp(p).eq(u),r+=i.height()}}Jp(n).nextAll().find(Gp.variables.brandManifestoSection).length&&(Gp.methods.triggerDownAnimation(t),setTimeout((()=>{Qp.variables.disableUp&&(Qp.variables.disableUp=!1)}),1e3*t)),Jp(n).nextAll().find(Mh.variables.mainSection).length&&(Mh.methods.triggerDownAnimation(t),setTimeout((()=>{Qp.variables.disableUp&&(Qp.variables.disableUp=!1)}),1e3*t))}},showNextSection(e=Qp.variables.currentIndex,t=!1,n=1.4){const{section:r,whiteHeader:a,headerOverlay:s,headerHamburger:o,lightHeader:l,darkHeader:c,disableUp:d,hideHeader:u}=this.variables,{paginationDotClass:h,activeDotClass:p}=wh.variables,m=Jp(r),f=Jp(window).height();if(Jp(m).eq(e).find(".scroller-container").length&&Qp.variables.observer.disable(),clearTimeout(Qp.variables.observerTimeout),!Qp.variables.animating&&e<m.length-1&&!d){Qp.variables.observer.disable(),Qp.variables.animating=!0,Qp.variables.observerTimeout=setTimeout((()=>{d.find(Zp.variables.faqSection).length||d.find(Xp.variables.mgFooterContainer).length||Qp.variables.observer.enable(),d.find(Xp.variables.mgFooterContainer).length&&d.find(Xp.variables.mgFooterContainer).removeClass("overflow-hidden"),d.find(Xp.variables.mgFooterContainer).length&&!Xp.methods.mgFooterIsScrollable(d.find(Xp.variables.mgFooterContainer))&&Jp(window).width()>=i.breakPoints.MEDIUM&&Qp.variables.observer.enable();const t=(e+2)/Jp(r).length*100;t>Qp.variables.scrollPercentage&&(100===t&&Qp.variables.scrollPercentage<100?_satellite.track("scroll_100"):t>=75&&Qp.variables.scrollPercentage<75?_satellite.track("scroll_75"):t>=50&&Qp.variables.scrollPercentage<50?_satellite.track("scroll_50"):t>=25&&Qp.variables.scrollPercentage<25&&_satellite.track("scroll_25"),Qp.variables.scrollPercentage=t)}),1e3*n);const d=Jp(m).eq(e+1),g=Jp(`.${h}`);g.length&&setTimeout((()=>{g.eq(Qp.variables.currentIndex).removeClass(p),g.eq(e+1).addClass(p),Th.methods.hideTray(e+1)}),500*n);let v=Bu.timeline({onComplete:()=>{Qp.variables.animating=!1,Qp.variables.currentIndex=e+1,Jp(m).eq(e).find(".scroller-container").length&&(Qp.variables.observer.disable(),Jp(".scroller-container").scrollTop(.4)),Jp(window).width()>=i.breakPoints.LARGE&&d.find(Mh.variables.mainSection).length||d.find(Gp.variables.brandManifestoSection).length?Qp.variables.disableUp=!0:(Qp.variables.disableUp=!1,Qp.variables.disableDown=!1),Jp(qp.variables.feature).data("scroll-section")&&d.find(qp.variables.feature).length&&(Qp.variables.disableUp=!0)}});if(Jp(d).find(Gp.variables.brandManifestoSection).length&&Gp.methods.animateOnViewport(),Jp(d).hasClass(a)){setTimeout((()=>tm.methods.enableDarkHeader()),1e3),m.each(((t,i)=>{if(t>e)return!1;v.to(i,{y:-1*Jp(i).height()+"px",duration:n,ease:"power1.inOut"},"start")})),Jp(o).removeClass("slide-up"),Jp(s).removeClass("slide-up");let t=Jp(d),i=Jp(s).height(),r=e+1;for(;Jp(t).length&&(v.to(t,{y:`${i}px`,duration:n,ease:"power1.inOut"},"start"),Jp(t).height()<f-i);)i+=Jp(t).height(),r++,t=Jp(m).eq(r)}else{t&&m.each(((t,i)=>{if(t>e)return!1;v.to(i,{y:-1*Jp(i).height()+"px",duration:n,ease:"power1.inOut"},"start")}));const i=Jp(d).height();if(i<f){v.to(d,{y:f-i+"px",duration:n,ease:"power1.inOut"},"start"),Jp(o).addClass("slide-up"),Jp(s).addClass("slide-up");const t=Jp(m).eq(e),r=t.height();let a=t,u=i,h=r,p=e;for(;a.length;){if(a.height()>=f-u){v.to(a,{y:-1*(Jp(a).height()-(f-u))+"px",duration:n,ease:"power1.inOut"},"start"),a.hasClass(l)?setTimeout((()=>tm.methods.enableLightHeader()),1e3):a.hasClass(c)&&setTimeout((()=>tm.methods.enableDarkHeader()),1e3);break}v.to(a,{y:f-(i+h)+"px",duration:n,ease:"power1.inOut"},"start"),u+=a.height(),p--,a=Jp(m).eq(p),h+=Jp(a).height()}}else v.to(d,{y:"0px",duration:n,ease:"power1.inOut"},"start"),Jp(d).find(u).length?(Jp(o).addClass("slide-up"),Jp(s).addClass("slide-up")):(Jp(o).removeClass("slide-up"),Jp(s).removeClass("slide-up")),m.each(((t,i)=>{if(t>e)return!1;v.to(i,{y:-1*Jp(i).height()+"px",duration:n,ease:"power1.inOut"},"start")})),d.hasClass(l)?setTimeout((()=>tm.methods.enableLightHeader()),1e3):d.hasClass(c)&&setTimeout((()=>tm.methods.enableDarkHeader()),1e3)}(Jp(d).prevAll().find(Gp.variables.brandManifestoSection).length||Jp(d).hasClass("mg-footer")&&Jp(Gp.variables.brandManifestoSection).length)&&(Gp.methods.animateOnViewport(),Gp.methods.triggerUpAnimation(n),setTimeout((()=>{Qp.variables.disableDown&&(Qp.variables.disableDown=!1)}),1e3*n)),(Jp(d).prevAll().find(Mh.variables.mainSection).length||Jp(d).hasClass("mg-footer")&&Jp(Mh.variables.mainSection).length)&&(Mh.methods.triggerUpAnimation(n),setTimeout((()=>{Qp.variables.disableDown&&(Qp.variables.disableDown=!1)}),1e3*n))}},createObserver(){const{showPreviousSection:e,showNextSection:t}=this.methods,{WHEEL:n,TOUCH:r}=i.eventsListeners,{section:a}=Qp.variables;Bu.registerPlugin(yh),Qp.variables.observer=yh.create({axis:"y",lockAxis:!0,type:`${n}, ${r}`,wheelSpeed:-1,ignore:".ai-agent__bubble, .ai-agent__bubble *, .ai-agent, .ai-agent *",onDown:t=>{let n=.8;"wheel"===t.event.type&&(n=1.4),e.call(Qp,Qp.variables.currentIndex,n),Jp(Mh.variables.mainSection).length&&Jp(a).eq(Qp.variables.currentIndex).find(Mh.variables.mainSection).length>0&&Qp.variables.disableDown&&Mh.methods.triggerDownAnimation(n),Jp(Gp.variables.brandManifestoSection).length&&Jp(a).eq(Qp.variables.currentIndex).find(Gp.variables.brandManifestoSection).length>0&&Qp.variables.disableDown&&Gp.methods.triggerDownAnimation(n),Jp(qp.variables.feature).data("scroll-section")&&Jp(qp.variables.feature).length&&Jp(a).eq(Qp.variables.currentIndex).find(qp.variables.feature).length>0&&Qp.variables.disableDown&&qp.methods.handleScrollTriggerAnimation(qp.variables.feature,"prev",n)},onUp:e=>{let n=.8;"wheel"===e.event.type&&(n=1.4),t.call(Qp,Qp.variables.currentIndex,!1,n),Jp(Mh.variables.mainSection).length&&Jp(a).eq(Qp.variables.currentIndex).find(Mh.variables.mainSection).length>0&&Qp.variables.disableUp&&Mh.methods.triggerUpAnimation(n),Jp(Gp.variables.brandManifestoSection).length&&Jp(a).eq(Qp.variables.currentIndex).find(Gp.variables.brandManifestoSection).length>0&&Qp.variables.disableUp&&Gp.methods.triggerUpAnimation(n),Jp(qp.variables.feature).data("scroll-section")&&Jp(qp.variables.feature).length&&Jp(a).eq(Qp.variables.currentIndex).find(qp.variables.feature).length>0&&Qp.variables.disableUp&&qp.methods.handleScrollTriggerAnimation(qp.variables.feature,"next",n)},tolerance:30,preventDefault:!0});const s=.8;Jp("body").on("keydown",(function(n){"ArrowDown"==n.key&&(t.call(Qp,Qp.variables.currentIndex,!1,s),Jp(Mh.variables.mainSection).length&&Jp(a).eq(Qp.variables.currentIndex).find(Mh.variables.mainSection).length>0&&Qp.variables.disableUp&&Mh.methods.triggerUpAnimation(s),Jp(Gp.variables.brandManifestoSection).length&&Jp(a).eq(Qp.variables.currentIndex).find(Gp.variables.brandManifestoSection).length>0&&Qp.variables.disableUp&&Gp.methods.triggerUpAnimation(s),Jp(qp.variables.feature).data("scroll-section")&&Jp(qp.variables.feature).length&&Jp(a).eq(Qp.variables.currentIndex).find(qp.variables.feature).length>0&&Qp.variables.disableUp&&qp.methods.handleScrollTriggerAnimation(qp.variables.feature,"next",s)),"ArrowUp"==n.key&&(e.call(Qp,Qp.variables.currentIndex,s),Jp(Mh.variables.mainSection).length&&Jp(a).eq(Qp.variables.currentIndex).find(Mh.variables.mainSection).length>0&&Qp.variables.disableDown&&Mh.methods.triggerDownAnimation(s),Jp(Gp.variables.brandManifestoSection).length&&Jp(a).eq(Qp.variables.currentIndex).find(Gp.variables.brandManifestoSection).length>0&&Qp.variables.disableDown&&Gp.methods.triggerDownAnimation(s),Jp(qp.variables.feature).data("scroll-section")&&Jp(qp.variables.feature).length&&Jp(a).eq(Qp.variables.currentIndex).find(qp.variables.feature).length>0&&Qp.variables.disableDown&&qp.methods.handleScrollTriggerAnimation(qp.variables.feature,"prev",s))}));const o=1/Jp(a).length*100;o>Qp.variables.scrollPercentage&&(100===o&&Qp.variables.scrollPercentage<100?_satellite.track("scroll_100"):o>=75&&Qp.variables.scrollPercentage<75?_satellite.track("scroll_75"):o>=50&&Qp.variables.scrollPercentage<50?_satellite.track("scroll_50"):o>=25&&Qp.variables.scrollPercentage<25&&_satellite.track("scroll_25"),Qp.variables.scrollPercentage=o)},setSectionsPosition(){const e=Jp(this.variables.section);if(e.length<2)return;const t=e[0].offsetHeight;Bu.set(e[1],{y:t})},preventPullToRefresh(){let e=!1;Jp(document).on({[i.eventsListeners.TOUCHSTART]:function(){e=0===Jp(window).scrollTop()},[i.eventsListeners.TOUCHMOVE]:function(t){e&&t.originalEvent.touches[0].clientY>0&&t.preventDefault()}})},init(){const{section:e}=Qp.variables;Jp(e).length&&!Jp("main").data("iseditmode")&&(Jp(window).width()<=i.breakPoints.LARGE&&this.preventPullToRefresh(),requestAnimationFrame((()=>this.setSectionsPosition.call(Qp))),this.createObserver.call(Qp))}}};var em=n(9755);const tm={variables:{headerSection:".header-section",headerSplash:".header__splash",headerOverlay:".header__overlay",headerLogoContainer:".header__logo--main",headerHamburger:".header__hamburger",headerHamburgerBtn:".header__hamburger--btn",headerMain:".header__main",activeIndex:[],activeAccordionIndex:[],activeMainIndex:0,headerTab:".header__main--tab",headerTabDesktop:".header__tab--larger",headerTabContent:".header__main--content",headerLogoDark:".header__logo--dark",headerClose:".header__close",headerPlaceholder:".header-placeholder",headerFixed:"header-fixed",headerThemes:".light-header, .dark-header",headerUserInfo:".header__user__info",headerVideo:".header__content--video",headerPage:".header-new-section__page",headerAccordionTab:".header__accordion--tab",headerAccordionContent:".header__accordion--tab-panel",tabsType:null},methods:{generateDynamicIds(){const{headerMain:e,headerHamburgerBtn:t,headerSection:n}=this.variables;em(e).each((function(){const e=s(10);em(this).attr("id",e),em(this).closest(n).find(t).attr("aria-controls",e)}))},hideHeader(e){const{headerMain:t,headerLogoDark:n,headerOverlay:i,headerClose:r,headerHamburgerBtn:a,headerPage:s,headerTab:o,headerVideo:l}=this.variables;em(e).find(a).attr("aria-expanded","false").removeClass("close-btn"),em(e).find(n).removeClass("show-dark"),em(e).find(t).removeClass("slide-in-animation"),em(e).find(i).removeClass("slide-down"),em(e).find(r).addClass("d-none"),em("html, body").removeClass("overflow-hidden"),em(Qp.variables.section).length&&Qp.variables.observer.enable(),em(e).find(s).find(".page-close-icon").trigger("click"),em(e).find(l).each((function(){this.pause()}));const c=em(e).find(o);innerWidth>=768?(c.removeClass("active").addClass("opacity-50"),c.eq(0).removeClass("opacity-50").addClass("active")):c.addClass("active").removeClass("opacity-50")},showHeader(e){const{headerMain:t,headerLogoDark:n,headerOverlay:i,headerClose:r,headerHamburgerBtn:a,headerVideo:s}=this.variables;em(e).find(a).attr("aria-expanded","true").addClass("close-btn"),em(e).find(n).addClass("show-dark"),em(e).find(t).addClass("slide-in-animation"),em(e).find(i).addClass("slide-down"),em(e).find(r).removeClass("d-none"),em(e).find(s).each((function(){this.play()})),em("html, body").addClass("overflow-hidden"),em(Qp.variables.section).length&&Qp.variables.observer.disable()},toggleHeader(e){const{headerHamburgerBtn:t,headerClose:n,headerUserInfo:r}=this.variables,{hideHeader:a,showHeader:s}=this.methods;em(e).find(t).on(i.eventsListeners.CLICK,(function(){"true"==em(this).attr("aria-expanded")?(a.call(tm,em(e)),em(r).slideUp("slow")):(s.call(tm,em(e)),em(r).slideDown("slow"))})),em(e).find(n).on(i.eventsListeners.CLICK,(function(){a.call(tm,em(e)),em(r).slideUp("slow")}))},isTouchingHeader(e,t){const n=em(e)[0].getBoundingClientRect(),i=em(t)[0].getBoundingClientRect();return i.top<=n.bottom&&i.bottom>=n.top},changeThemeOnScroll(){const{changeHeaderTheme:e}=this.methods;em(window).on(i.eventsListeners.SCROLL,(function(){e.call(tm)}))},changeHeaderTheme(){const{headerThemes:e,headerLogoContainer:t}=this.variables,{enableDarkHeader:n,enableLightHeader:i,isTouchingHeader:r}=this.methods,a=em(e);em(a).each((function(){r(em(t),em(this))&&(em(this).hasClass("light-header")?i():em(this).hasClass("dark-header")&&n())}))},updateTabsOnResize(e){const{changeTabs:t}=this.methods;em(window).on(i.eventsListeners.RESIZE,(function(){em(window).width()<i.breakPoints.EXTRA_LARGE?"large"==tm.variables.tabsType&&(tm.variables.tabsType="small",t.call(tm,e)):"small"==tm.variables.tabsType&&(tm.variables.tabsType="large",t.call(tm,e))}))},resetPage(e,t){const{headerTabDesktop:n,headerTabContent:i,headerAccordionTab:r,headerAccordionContent:a}=this.variables,s=em(e).find(n),o=em(e).find(i);em(s).find(r).removeClass("active").addClass("opacity-50").attr("aria-selected","false"),em(s).find(a).removeClass("active").attr("aria-hidden","true"),em(s).removeClass("show-gradient"),em(s).eq(0).find(r).addClass("active").removeClass("opacity-50").attr("aria-selected","true"),em(s).eq(0).find(a).addClass("active").attr("aria-hidden","false"),em(s).eq(0).addClass("show-gradient"),em(o).addClass("opacity-0 pe-none z-n1 position-absolute top-0").removeClass("position-relative").attr("aria-hidden","true"),em(o).eq(0).removeClass("opacity-0 pe-none z-n1 position-absolute top-0").addClass("position-relative").attr("aria-hidden","false"),em(e).addClass("opacity-0 pe-none z-n1 position-absolute top-0").removeClass("position-relative-md active").attr("aria-hidden","true"),tm.variables.activeAccordionIndex[t]=0,tm.variables.activeIndex[t]=0,tm.variables.activeMainIndex=0,innerWidth>=768&&0==t&&em(e).removeClass("opacity-0 pe-none z-n1 position-absolute top-0").addClass("position-relative-md active").attr("aria-hidden","true"),innerWidth>=768&&(em(s).find(a).addClass("active").attr("aria-hidden","false"),em(o).eq(0).parent().scrollTop(0),em(e).scrollTop(0))},initializeTabs(e){const t=this,{headerPage:n,headerTab:i}=t.variables,{resetPage:r}=t.methods,a=em(e).find(n),s=em(e).find(i);innerWidth>=768?(s.removeClass("active").addClass("opacity-50"),s.eq(0).removeClass("opacity-50").addClass("active")):s.addClass("active").removeClass("opacity-50"),a.each((function(e,n){r.call(t,n,e)}))},showSingleOpenTab(e,t,n,i,r,a){em(e).eq(r).attr("aria-selected","false"),em(e).eq(i).attr("aria-selected","true"),em(t).eq(r).addClass("opacity-0 pe-none z-n1 position-absolute top-0").removeClass("position-relative").attr("aria-hidden","true"),em(t).eq(i).removeClass("opacity-0 pe-none z-n1 position-absolute top-0").addClass("position-relative").attr("aria-hidden","false"),a&&(em(e).eq(r).removeClass("show-gradient").find(n).addClass("opacity-50"),em(e).eq(i).addClass("show-gradient").find(n).removeClass("opacity-50"),em(t).eq(i).parent().scrollTop(0))},changeTabs(e){const t=this,{headerPage:n,headerTab:r,headerTabDesktop:a,headerTabContent:s,headerAccordionTab:o,headerAccordionContent:l}=t.variables,{resetPage:c,showSingleOpenTab:d}=t.methods,u=em(e).find(n),h=em(e).find(r);tm.variables.activeIndex=new Array(u.length).fill(0),h.each((function(e){em(this).on(i.eventsListeners.CLICK,(function(){let t=tm.variables.activeMainIndex;(e=e>=h.length?e-h.length:e)!=t?(em(h).eq(t).attr("aria-selected","false"),em(h).eq(e).attr("aria-selected","true"),em(u).eq(t).addClass("opacity-0 pe-none z-n1 position-absolute top-0").removeClass("position-relative-md active").attr("aria-hidden","true"),em(u).eq(e).removeClass("opacity-0 pe-none z-n1 position-absolute top-0").addClass("position-relative-md active").attr("aria-hidden","false"),tm.variables.activeMainIndex=e,innerWidth>=768&&(em(h).eq(t).removeClass("active").addClass("opacity-50"),em(h).eq(e).addClass("active").removeClass("opacity-50"))):e==t&&innerWidth<768&&(em(h).eq(e).attr("aria-selected","true"),em(u).eq(e).removeClass("opacity-0 pe-none z-n1 position-absolute top-0").addClass("position-relative-md active").attr("aria-hidden","false"),tm.variables.activeMainIndex=e)}))})),u.each((function(e,t){const n=em(t).find(a),r=em(t).find(s),l=em(t).data("open-all");n.each((function(t,a){em(this).on(i.eventsListeners.CLICK,(function(){let i=tm.variables.activeIndex[e];if(t=t>=n.length?t-n.length:t,innerWidth>=768)t!=i&&(d(n,r,o,t,i,innerWidth>=768),tm.variables.activeIndex[e]=t);else if(innerWidth<768)if(l){let e=em(n).eq(t),i=em(r).eq(t);e.hasClass("show-gradient")?i.removeClass("opacity-0 pe-none z-n1 position-absolute top-0").addClass("position-relative"):i.addClass("opacity-0 pe-none z-n1 position-absolute top-0").removeClass("position-relative")}else if(t!=i)d(n,r,o,t,i,innerWidth>=768),tm.variables.activeIndex[e]=t;else{let i=em(n).eq(t),a=em(r).eq(t);i.hasClass("show-gradient")?a.removeClass("opacity-0 pe-none z-n1 position-absolute top-0").addClass("position-relative").attr("aria-hidden","false"):a.addClass("opacity-0 pe-none z-n1 position-absolute top-0").removeClass("position-relative").attr("aria-hidden","true"),tm.variables.activeIndex[e]=t}}))}))})),innerWidth<768&&(tm.variables.activeAccordionIndex=new Array(u.length).fill(0),u.each((function(e,t){const n=em(t).find(a),r=em(t).data("open-all");n.each((function(t,a){em(a).find(o).on(i.eventsListeners.CLICK,(function(){let i=tm.variables.activeAccordionIndex[e];if(t=t>=n.length?t-n.length:t,r){let e=em(n).eq(t).find(o),i=em(n).eq(t).find(l),r=em(n).eq(t);e.hasClass("active")?(e.removeClass("active").addClass("opacity-50").attr("aria-selected","false"),i.removeClass("active").attr("aria-hidden","true"),r.removeClass("show-gradient")):(e.addClass("active").removeClass("opacity-50").attr("aria-selected","true"),i.addClass("active").attr("aria-hidden","false"),r.addClass("show-gradient"))}else if(t!=i)em(n).eq(i).find(o).removeClass("active").addClass("opacity-50").attr("aria-selected","false"),em(n).eq(t).find(o).addClass("active").removeClass("opacity-50").attr("aria-selected","true"),em(n).eq(i).find(l).removeClass("active").attr("aria-hidden","true"),em(n).eq(t).find(l).addClass("active").attr("aria-hidden","false"),em(n).eq(i).removeClass("show-gradient"),em(n).eq(t).addClass("show-gradient"),tm.variables.activeAccordionIndex[e]=t;else if(t==i){let e=em(n).eq(t).find(o),i=em(n).eq(t).find(l),r=em(n).eq(t);e.hasClass("active")?(e.removeClass("active").addClass("opacity-50").attr("aria-selected","false"),i.removeClass("active").attr("aria-hidden","true"),r.removeClass("show-gradient")):(e.addClass("active").removeClass("opacity-50").attr("aria-selected","true"),i.addClass("active").attr("aria-hidden","false"),r.addClass("show-gradient"))}}))}))}))),em(e).find(n).each((function(e,n){em(n).find(".page-close-icon").on(i.eventsListeners.CLICK,(function(){c.call(t,n,e)}))}))},triggerSplash(e){const{headerSplash:t,headerOverlay:n,headerLogoContainer:i,headerHamburger:r,headerThemes:a}=this.variables,{enableDarkHeader:s}=this.methods;em(e).find(`${t},\n                ${n},\n                ${i},\n                ${r}`).addClass("animate"),em(a).eq(0).hasClass("dark-header")&&s(),setTimeout((()=>{em(t).addClass("d-none")}),800)},enableLightHeader(){const{headerSection:e,headerOverlay:t}=tm.variables;em(e).removeClass("header__dark").addClass("header__light"),em(t).removeClass("bg-white")},enableDarkHeader(){const{headerSection:e,headerOverlay:t}=tm.variables;em(e).addClass("header__dark").removeClass("header__light"),em(t).removeClass("bg-white")},toggleHeaderOnScroll(e){let t=0;const{headerOverlay:n,headerHamburger:r,headerPlaceholder:a}=this.variables;0==em(e).closest(a).length&&em(window).on(i.eventsListeners.SCROLL,(function(){const i=em(this).scrollTop();i>t?(em(e).find(r).addClass("slide-up"),em(e).find(n).addClass("slide-up")):i<t&&(em(e).find(r).removeClass("slide-up"),em(e).find(n).removeClass("slide-up")),t=i<=0?0:i}))},init(){const e=this,{headerSection:t,headerFixed:n}=tm.variables,i=em(t);i.length&&(this.generateDynamicIds.call(tm),i.each((function(){e.initializeTabs.call(tm,em(this)),e.changeTabs.call(tm,em(this)),e.toggleHeader.call(tm,em(this)),!em(Qp.variables.section).length&&em("body").hasClass(n)&&(e.toggleHeaderOnScroll.call(tm,em(this)),e.changeThemeOnScroll.call(tm))})))},initOnLoad(){const e=this,{headerSection:t}=tm.variables,n=em(t);n.length&&requestAnimationFrame((()=>{n.each((function(){e.triggerSplash.call(tm,em(this))}))}))}}};var nm=n(9755);const im={variable:{cardBannerContainer:".mg__card__banner--container",cardSwiperContainer:".mg__card--swiper",cardSwiperPagination:".mg__swiper--pagination",carContainer:".mg__card--container"},methods:{initializingSwiper:function(){const{cardBannerContainer:e,cardSwiperContainer:t,cardSwiperPagination:n,carContainer:r}=im.variable,{EXTRA_SMALL:a,SMALL:s,MEDIUM:o,LARGE:l}=i.breakPoints,c=nm(e),d=nm(window);c.each((function(e,i){const s=nm(i),c=s.find(t),u=s.find(n);Math.min(3,s.find(r).length);(d.width()>=a&&s.find(r).length>1||d.width()>=o&&d.width()<l&&s.find(r).length>=2||d.width()>=l&&s.find(r).length>=3)&&im.methods.swiperInit(c,u)}))},swiperInit:function(e,t){const{EXTRA_SMALL:n,SMALL:r,MEDIUM:a,LARGE:s}=i.breakPoints;new Dp(e[0],{modules:[Np],freeMode:!0,spaceBetween:10,centeredSlides:!1,centerInsufficientSlides:!0,pagination:{el:t[0],clickable:!0},breakpoints:{[n]:{slidesPerView:1.2},[r]:{slidesPerView:1.5},[a]:{slidesPerView:2},[s]:{slidesPerView:3}}})},addViewPorts:e=>{nm(e).closest(".mg-select-tabs").length>0&&nm(e).addClass("with-tab")},init:function(){const{cardBannerContainer:e}=im.variable;nm(e).length&&(this.initializingSwiper.call(im),this.addViewPorts(e))}}};var rm=n(9755);const am={variables:{productShowcaseSection:".product-showcase",productShowcaseToggleDark:".product-showcase__toggle--dark",productShowcaseToggleLight:".product-showcase__toggle--light",productShowcaseToggleTheme:".product-showcase__overlay",productShowcaseBgDark:".product-showcase__background--dark",productShowcaseImageDark:".product-showcase__swiper--image-dark",productShowcaseSwiper:".product-showcase__swiper",productShowcaseNext:".swiper-button-next",productShowcasePrev:".swiper-button-prev",productShowcasePagination:".swiper-pagination",productShowcaseContent:".car-models-carousel__content"},methods:{setLightTheme(){const{productShowcaseToggleLight:e,productShowcaseToggleDark:t,productShowcaseBgDark:n,productShowcaseSection:i,productShowcaseImageDark:r}=this.variables,{enableDarkHeader:a}=tm.methods,{section:s}=Qp.variables;a(),rm(e).addClass("opacity-0"),rm(r).addClass("opacity-0"),rm(t).removeClass("opacity-0"),rm(n).addClass("opacity-0"),rm(i).closest(s).removeClass("light-header").addClass("dark-header")},setDarkTheme(){const{productShowcaseToggleLight:e,productShowcaseToggleDark:t,productShowcaseBgDark:n,productShowcaseSection:i,productShowcaseImageDark:r}=this.variables,{enableLightHeader:a}=tm.methods,{section:s}=Qp.variables;a(),rm(e).removeClass("opacity-0"),rm(r).removeClass("opacity-0"),rm(t).addClass("opacity-0"),rm(n).removeClass("opacity-0"),rm(i).closest(s).addClass("light-header").removeClass("dark-header")},handleToggleTheme(){const{productShowcaseToggleLight:e,productShowcaseToggleTheme:t}=this.variables,{headerHamburgerBtn:n,headerLogoDark:r}=tm.variables,{setLightTheme:a,setDarkTheme:s}=this.methods,{CLICK:o}=i.eventsListeners;rm(t).on(o,(function(){rm(e).hasClass("opacity-0")?s.call(am):a.call(am),rm(n).addClass("hamburger-transition"),rm(r).addClass("logo-transition")}))},initializeSwiper(){const{productShowcaseSwiper:e,productShowcaseNext:t,productShowcasePrev:n,productShowcasePagination:i,productShowcaseContent:r}=am.variables,{handleSwiperAutoplay:a}=this.methods,s=rm(e).find(t)[0],o=rm(e).find(n)[0],l=rm(e).find(i)[0],c={delay:rm(e).data("delay"),stopOnLastSlide:!0,pauseOnMouseEnter:rm(e).data("auto-pause")},d=1==rm(e).data("autoplay")&&c,u=rm(e).data("loop"),h=new Dp(e,{modules:[Np,Lp,Rp,Bp],slidesPerView:1,resistanceRatio:0,loop:u,autoplay:d,navigation:{nextEl:s,prevEl:o},pagination:{el:l,clickable:!0},keyboard:!0,slidesPerView:1,on:{slideChangeTransitionEnd(){const e=this.slides[this.activeIndex],t=this.slides[this.previousIndex],n=parseInt(e.getAttribute("data-swiper-slide-index"),10),i=parseInt(t?.getAttribute("data-swiper-slide-index"),10);rm(r).eq(i).addClass("opacity-0 pe-none z-n1"),rm(r).eq(n).removeClass("opacity-0 pe-none z-n1")}}});a.call(am,h)},handleSwiperAutoplay(e){const{productShowcaseSwiper:t}=this.variables;if(1==rm(t).data("autoplay")){const n=rm(t).get(0),i=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting?e.autoplay.start():e.autoplay.stop()}))}),{threshold:.5});i.observe(n)}},init(){const{productShowcaseSection:e}=am.variables;rm(e).length&&(ks.methods.isIos()&&rm("body").addClass("ios"),this.handleToggleTheme.call(am),window.addEventListener("load",(()=>{this.initializeSwiper.call(am)})))}}};var sm=n(9755);const om={variables:{newsletterContainer:".newsletter.mg-select__form",newsletterForm:".newsletter__form",newsletterInput:".newsletter__form-input",newsLetterError:".newsletter__form--error",newsletterModal:".newsletter__modal",newsletterModalData:".newsletter__modal-data",modal:null},methods:{validateForm(e){const{newsletterContainer:t}=this.variables;return Os.methods.handleSubmitValidation(e,t)},formatDate(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`},async isEmailValid(e){try{const{newsletterInput:t}=this.variables,n=sm(e).find(`${t}[name="email"]`);Bt.method.showLoader();return"clean"==(await Os.methods.isEmailValid(n)).email_status||(Os.methods.showEmailError(n),Bt.method.hideLoader(),!1)}catch(e){return alert("Something Went Wrong"),console.error("An error occured: ",e),Bt.method.hideLoader(),!1}},getApiResponse(e){const{newsletterForm:t}=this.variables,n=sm(t).data("newsletter-url"),i=sm(t).data("newsletter-api-key"),r=JSON.stringify(e);return kt.ajaxHit(n,"POST",r,i)},getRequestData(e){const{newsletterInput:t}=this.variables,{formatDate:n}=this.methods,i=n(new Date);return{MID:1234554401535,email:sm(e).find(`${t}[name="email"]`).val(),source:"MGSelect Leads",leadCaptureTimestamp:i,emailValidated:1,dealerCode:"mgmotor",marketingConsent:"1",marketingConsentTimestamp:i}},submitForm(e){const{newsletterForm:t}=this.variables,{validateForm:n,isEmailValid:r,getRequestData:a,getApiResponse:s,showModal:o}=this.methods,l=sm(e).find(t);sm(e).find(t).on(i.eventsListeners.SUBMIT,(async function(e){e.preventDefault();if(n.call(om,this)){if(await r.call(om,this)){const e=a.call(om,this);s.call(om,e).done((e=>{Bt.method.hideLoader(),null!=e.MID?(this.reset(),o.call(om,l,"success")):o.call(om,l,"submit-failure")})).fail((e=>{o.call(om,l,"api-failure"),Bt.method.hideLoader()}))}}}))},generateValidationSchema(e){const{newsletterInput:t,newsletterContainer:n}=this.variables,i=[];sm(e).find(t).each((function(){i.push(sm(this).attr("name"))})),Ct.methods.generateFormSchema.call(Ct,i,e,n)},initModal(e){const{newsletterModal:t}=this.variables,n=sm(".page").find(t);n&&n.length&&(om.variables.modal=Cs.methods.initModal(n))},showModal(e,t){const{modal:n,newsletterContainer:i,newsletterModal:r,newsletterModalData:a}=this.variables;if(!n||!sm(r).length)return;const s=sm(r).find(Cs.variables.modalTitle),o=sm(r).find(Cs.variables.modalMessage),l=sm(i).find(a).data(`${t}-title`)??"",c=sm(i).find(a).data(`${t}-subtitle`)??"";sm(s).text(l),sm(o).text(c),n.show()},init(){const e=this,{newsletterContainer:t}=om.variables,n=sm(t);n.length&&n.each((function(){e.initModal.call(om,this),e.submitForm.call(om,this),e.generateValidationSchema.call(om,this),Os.methods.handleBlurValidation(this,t),Os.methods.handleInputValidation(this,t)}))}}};var lm={setCookie(e,t,n){const i=new Date;i.setDate(i.getDate()+n),document.cookie=`${e}=${t}; expires=${i.toUTCString()}; path=/`},getCookie(e){const t=document.cookie.split("; ");for(const n of t){const[t,i]=n.split("=");if(t===e)return i}return null}},cm=n(9755);const dm={variables:{container:".cookie-consent__container",cookieName:"privacy-cookie-consent",cookieConsentSection:".cookie-consent",acceptBtn:".cookie-consent__accept",rejectBtn:".cookie-consent__reject",closeBtn:".cookie-consent__close",delay:1e4,expiryDays:30},methods:{handleClick(){const{acceptBtn:e,rejectBtn:t,closeBtn:n,container:r,cookieName:a,expiryDays:s}=this.variables;cm(e).on(i.eventsListeners.CLICK,(function(){cm(r).removeClass("slide-in"),lm.setCookie(a,"accepted",s)})),cm(t).on(i.eventsListeners.CLICK,(function(){cm(r).removeClass("slide-in"),lm.setCookie(a,"rejected",s)})),cm(n).on(i.eventsListeners.CLICK,(function(){cm(r).removeClass("slide-in")}))},showCookieConsent(){const{container:e,cookieName:t,delay:n}=this.variables;lm.getCookie(t)||setTimeout((()=>{cm(e).addClass("slide-in")}),n)},init(){const{cookieConsentSection:e}=dm.variables;cm(e).length&&(this.showCookieConsent.call(dm),this.handleClick.call(dm))}}};var um=n(9755),hm=n.n(um);const pm={methods:{initializeSwiper(e){const t=hm()(e).find(".timeline-card"),n=[...t].map((e=>e.getAttribute("data-year"))),r=Array.from(n).sort(),a=Array.from(new Set(n)).sort(),s=hm()(e).find(".start-year"),o=hm()(e).find(".end-year"),l=hm()(e).find(".current-year"),c=this.createInfiniteTimelineScales(r,e,{distanceBetweenMainScales:350,smallScaleCount:20});r.length>0?(s.text("2020").addClass("opacity-0"),l.text(r[0]),r.length>=2&&o.text(r[1])):(s.text("N/A"),o.text("N/A"));const d=hm()(e).find(".timeline-swiper-container").get(0);let u={modules:[Np,Lp,Rp,Ip],grabCursor:!0,initialSlide:1,pagination:{el:".timeline-swiper-pagination",clickable:!0,renderBullet:function(e,t){return`<span class="${t}" data-year="${r[e]||r[r.length-1]||""}"></span>`}},on:{slideChange:function(){const t=hm()(e).find(".swiper-pagination-bullet-active").data("year"),n=a.indexOf(String(t)),i=n>0&&a[n-1],r=n<a.length-1&&a[n+1];l.text(t),i?s.text(i).removeClass("opacity-0"):s.text("2020").addClass("opacity-0"),r?o.text(r).removeClass("opacity-0"):o.text("2025").addClass("opacity-0"),c.centerOnId(t)}},loop:!0,breakpoints:{[i.breakPoints.EXTRA_SMALL]:{slidesPerView:1.2,spaceBetween:10},[i.breakPoints.MEDIUM]:{slidesPerView:2.3,spaceBetween:10},[i.breakPoints.LARGE]:{slidesPerView:"auto",spaceBetween:24}}};hm()(window).width()>i.breakPoints.LARGE?(u.slidesPerView="auto",u.spaceBetween=24,u.centeredSlides=!0):(u.effect="slide",u.slidesPerView=1.2,u.spaceBetween=10);const h=new Dp(d,u);h.slideToLoop(0,500),c.centerOnId(r[0]);const p=hm()(e).find(".timeline-card");p.each(((e,t)=>{hm()(t).removeClass("odd-slide even-slide"),e%2==0?hm()(t).addClass("even-slide"):hm()(t).addClass("odd-slide");const n=hm()(t).find(".overlay");hm()(n).on(i.eventsListeners.CLICK,(function(){const e=hm()(t).find(".timeline-card-tooltip");p.each(((e,n)=>{if(n!==t){const e=hm()(n).find(".overlay"),t=hm()(n).find(".timeline-card-tooltip");hm()(n).removeClass("active"),e.find("span").text("+"),t.addClass("handle-vh")}}));const i=hm()(t).toggleClass("active").hasClass("active");n.find("span").text(i?"-":"+"),e.toggleClass("handle-vh",!i)}))})),hm()(window).width()>i.breakPoints.LARGE&&this.moveSlides(h,t,c,p)},moveSlides(e,t,n,r){e.params.loopAdditionalSlides=3,e.params.watchSlidesProgress=!0,e.params.observer=!0,e.params.observeParents=!0,e.update(),r.on(i.eventsListeners.CLICK,(function(i){if(0===hm()(i.target).closest(".overlay, .timeline-card-tooltip").length){const i=this,r=hm()(i).attr("data-year"),a=[...t].indexOf(i);if(-1!==a){const t=e.params.loop?e.realIndex=a:a;e.params.loop?e.slideToLoop(t,500):e.slideTo(t,500),n.centerOnId(r)}}}))},createInfiniteTimelineScales(e,t,n={}){const i=hm().extend({},{mainScaleHeight:25,smallScaleHeight:10,distanceBetweenMainScales:100,smallScaleCount:4,mainScaleColor:"#a9a9a9",smallScaleColor:"#a9a9a9",showLabels:!1},n),r=hm()(t).find(".timeline-scales__wrapper--scales");r.empty(),r.css({overflowX:"auto",overflowY:"hidden",position:"relative",height:i.mainScaleHeight+10+"px"});const a=e.length*i.distanceBetweenMainScales,s=3*a,o=hm()("<div>").css({position:"relative",width:s+"px",height:"100%"});for(let t=0;t<3;t++)e.forEach(((n,r)=>{const s=t*a+r*i.distanceBetweenMainScales,l=hm()("<div>").css({position:"absolute",left:s+"px",height:i.mainScaleHeight+"px",width:"1px",backgroundColor:i.mainScaleColor,bottom:0}).attr("data-id",n);if(i.showLabels){const e=hm()("<div>").css({position:"absolute",top:i.mainScaleHeight+2+"px",transform:"translateX(-50%)",fontSize:"10px",color:i.mainScaleColor}).text(n);l.append(e)}if(o.append(l),r<e.length-1||t<2){const e=i.distanceBetweenMainScales/(i.smallScaleCount+1);for(let t=1;t<=i.smallScaleCount;t++){const n=hm()("<div>").css({position:"absolute",left:s+t*e+"px",height:i.smallScaleHeight+"px",width:"1px",backgroundColor:i.smallScaleColor,bottom:0});o.append(n)}}}));const l=s-i.distanceBetweenMainScales,c=i.distanceBetweenMainScales/(i.smallScaleCount+1);for(let e=1;e<=i.smallScaleCount;e++){const t=hm()("<div>").css({position:"absolute",left:l+e*c+"px",height:i.smallScaleHeight+"px",width:"1px",backgroundColor:i.smallScaleColor,bottom:0});o.append(t)}return r.append(o),r.centerOnId=function(e){o.find("[data-id]").css({backgroundColor:i.mainScaleColor,height:i.mainScaleHeight+"px"});const t=o.find(`[data-id="${e}"]`);if(t.length>0){const e=Math.min(Math.floor(t.length/2),t.length-1),n=t.eq(e);n.css({backgroundColor:"#0B0A06",height:"40px"});const i=r.width(),a=n.position().left-i/2;r.animate({scrollLeft:a},45)}},r},addViewPorts:e=>{hm()(e).closest(".mg-select-tabs").length>0&&hm()(e).addClass("with-tab")},init(){hm()(".timeline-container").length>0&&hm()(".timeline-container").each(((e,t)=>{this.initializeSwiper(t),this.addViewPorts(t)}))}}};var mm=n(3493),fm=n.n(mm),gm=n(9755);const vm={variables:{productBannerWrapper:".product__banner--wrapper",productBannerContainer:".product__banner--container",productBannerCanvasEl:".product__banner--canvas",productBannerVideoDuration:".product__banner__video--duration",productBannerVideoSeekBar:".product__banner__video--seekbar",productBannerTitle:".product__banner--title",productBannerDesc:".product__banner--desc",productBannerFallBackImg:".product__banner__fallback--img",productBannerCanvasLoader:".product__banner__canvas--loader",productBannerContent:".product__banner__video--content"},methods:{getDeviceAttr:function(e,t){const n=t.data("frame-path"),i=t.data("frame-count"),r=t.data("video-duration"),a=t.data("frame-extension");return{mobile:{framePath:t.data("mobile-frame-path")||n,frameCount:t.data("mobile-frame-count")||i,videoDuration:t.data("mobile-video-duration")||r,frameExtension:t.data("mobile-frame-extension")||a},desktop:{framePath:t.data("desktop-frame-path")||n,frameCount:t.data("desktop-frame-count")||i,videoDuration:t.data("desktop-video-duration")||r,frameExtension:t.data("desktop-frame-extension")||a}}[e]},isMobile:function(){const{WINDOW:e}=i.eventsListeners,{LARGE:t}=i.breakPoints;return gm(e).width()>t?"desktop":"mobile"},preloadImages:async function(e,t){const n=this,{productBannerContainer:i}=n.variables,r=e.find(i),{isMobile:a,getDeviceAttr:s}=n.methods,o=s(a(),r).framePath,l=s(a(),r).frameCount,c=s(a(),r).frameExtension,d=[];t.loadedImages={};for(let e=1;e<=l;e++){const i=new Image;i.src=n.methods.currentFrame(o,e,c);const r=new Promise(((n,r)=>{i.onload=()=>{t.loadedImages[e]=i,n()},i.onerror=()=>{console.error(`Failed to load image at ${i.src}`),r()}}));d.push(r)}return Promise.all(d)},setOnLoadScreen:function(e,t){const n=this,{productBannerContainer:r,productBannerVideoSeekBar:a,productBannerCanvasEl:s,productBannerFallBackImg:o,productBannerContent:l}=n.variables,{WINDOW:c}=i.eventsListeners,d=e.find(r),u=d.find(a),h=d.find(o);d.find(l);Qp.variables.currentIndex===t.sectionIndex&&Qp.variables.observer.disable(),t.productCanvasFail=!0,h.addClass("d-none");const p=d.find(s),m=gm(c).height(),f=gm(c).width(),{isMobile:g,getDeviceAttr:v}=n.methods,_=v(g(),d).frameCount;p.attr("width",f),p.attr("height",m),u.prop("max",_),n.methods.loadImage(n,d,t,1)},loadImage:function(e,t,n,i){const{productBannerFallBackImg:r}=e.variables,a=n.loadedImages[i],s=t.find(r);a?(s.addClass("d-none"),e.methods.drawImageToFitCanvas(e,t,a)):s.removeClass("d-none")},currentFrame:function(e,t,n){return`${e}${t.toString().padStart(4,"0")}${n}`},drawImageToFitCanvas:function(e,t,n){const{productBannerCanvasEl:i}=e.variables,r=t.find(i),a=r.get(0).getContext("2d"),s=r.width(),o=r.height(),l=n.width,c=n.height;let d,u,h,p;l/c>s/o?(u=o,d=l*(o/c),h=-(d-s)/2,p=0):(d=s,u=c*(s/l),h=0,p=-(u-o)/2),a.clearRect(0,0,s,o),a.drawImage(n,h,p,d,u)},handleFrameChange:function(e,t,n,i,r){if(r.isUpdatingFrame)return;r.isUpdatingFrame=!0;const{productBannerVideoSeekBar:a,productBannerVideoDuration:s,productBannerTitle:o,productBannerDesc:l}=e.variables,{isMobile:c,getDeviceAttr:d,formatDuration:u,parseDuration:h,updateContentVisibility:p,loadImage:m}=e.methods,f=i.find(a),g=i.find(s),v=i.find(o),_=i.find(l);r.currentFrameIndex+=t*r.speedFactor,r.currentFrameIndex=Math.max(1,Math.min(n,r.currentFrameIndex)),requestAnimationFrame((()=>{f.val(r.currentFrameIndex);const t=d(c(),i).videoDuration,a=h(t),s=u(n,r.currentFrameIndex,a),o=Math.floor(r.currentFrameIndex/n*a);g.text(s),p(e,o,v,_),m(e,i,r,r.currentFrameIndex),Qp.variables.currentIndex===r.sectionIndex&&(r.currentFrameIndex===n||1===r.currentFrameIndex?(Qp.variables.observer.enable(),Qp.variables.disableUp=!1,Qp.variables.disableDown=!1):(Qp.variables.observer.disable(),Qp.variables.disableDown=!0,Qp.variables.disableUp=!0)),r.isUpdatingFrame=!1}))},initEventHandlers:function(e,t){const n=this,{productBannerContainer:r}=n.variables,{isMobile:a,getDeviceAttr:s,handleFrameChange:o}=n.methods,{WHEEL:l,TOUCHSTART:c,TOUCHMOVE:d,TOUCHEND:u}=i.eventsListeners,h=e.find(r),p=s(a(),h).frameCount;e.on(l,(function(e){e.preventDefault();const i=e.originalEvent.deltaY>0?1:-1;o(n,i,p,h,t)})),e.on(c,(function(e){t.isTouching=!0,t.touchStartY=e.originalEvent.touches[0].clientY,t.touchStartTime=Date.now()})),e.on(d,(function(e){e.preventDefault()})),e.on(d,fm()((function(e){if(!t.isTouching)return;const i=e.originalEvent.touches[0].clientY;t.touchDeltaY=t.touchStartY-i;const r=Math.sign(t.touchDeltaY)*Math.ceil(Math.abs(t.touchDeltaY)/10);Math.abs(t.touchDeltaY)>5&&(o(n,r,p,h,t),t.touchStartY=i)}),50)),e.on(u,(function(e){if(!t.isTouching)return;t.isTouching=!1;const i=e.originalEvent.changedTouches[0].clientY,r=t.touchStartY-i,a=Date.now()-t.touchStartTime,s=r>0?1:-1,l=Math.abs(r/a),c=Math.min(Math.ceil(20*l),15);o(n,s*c,p,h,t);let d=c;const u=setInterval((()=>{d-=.25,d>0?o(n,s,p,h,t):clearInterval(u)}),30);t.touchDeltaY=0}))},parseDuration:function(e){const[t,n]=e.split(":").map(Number);return 60*t+n},formatDuration:function(e,t,n){const i=Math.floor(t/e*n),r=i%60;return`${Math.floor(i/60).toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`},updateContentVisibility:function(e,t,n,i){n.each(((i,r)=>{const a=gm(r),s=a.data("timestamp"),o=e.methods.parseDuration(s),l=n.eq(i+1).data("timestamp")?e.methods.parseDuration(n.eq(i+1).data("timestamp")):1/0;t>=o&&t<l?"none"===a.css("display")&&(a.css("display","block"),Bu.fromTo(a,{x:"-100%",opacity:0},{x:0,opacity:1,duration:.5})):"none"!==a.css("display")&&Bu.to(a,{x:"-100%",opacity:0,duration:.5,onComplete:()=>{a.css("display","none")}})})),i.each(((n,r)=>{const a=gm(r),s=a.data("timestamp"),o=e.methods.parseDuration(s),l=i.eq(n+1).data("timestamp")?e.methods.parseDuration(i.eq(n+1).data("timestamp")):1/0;t>=o&&t<l?"none"===a.css("display")&&(a.css("display","block"),Bu.fromTo(a,{x:"100%",opacity:0},{x:0,opacity:1,duration:.5})):"none"!==a.css("display")&&Bu.to(a,{x:"100%",opacity:0,duration:.5,onComplete:()=>{a.css("display","none")}})}))},init:function(){const{isEditMode:e}=i;if(e)return;const t=this,{productBannerWrapper:n,productBannerCanvasLoader:r}=vm.variables,{section:a}=Qp.variables,s=gm(n);if(s.length>0){const e=gm(a).toArray();s.each((function(n,i){const s=gm(i),o={sectionIndex:0,productCanvasFail:!1,loadedImages:{},currentFrameIndex:0,isThrottling:!1,isTouching:!1,touchStartY:0,touchDeltaY:0,speedFactor:2,lastFrameUpdateTime:0,isUpdatingFrame:!1,touchStartTime:0},l=s.closest(a);l.length&&(o.sectionIndex=e.indexOf(l[0])),s.attr("data-state",encodeURIComponent(JSON.stringify(o))),t.preloadImages.call(vm,s,o).then((()=>{t.setOnLoadScreen.call(vm,s,o),t.initEventHandlers.call(vm,s,o)})).catch((()=>{o.productCanvasFail=!1,gm(r).addClass("d-none"),Qp.variables.observer.enable(),console.error("Failed to load product banner images."),s.attr("data-state",encodeURIComponent(JSON.stringify(o)))}))}))}}}};var _m=n(9755);const bm={variables:{feature:".feature-cards",featureContainer:".feature-cards__container",featureCardSwiper:".feature-cards__container--swiper",featureCardSlide:".mg__card--container",stickyRibbon:".sticky-ribbon",addAnimation:".add-animation"},methods:{handleSwiper:function(e){const{featureCardSwiper:t,featureCardSlide:n}=bm.variables,r=_m(e).find(t),a=_m(e).find(n).data("slides-view"),{EXTRA_SMALL:s,SMALL:o,MEDIUM:l,LARGE:c}=i.breakPoints;new Dp(r.get(0),{freeMode:!0,spaceBetween:10,breakpoints:{[s]:{slidesPerView:2==a?1.2:1},[o]:{slidesPerView:2==a?1.4:1},[l]:{slidesPerView:2==a?2:1.3},[c]:{slidesPerView:2==a?"auto":1.8}}})},handleStickyMobile:function(e){const{featureContainer:t,stickyRibbon:n}=bm.variables;_m(e).find(n).hasClass("d-none")||_m(e).find(t).addClass("handle-card-height")},handleIntersectionObserver:function(e){const{addAnimation:t}=bm.variables;if(!_m(e).hasClass("has-animation"))return;const n=_m(e).find(t);_m(n).css({transform:"translateX(100vw)",opacity:"0",transition:"transform 1.2s ease-out, opacity 1.2s ease-out"});const i=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&_m(n).css({transform:"translateX(0)",opacity:"1"})}))}),{threshold:.5,rootMargin:"0px"});i.observe(e)},init:function(){_m(".feature-cards").length>0&&_m(".feature-cards").each(((e,t)=>{bm.methods.handleSwiper(t),bm.methods.handleStickyMobile(t),bm.methods.handleIntersectionObserver(t)}))}}};var ym=n(9755);const xm={methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e,t){return{linkName:e,brand:"mg select",channel:this.isMobile()?"msite|pdp":"web|pdp",linkpageName:"vehicle:"+t,linkPosition:"pdp - click",model:t}},init(){ym(".text-image").length&&ym(".text-image a").on(i.eventsListeners.CLICK,(e=>{const t=e.currentTarget.getAttribute("title");let n=i.eventsListeners.WINDOW.location.pathname.substring(1);i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction(t,n)}))}))}}};var wm=n(9755);const Sm={methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e,t){return{linkName:e,brand:"mg select",channel:this.isMobile()?"msite|"+Lt.methods.getPageName():"web|"+Lt.methods.getPageName(),pageName:Lt.methods.getPageName()+" page",linkPosition:"hero banner",model:t}},init(){wm(".productShowcase").length&&(wm(".car-models-carousel__content-cta, .car-models-carousel__content--cta-wrapper .cta-download").on(i.eventsListeners.CLICK,(e=>{const t=wm(e.currentTarget).find("a")?.attr("href");let n=t.includes("cyberster")?"cyberster":"m9",r=wm(e.currentTarget).find("a")?.attr("title").toLowerCase(),a=this.createWebInteraction(`${n} - ${r}`,n);wm(e.currentTarget).hasClass("cta-download")&&(a.brochureDownload=1),i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:a}))})),wm(".product-showcase__overlay").on(i.eventsListeners.CLICK,(e=>{const t=wm(".car-models-carousel__content").not(".opacity-0, .pe-none").first().find(".car-models-carousel__content-name").text().trim().toLowerCase().includes("cyberster")?"cyberster":"m9",n=wm(e.currentTarget).find(".product-showcase__toggle.opacity-0").hasClass("product-showcase__toggle--dark")?"night mode":"day mode";i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction(`${t} - ${n}`,t)}))})))}}};var Tm=n(9755);const Em={methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e){return{linkName:e,brand:"mg select",channel:this.isMobile()?"msite|"+Lt.methods.getPageName():"web|"+Lt.methods.getPageName(),pageName:Lt.methods.getPageName()+" page",linkPosition:"newsletter subscription",subscriptionClick:1}},init(){Tm(".newsletter.mg-select__form").length&&Tm(".newsletter__form-submit").on(i.eventsListeners.CLICK,(e=>{let t=Tm(".newsletter__form-group input[name='email']").val();if(""!=t&&Tm(".newsletter__form-group input[name='consent']").prop("checked")){const n=Tm(e.currentTarget).find(".cta-section__main").attr("title");i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction(n),userDetails:{email:t}}))}}))}}};var Mm=n(9755);const Cm={variables:{preReserveForm:"pre__reserve--form"},methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e,t){const n={linkName:e,brand:"mg select",channel:this.isMobile()?"msite|pre reserve form":"web|pre reserve form",linkpageName:"pre reserve page",linkPosition:"pre reserve form",model:Mm("input[name='modelName']").val()};return t&&(n.linkURL=t),n},createErrorDatalayer(e,t,n){return{errorMessage:e,errorField:t,errorType:n}},formDatalayer(e,t,n){const i={formName:"pre reserve form"};return e&&(i.formSection=e),t&&(i.formStart=t),n&&(i.requestOtp=n),i},verifyAccount(e){let t=Mm(e.currentTarget).data("verify-label");i.eventsListeners.ADOBE_DATA_LAYER.push(Cm.methods.createDatalayer("request otp",{webInteraction:Cm.methods.createWebInteraction(t),form:Cm.methods.formDatalayer("step2.0 - otp validation",0,1),userDetails:this.userDetails()}))},userDetails(){const e={};let t=Mm("input[name='firstName']").val(),n=Mm("input[name='lastName']").val(),i=Mm("input[name='email']").val(),r=Mm("input[name='mobilePhone']").val(),a=Mm("select[name='city'] option:selected").text();return""!=t&&(e.firstName=t),""!=n&&(e.lastName=n),""!=i&&(e.email=i),""!=r&&(e.phoneNumber=r),"Choose from selection"!=a&&(e.city=a),e},init(){const{preReserveForm:e}=Cm.variables;e.length&&(Mm(".pre__reserve__mobile--input").on(i.eventsListeners.CLICK,(e=>{i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("form start",{webInteraction:this.createWebInteraction("form start"),form:this.formDatalayer("step1.0 - pre reserve form start",1,0)})),Mm(".pre__reserve__mobile--input").off("click")})),Mm(".pre__reserve__corp--disclaimer a").on(i.eventsListeners.CLICK,(e=>{let t=Mm(e.currentTarget).attr("href");i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("link clicked",{webInteraction:this.createWebInteraction("Corporate Sales",t)}))})))}}};var Am=n(9755);const km={variables:{INPUT:i.eventsListeners.INPUT,KEYDOWN:i.eventsListeners.KEYDOWN,CLICK:i.eventsListeners.CLICK,BLUR:i.eventsListeners.BLUR,SUBMIT:i.eventsListeners.SUBMIT,otpFields:"pre__reserve__form__otp--input",editMob:"pre__reserve__edit--mob",mobileInput:"pre__reserve__mobile--input",preReserveWrapper:"pre__reserve--wrapper",preReserveForm:"pre__reserve--form",preReserveResendTextEl:"pre__reserve__resend--otp",preReserveResendBtn:"pre__reserve__resend--btn",preResendTimeEl:"pre__resend--timer",preReserveOtpFormContainer:"pre__reserve__otp--group",preReserveFormError:"pre__reserve__form--error",preReserveSubmitBtn:"pre__reserve__form__submit--btn",preReserveOtpScreen:"pre__reserve__otp--screen",preReservePersonalScreen:"pre__reserve__personal--form",preReserveFormInput:"mg-select__form-input",preReserveFormInputEl:"pre__reserve__form--input",preReservePayuForm:".pre__reserve__payu--form",preReserveReset:"pre__reserve__reset__form--btn",otpAttempts:0,modal:null,firstOtp:!0,resendTimeInterval:null},methods:{handleOtpFields:function(e){const{otpFields:t}=this.variables,n=Am(e).find(`.${t}`);Ct.methods.handleOtpEvents(n)},handlePanInput(){const{preReservePersonalScreen:e}=this.variables;Am(`.${e} input[name="pan"]`).on(i.eventsListeners.INPUT,(function(){Am(this).val(Am(this).val().toUpperCase())}))},handleNumberField(e){const{mobileInput:t}=this.variables,n=Am(e).find(`.${t}`);Ct.methods.handleNumberInput(n)},editMobile:function(e){const{CLICK:t,editMob:n,mobileInput:i}=this.variables;Am(e).find(`.${n}`).on(t,(function(){const e=Am(this),t=e.siblings(`.${i}`);t.prop("readonly")&&(t.prop("readonly",!1),t.focus(),e.prop("disabled",!0))}))},handleFocusOut:function(e){const{mobileInput:t,BLUR:n,editMob:i}=this.variables;Am(e).find(`.${t}`).on(n,(function(){const e=Am(this);!1===e.prop("readonly")&&(e.prop("readonly",!0),e.siblings(Am(`.${i}`).prop("disabled",!1)))}))},handleDobField(){const{preReservePersonalScreen:e}=this.variables,t=Am(`.${e} input[name="dob"]`);Ct.methods.handleDobField(t)},async isOtpValid(e){const{preReserveForm:t}=this.variables;try{Bt.method.showLoader();if("c3VjY2Vzcw=="==(await Os.methods.isOtpValid(`.${t}`)).status)return!0;{const{preReserveOtpFormContainer:e,preReserveFormError:t}=this.variables,n=Am(`.${e}`).siblings(`.${t}`),r=Am(`.${e}`).find("input[name='otp']").data("otp-failure-error");return Am(n).removeClass("opacity-0"),Am(n).text(r),Bt.method.hideLoader(),i.eventsListeners.ADOBE_DATA_LAYER.push(Cm.methods.createDatalayer("form error",{webInteraction:Cm.methods.createWebInteraction("Verify Account"),form:Cm.methods.formDatalayer(),errorDetails:Cm.methods.createErrorDatalayer("OTP Error",r,"OTP")})),!1}}catch(t){const{showModal:n}=this.methods;return n.call(leadGeneration,e,"api-failure"),console.error("An error occured: ",t),Bt.method.hideLoader(),i.eventsListeners.ADOBE_DATA_LAYER.push(Cm.methods.createDatalayer("form error",{webInteraction:Cm.methods.createWebInteraction("Verify Account"),form:Cm.methods.formDatalayer(),errorDetails:Cm.methods.createErrorDatalayer("API Failure",t,"OTP")})),!1}},resendOtpTimer(){const{preReserveResendTextEl:e,preReserveForm:t,preReserveResendBtn:n}=this.variables;let r=i.timeIntervals.OTP_RESEND_TIME;const a=Am(".pre__reserve__resend--otp").data("message"),s=Am(".pre__reserve__otp--btn").data("resend-otp");if(a.length>0){const e=a.replace("{time}s",`<span class='text-brown-50'>00:${r}S</span>`);Am(".pre__reserve__resend--otp").html(e)}Am(".pre__reserve__resend--otp").removeClass("opacity-0"),Os.variables.isResendTimerActive=!0,Am(".pre__reserve__otp--btn").addClass("pe-none opacity-80"),Am(".pre__reserve__otp--btn").find(".cta-section__label").text(s),km.variables.resendTimeInterval=setInterval((function(){const e=a.replace("{time}s",`<span class='text-brown-50'>00:${r<10?"0":""}${r}S</span>`);Am(".pre__reserve__resend--otp").html(e),r--,r<0&&(Os.variables.isResendTimerActive=!1,clearInterval(km.variables.resendTimeInterval),Am(".pre__reserve__otp--btn").removeClass("pe-none opacity-80"),Am(".pre__reserve__resend--otp").addClass("opacity-0"))}),1e3)},generateOtp(){const e=this,{otpFields:t,mobileInput:n,CLICK:r,preReserveForm:a}=this.variables,{resendOtpTimer:s}=this.methods,o=Am(`.${a}`).find(`.${t}[name = "otp"]`).data("otp-generate-url"),l=Am(`.${a}`).find(`.${t}[name = "otp"]`).data("otp-generate-apikey"),c=i.validationLimits.MAX_OTP_ATTEMPTS;Am(".pre__reserve__otp--btn").on(r,(async function(){if("true"==Am(`.${a}`).find(`.${n}:visible`).attr("aria-valid"))if(Bt.method.showLoader(),km.variables.firstOtp&&i.eventsListeners.ADOBE_DATA_LAYER.push(Cm.methods.createDatalayer("request otp",{webInteraction:Cm.methods.createWebInteraction("request otp"),form:Cm.methods.formDatalayer("step1.1 - request otp",0,1),userDetails:{phoneNumber:Am(".pre__reserve__mobile--input[name='mobilePhone']").val()}})),e.variables.otpAttempts<c){e.variables.otpAttempts++,1==e.variables.otpAttempts&&setTimeout((function(){e.variables.otpAttempts=0}),1e3*i.timeIntervals.OTP_RESET_TIME);let t={numbers:Am(`.${a}`).find(`.${n}[name = "mobilePhone"]:visible`).val(),otpsource:"kmi"};t=JSON.stringify(t);kt.ajaxHit(o,"POST",t,l).done((e=>{const t=e.TransactionId;"limitReached"!=t&&(sessionStorage.setItem("otpTransactionId",t),Am(".pre__reserve__form__otp--input").attr("disabled",!1),Am(".pre__reserve__form__otp--input").eq(0).focus(),s.call(km),Bt.method.hideLoader())})).fail((e=>{console.error(e),Bt.method.hideLoader()}))}else Bt.method.hideLoader();else Os.methods.validateField(Am(`.${a}`).find(`.${n}:visible`),`.${a}`,"submit")}))},resendOtpBtn:function(e){const{preReserveResendBtn:t,CLICK:n,mobileInput:r,INPUT:a}=this.variables;Am(e).find(`.${t}`).on(n,(function(){km.variables.firstOtp=!1,Am(e).find(`.${r}`).trigger(a);let t=Am(".pre__reserve__mobile--input[name='mobilePhone']").val();i.eventsListeners.ADOBE_DATA_LAYER.push(Cm.methods.createDatalayer("request otp",{webInteraction:Cm.methods.createWebInteraction("RESEND OTP"),form:Cm.methods.formDatalayer("step1.1 - request otp",0,1),userDetails:{phoneNumber:t}}))}))},generateValidationSchema(e){const{preReserveForm:t,preReserveFormInputEl:n}=this.variables,i=[];Am(e).find(`.${n}`).each((function(){i.push(Am(this).attr("name"))})),Ct.methods.generateFormSchema.call(Ct,i,e,`.${t}`)},resetForm:function(e){const{preReserveReset:t,preReservePersonalScreen:n,preReserveOtpScreen:i,CLICK:r,preReserveResendBtn:a,preReserveResendTextEl:s,preReserveSubmitBtn:o,preReserveFormInputEl:l,preReserveForm:c}=this.variables;Am(e).find(`.${t}`).on(r,(function(){Am(".pre__reserve--color__screen:visible").length>0?(Am(e).get(0).reset(),Am(e).find(`.${o} button span.cta-section__label`).text(Am(e).data("verify-label")),Am(e).find(`.${a}`).removeClass("pe-none opacity-60").addClass("opacity-0"),Am(e).find(`.${s}`).removeClass("opacity-50").addClass("opacity-0"),Am(e).find(`.${o} button`).attr("title",Am(e).data("verify-label")),Am(e).find(`.${i}`).removeClass("d-none").addClass("d-flex"),Am(e).find(".pre__reserve__form--main").addClass("d-none")):(Am(".pre__reserve--color__screen").removeClass("d-none"),Am(".pre__reserve--pd__screen").addClass("d-none"),Am(".pre__reserve--scrollbox").scrollTop(0),Am(e).find(`.${o} button span.cta-section__label`).text(Am(e).data("continue-label")),Am(e).find(`.${o} button`).attr("title",Am(e).data("continue-label")))}))},async getPreBookResponse(e){const{preReservePersonalScreen:t}=this.variables,n=Am(e).find(`.${t}`),i=Am(e).data("pre-book-url"),r=Am(e).data("pre-book-api-key");let a={model:Am(e).find('input[name="modelName"]').val(),city:Am(n).find('select[name="city"] option:selected').text(),zipcode:Am(n).find('select[name="city"] option:selected').val(),firstName:Am(n).find('[name="firstName"]').val(),lastName:Am(n).find('[name="lastName"]').val(),email:Am(n).find('[name="email"]').val(),mobilePhone:Am(n).find('[name="mobilePhone"]').val(),mobilePhoneValidated:1,address:`${Am(n).find('[name="address1"]').val()}, ${Am(n).find('[name="address2"]').val()}`,pan:Am(n).find('[name="pan"]').val(),dob:Am(n).find('[name="dob"]').val(),consentProvided:1,source:Am(e).data("pre-book-source"),ExtColor:Am(".pre_reserve__input:checked").val()};return a=JSON.stringify(a),kt.ajaxHit(i,"POST",a,r)},async usePreBookResponse(e){try{const{getPreBookResponse:t}=this.methods;Bt.method.showLoader();if("success"==(await t.call(km,e)).status)return!0;Bt.method.hideLoader(),window.location.href=`${Am(e).data("payment-page-url")}?error.html&preBook=true`}catch(t){Bt.method.hideLoader(),window.location.href=`${Am(e).data("payment-page-url")}?error.html&apiError=true`}},async getInitBookingResponse(e){const{preReservePersonalScreen:t}=this.variables,n=Am(e).find(`.${t}`),i=Am(e).data("initbooking-url"),r=Am(e).data("initbooking-api-key");let a={model:Am(e).find('input[name="modelName"]').val(),city:Am(n).find('select[name="city"] option:selected').text(),zipcode:Am(n).find('select[name="city"] option:selected').val(),firstName:Am(n).find('[name="firstName"]').val(),lastName:Am(n).find('[name="lastName"]').val(),email:Am(n).find('[name="email"]').val(),mobilePhone:Am(n).find('[name="mobilePhone"]').val(),mobilePhoneValidated:1,address:`${Am(n).find('[name="address1"]').val()}, ${Am(n).find('[name="address2"]').val()}`,pan:Am(n).find('[name="pan"]').val(),dob:Am(n).find('[name="dob"]').val(),consentProvided:1,source:Am(e).data("pre-book-source"),payuflow:Am(e).data("pre-book-payuflow"),amount:Am(e).data("pre-book-amount"),productinfo:{paymentParts:[{name:"",merchantId:Am(e).data("pre-book-merchantid"),value:Am(e).data("pre-book-amount"),commission:"0",description:Am(e).data("pre-book-description")}]},pageURL:`${window.location.origin}${Am(e).data("payment-page-url")}`};return a=JSON.stringify(a),kt.ajaxHit(i,"POST",a,r)},async useInitBookingResponse(e){try{const{getInitBookingResponse:t,setPreBookingRequest:n,preReservePersonalScreen:i}=this.methods,r=await t.call(km,e);if("error"==r.status)Bt.method.hideLoader(),window.location.href=`${Am(e).data("payment-page-url")}?error.html&apiError=true`;else{Am(e).find(`.${i}`);n.call(km,e,r)}}catch(t){Bt.method.hideLoader(),window.location.href=`${Am(e).data("payment-page-url")}?error.html&apiError=true`}},async setPreBookingRequest(e,t){const{preReservePayuForm:n,preReservePersonalScreen:i}=this.variables,r=Am(e).find(`.${i}`),{hash:a,key:s,txnid:o,udf1:l,productinfo:c}=t;if(l&&o&&c&&a&&s){const t=Am(r).find('[name="firstName"]').val(),i=Am(r).find('[name="lastName"]').val(),d=Am(r).find('[name="email"]').val(),u=Am(r).find('[name="mobilePhone"]').val(),h=Am(r).find('select[name="city"] option:selected').text(),p=Am(r).find('select[name="city"] option:selected').val(),m="IN",f="";Am(n).find("input[name='key']").val(s),Am(n).find("input[name='hash']").val(a),Am(n).find("input[name='txnid']").val(o),Am(n).find("input[name='udf1']").val(l),Am(n).find("input[name='udf4']").val(`${window.location.origin}${Am(e).data("payment-page-url")}?error.html`),Am(n).find("input[name='udf5']").val(`${window.location.origin}${Am(e).data("payment-page-url")}?success.html`),Am(n).find("input[name='productinfo']").val(JSON.stringify(c)),Am(n).find("input[name='firstname']").val(t),Am(n).find("input[name='lastname']").val(i),Am(n).find("input[name='city']").val(h),Am(n).find("input[name='zipcode']").val(p),Am(n).find("input[name='country']").val(m),Am(n).find("input[name='state']").val(f),Am(n).find("input[name='zipcode']").val(p),Am(n).find("input[name='email']").val(d),Am(n).find("input[name='phone']").val(u),Bt.method.hideLoader(),Am(n).submit()}else Bt.method.hideLoader(),window.location.href=`${Am(e).data("payment-page-url")}?error.html&apiError=true`},handleSubmit:function(e){const{preReserveForm:t,preReserveWrapper:n,preReserveOtpScreen:r,preReservePersonalScreen:a,SUBMIT:s,preReserveFormInputEl:o,preReserveSubmitBtn:l}=this.variables,{isOtpValid:c,getKmiData:d,useInitBookingResponse:u,usePreBookResponse:h,setControlsPosition:p}=this.methods;Am(`.${n} .${t}`).on(s,(async function(n){if(n.preventDefault(),Os.methods.handleSubmitValidation(e,`.${t}`))if(localStorage.setItem("mobile-number",Am(this).find('input[name="mobilePhone"]').val()),localStorage.setItem("email",Am(this).find('input[name="email"]').val()),localStorage.setItem("pincode",Am(this).find("select").val()),localStorage.setItem("model-name",Am(this).find('input[name="modelName"]').val()),Am(this).find(`.${a} input[name="mobilePhone"]`).val(localStorage.getItem("mobile-number")),Am(`.${r}:visible`).length>0){clearInterval(km.variables.resendTimeInterval),Am(".pre__reserve__otp--btn").removeClass("pe-none opacity-80"),Am(".pre__reserve__resend--otp").addClass("opacity-0");if(await c.call(km)){Cm.methods.verifyAccount(n),Am(`.${r}`).addClass("d-none").removeClass("d-flex"),Am(".pre__reserve__form--main").removeClass("d-none"),p.call(km),Am(window).on(i.eventsListeners.RESIZE,p.call(km)),Am(this).find(`.${l} button span.cta-section__label`).text(Am(this).data("continue-label")),Am(this).find(`.${l} button`).attr("title",Am(this).data("contnue-label"));const e=await d.call(km);e.hasOwnProperty("firstName")&&Am.each(e,(function(e,t){Am(`.${o}[name="${e}"]`).val(t)}))}Am(".pre__reserve--scrollbox").scrollTop(0),Am("html, body").animate({scrollTop:0}),Bt.method.hideLoader()}else if(Am(".pre__reserve--color__screen:visible").length>0)Am(".pre__reserve--color__screen").addClass("d-none"),Am(".pre__reserve--pd__screen").removeClass("d-none"),Am(".pre__reserve--scrollbox").scrollTop(0),Am(this).find(`.${l} button span.cta-section__label`).text(Am(this).data("payu")),Am(this).find(`.${l} button`).attr("title",Am(this).data("payu"));else{let t=Am(n.currentTarget).find(".cta-section__label").text();i.eventsListeners.ADOBE_DATA_LAYER.push(Cm.methods.createDatalayer("checkout",{webInteraction:Cm.methods.createWebInteraction(t),form:Cm.methods.formDatalayer("step2.1 - checkout",0,0),userDetails:Cm.methods.userDetails()}));await h.call(km,this)&&u.call(km,e)}}))},getKmiData:async function(){const{preReserveForm:e,mobileInput:t}=this.variables,n=Am(`.${e}`).data("kmiapi"),i=Am(`.${e}`).data("kmikey"),r=Am(`.${e}`).data("model"),a=Am(`.${e}`).find(`.${t}`).val();if(n.length>0)try{return await kt.ajaxHit(`${n}?mobilenumber=${a}&model=${r}`,"GET",null,i)}catch(e){throw console.log(e),e}},setControlsPosition(){let e=Am(".pre__reserve__text").height()+4;Am(".pre__reserve__text").each((function(){e=Am(this).height()>e?Am(this).height()+4:e})),Am(".pre__reserve__controls").css("bottom",e)},createPaginationBullets(e,t,n,i){const r=s();return`<div class="${e} pre__reserve__pagination--bullet rounded-circle overflow-hidden opacity-100 position-relative cursor-pointer">\n                        <label for=${r} style="background-color: ${t};" class="d-inline-block w-100 h-100" />\n                        <input id=${r} type="radio" name="ExtColor" value="${n}" class="pre_reserve__input position-absolute top-0 start-0 z-n1" \n                            ${0===i?"checked":""}/>\n                    </div>`},initSwiper(){const{createPaginationBullets:e}=this.methods,t=[];Am(".pre__reserve__swiper .swiper-slide").each((function(){t.push({name:Am(this).data("color-name"),hexCode:Am(this).data("color-code")})}));new Dp(".pre__reserve__swiper",{modules:[Vp,Rp,Np],effect:"fade",slidesPerView:1,fadeEffect:{crossFade:!0},navigation:{nextEl:".pre__reserve__navigation--next",prevEl:".pre__reserve__navigation--prev",disabledClass:"opacity-50"},pagination:{el:".pre__reserve__pagination",clickable:!0,renderBullet:function(n,i){return e(i,t[n].hexCode,t[n].name,n)}},breakpoints:{1024:{noSwiping:!0}},on:{slideChange(){const e=Am(".pre_reserve__input");Am(e).length&&(Am(e).each((function(){this.checked=!1})),Am(e)[this.activeIndex].checked=!0)}}})},init:function(){const{preReserveWrapper:e,preReserveForm:t}=km.variables,n=this;Am(`.${e}`).length>0&&Am(`.${t}`).each((function(){n.generateValidationSchema.call(km,this),Os.methods.handleBlurValidation(this,`.${t}`),Os.methods.handleInputValidation(this,`.${t}`),n.handleOtpFields.call(km,this),n.generateOtp.call(km,this),n.resendOtpBtn.call(km,this),n.handleSubmit.call(km,this),n.handleNumberField.call(km,this),n.handleDobField.call(km),n.handlePanInput.call(km),n.initSwiper.call(km,this),n.resetForm.call(km,this)}))}}};var Dm=n(9755);const Lm={variables:{preBookDetails:".prebook-payment__details",phoneNumber:localStorage.getItem("mobile-number"),email:localStorage.getItem("email"),pincode:localStorage.getItem("pincode"),model:localStorage.getItem("model-name")},methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e,t){const n={linkName:e,brand:"mg select",channel:this.isMobile()?"msite|pre reserve form":"web|pre reserve form",linkpageName:e.includes("success")?"pre reserve success page":"pre reserve failure page",linkPosition:"pre reserve form",model:Lm.variables.model};return t&&(n.linkURL=t),n},createFormDatalayer(e,t,n,i,r){const a={formName:"pre reserve form",formSection:1==e?"step3.0 - pre reserve form success":"step3.1 - pre reserve form failure",bookingPrice:"â¹51000"};return e&&(a.formSuccess=e),e||(a.formfailure=1),t&&(a.bookingId=t),n&&(a.transactionId=n),i&&(a.statusMessage=i),r&&(a.statusCode=r),a},creatUserDetails(){return{phoneNumber:Lm.variables.phoneNumber,email:Lm.variables.email,pincode:Lm.variables.pincode}},init(){const{preBookDetails:e}=Lm.variables;e.length&&Dm(".prebook-payment__details--cta").on(i.eventsListeners.CLICK,(e=>{let t=Dm(e.currentTarget).find("a").attr("title"),n=i.eventsListeners.WINDOW.location.origin+Dm(e.currentTarget).find("a").attr("href");i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction(t,n)}))}))}}};var Im=n(9755);const Pm={variables:{preBookDetails:".prebook-payment__details",preBookOrder:".prebook-payment__details--order-details",preBookOrderId:".prebook-payment__details--id",preBookTrxn:".prebook-payment__details--trxn-details",preBookTrxnId:".prebook-payment__trxn--id"},methods:{handleApi:function(e){const{preBookDetails:t,preBookOrder:n,preBookOrderId:i,preBookTrxn:r}=Pm.variables,a=Im(e).find(t),s=Im(e).find(n),o=Im(e).find(r),l=a.data("lead-generation-url"),c=a.data("lead-generation-api-key"),d=a.data("model-name"),u=Pm.methods.getTraxnId(e);if(!u.number)return s.hide(),void o.hide();let h={mobilenumber:u.number,model:u.model?u.model:d};kt.ajaxHit(l,"GET",h,c).done((t=>{Pm.methods.handleAllStatus(e,s,t,o)})).fail((e=>{s.hide(),o.hide(),console.error(e)}))},handleAllStatus:function(e,t,n,r){const{preBookOrderId:a,preBookTrxnId:s}=Pm.variables;if("DMS_LEAD_EXISTS"===n.Status||"DMS_SUCCESS"===n.Status){const e=n.BookingRefID?n.BookingRefID:"";r.hide(),t.show(),t.find(a).text(e)}else if("DMS_MANL_BOOKING"===n.Status||"DMS_NO_RESPONSE"===n.Status){const e=n.TxnID?n.TxnID:"";r.show(),t.hide(),r.find(s).text(e)}else if(n.TxnID){const e=n.TxnID?n.TxnID:"";r.show(),t.hide(),r.find(s).text(e)}i.eventsListeners.ADOBE_DATA_LAYER.push(Lm.methods.createDatalayer("form success",{webInteraction:Lm.methods.createWebInteraction("pre reserve form success"),form:Lm.methods.createFormDatalayer(1,n.BookingRefID,n.TxnID,n.Status,n.Status),userDetails:Lm.methods.creatUserDetails()}))},getTraxnId:function(e){const t=localStorage.getItem("mobile-number"),n=localStorage.getItem("model-name");return t&&localStorage.removeItem("mobile-number"),n&&localStorage.removeItem("model-name"),{number:t,model:n}},handleSuccessFailure:function(e,t){const n=window.location.href.split("?")[1];if(n){const r=n.split("&"),a=r.find((e=>e.includes("success"))),s={};r.forEach((e=>{const[t,n]=e.split("=");s[t]=n||!0}));const o=s.preBook||null,l=s.apiError||null,c=localStorage.getItem("model-name");Im("<input>").attr({type:"hidden",name:"modelName",value:c}).appendTo("body"),a?"success"==t&&(Im(e).removeClass("d-none"),Pm.methods.handleApi(e)):(o&&"duplicateFailure"==t?(Im(e).removeClass("d-none"),i.eventsListeners.ADOBE_DATA_LAYER.push(Lm.methods.createDatalayer("form failure",{webInteraction:Lm.methods.createWebInteraction("pre reserve form failure"),form:Lm.methods.createFormDatalayer(0,"","","Lead Exists","DMS_LEAD_EXIST"),userDetails:Lm.methods.creatUserDetails()}))):l&&"failure"==t?(Im(e).removeClass("d-none"),i.eventsListeners.ADOBE_DATA_LAYER.push(Lm.methods.createDatalayer("form failure",{webInteraction:Lm.methods.createWebInteraction("pre reserve form failure"),form:Lm.methods.createFormDatalayer(0,"","","API Failure",""),userDetails:Lm.methods.creatUserDetails()}))):o||l||"payuFailure"!=t||(Im(e).removeClass("d-none"),i.eventsListeners.ADOBE_DATA_LAYER.push(Lm.methods.createDatalayer("form failure",{webInteraction:Lm.methods.createWebInteraction("pre reserve form failure"),form:Lm.methods.createFormDatalayer(0,"","","Failure from PayU side",""),userDetails:Lm.methods.creatUserDetails()}))),localStorage.removeItem("mobile-number"),localStorage.removeItem("model-name"))}else console.log("No query string found in the URL.")},init:function(){Im(".prebook-payment").length>0&&Im(".prebook-payment").each(((e,t)=>{const n=Im(t).data("response");Pm.methods.handleSuccessFailure(t,n)}))}}};var Rm=n(9755);const Om={methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e){return{linkName:e,brand:"mg select",channel:this.isMobile()?"msite|"+Lt.methods.getChannelName(Lt.methods.getPageName()):"web|"+Lt.methods.getChannelName(Lt.methods.getPageName()),pageName:Lt.methods.getPageName()+" page",linkPosition:"dealer redirection banner"}},init(){Rm(".carousel").length&&Rm(".carousel .banner a").on(i.eventsListeners.CLICK,(e=>{const t=Rm(e.currentTarget).closest(".banner").find("img").attr("alt")?.toLowerCase();i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction(`know more - ${t}`)}))}))}}};var Nm=n(9755);const Bm={methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e){return{linkName:e,brand:"mg select",channel:this.isMobile()?"msite|"+Lt.methods.getChannelName(Lt.methods.getPageName()):"web|"+Lt.methods.getChannelName(Lt.methods.getPageName()),pageName:Lt.methods.getPageName()+" page",linkPosition:Lt.methods.getPageName()+" - generic click"}},init(){Nm(".mg-select__pagination").length&&Nm(".mg-select__pagination-indicator").on(i.eventsListeners.CLICK,(e=>{i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction("quick scroll")}))}))}}};var Fm=n(9755);const Um={methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e){return{linkName:e,brand:"mg select",channel:this.isMobile()?"msite|"+Lt.methods.getChannelName(Lt.methods.getPageName()):"web|"+Lt.methods.getChannelName(Lt.methods.getPageName()),pageName:Lt.methods.getPageName()+" page",linkPosition:Lt.methods.getPageName()+" - generic click"}},init(){Fm(".banner").length&&Fm(".mute-icon__wrapper").on(i.eventsListeners.CLICK,(e=>{const t=Fm(".mute-icon__wrapper--mute-icon").hasClass("d-none")?"sound on":"sound off";i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction(t)}))}))}}};var zm=n(9755);const Vm={methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e,t,n){const i={linkName:e,brand:"mg select",channel:this.isMobile()?"msite|pdp":"web|pdp",linkpageName:"vehicle:"+n,linkPosition:"pdp - click",model:n};return this.isFileURL(t)&&(i.brochureDownload=1),i},isFileURL(e){try{const t=new URL(e,window.location.origin).pathname;return t.substring(t.lastIndexOf("/")+1).includes(".")&&!t.endsWith("/")}catch{return!1}},init(){zm(".sticky-ribbon__cta-container").length&&zm(".sticky-ribbon__cta").on(i.eventsListeners.CLICK,(e=>{let t=zm(e.currentTarget).find("a").attr("title"),n=zm(e.currentTarget).find("a").attr("href"),r=i.eventsListeners.WINDOW.location.pathname.substring(1);i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction(t,n,r)}))}))}}};var Hm=n(9755);const $m={variables:{colorPreferenceSection:".color-preference",colorPreferenceSwiper:".color-preference__swiper",colorPreferencePrevious:".color-preference__navigation--prev",colorPreferenceNext:".color-preference__navigation--next",colorPreferencePagination:".color-preference__pagination",colorPreferenceInput:".color-preference__input",colorPreferenceImage:".color-preference__image",colorPreferenceControls:".color-preference__controls",colorPreferenceForm:".color-preference__main",colorPreferenceModal:".color-preference__modal",colorPreferenceSubmit:".color-preference__submit",colorPreferenceBid:".color-preference__bid",colorPreferenceSuccess:".color-preference__success",colorPreferenceText:".color-preference__text",colorPreferenceHeading:".color-preference__heading",modalSuccessBtn:".modal-submit",modal:null,swiper:null},methods:{setControlsPosition(){const{colorPreferenceText:e,colorPreferenceControls:t}=this.variables;let n=Hm(e).height()-40;Hm(e).each((function(){n=Hm(this).height()>n?Hm(this).height()-40:n})),Hm(t).css("bottom",n)},controlPositionOnResize(){const{setControlsPosition:e}=this.methods;Hm(window).on(i.eventsListeners.RESIZE,e.call($m))},createPaginationBullets(e,t,n,i){const r=s();return`<div class="${e} color-preference__pagination--bullet rounded-circle overflow-hidden opacity-100 position-relative cursor-pointer">\n                        <label for=${r} style="background-color: ${t};" class="d-inline-block w-100 h-100" />\n                        <input id=${r} type="radio" name="ExtColor" value="${n}" class="color-preference__input position-absolute top-0 start-0 z-n1" \n                            ${0===i?"checked":""}/>\n                    </div>`},initSwiper(){const{colorPreferenceSwiper:e,colorPreferenceNext:t,colorPreferencePrevious:n,colorPreferencePagination:i,colorPreferenceInput:r}=this.variables,{createPaginationBullets:a}=this.methods,s=[];Hm(`${e} .swiper-slide`).each((function(){s.push({name:Hm(this).data("color-name"),hexCode:Hm(this).data("color-code")})})),$m.variables.swiper=new Dp(e,{modules:[Vp,Rp,Np],effect:"fade",slidesPerView:1,fadeEffect:{crossFade:!0},navigation:{nextEl:t,prevEl:n,disabledClass:"opacity-50"},pagination:{el:i,clickable:!0,renderBullet:function(e,t){return a(t,s[e].hexCode,s[e].name,e)}},breakpoints:{1024:{noSwiping:!0}},on:{slideChange(){const e=Hm(r);Hm(e).length&&(Hm(e).each((function(){this.checked=!1})),Hm(e)[this.activeIndex].checked=!0)}}})},initModal(){const{colorPreferenceModal:e}=this.variables;$m.variables.modal=Cs.methods.initModal(Hm(e))},showModal(){const{modal:e,colorPreferenceSection:t,colorPreferenceModal:n}=this.variables,i=Hm(t).find(Cs.variables.modalTitle),r=Hm(n).data("confirm-title")??"";Hm(i).text(r),Hm(n).find(".modal-footer").removeClass("d-none"),e.show()},submitForm(){const{colorPreferenceForm:e}=this.variables,{showModal:t}=this.methods;Hm(e).on(i.eventsListeners.SUBMIT,(function(e){e.preventDefault(),t.call($m)}))},setBookingID(){const{colorPreferenceSubmit:e,colorPreferenceBid:t}=this.variables,n=new URLSearchParams(window.location.search).get("bkID");n?Hm(t).val(n):Hm(e).addClass("pe-none opacity-50")},async getApiResponse(){const{colorPreferenceForm:e}=this.variables,t=Hm(e).data("api-url"),n=Hm(e).data("api-key"),i=new FormData(Hm(e).get(0));let r={};for(let[e,t]of i.entries())r[e]=t;return r=JSON.stringify(r),kt.ajaxHit(t,"POST",r,n)},showSuccessScreen(){const{colorPreferenceModal:e,modalSuccessBtn:t,colorPreferenceSuccess:n,colorPreferenceSubmit:r,colorPreferenceControls:a,colorPreferenceText:s,colorPreferenceHeading:o,modal:l,colorPreferenceSection:c}=this.variables,{getApiResponse:d}=this.methods,u=Hm(c).find(Cs.variables.modalTitle);Hm(`${e} ${t}`).on(i.eventsListeners.CLICK,(async function(){try{Bt.method.showLoader();const t=await d.call($m);"success"==t.status?(Hm(n).removeClass("d-none"),Hm(r).add(a).add(s).addClass("d-none"),Hm(o).addClass("opacity-0"),$m.variables.swiper.disable()):"error"==t.status&&(Hm(e).find(".modal-footer").addClass("d-none"),Hm(u).text(t.msg),l.show()),Bt.method.hideLoader()}catch(t){Bt.method.hideLoader(),Hm(e).find(".modal-footer").addClass("d-none"),Hm(u).text(apiResponse.msg),l.show()}}))},init(){const{colorPreferenceSection:e}=$m.variables;Hm(e).length&&(this.setBookingID.call($m),this.initSwiper.call($m),this.setControlsPosition.call($m),this.controlPositionOnResize.call($m),this.initModal.call($m),this.submitForm.call($m),this.showSuccessScreen.call($m))}}};var Wm=n(9755);const Gm={variables:{slotBookingForm:".slot-booking__form",slotBookingInputs:".slot-booking__form-input",slotBookingDropdown:".slot-booking__form-dropdown",slotBookingMobile:".slot-booking__form-mobile",slotBookingOtpFields:".slot-booking__otp-input",slotBookingOtpGroup:".slot-booking__otp-group",slotBookingResendText:".slot-booking__otp-resend",slotBookingError:".slot-booking__form-error",slotBookingOtpScreen:".slot-booking__otp-screen",slotBookingDetailScreen:".slot-booking__detail-screen",slotBookingSubmitBtn:".slot-booking__form-submit",slotBookingDate:".slot-booking__date",slotBookingDateSection:".slot-booking__date-section",slotBookingDateInput:".slot-booking__date-input",slotBookingTimeSection:".slot-booking__time-section",slotBookingTimeInput:".slot-booking__time-input",slotBookingTimeContainer:".slot-booking__time-container",slotBookingModel:".slot-booking__model",slotBookingSuccess:".slot-booking__success",slotBookingModal:".slot-booking__modal",slotBookingResendBtn:".slot-booking__resend-btn",otpAttempts:0,response:null,selectedCity:null,activeTimeSection:0,modal:null},methods:{initModal(){const{slotBookingModal:e}=this.variables;Gm.variables.modal=Cs.methods.initModal(Wm(e))},showModal(e){const{modal:t,slotBookingModal:n,leadGenModal:i}=this.variables,r=Wm(n).find(Cs.variables.modalTitle),a=Wm(n).find(Cs.variables.modalMessage),s=Wm(n).data(`${e}-title`)??"",o=Wm(n).data(`${e}-subtitle`)??"";Wm(r).text(s),Wm(a).text(o),t.show()},handleOtpFields:function(){const{slotBookingOtpFields:e}=this.variables;Ct.methods.handleOtpEvents(Wm(e))},handleNumberField(){const{slotBookingMobile:e}=this.variables;Ct.methods.handleNumberInput(Wm(e))},generateValidationSchema(){const{slotBookingForm:e,slotBookingInputs:t}=this.variables,n=[];Wm(t).each((function(){n.push(Wm(this).attr("name"))})),Ct.methods.generateFormSchema.call(Ct,n,e,e)},resendOtpTimer(){const{slotBookingResendText:e,slotBookingResendBtn:t}=this.variables;let n=i.timeIntervals.OTP_RESEND_TIME;const r=Wm(e).data("message");if(r.length>0){const t=r.replace("{time}s",`<span class='text-brown-50'>00:${n}S</span>`);Wm(e).html(t)}Wm(t).removeClass("opacity-0").addClass("opacity-80 pe-none"),Wm(e).removeClass("opacity-0"),Os.variables.isResendTimerActive=!0;const a=setInterval((function(){const i=r.replace("{time}s",`<span class='text-brown-50'>00:${n<10?"0":""}${n}S</span>`);Wm(e).html(i),n--,n<0&&(Os.variables.isResendTimerActive=!1,clearInterval(a),Wm(e).addClass("opacity-0"),Wm(t).removeClass("opacity-80 pe-none"))}),1e3)},getOtp(){const e=this,{slotBookingOtpFields:t,slotBookingMobile:n}=this.variables,{resendOtpTimer:r,showModal:a}=this.methods,s=Wm(t).data("otp-generate-url"),o=Wm(t).data("otp-generate-apikey"),l=i.validationLimits.MAX_OTP_ATTEMPTS;if("true"==Wm(`${n}`).attr("aria-valid")&&0==Os.variables.isResendTimerActive)if(Bt.method.showLoader(),e.variables.otpAttempts<l){e.variables.otpAttempts++,1==e.variables.otpAttempts&&setTimeout((function(){e.variables.otpAttempts=0}),1e3*i.timeIntervals.OTP_RESET_TIME);let l={numbers:Wm(n).val(),otpsource:"kmi"};l=JSON.stringify(l);kt.ajaxHit(s,"POST",l,o).done((e=>{Bt.method.hideLoader();const n=e.TransactionId;"limitReached"!=n?(sessionStorage.setItem("otpTransactionId",n),Wm(t).eq(0).focus(),r.call(Gm)):a.call(Gm,"max-attempts")})).fail((e=>{Bt.method.hideLoader(),a.call(Gm,"api-failure"),console.error(e)}))}else Bt.method.hideLoader(),a.call(Gm,"max-attempts")},generateOtp(){const{slotBookingMobile:e,slotBookingResendBtn:t}=this.variables,{getOtp:n}=this.methods;Wm(e).on(i.eventsListeners.INPUT,(function(){n.call(Gm)})),Wm(t).on(i.eventsListeners.CLICK,(function(){n.call(Gm)}))},async isOtpValid(){const{slotBookingForm:e}=this.variables;try{Bt.method.showLoader();if("c3VjY2Vzcw=="==(await Os.methods.isOtpValid(e)).status)return!0;{const{slotBookingError:e,slotBookingOtpGroup:t,slotBookingOtpFields:n}=this.variables,i=Wm(t).siblings(e),r=Wm(n).data("otp-failure-error");return Wm(i).text(r).removeClass("opacity-0"),Bt.method.hideLoader(),!1}}catch(e){const{showModal:t}=this.methods;return t.call(Gm,"api-failure"),console.error("An error occured: ",e),Bt.method.hideLoader(),!1}},async getPreBookResponse(){const{slotBookingMobile:e,slotBookingForm:t}=this.variables,n=Wm(t).data("prebook-check-url"),i=Wm(t).data("prebook-check-apikey");let r={preBookCheck:1,PhoneNo:Wm(e).val()};return r=JSON.stringify(r),kt.ajaxHit(n,"POST",r,i)},async isPreBooked(){const{getPreBookResponse:e,slotBookingModel:t,showModal:n}=this.methods;try{Bt.method.showLoader();const i=await e.call(Gm);return"success"==i.status?i.data.ModelLine==Wm(t).val():(n.call(Gm,"user-not-found"),Bt.method.hideLoader(),!1)}catch(e){return n.call(Gm,"api-failure"),console.error("An error occured: ",e),Bt.method.hideLoader(),!1}},getStartTime(e){const t=e.split("-")[0].trim(),[n,i]=t.split(":").map(Number),r=n>=12?"PM":"AM";return`${n%12||12}:${i.toString().padStart(2,"0")} ${r}`},generateDateInputs(e){const{slotBookingDateSection:t}=this.variables,n=e.map(((e,t)=>{const n=new Date(e),i=n.toLocaleString("en-US",{weekday:"short"}),r=n.toLocaleString("en-US",{month:"long"});let a=n.getDate();a=a<10?`0${a}`:a;const o=s();return`\n                    <div class="mg-select__form-group slot-booking__date-group bg-white rounded-2 overflow-hidden position-relative">\n                        <input\n                            type="radio"\n                            ${0===t?"checked":""}\n                            class="slot-booking__date-input mg-select__form-input validate-blur validate-submit validate-input position-absolute top-0 start-0 z-n1"\n                            name="eventDate"\n                            id="${o}"\n                            value="${e}"\n                            data-index="${t}"/>\n                        <label\n                            for="${o}"\n                            class="slot-booking__date-label cursor-pointer d-flex flex-column align-items-center justify-content-center mg-select__form-label w-100 h-100 rounded-2">\n                            <span class="fs-18 lh-20 text-center text-opacity">${i}</span>\n                            <span class="fs-12 lh-16 ff-roboto mt-2 text-opacity">${r}</span>\n                            <span class="fs-24 lh-26 text-center ff-sequel fvs-light mt-1">${a}</span>\n                        </label>\n                    </div>\n                `})).join("");Wm(t).html(n)},generateTimeInputs(e,t){const{slotBookingTimeSection:n}=this.variables,{getStartTime:i}=this.methods;let r=!0;Wm.each(e,(function(e,a){let o=t[e];null==o&&(o=[]);let l=!1,c=`<div class="gap-5 align-items-center mt-3 flex-wrap slot-booking__time-container ${r?"d-flex":"d-none"}">`;r=!1,Wm.each(a,(function(t,n){const r=i(n),a=s();o.includes(n)?(c+=`\n                            <div class="mg-select__form-group slot-booking__time-group bg-white rounded-2 overflow-hidden position-relative">\n                                <input\n                                    id="${a}"\n                                    type="radio"\n                                    value="${n}"\n                                    ${l?"":"checked"}\n                                    class="slot-booking__time-input mg-select__form-input validate-blur validate-submit validate-input position-absolute top-0 start-0 z-n1"\n                                    name="${e}-eventTime"/>\n                                <label\n                                    for="${a}"\n                                    class="slot-booking__time-label cursor-pointer d-flex text-center align-items-center justify-content-center mg-select__form-label w-100 h-100 rounded-2 ff-roboto fs-16 lh-20">\n                                    ${r}\n                                </label>\n                            </div>\n                        `,l||(l=!0)):c+=`\n                            <div class="mg-select__form-group slot-booking__time-group bg-light-gray-125 rounded-2 overflow-hidden position-relative">\n                                <input\n                                    id="${a}"\n                                    type="radio"\n                                    value="${n}"\n                                    disabled\n                                    class="slot-booking__time-input mg-select__form-input validate-blur validate-submit validate-input position-absolute top-0 start-0 z-n1"\n                                    name="${e}-eventTime"/>\n                                <label\n                                    for="${a}"\n                                    class="slot-booking__time-label cursor-pointer d-flex text-center align-items-center justify-content-center mg-select__form-label w-100 h-100 rounded-2 ff-roboto fs-16 lh-20">\n                                    ${r}\n                                </label>\n                            </div>\n                        `})),c+="</div>",Wm(n).append(c)}))},getCityValue(){const{slotBookingDropdown:e}=this.variables,t=new URLSearchParams(window.location.search).get("city");let n=!1;Wm(`${e} option`).each((function(){if(t&&null!=t&&Wm(this).val().toLowerCase()==t.toLowerCase())return Gm.variables.selectedCity=t,void(n=!0)})),n?Wm(`${e} option[value="${t}"]`).prop("selected",!0):Wm("main").data("iseditmode")||(window.location.href=window.location.origin+window.location.pathname+"/path-not-found")},async hitSlotDetailApi(e){const{slotBookingModel:t,slotBookingForm:n}=this.variables,i=Wm(n).data("slot-detail-url"),r=Wm(n).data("slot-detail-apikey");let a={City:e,Model:Wm(t).val()};return a=JSON.stringify(a),kt.ajaxHit(i,"POST",a,r)},async getSlotDetailResponse(){const{hitSlotDetailApi:e,showModal:t}=this.methods;try{Bt.method.showLoader();const n=await e.call(Gm,Gm.variables.selectedCity);return Bt.method.hideLoader(),"success"==n.status?(Gm.variables.response=JSON.parse(n.data),!0):(t.call(Gm,"slot-not-found"),!1)}catch(e){return Bt.method.hideLoader(),console.error(e),t.call(Gm,"api-failure"),!1}},async hitSlotBookingApi(){const{slotBookingModel:e,slotBookingForm:t,slotBookingMobile:n,slotBookingTimeContainer:i,slotBookingDateInput:r,slotBookingTimeInput:a}=this.variables,s=Wm(t).data("slot-book-url"),o=Wm(t).data("slot-book-apikey");let l={City:Gm.variables.selectedCity,Model:Wm(e).val(),PhoneNo:Wm(n).val(),slotDate:Wm(`${r}:checked`).val(),SlotTime:Wm(i).eq(Gm.variables.activeTimeSection).find(`${a}:checked`).val()};return l=JSON.stringify(l),kt.ajaxHit(s,"POST",l,o)},async getSlotBookingResponse(){const{slotBookingSuccess:e,slotBookingForm:t}=this.variables,{hitSlotBookingApi:n,showModal:i}=this.methods;try{Bt.method.showLoader();const r=await n.call(Gm);Bt.method.hideLoader(),"success"==r.status?(Wm(e).addClass("d-flex").removeClass("d-none"),Wm(t).addClass("d-none").removeClass("d-flex")):i.call(Gm,"submit-failure")}catch(e){return Bt.method.hideLoader(),console.error(e),i.call(Gm,"api-failure"),!1}},changeSlotDate(){const{slotBookingDateInput:e,slotBookingTimeContainer:t}=this.variables;Wm(e).on(i.eventsListeners.CHANGE,(function(){Wm(t).eq(Gm.variables.activeTimeSection).addClass("d-none").removeClass("d-flex"),Wm(t).eq(Wm(this).data("index")).removeClass("d-none").addClass("d-flex"),Gm.variables.activeTimeSection=Wm(this).data("index")}))},getAvailableTimeSlots(){const e={};return Wm.each(Gm.variables.response.availableDateSlots,(function(t,n){e[t]=Wm.map(n,(function(e){return e.slot_time}))})),e},async getCityData(){const{generateDateInputs:e,generateTimeInputs:t,getSlotDetailResponse:n,getAvailableTimeSlots:i,changeSlotDate:r}=this.methods,a=await n.call(Gm);if(a){const n=Gm.variables.response;if(n.allDates?.length){const a=i.call(Gm);e.call(Gm,n.allDates),t.call(Gm,n.allDateSlots,a),r.call(Gm)}}return a},handleSubmit(){const{slotBookingForm:e,slotBookingOtpScreen:t,slotBookingDetailScreen:n,slotBookingSubmitBtn:r}=this.variables,{isOtpValid:a,isPreBooked:s,getCityData:o,getSlotBookingResponse:l}=this.methods;Wm(e).on(i.eventsListeners.SUBMIT,(async function(i){if(i.preventDefault(),Wm(`${t}:visible`).length>0){if(!Os.methods.handleSubmitValidation(this,e))return;if(await a.call(Gm)){if(await s.call(Gm)){await o.call(Gm)&&(Wm(t).addClass("d-none"),Wm(n).removeClass("d-none"),Wm(r).eq(0).addClass("d-lg-flex"))}}}else l.call(Gm)}))},init(){const{slotBookingForm:e}=Gm.variables;Wm(e).length&&(this.generateValidationSchema.call(Gm),Os.methods.handleBlurValidation(Wm(e),e),Os.methods.handleInputValidation(Wm(e),e),this.initModal.call(Gm),this.getCityValue.call(Gm),this.generateOtp.call(Gm),this.handleNumberField.call(Gm),this.handleOtpFields.call(Gm),this.handleSubmit.call(Gm))}}};var jm=n(9755);const qm={variables:{mediaCenterSection:"media__center--wrapper",mediaCenterSwiper:"media__center--swiper",mediaCenterSwiperWrapper:"media__center__swiper--wrapper",mediaCenterSwiperSlide:"media__center__swiper--slide",mediaCenterSwiperPagination:"media__center__swiper--pagination",mediaCenterSwiperTime:"media__center__swiper__content--time",mediaCenterSwiperInstance:[]},methods:{initMediaCenterSwiper:function(e,t){const{mediaCenterSwiperPagination:n}=qm.variables,i=new Dp(e.get(0),{modules:[Np],pagination:{el:e.find(`.${n}`).get(0),dynamicBullets:!0,clickable:!0}});qm.variables.mediaCenterSwiperInstance[t]=i},formatePublishDate:function(e){const{mediaCenterSwiperTime:t}=qm.variables,n=e.find(`.${t}`),i=n.data("media-publish-time"),r=ks.methods.formatDate(i);n.text(r)},init:function(){const e=this,{mediaCenterSection:t,mediaCenterSwiper:n}=qm.variables,i=jm(`.${t}`);i.length>0&&i.each((function(t,i){const r=jm(i).find(`.${n}`);e.initMediaCenterSwiper(r,t)}))}}};var Ym=n(9755);const Xm={variables:{mediaCenterCardWrapper:"media__center__card--wrapper",mediaCenterCardSwiperWrapper:"media__center__card__swiper--wrapper",mediaCenterCardSwiper:"media__center__card--swiper",mediaCenterCardSwiperSlide:"media__center__card__swiper--slide",mediaCenterCardSwiperTime:"media__center__card__swiper__content--time",mediaCenterCardSwiperInstance:[]},methods:{initMediaCenterCardSwiper:function(e,t){const{EXTRA_SMALL:n,SMALL:r,MEDIUM:a,EXTRA_LARGE:s,EXTRA_EXTRA_EXTRA_LARGE:o}=i.breakPoints,l=new Dp(e.get(0),{spaceBetween:31,breakpoints:{[n]:{slidesPerView:1.2,spaceBetween:20,slidesOffsetBefore:30,slidesOffsetAfter:30},[r]:{slidesPerView:1.5,spaceBetween:20,slidesOffsetBefore:30,slidesOffsetAfter:30},[a]:{slidesPerView:2.5,spaceBetween:20,slidesOffsetBefore:30,slidesOffsetAfter:30},[s]:{slidesPerView:2.5,spaceBetween:31,slidesOffsetBefore:54,slidesOffsetAfter:54},[o]:{slidesPerView:4.5,spaceBetween:31,slidesOffsetBefore:54,slidesOffsetAfter:54}}});Xm.variables.mediaCenterCardSwiperInstance[t]=l},formatPublishDate:function(e){const{mediaCenterCardSwiperTime:t}=Xm.variables,n=e.find(`.${t}`),i=n.data("card-publish-date"),r=ks.methods.formatDate(i);n.text(r)},init:function(){const e=this,{mediaCenterCardWrapper:t,mediaCenterCardSwiper:n}=Xm.variables,i=Ym(`.${t}`);i.length>0&&i.each((function(t,i){const r=Ym(i).find(`.${n}`);e.initMediaCenterCardSwiper(r,t)}))}}};var Km=n(9755);const Zm={variables:{modelVariantsSection:".model-variants",modelVariantsSwiper:".model-variants__swiper",modelVariantsSwiperSlide:".model-variants__slide",modelVariantsImagesSwiper:".model-variants__images__swiper"},methods:{createPaginationBullets(e,t,n,i){return`<span class="${e} opacity-100 model-variation__images__pagination--bullet"  style="background-color: ${t};"></span>`},initializeNestedSwiper(e){const{modelVariantsImagesSwiper:t,modelVariantsSwiperSlide:n}=Zm.variables;Km(e).find(n).each((function(){const e=Km(this).find(t)[0],n=[];Km(e).find(".swiper-slide").each((function(){n.push({name:Km(this).data("color-name"),hexCode:Km(this).data("color-code")})})),new Dp(e,{modules:[Vp,Np],effect:"fade",slidesPerView:1,allowTouchMove:!1,fadeEffect:{crossFade:!0},pagination:{el:Km(e).find(".swiper-pagination")[0],clickable:!0,renderBullet:function(e,t){return Zm.methods.createPaginationBullets(t,n[e].hexCode,n[e].name,e)}},spaceBetween:10})}))},initializeSwiper(e,t){const{modelVariantsSwiper:n,modelVariantsImagesSwiper:r,modelVariantsSwiperSlide:a}=e.variables,s=Km(t).find(n)[0],{EXTRA_SMALL:o,SMALL:l,MEDIUM:c,LARGE:d,EXTRA_LARGE:u}=i.breakPoints;new Dp(s,{modules:[Np,Lp,Rp],resistanceRatio:0,spaceBetween:20,slidesPerView:1.2,slidesOffsetAfter:10,breakpoints:{[o]:{slidesPerView:1.2},[c]:{slidesPerView:2.5},[u]:{slidesPerView:2.95}}});e.methods.initializeNestedSwiper(s)},init(){const{modelVariantsSection:e}=Zm.variables;Km(e).length&&Km(e).each((function(){Zm.methods.initializeSwiper(Zm,Km(this))}))}}};var Jm=n(9755);const Qm={variables:{imageGallerySection:".image-gallery",loadMoreBtn:".image-gallery__cta",imageItem:".image-gallery__image__wrapper",imageContainer:".image-gallery__images__container",backCta:".image-gallery__back--cta"},methods:{initializeLoader:function(){const{loadMoreBtn:e,imageItem:t,imageContainer:n,backCta:r}=Qm.variables,a=Jm(this),s=a.find(e),o=a.find(t),l=a.find(n).data("numberOfImages"),c=l;let d=0;0!==o.length?(o.each((function(e){Jm(this).toggle(e<c)})),d=c,s.toggle(d<o.length),s.off(i.eventsListeners.CLICK).on(i.eventsListeners.CLICK,(function(){Qm.methods.loadMore(a,l)})),Jm(r).off(i.eventsListeners.CLICK).on(i.eventsListeners.CLICK,(function(){window.history.length>1?window.history.back():window.location.href="/"}))):s.hide()},loadMore:function(e,t){const{imageItem:n}=Qm.variables,i=Jm(e).find(n),r=t;let a=i.filter(":visible").length;i.slice(a,a+r).show();Jm(e).find(Qm.variables.loadMoreBtn).toggle(a+r<i.length)},init:function(){const{imageGallerySection:e}=Qm.variables;Jm(e).length&&Jm(e).each((function(){Qm.methods.initializeLoader.call(Jm(this))}))}}};var ef=n(9755);const tf={variables:{loginSection:".login-section",loginInput:".login-wrapper__input",loginWrapperForm:".login-wrapper__forms",loginInput:".login-wrapper__input",loginResendText:".login-wrapper__resend",loginOtpBtn:".login-wrapper__get-otp",ctaLabel:".cta-section__main",loginOtpInputs:".login-wrapper__otp-inputs--input",loginSubmit:".login-wrapper__submit-button",loginOtpError:".login-wrapper__otp-error",profileModal:".profile-modal",updateMsgModal:".update-msg__modal-item",profile:".profile-section",descSection:".modal-section__desc",loginclose:".modal-section__close",loginAnotherNumber:".modal-section__cta-grp--no",loginMobileInput:".login-wrapper__mobile-input",accountModal:".account-modal",accountClose:".account-modal__close",profileConsent:".consent-icon",profileConsentInput:".consent_input",profileConsentButton:".account-modal__submit-button",profileConsentCheckbox:".account-modal__checkbox-fields--checkbox",registerModalBtn:".modal-section__cta-grp--cta",choiceModal:".choice-modal",choiceModalClose:".choice-modal__close",modelNameClass:".model-name",formCloseBtn:".login-wrapper__title-close--close",resendTimeInterval:null,alreadyCalled:!1,modal:null,otpAttempts:""},methods:{resendOtpTimer(e){const{loginResendText:t,loginOtpBtn:n,ctaLabel:r}=tf.variables;let a=i.timeIntervals.OTP_RESEND_TIME;const s=ef(e).find(t).data("message"),o=ef(e).find(n).data("resend-otp");if(s.length>0){const e=s.replace("{time}s",`<span class='text-brown-50'>00:${a}S</span>`);ef(t).html(e)}ef(e).find(t).removeClass("opacity-0"),Os.variables.isResendTimerActive=!0,ef(e).find(n).addClass("pe-none opacity-80"),ef(e).find(n).find(r).text(o),tf.variables.resendTimeInterval=setInterval((function(){const i=s.replace("{time}s",`<span class='text-brown-50'>00:${a<10?"0":""}${a}S</span>`);ef(t).html(i),a--,a<0&&(Os.variables.isResendTimerActive=!1,clearInterval(tf.variables.resendTimeInterval),ef(e).find(n).removeClass("pe-none opacity-80"),ef(e).find(t).addClass("opacity-0"))}),1e3)},stopResendTimer(e){let{loginOtpBtn:t,loginResendText:n}=tf.variables;clearInterval(tf.variables.resendTimeInterval),Os.variables.isResendTimerActive=!1,ef(e).find(t).removeClass("pe-none opacity-80"),ef(e).find(n).addClass("opacity-0"),tf.variables.resendTimeInterval=null},generateOtp(e){const t=tf,{loginOtpBtn:n,loginOtpInputs:r,loginInput:a,loginWrapperForm:s,loginOtpError:o}=tf.variables,{resendOtpTimer:l}=tf.methods,c=ef(e).find(r).data("otp-generate-url"),d=ef(e).find(r).data("otp-generate-apikey"),u=ef(e).find(o),h=i.validationLimits.MAX_OTP_ATTEMPTS;ef(e).find(n).on(i.eventsListeners.CLICK,(async function(){if("true"==ef(e).find(`${a}:visible`).attr("aria-valid"))if(Bt.method.showLoader(),u.addClass("opacity-0"),t.variables.otpAttempts<h){t.variables.otpAttempts++,ef(r).attr("disabled",!1),1==t.variables.otpAttempts&&setTimeout((function(){t.variables.otpAttempts=0}),1e3*i.timeIntervals.OTP_RESET_TIME);let n={numbers:ef(`${a}:visible`).val(),otpsource:"kmi"};n=JSON.stringify(n);kt.ajaxHit(c,"POST",n,d).done((t=>{Bt.method.hideLoader();const n=t.TransactionId;"limitReached"!=n&&(sessionStorage.setItem("otpTransactionId",n),ef(r).eq(0).focus(),l.call(tf,e))})).fail((e=>{Bt.method.hideLoader(),console.error(e)}))}else Bt.method.hideLoader();else Os.methods.validateField(ef(`${a}:visible`),s,"submit")}))},async isOtpValid(e){try{Bt.method.showLoader();return"c3VjY2Vzcw=="==(await Os.methods.isOtpValid(e)).status||(Bt.method.hideLoader(),!1)}catch(e){return console.error("An error occured: ",e),Bt.method.hideLoader(),!1}},handleNumberField(e){const{loginInput:t}=tf.variables;ef(e).find(t).each((function(){Ct.methods.handleNumberInput(this)}))},validateForm(e){const t=tf,{loginWrapperForm:n}=t.variables;return Os.methods.handleSubmitValidation(e,n)},generateValidationSchema(){const{loginWrapperForm:e}=tf.variables;Ct.methods.generateFormSchema.call(Ct,["mobilePhone","otp","consent"],e,e)},handleOtpFields(e){const{loginOtpInputs:t}=tf.variables;Ct.methods.handleOtpEvents(ef(e).find(t))},handleFormSubmit(e){const{loginSubmit:t,loginOtpError:n,profileModal:r,profile:a,loginSection:s,loginMobileInput:o,accountModal:l}=tf.variables,{isOtpValid:c}=tf.methods,d=ef(e).find(t),u=ef(e),h=ef(e).find(n),p=ef(e).closest(a).find(l),m=ef(e).closest(a).find(r),f=ef(e).closest(a).find(s);d.on(i.eventsListeners.CLICK,(async t=>{if(!tf.methods.validateForm(u))return;if(await c.call(tf,u)){h.addClass("opacity-0");let t=await tf.methods.getKmiData(e,u.find(o).find("input").val());if(Bt.method.hideLoader(),!t.some((e=>e.hasOwnProperty("firstName"))))return m.removeClass("d-none"),void f.addClass("d-none");m.addClass("d-none"),f.addClass("d-none"),p.removeClass("d-none")}else Bt.method.hideLoader(),h.removeClass("opacity-0")}))},handleConsentModal(e){const{profileConsent:t,profile:n,profileConsentInput:r}=tf.variables,a=ef(e).closest(n).find(t),s=ef(e).closest(n).find(r);a.on(i.eventsListeners.CLICK,(e=>{s.prop("disabled",!1),tf.variables.alreadyCalled=!0}))},initModal(e){const{updateMsgModal:t,profile:n}=tf.variables;tf.variables.modal=Cs.methods.initModal(ef(e).closest(n).find(t),{backdrop:!1})},showModal(e,t){const{modal:n,profile:i,updateMsgModal:r}=tf.variables,a=ef(e).closest(i).find(r).find(Cs.variables.modalTitle),s=ef(e).closest(i).find(r).find(Cs.variables.modalMessage),o=ef(e).closest(i).find(r).data(`${t}-title`)??"",l=ef(e).closest(i).find(r).data(`${t}-subtitle`)??"";ef(a).text(o),ef(s).text(l),ef(e).closest(i).find(r).parent().removeClass("d-none"),n.show()},handleConsentUpdate(e){const{profileConsentButton:t,profile:n,profileConsentCheckbox:r,profileConsentInput:a,loginMobileInput:s,updateMsgModal:o,accountModal:l,formCloseBtn:c}=tf.variables,{showModal:d}=tf.methods,u=ef(e).closest(n).find(t),h=ef(e).closest(n).find(r),p=ef(e).closest(n).find(a),m=ef(l),f=ef(e).closest(n).find(o).find("button.btn-close"),g=ef(e).closest(n).find(o).find(".modal-footer button");u.on(i.eventsListeners.CLICK,(async t=>{if(!tf.variables.alreadyCalled)return;Bt.method.showLoader();let n=[];h.each(((t,i)=>{n.push((async t=>{const n=ef(t).find(a),i=n.data("consent-type"),r=ef(e).find(s).find("input").val(),o=n.is(":checked"),l=u.data("consent-api"),c=u.data("consent-api-key");try{const e=await tf.methods.changeUpdate(i,r,o,l,c);return null!=e?.statusCode?2===Math.floor(e.statusCode/100):null}catch(e){return console.error(e),!1}})(i))}));let i=!1;try{const e=(await Promise.all(n))?.filter((e=>null!==e));i=!!e?.length&&e.reduce(((e,t)=>null!=t?e=e&&t:e),!0),m.addClass("d-none")}catch(e){i=!1}d(e,i?"success":"submit-failure"),p.prop("disabled",!0),tf.variables.alreadyCalled=!1,Bt.method.hideLoader()})),f.on(i.eventsListeners.CLICK,(t=>{ef(e).closest(n).find(o).parent().addClass("d-none"),ef(c).trigger("click")})),g.on(i.eventsListeners.CLICK,(t=>{ef(e).closest(n).find(o).parent().addClass("d-none"),ef(c).trigger("click")}))},async changeUpdate(e,t,n,i,r){let a={WA:"SMSstatus",SMS:"SMSstatus"},s={mobile:t,communicationSource:e};if(a[e]&&(s[a[e]]=n),i?.length>0)try{s=JSON.stringify(s);return await kt.ajaxHit(i,"POST",s,r)}catch(e){console.error(e),Bt.method.hideLoader()}},async getKmiData(e,t){const{loginOtpInputs:n,modelNameClass:i}=tf.variables,r=ef(e).find(n).data("kmiapi"),a=ef(e).find(n).data("kmikey"),s=ef(e).find(i);if(r&&r.length>0)try{const e=[];s.each((function(){const n=ef(this).text(),i=kt.ajaxHit(`${r}?mobilenumber=${t}&model=${n}`,"GET",null,a);e.push(i)}));return await Promise.all(e)}catch(e){return console.error(e),Bt.method.hideLoader(),[]}return[]},handleModalClose(e){const{profileModal:t,profile:n,loginclose:r,loginSection:a}=tf.variables,s=ef(e).closest(n).find(t),o=ef(e).closest(a);s.find(r).on(i.eventsListeners.CLICK,(e=>{s.addClass("d-none"),o.removeClass("d-none")}))},handleProfileClose(e){const{accountClose:t,accountModal:n,profile:r,loginSection:a,formCloseBtn:s}=tf.variables,o=ef(e).closest(r).find(n),l=o.find(t),c=ef(e).closest(a);l.on(i.eventsListeners.CLICK,(e=>{c.removeClass("d-none"),o.addClass("d-none")})),ef(s).on(i.eventsListeners.CLICK,(t=>{ef(e)[0].reset(),c.removeClass("d-none"),tf.methods.stopResendTimer(e)}))},handleAnotherNumber(e){const{profileModal:t,profile:n,loginAnotherNumber:r,loginSection:a}=tf.variables,s=ef(e).closest(n).find(t),o=ef(e).closest(a);s.find(r).on(i.eventsListeners.CLICK,(t=>{ef(e)[0].reset(),tf.methods.stopResendTimer(e),ef(e).find("input:visible:first").focus(),s.addClass("d-none"),o.removeClass("d-none")}))},handleChoiceModal(e){const{profile:t,registerModalBtn:n,choiceModal:r,choiceModalClose:a,profileModal:s}=tf.variables,o=ef(e).closest(t).find(n),l=ef(e).closest(t).find(r),c=ef(e).closest(t).find(s),d=l.find(a);o.on(i.eventsListeners.CLICK,(e=>{l.removeClass("d-none"),c.addClass("d-none")})),d.on(i.eventsListeners.CLICK,(e=>{l.addClass("d-none"),c.removeClass("d-none")}))},init:function(){const{loginWrapperForm:e}=tf.variables;ef(".login-wrapper").each(((t,n)=>{tf.methods.handleNumberField(n),tf.methods.handleOtpFields(n),tf.methods.generateValidationSchema(),Os.methods.handleBlurValidation(ef(n),e),Os.methods.handleInputValidation(ef(n),e),tf.methods.generateOtp(n),tf.methods.handleFormSubmit(n),tf.methods.handleModalClose(n),tf.methods.handleAnotherNumber(n),tf.methods.handleProfileClose(n),tf.methods.handleConsentModal(n),tf.methods.handleConsentUpdate(n),tf.methods.handleChoiceModal(n),tf.methods.initModal(n)}))}}};var nf=n(9755);const rf={variables:{drivingModesSection:".driving-mode",modeButton:".driving-mode__content--cta",modeHeading:".driving-mode__content--title",modeDescription:".driving-mode__content--description",bgImage:".driving-mode__bg--image",bgVideo:".driving-mode__bg--video",overlay:".driving-mode__overlay",overlayOkButton:".driving-mode__overlay-cta",ctaSectionMain:".cta-section__main",hoverActiveClass:"hover--active"},methods:{getVideoSrcForDevice:function(e,t){return window.innerWidth<=768&&t||e},initializeModes:function(){const{modeButton:e,modeHeading:t,modeDescription:n,bgVideo:r,bgImage:a,overlay:s,overlayOkButton:o,ctaSectionMain:l,hoverActiveClass:c}=rf.variables,d=nf(this),u=d.find(r)[0],h=u.querySelector("source"),p=d.find(a)[0];let m="",f="";const g=d.find(e).first();if(g.length){const e=g.data("desktop-image"),r=g.data("mobile-image"),a=g.data("title")||"Default Title",s=g.data("desc")||"Default Description",o=g.data("desktop-video"),l=g.data("mobile-video");d.find(t).text(a),d.find(n).text(s);const c=window.innerWidth<=i.breakPoints.MEDIUM?r:e;p.src=c,f=c;const v=rf.methods.getVideoSrcForDevice(o,l);h.src=v,u.load(),m=v}const v=d.find(s);d.find(o).on(`${i.eventsListeners.CLICK}`,(function(){v.addClass("hidden"),u.muted=!1}));const _=window.innerWidth<=i.breakPoints.LARGE,b=_?[`${i.eventsListeners.TOUCHSTART}`,`${i.eventsListeners.TOUCHEND}`]:[`${i.eventsListeners.MOUSEDOWN}`,`${i.eventsListeners.MOUSEUP}`];if(_||(u.muted=!1),d.find(e).on(b[0],(function(){const e=nf(this),a=e.data("desktop-image"),s=e.data("mobile-image"),o=e.data("title")||"Default Title",g=e.data("desc")||"Default Description",v=e.data("desktop-video"),b=e.data("mobile-video");d.find(t).text(o),d.find(n).text(g),_&&nf(this).find(l).addClass(c);const y=window.innerWidth<=i.breakPoints.MEDIUM?s:a;y!==f&&(p.src=y,f=y);const x=rf.methods.getVideoSrcForDevice(v,b);x!==m&&(h.src=x,u.load(),m=x),d.find(r).css("opacity",1),u.play()})).on(b[1],(function(){u.pause(),d.find(r).css("opacity",0),_&&nf(this).find(l).removeClass(c)})),nf(window).width()<1200){const e=nf(".driving-mode__content__wrapper").height()+24;nf(".driving-mode__bg").css("max-height",`calc(100dvh - ${e}px)`)}nf(window).on("resize",(()=>{if(nf(window).width()<1200){const e=nf(".driving-mode__content__wrapper").height()+24;nf(".driving-mode__bg").css("max-height",`calc(100dvh - ${e}px)`)}}))},init:function(){const{drivingModesSection:e}=rf.variables;nf(e).length&&nf(e).each((function(){rf.methods.initializeModes.call(nf(this))}))}}};var af=n(9755);const sf={variables:{hotSpotWrapper:".hot__spot--wrapper",hotSpotContainer:".hot__spot--container",hotSpotVideoContainer:".hot__spot__init__video--container",hotSpotVideo:".hot__spot__init--video",hotSpotVideoOverlay:".hot__spot__video--overlay",hotSpotMainImg:".hot__spot__main__img--container",hotSpotContentContainer:".hot__spot__content--container",hotSpotContentTranslate:".hot__spot__content--container--translate",hotSpotContentHeading:".hot__spot__content--heading",hotSpotContentDesc:".hot__spot__content--desc",hotSpotCTA:".hot__spot--cta",hotSpotMobileCTA:".hot__spot__mob--cta",hotSpotCTACount:"data-hotspot-count",hotSpotCard:"data-hotspot-card",resetHotSpot:".reset--hotspot",hotSpotCardContainer:".hot__spot__card--container",hotSpotMobileModal:".hot__spot__mob--modal",hotSpotMobileModalClose:".hot__spot__mob__modal--close",hotSpotActive:"active",hotSpotCTAX:"data-hotspot-x",hotSpotCTAY:"data-hotspot-y",hotSpotDetailVideoContainer:".hot__spot__detail__video--container",hotSpotDetailVideo:".hot__spot__detail--video ",hotSpotDetailActiveVideo:"data-hotspot-detail-desktop-video"},methods:{isInView:async function(e){const{observeSectionFullyInView:t}=ks.methods;try{return await t(e.get(0))}catch(e){console.error("Error observing element:",e)}},initVideo:async function(e){const t=this,{isInView:n,initHotSpotImg:i}=t.methods,{hotSpotVideo:r}=t.variables;if((await n(e)).length){const n=e.find(`${r}:visible`);n.get(0).play(),i(e,n,t)}},initHotSpotImg:function(e,t,n){const{videoEnded:r}=i.eventsListeners,{hotSpotMainImg:a,hotSpotVideoOverlay:s,hotSpotVideoContainer:o,hotSpotMobileCTA:l,hotSpotActive:c}=n.variables,{initHotSpotContent:d,initHotSpotCTA:u,initHotSpotCard:h,initMobHotSpotModal:p,initHotSpotCloseModal:m}=n.methods;t.length&&t.on(r,(function(){e.find(o).addClass("opacity-0"),e.find(s).addClass("d-none"),e.find(a).removeClass("opacity-0"),e.find(l).addClass(`${l.replace(".","")}--${c}`),d(e,n),u(e,n),h(e,n),p(e,n),m(e,n)}))},initHotSpotContent:function(e,t){const{hotSpotContentHeading:n,hotSpotContentDesc:i,hotSpotActive:r}=t.variables;e.find(n).addClass(`${n.replace(".","")}--${r}`),e.find(i).addClass(`${i.replace(".","")}--${r}`)},initHotSpotCTA:function(e,t,n=!1){const{hotSpotCTA:r,hotSpotActive:a,hotSpotContentDesc:s,hotSpotCTAX:o,hotSpotCTAY:l}=t.variables,{TRANSITIONEND:c}=i.eventsListeners,d=e.find(r),u=()=>{d.each((function(e,t){af(t).css({transitionDelay:.3*e+"s",top:`${af(t).data(l.replace("data-",""))}%`,left:`${af(t).data(o.replace("data-",""))}%`,transform:`translate(${-af(t).data(o.replace("data-",""))}%, ${-af(t).data(l.replace("data-",""))}%) scale(1) rotate(0deg)`}).addClass(`${r.replace(".","")}--${a}`)})),d.css({transitionDelay:"0s"})};n?u():af(s).one(c,u)},initHotSpotCard:function(e,t){const{hotSpotCard:n,hotSpotCTACount:r,hotSpotCTA:a,hotSpotCardContainer:s,hotSpotContentContainer:o,resetHotSpot:l,hotSpotActive:c,hotSpotCTAX:d,hotSpotCTAY:u,hotSpotDetailVideoContainer:h,hotSpotDetailVideo:p,hotSpotDetailActiveVideo:m,hotSpotMainImg:f}=t.variables,{CLICK:g,TRANSITIONEND:v}=i.eventsListeners,{initHotSpotDetailVideo:_}=t.methods,b=e.find(a);b.off(g).on(g,(function(){const i=af(this),g=i.data(`${r.replace("data-","")}`),y=i.data(`${d.replace("data-","")}`),x=i.data(`${u.replace("data-","")}`),w=`${r}=${g}`,S=`${n}=${g}`,T=`${m}=${g}`,E=e.find(h).filter(`[${T}]`),M=E.find(p),C=e.find(f);if(i.hasClass(l.replace(".",""))){function A(){e.find(o).removeClass(`${o.replace(".","")}--${c}`),b.not(`[${w}]`).each((function(e,t){af(t).css({top:`${af(t).data(u.replace("data-",""))}%`,left:`${af(t).data(d.replace("data-",""))}%`,transform:`translate(${-af(t).data(d.replace("data-",""))}%, ${-af(t).data(u.replace("data-",""))}%) scale(1) rotate(0deg)`})})),i.removeClass("opacity-0")}_(e,t,E,M,C,!1,A),i.addClass("opacity-0"),e.find(`[${S}]`).removeClass(`${s.replace(".","")}--${c}`),b.not(`[${w}]`).addClass(`${a.replace(".","")}--${c}`),i.removeClass(l.replace(".","")),i.css({left:`${y}%`,top:`${x}%`,transform:`translate(${-af(this).data(d.replace("data-",""))}%, ${-af(this).data(u.replace("data-",""))}%) scale(1) rotate(0deg)`})}else{b.not(`[${w}]`).removeClass(`${a.replace(".","")}--${c}`),i.addClass(l.replace(".","")),e.find(o).addClass(`${o.replace(".","")}--${c}`);const k=e.find(`[${S}]`).addClass(`${s.replace(".","")}--${c}`);k.one(v,(function(n){if("transform"===n.originalEvent.propertyName||"left"===n.originalEvent.propertyName){const t=e.find(`[${S}]`).position().left,n=e.find(`[${S}]`).position().top+k.height()/2;i.css({left:t-110+"px",top:`${n}px`,transform:"translate(0, 0) scale(1) rotate(45deg)"}),b.not(`[${w}]`).css({transform:"translate(0, 0) scale(0) rotate(0deg)"})}_(e,t,E,M,C)}))}}))},initHotSpotDetailVideo:async function(e,t,n,r,a,s=!0,o){const{hotSpotVideoContainer:l}=t.variables,c=r.get(0).duration/2,d=async(e=!1)=>{try{if(e)return r.get(0).currentTime=c,void await r.get(0).play();await r.get(0).play()}catch(e){console.error("Playback error:",e)}};r.off(i.eventsListeners.videoMetadataLoaded).on(i.eventsListeners.videoMetadataLoaded,(async function(){s?(e.find(l).addClass("d-none"),n.removeClass("opacity-0"),a.addClass("opacity-0"),await d(),r.off(i.eventsListeners.timeUpdate).on(i.eventsListeners.timeUpdate,(function(){r.get(0).currentTime>=c&&r.get(0).pause()}))):(r.off(i.eventsListeners.timeUpdate),r.off("ended").on("ended",(function(){n.addClass("opacity-0"),a.removeClass("opacity-0"),r.get(0).currentTime=0,o&&o()})),await d(!0))})),r.get(0).readyState>=1&&r.trigger(i.eventsListeners.videoMetadataLoaded)},initMobHotSpotModal:function(e,t){const{hotSpotMobileModal:n,hotSpotMobileCTA:r,hotSpotActive:a}=t.variables,{headerOverlay:s,headerHamburger:o}=tm.variables;af(r).on(i.eventsListeners.CLICK,(function(){e.find(n).addClass(`${n.replace(".","")}--${a}`),af(s).addClass("slide-up"),af(o).addClass("slide-up"),Qp.variables.observer.disable()}))},initHotSpotCloseModal:function(e,t){const{hotSpotMobileModal:n,hotSpotActive:r}=t.variables,{headerOverlay:a,headerHamburger:s}=tm.variables;af(n).on(i.eventsListeners.CLICK,(function(){e.find(n).removeClass(`${n.replace(".","")}--${r}`),af(a).removeClass("slide-up"),af(s).removeClass("slide-up"),Qp.variables.observer.enable()}))},init:function(){const e=this,{hotSpotWrapper:t}=sf.variables,{initHotSpotCTA:n}=sf.methods,{isEditMode:r}=i,a=af(t);a.length&&a.each((function(t,i){e.initVideo.call(sf,af(i)),r&&n(af(i),sf)}))}}};var of=n(9755);const lf={methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e,t){return{linkName:e,brand:"mg select",channel:this.isMobile()?"msite|pdp":"web|pdp",linkpageName:Lt.methods.getChannelName(Lt.methods.getPageName()),linkPosition:"pdp - click",model:t}},init(){if(of(".mg-select__configurator").length){let e=of(".mg-select__configurator")[0].getAttribute("modelName");of(".mg-select__configurator .cta-section__main").on(i.eventsListeners.CLICK,(t=>{let n=t.currentTarget.getAttribute("title");i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction(n,e)}))}))}}}};var cf=n(9755);const df={methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e,t){return{linkName:e,brand:"mg select",channel:this.isMobile()?"msite|"+Lt.methods.getPageName():"web|"+Lt.methods.getPageName(),linkpageName:Lt.methods.getPageName(),linkPosition:"gallery - click",model:t}},init(){if(cf(".image-gallery").length){let e=cf(".image-gallery")[0].getAttribute("modelName");cf(".image-gallery .image-gallery__cta").on(i.eventsListeners.CLICK,(t=>{let n=cf(t.currentTarget).find(".cta-section__main").attr("title");i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction(n,e)}))})),cf(".image-gallery__image__cta--download").on(i.eventsListeners.CLICK,(t=>{i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction("download",e)}))}))}}}};var uf=n(9755);const hf={methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e,t){return{linkName:e,brand:"mg select",channel:this.isMobile()?"msite|pdp":"web|pdp",linkpageName:"vehicle:"+t,linkPosition:"pdp - click",model:t}},init(){uf(".product__banner--wrapper").length&&uf(".product__banner--desc .cta-download__wrapper").on(i.eventsListeners.CLICK,(e=>{let t=uf(e.currentTarget).find("a").attr("title"),n=i.eventsListeners.WINDOW.location.pathname.substring(1),r=this.createWebInteraction(t,n);r.brochureDownload=1,i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:r}))}))}}};var pf=n(9755);const mf={variables:{scrollSection:".scroll-container"},methods:{handleScroll(){const{SCROLL:e}=CONSTANT.eventsListeners,{scrollSection:t}=this.variables;let n;pf(t).on(e,(function(){clearTimeout(n),n=setTimeout((()=>{0===pf(t).scrollTop()&&sectionScroll.variables.observer.enable()}),100)}))},init(){const{scrollSection:e}=mf.variables;pf(e).length&&this.handleScroll.call(mf)}}};var ff=n(9755);const gf={methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e,t){return{linkName:e,brand:"mg select",channel:this.isMobile()?"msite|pdp":"web|pdp",linkpageName:"vehicle:"+t,linkPosition:"pdp - click",model:t}},init(){ff(".detailView").length&&(ff(".feature-banner__cta-cta").on(i.eventsListeners.CLICK,(e=>{let t=ff(e.currentTarget).find("a").attr("title"),n=i.eventsListeners.WINDOW.location.pathname.substring(1);i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction(t,n)}))})),ff(".feature-banner__cta-download").on(i.eventsListeners.CLICK,(e=>{let t=ff(e.currentTarget).find("a").attr("title"),n=i.eventsListeners.WINDOW.location.pathname.substring(1),r=this.createWebInteraction(t,n);r.brochureDownload=1,i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:r}))})))}}};var vf=n(9755);const _f={methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e,t,n,i){let r={linkName:e,brand:"mg select",channel:this.isMobile()?"msite|pdp":"web|pdp",linkpageName:"vehicle:"+t,linkPosition:"pdp - click",model:t};return n&&(r.variant="ev:"+n),i&&(r.price=i),r},init(){vf(".model-variants").length&&(vf(".model-variants__ctas--first").on(i.eventsListeners.CLICK,(e=>{let t=vf(e.currentTarget).closest(".model-variants__slide"),n=vf(t).find(".model-variants__slide__price .model-variants__slide__price--title").text().trim(),r=vf(t).find(".model-variants__slide__price--amount ").text().trim().split("Â ")[1],a=vf(e.currentTarget).find("a").attr("title"),s=i.eventsListeners.WINDOW.location.pathname.substring(1);i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction(a,s,n,r)}))})),vf(".model-variants__ctas--second").on(i.eventsListeners.CLICK,(e=>{let t=vf(e.currentTarget).closest(".model-variants__slide"),n=vf(t).find(".model-variants__slide__price .model-variants__slide__price--title").text().trim(),r=vf(e.currentTarget).find("a").attr("title"),a=i.eventsListeners.WINDOW.location.pathname.substring(1);i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction(r,a,n)}))})))}}};var bf=n(9755);const yf={methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e){return{linkName:e,brand:"mg select",channel:this.isMobile()?"msite|"+Lt.methods.getChannelName(Lt.methods.getPageName()):"web|"+Lt.methods.getChannelName(Lt.methods.getPageName()),linkpageName:Lt.methods.getPageName()+" page",linkPosition:"footer click"}},webInteraction(e){return{linkName:e,brand:"mg select",channel:this.isMobile()?"msite|"+Lt.methods.getChannelName(Lt.methods.getPageName()):"web|"+Lt.methods.getChannelName(Lt.methods.getPageName()),pageName:Lt.methods.getPageName()+" page",linkPosition:"footer links",footerClick:1}},init(){bf(".mg-footer").length&&(bf(".footer__social a").on(i.eventsListeners.CLICK,(e=>{let t=bf(e.currentTarget).attr("title");i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction(t)}))})),bf(".footer__navigation--content a").on(i.eventsListeners.CLICK,(e=>{let t=bf(e.currentTarget).attr("title");i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction(t)}))})),bf(".footer__logo a").on(i.eventsListeners.CLICK,(e=>{i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.webInteraction("mg select logo")}))})))}}};var xf=n(9755);const wf={methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e,t){return{linkName:e,brand:"mg select",channel:this.isMobile()?"msite|pdp":"web|pdp",linkpageName:"vehicle:"+t,linkPosition:"pdp - click",model:t}},init(){xf(".detailView").length&&xf(".driving-mode__content--cta").on(i.eventsListeners.CLICK,(e=>{let t=xf(e.currentTarget).find("button span").text().trim(),n=i.eventsListeners.WINDOW.location.pathname.substring(1);i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction(t,n)}))}))}}};var Sf=n(9755);const Tf={methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e){return{linkName:e,brand:"mg select",channel:this.isMobile()?"msite|"+Lt.methods.getChannelName(Lt.methods.getPageName()):"web|"+Lt.methods.getChannelName(Lt.methods.getPageName()),linkpageName:Lt.methods.getPageName()+" page",linkPosition:"media-and-event - click"}},init(){Sf(".media__center--wrapper").length&&Sf(".media__center__swiper__content--container .cta-section").on(i.eventsListeners.CLICK,(e=>{let t=Sf(e.currentTarget).find("a").attr("title");i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction(t)}))}))}}};var Ef=n(9755);const Mf={methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e){return{linkName:e,brand:"mg select",channel:this.isMobile()?"msite|"+Lt.methods.getChannelName(Lt.methods.getPageName()):"web|"+Lt.methods.getChannelName(Lt.methods.getPageName()),linkpageName:Lt.methods.getPageName()+" page",linkPosition:"media-and-event - click"}},init(){Ef(".media__center__card--wrapper").length&&(Ef(".media__center__card__content--container .cta-section").on(i.eventsListeners.CLICK,(e=>{let t=Ef(e.currentTarget).closest(".media__center__card--container").data("title")+":"+Ef(e.currentTarget).find("a").attr("title");i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction(t)}))})),Ef(".media__center__card__swiper--slide .cta-section").on(i.eventsListeners.CLICK,(e=>{let t=Ef(e.currentTarget).closest(".media__center__card--container").data("title")+":"+Ef(e.currentTarget).find("a").attr("title");i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction(t)}))})))}}};var Cf=n(9755);const Af={methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e){return{linkName:e,brand:"mg select",channel:this.isMobile()?"msite|"+Lt.methods.getChannelName(Lt.methods.getPageName()):"web|"+Lt.methods.getChannelName(Lt.methods.getPageName()),linkpageName:Lt.methods.getPageName(),linkPosition:"event list - click"}},init(){Cf(".media__center__list--container ").length&&Cf(".media__center__list--container .cta-section a").on(i.eventsListeners.CLICK,(e=>{let t=Cf(e.currentTarget).attr("title");i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction(t)}))}))}}};var kf=n(9755);const Df={variables:{tickerSection:".ticker-section",tickerDetails:".ticker__detials",tickerClose:".ticker__detials--close"},methods:{closeTicker(e){const{tickerClose:t}=Df.variables;kf(e).find(t).on(i.eventsListeners.CLICK,(t=>{kf(e).removeClass("show-ticker")}))},hexToRgb(e){let t=kf(e).data("bg-color"),n="";if(t.startsWith("#")){let e=t.replace("#","");3===e.length&&(e=e.split("").map((function(e){return e+e})).join(""));let i=parseInt(e,16);n=[i>>16&255,i>>8&255,255&i].join(", ")}else t.includes(",")&&(n=t.replace(/[^\d,]/g,"").trim());kf(e).css("--bg-color",n)},showTicker(e){sessionStorage.getItem("show-ticker")||(setTimeout((()=>{kf(e).addClass("show-ticker")}),8e3),sessionStorage.setItem("show-ticker",!0))},init:()=>{const{tickerSection:e}=Df.variables;kf(e).length>0&&kf(e).each(((e,t)=>{Df.methods.hexToRgb(t),Df.methods.showTicker(t),Df.methods.closeTicker(t)}))}}};var Lf=n(9755);const If={variables:{partnerSpotlightSection:".partner-spotlight",partnerSpotlightSwiper:".partner-spotlight__swiper",partnerSpotlightSwiperSlide:".partner-spotlight__swiper .swiper-slide",partnerSpotlightSwiperSlideActive:".partner-spotlight__swiper .swiper-slide-active",partnerSpotlightPrevious:".partner-spotlight__navigation--prev",partnerSpotlightNext:".partner-spotlight__navigation--next",partnerSpotlightPagination:".partner-spotlight__pagination",partnerSpotlightDescription:".partner-spotlight__description"},methods:{setDescriptionHeight(){const{partnerSpotlightDescription:e}=this.variables;let t=0;Lf(e).each((function(){t=t<Lf(this).height()?Lf(this).height():t})),Lf(e).height(t),console.log(t)},initSwiper(){const{partnerSpotlightSwiper:e,partnerSpotlightSwiperSlide:t,partnerSpotlightPagination:n,partnerSpotlightNext:i,partnerSpotlightPrevious:r}=this.variables;let a=0;Lf(t).length>4?a=2:Lf(t).length>2&&(a=1);new Dp(e,{modules:[$p,Rp,Np],initialSlide:a,effect:"coverflow",grabCursor:!0,centeredSlides:!0,slidesPerView:"auto",coverflowEffect:{rotate:0,stretch:0,depth:400,modifier:1,slideShadows:!0},navigation:{nextEl:i,prevEl:r,disabledClass:"opacity-50"},pagination:{el:n,clickable:!0}})},init(){const{partnerSpotlightSection:e}=If.variables;Lf(e).length&&(this.initSwiper.call(If),this.setDescriptionHeight.call(If))}}};var Pf=n(9755);const Rf={variables:{colorvariantSection:".color-variant",colorModals:".color-variant__models--model",colortabs:".color-variant__color-tabs--color",colorTitle:".color-variant--title"},methods:{hideModels(e){const{colorModals:t,colortabs:n,colorTitle:r}=Rf.variables,a=Pf(e).find(t),s=Pf(e).find(n),o=Pf(e).find(r);Pf(a[0]).removeClass("opacity-0"),Pf(s[0]).addClass("active"),o.text(Pf(s[0]).data("title"));const l=Pf(s[0]).data("theme");o.removeClass("light dark").addClass(l),s.each(((e,t)=>{Pf(t).on(i.eventsListeners.CLICK,(n=>{o.text(Pf(t).data("title"));const i=Pf(t).data("theme");o.removeClass("light dark").addClass(i),Rf.methods.changeHeaderTheme(i),a.addClass("opacity-0"),s.removeClass("active"),Pf(a[e]).removeClass("opacity-0"),Pf(s[e]).addClass("active")}))}))},init(){const{colorvariantSection:e}=Rf.variables;Pf(e).length>0&&Pf(e).each(((e,t)=>{Rf.methods.hideModels(t)}))},changeHeaderTheme(e){const{enableLightHeader:t,enableDarkHeader:n}=tm.methods,{headerHamburgerBtn:i,headerLogoDark:r}=tm.variables,a=Pf(Rf.variables.colorvariantSection).parent(".mg-select-scroller");"light"===e&&a.hasClass("dark-header")?(a.addClass("light-header").removeClass("dark-header"),t(),Pf(i).addClass("hamburger-transition"),Pf(r).addClass("logo-transition")):"dark"===e&&a.hasClass("light-header")&&(a.addClass("dark-header").removeClass("light-header"),n(),Pf(i).addClass("hamburger-transition"),Pf(r).addClass("logo-transition"))}}};var Of=n(9755);const Nf={variables:{mediaCenterListWrapper:".media__center__list--wrapper",mediaCenterFilterYear:".media__center__list__filter--year",mediaCenterFilterMonth:".media__center__list__filter--month",mediaCenterListDivider:".media__center__list--divider",mediaCenterDataMonth:"data-media-month",mediaCenterDataYear:"data-media-year",mediaCenterListNotFound:".media__center__list--notfound"},methods:{filterMediaCenterList:function(e){const{CHANGE:t}=i.eventsListeners,{mediaCenterFilterYear:n,mediaCenterFilterMonth:r,mediaCenterDataMonth:a,mediaCenterDataYear:s,mediaCenterListDivider:o,mediaCenterListNotFound:l}=this.variables,c=e.find(n),d=e.find(r),u=e.find(`[${s}], [${a}]`),h=e.find(o),p=e.find(l);d.add(c).on(t,(()=>{const t=c.find(":selected").val(),n=d.find(":selected").val();let i="";"all"!==t&&"all"!==n?i=`[${s}="${t}"][${a}="${n}"]`:"all"!==t?i=`[${s}="${t}"]`:"all"!==n&&(i=`[${a}="${n}"]`),u.addClass("d-none"),h.addClass("d-none");const r=i?e.find(i):u;r.removeClass("d-none"),r.each(((e,t)=>{Of(t).next(o).removeClass("d-none")})),1===r.length&&r.first().next(o).addClass("d-none"),0===r.length?p.removeClass("d-none"):p.addClass("d-none")}))},init:function(){const e=this,{mediaCenterListWrapper:t}=Nf.variables;Of(t).length&&Of(t).each((function(t,n){const i=Of(n);e.filterMediaCenterList.call(Nf,i)}))}}};var Bf=n(9755);const Ff={variables:{imageRevealWrapper:".image__reveal--wrapper",imageRevealOverlay:".image__reveal--overlay",imageGlitchInit:".image__reveal__glitch--show",imageRevealImages:".image__reveal--images",maxRevealHeight:60,edgeThresholdPx:2,initTime:700},methods:{isInView:async function(e){const{observeSectionFullyInView:t}=ks.methods;try{return await t(e.get(0))}catch(e){console.error("Error observing element:",e)}},lerp:function(e,t,n){return e+(t-e)*n},computeClipPathValues:function(e,t,n,i){const r=t/2,a=Math.abs(e-r),s=r;if((e=Math.min(Math.max(e,0),t))<=n+.5)return{topInset:0,bottomInset:100,snap:!0};if(e>=t-n)return{topInset:100,bottomInset:0,snap:!0};let o=1-a/s;o=Math.pow(o,1.5);const l=i*o;let c=e/t*100-l/2;c=Math.min(Math.max(c,0),100-l);return{topInset:c,bottomInset:100-c-l,snap:!1}},toClipPath:function(e,t){return`inset(${e}% 0% ${t}% 0%)`},animate:function(e){if(null===e.targetCursorY)return void requestAnimationFrame((()=>this.animate(e)));e.containerHeight||(e.containerHeight=e.$wrapper[0].getBoundingClientRect().height);const{topInset:t,bottomInset:n,snap:i}=this.computeClipPathValues(e.targetCursorY,e.containerHeight,Ff.variables.edgeThresholdPx,Ff.variables.maxRevealHeight);i?(e.currentTopInset=t,e.currentBottomInset=n):(e.currentTopInset=this.lerp(e.currentTopInset,t,.1),e.currentBottomInset=this.lerp(e.currentBottomInset,n,.1)),e.$overlay.css("clip-path",this.toClipPath(e.currentTopInset,e.currentBottomInset)),requestAnimationFrame((()=>this.animate(e)))},updateClipPath:function(e,t,n=!0){const i=t.$wrapper[0].getBoundingClientRect();if(t.targetCursorY=e.clientY-i.top,n)t.$overlay.css("transition","clip-path 0.3s ease-out");else{t.containerHeight||(t.containerHeight=i.height);const{topInset:e,bottomInset:n}=this.computeClipPathValues(t.targetCursorY,t.containerHeight,Ff.variables.edgeThresholdPx,Ff.variables.maxRevealHeight);t.currentTopInset=e,t.currentBottomInset=n,t.$overlay.css("transition","none"),t.$overlay.css("clip-path",this.toClipPath(e,n))}},bindEvents:function(e){e.$wrapper.on(i.eventsListeners.POINTERENTER,(t=>Ff.methods.updateClipPath(t,e,!1))),e.$wrapper.on(i.eventsListeners.POINTERMOVE,(t=>Ff.methods.updateClipPath(t,e,!0)))},setupInstance:async function(e){const t=this,{imageGlitchInit:n,initTime:r,imageRevealImages:a,imageRevealOverlay:s}=Ff.variables,{EXTRA_LARGE:o}=i.breakPoints,{WINDOW:l,TOUCHSTART:c,TOUCHEND:d}=i.eventsListeners,{isInView:u}=t.methods;(await u(e.$wrapper)).length&&setTimeout((function(){e.$wrapper.find(a).removeClass(`${n.replace(".","")}`),Bf(l).width()>=o?(e.$overlay=e.$wrapper.find(s),e.currentTopInset=50,e.currentBottomInset=50,e.targetCursorY=null,e.containerHeight=0,t.methods.bindEvents(e),t.methods.animate(e)):Bf(a).on(c,(function(e){Bf(this).addClass(`${n.replace(".","")}`)})).on(d,(function(){Bf(this).removeClass(`${n.replace(".","")}`)}))}),r)},init:function(){const e=this,{imageRevealWrapper:t}=Ff.variables;Bf(t).length>0&&Bf(t).each((function(t,n){const i={$wrapper:Bf(n)};e.setupInstance.call(Ff,i)}))}}};var Uf=n(9755);const zf={methods:{createDatalayer(e,t){return{event:e,xdmActionDetails:t}},isMobile(){return/Mobi|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},createWebInteraction(e,t){return{linkName:e,brand:"mg select",channel:this.isMobile()?"msite|pdp":"web|pdp",linkpageName:"vehicle:"+t,linkPosition:"pdp - click",model:t}},init(){Uf(".artGallery").length&&Uf(".art-gallery__details--cta").on(i.eventsListeners.CLICK,(e=>{let t=Uf(e.currentTarget).find("a").attr("title"),n=i.eventsListeners.WINDOW.location.pathname.substring(1);i.eventsListeners.ADOBE_DATA_LAYER.push(this.createDatalayer("linkClicked",{webInteraction:this.createWebInteraction(t,n)}))}))}}},Vf={methods:{checkLoop:(e,t)=>{if(hm()(e).data("is-loop"))t.loop=!0;else{const t=hm()(e).find(".mg-swiper-slide").last().find(".mg-banner__video");t.get(0)&&t.on("ended",(()=>{t.get(0).currentTime=0,t.next().children(".play-icon").removeClass("opacity-0")}))}},checkAutoplay:(e,t)=>{if(hm()(e).data("is-autoplay")){const n=hm()(e).data("delay"),i=hm()(e).data("autopause-disabled");t.autoplay={delay:n,stopOnLastSlide:!0,pauseOnMouseEnter:i}}},setInitialSlide:(e,t)=>{let n;hm()(`${e} .mg-swiper-slide`).each(((e,t)=>{hm()(t).data("active")&&(n=hm()(t).data("active"))})),n-=1,t.initialSlide=n},changeHeaderTheme(e,t){const{enableLightHeader:n,enableDarkHeader:i}=tm.methods,{headerHamburgerBtn:r,headerLogoDark:a}=tm.variables;e.on("slideChange",(()=>{if(hm()(Qp.variables.section).eq(Qp.variables.currentIndex).find(t).length){const s=hm()(t).find(".mg-swiper-slide").eq(e.activeIndex).find(".banner");s.hasClass("light-header")?(hm()(s).closest(".mg-select-scroller").addClass("light-header").removeClass("dark-header"),n(),hm()(r).addClass("hamburger-transition"),hm()(a).addClass("logo-transition")):s.hasClass("dark-header")&&(hm()(s).closest(".mg-select-scroller").removeClass("light-header").addClass("dark-header"),i(),hm()(r).addClass("hamburger-transition"),hm()(a).addClass("logo-transition"))}}))},handleSwiperAutoplay(e,t){if(hm()(t).data("is-autoplay")){const n=hm()(t).get(0),i=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting?e.autoplay.start():e.autoplay.stop()}))}),{threshold:.5});i.observe(n)}},handleVideos(e,t){hm()(t).find(".hero__banner__video--wrapper:visible").each((function(){hm()(this).find("video").get(0).loop=!1,hm()(this).find("video").on("ended",(()=>{e.slideNext()}))}));let n=hm()(t).find(".mg-swiper-slide").eq(e.activeIndex).find(".mute-icon__wrapper--unmute-icon").hasClass("d-none");n=void 0!==n&&n,hm()(t).find(".mute-icon__wrapper").each((function(){hm()(this).on("click",(()=>{n=hm()(this).find(".mute-icon__wrapper--unmute-icon").hasClass("d-none")}))})),e.on("slideChangeTransitionEnd",(()=>{const i=hm()(t).find(".mg-swiper-slide").eq(e.activeIndex).find(".hero__banner__video--wrapper:visible").find("video");i.length&&(i.get(0).muted=n,n?(hm()(t).find(".mg-swiper-slide").eq(e.activeIndex).find(".mute-icon__wrapper--unmute-icon").addClass("d-none"),hm()(t).find(".mg-swiper-slide").eq(e.activeIndex).find(".mute-icon__wrapper--mute-icon").removeClass("d-none")):(hm()(t).find(".mg-swiper-slide").eq(e.activeIndex).find(".mute-icon__wrapper--unmute-icon").removeClass("d-none"),hm()(t).find(".mg-swiper-slide").eq(e.activeIndex).find(".mute-icon__wrapper--mute-icon").addClass("d-none")))}))},pauseAutoplayOnMobile(e,t){hm()(t).data("is-autoplay")&&ks.methods.isMobile()&&(e.on("touchStart",(()=>{e.autoplay.stop()})),e.on("touchEnd",(()=>{e.autoplay.start()})))},swiperConfig:e=>{const{checkLoop:t,checkAutoplay:n,setInitialSlide:i,changeHeaderTheme:r,handleSwiperAutoplay:a,handleVideos:s,pauseAutoplayOnMobile:o}=Vf.methods;let l={modules:[Np,Rp,Bp],centeredSlides:!0,slidesPerView:1,lazy:!0,navigation:{nextEl:".mg-swiper-button-next",prevEl:".mg-swiper-button-prev",disabledClass:"opacity-70"},pagination:{el:".mg-swiper-pagination",clickable:!0}};t(e,l),n(e,l),i(e,l);const c=new Dp(e,l);a(c,e),r(c,e),s(c,e),o(c,e)},initSwiper:()=>{hm()(".mg-swiper").length>0&&hm()(".mg-swiper").each(((e,t)=>{Vf.methods.swiperConfig(hm()(t).data("swiper-id"))}))}}};var Hf=n(9755);const $f={variables:{backBtn:".media__center__detail--cta"},methods:{handleClickBack(){const{backBtn:e}=this.variables,{CLICK:t}=i.eventsListeners;Hf(e).on(t,(function(){window.history.length>1?window.history.back():window.location.href="/"}))},init(){const{backBtn:e}=$f.variables;Hf(e).length&&this.handleClickBack.call($f)}}};var Wf=n(9755);const Gf={variables:{dealerLocatorSection:".dealer-locator",dealerLocatorInput:".dealer-locator__location--input",dealerLocatorCurrLocationBtn:".dealer-locator__location--current",dealerLocatorMap:".dealer-locator__map",dealerLocatorDealerList:".dealer-locator__dealerships-list",dealerLocatorDealerItem:"dealer-locator__dealerships-item",dealerLocatorMarker:"dealer-locator__map--marker",dealerLocatorFiltersBtn:".dealer-locator__filters-btn",dealerLocatorMapViewBtn:".dealer-locator__view-map",dealerLocatorListViewBtn:".dealer-locator__view-list",dealerLocatorMapView:"dealer-locator__map-view",dealerLocatorListView:"dealer-locator__list-view",dealerLocatorModal:".dealer-locator__modal",dealerLocatorError:".dealer-locator__error",dealerLocatorFacilityMapping:".dealer-locator__facility-mapping",dealerTypeService:!1,map:null,modal:null,prevInfoWindow:null,currentPosition:{},isDefault:!1,defaultLatLng:{lat:28.7040592,lng:77.10249019999999},defLatitude:null,defLongitude:null,dynInputLat:null,dynInputLng:null},methods:{fallbackToDefaultLocation(){const{defaultLatLng:e,dealerLocatorInput:t}=this.variables,{getDealerData:n,initMap:i}=this.methods;this.variables.currentPosition={latitude:e.lat,longitude:e.lng},Gf.variables.isDefault=!0,Wf(t).val(""),Bt.method.showLoader(),i.call(Gf),n.call(Gf,e.lat,e.lng)},fetchUserLocation(){const{dealerLocatorInput:e}=this.variables,{fallbackToDefaultLocation:t,initMap:n,getDealerData:i,showModal:r}=this.methods;if(!navigator.permissions||!navigator.geolocation)return Bt.method.hideLoader(),void t.call(Gf);Bt.method.showLoader(),navigator.geolocation.getCurrentPosition((function(t){Gf.variables.currentPosition={latitude:t.coords.latitude,longitude:t.coords.longitude},Gf.variables.isDefault=!1;const r={lat:t.coords.latitude,lng:t.coords.longitude};Ut.variables.googleGeocoder.geocode({location:r},(function(t,n){if("OK"===n&&t[0]){let n="";t[0].address_components.forEach((function(e){e.types.includes("locality")&&(n+=e.long_name),e.types.includes("administrative_area_level_1")&&(n+=", "+e.long_name),e.types.includes("country")&&(n+=", "+e.long_name)})),Wf(e).val(n)}})),n.call(Gf),i.call(Gf)}),(function(e){Bt.method.hideLoader(),e.code===e.PERMISSION_DENIED?(t.call(Gf),r.call(Gf,"request-access")):(console.error("â ï¸ Error:",e.message),r.call(Gf,"permission-api-failure"))}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},async handleGeolocationPermission(){const{fallbackToDefaultLocation:e,fetchUserLocation:t,showModal:n}=this.methods;if(!navigator.permissions||!navigator.geolocation)return Bt.method.hideLoader(),void e.call(Gf);try{const n=await navigator.permissions.query({name:"geolocation"});"granted"===n.state?t.call(Gf):e.call(Gf),n.onchange=function(){"granted"===this.state?t.call(Gf):"denied"===this.state&&e.call(Gf)}}catch(e){console.error("Error checking geolocation permission",e),n.call(Gf,"api-failure")}},getCurrentLocation(){const{dealerLocatorCurrLocationBtn:e,dealerLocatorInput:t,dealerLocatorError:n}=this.variables,{fetchUserLocation:r}=this.methods;Wf(e).on(i.eventsListeners.CLICK,(function(){Wf(t).val(""),Wf(n).addClass("opacity-0"),r.call(Gf)}))},getLocationDropdown(){const{dealerLocatorInput:e,dealerLocatorError:t}=this.variables,{initMap:n,getDealerData:r}=this.methods,a=new google.maps.places.Autocomplete(Wf(e).get(0),{componentRestrictions:{country:"IN"}});Wf(e).on(i.eventsListeners.KEYDOWN,(function(e){e.key===i.keyboardKeys.ENTER&&e.preventDefault()})),google.maps.event.addListener(a,"place_changed",(function(){const e=a.getPlace();if(!e.geometry)return void Wf(t).removeClass("opacity-0");Wf(t).addClass("opacity-0");const i=e.geometry.location,s=i.lat(),o=i.lng();Gf.variables.currentPosition={latitude:s,longitude:o},n.call(Gf),Bt.method.showLoader(),Gf.variables.isDefault=!1,r.call(Gf,s,o)}))},async getDealerData(e=Gf.variables.currentPosition.latitude,t=Gf.variables.currentPosition.longitude){const{dealerLocatorSection:n}=this.variables,{showModal:i,createMarkers:r}=this.methods,a=Wf(n).find('[name="dealer-url"]').val(),s=Wf(n).find('[name="dealer-apikey"]').val(),o=Wf(n).find('[name="site"]').val(),l=Wf(n).find('[name="model"]').val(),c=Wf(n).find('[name="dealerOutletType"]').val(),d=Wf(n).find('[name="noOfDealers"]').val()||5,u={latitude:e,longitude:t,Source:o,modelLine:l,type:c};try{const e=await kt.ajaxHit(a,"GET",u,s);e.DealerList?r.call(Gf,e.DealerList.slice(0,d)):i.call(Gf,"dealer-not-found")}catch(e){Bt.method.hideLoader(),console.error(e),i.call(Gf,"api-failure")}},createMarkers(e){const{dealerLocatorInput:t}=this.variables,{processDealers:n}=this.methods,i=Wf(t).val().trim();if(""!==i)Ut.variables.googleGeocoder.geocode({address:i},(function(t,i){if(i===google.maps.GeocoderStatus.OK){const i=new google.maps.LatLng(t[0].geometry.location.lat(),t[0].geometry.location.lng());n.call(Gf,e,i)}}));else if(0!==Object.keys(this.variables.currentPosition).length){const t=new google.maps.LatLng(this.variables.currentPosition.latitude,this.variables.currentPosition.longitude);n.call(Gf,e,t)}},createDealerMarker(e,t){const{dealerLocatorMarker:n}=this.variables,i=Wf(`<div class="${n}"></div>`)[0];return new google.maps.marker.AdvancedMarkerElement({map:Gf.variables.map,position:e,title:t,content:i})},createDealerListItem(e,t,n){const{dealerLocatorDealerItem:i,dealerLocatorDealerList:r,dealerLocatorFacilityMapping:a}=this.variables,s=`${e.Street}, ${e.City}, ${e.State} - ${e.Postal_Code}`,o=e.WebSite&&!e.WebSite.trim().startsWith("http")?`http://${e.WebSite}`:e.WebSite,l=Gf.variables.isDefault?`http://maps.google.com/maps?daddr=${n.lat},${n.lng}`:`http://maps.google.com/maps?saddr=${t}&daddr=${n.lat},${n.lng}`,c=JSON.parse(Wf(a).text()).filter((t=>t.facilityType.toLowerCase()===e.Facility_Type.toLowerCase()))[0].mappedItems;return Wf(`<li class="${i} py-3 pe-9 cursor-pointer"></li>`).html(`\n                    <h4 class="fs-14 lh-18 text-black fvs-semibold dealer-locator__dealerships-title">${e.DealerName}</h4>\n                    <p class="fs-12 lh-16 text-black fvs-regular opacity-50 mt-1 dealer-locator__dealerships-subtitle">${s}</p>\n                    <div class="mt-2 d-flex align-items-center column-gap-6">\n                        <a href="tel:${e.Mobile}" class="outline-none d-flex align-items-center cursor-pointer column-gap-1 text-black fs-12 lh-14 link-underline-opacity-0 link-underline-opacity-100-hover link-underline-dark">\n                            <span class="flex-shrink-0 dealer-locator__dealerships-item__icon telephone-icon rounded-circle"></span>\n                            <span class="text-black fvs-regular opacity-50">${e.Mobile}</span>\n                        </a>\n                        ${e.WebSite?`\n                            <a href="${o}" target="_blank" class="outline-none d-flex align-items-center cursor-pointer column-gap-1 text-black fs-12 lh-14 link-underline-opacity-0 link-underline-opacity-100-hover link-underline-dark">\n                                <span class="flex-shrink-0 dealer-locator__dealerships-item__icon website-icon rounded-circle"></span>\n                                <span class="text-black fvs-regular opacity-50">${Wf(r).data("website-label")}</span>\n                            </a>\n                        `:""}\n                    </div>\n                    <div class="mt-2 d-flex align-items-center column-gap-6">\n                        <a href="${l}" target="_blank" class="outline-none d-flex align-items-center cursor-pointer column-gap-1 text-black fs-12 lh-14 link-underline-opacity-0 link-underline-opacity-100-hover link-underline-dark">\n                            <span class="flex-shrink-0 dealer-locator__dealerships-item__icon direction-icon rounded-circle"></span>\n                            <span class="text-black opacity-50 fvs-regular">${Wf(r).data("direction-label")}</span>\n                        </a>\n                        <p class="d-flex align-items-center column-gap-1 text-black fs-12 lh-14">\n                            <span class="flex-shrink-0 dealer-locator__dealerships-item__icon distance-icon"></span>\n                            <span class="text-black opacity-50 fvs-regular ${e.DealerCode}"></span>\n                        </p>\n                    </div>\n                    <div class="mt-3 mb-1 d-flex align-items-center column-gap-6">\n                        ${c.map((e=>`<img class="dealer-locator__dealerships-facility object-fit-contain object-position-bottom flex-shrink-0" src="${e.image}" alt="${e.title}" title="${e.title}">`)).join("")}\n                    </div>\n                `)},attachMarkerEvents(e,t){const n=new google.maps.InfoWindow({content:t.html()});google.maps.event.addListener(e,i.eventsListeners.CLICK,(function(){Gf.variables.prevInfoWindow&&Gf.variables.prevInfoWindow.close(),Gf.variables.prevInfoWindow=n,n.setContent(t.html()),n.open(Gf.variables.map,e)}))},attachListClickEvent(e,t){const{dealerLocatorSection:n,dealerLocatorMapView:r,dealerLocatorListView:a}=this.variables,s=new google.maps.InfoWindow({content:e.html()});e.on(i.eventsListeners.CLICK,(function(){Gf.variables.prevInfoWindow&&Gf.variables.prevInfoWindow.close(),Gf.variables.prevInfoWindow=s,s.setContent(Wf(this).html()),s.open(Gf.variables.map,t),Wf(n).addClass(r).removeClass(a)}))},getDistance(e,t,n){const{dealerLocatorInput:i}=this.variables,r=new google.maps.DistanceMatrixService,a={origins:[{lat:""!==Wf(i).val()?Gf.variables.dynInputLat:Gf.variables.currentPosition.latitude||Gf.variables.defLatitude,lng:""!==Wf(i).val()?Gf.variables.dynInputLng:Gf.variables.currentPosition.longitude||Gf.variables.defLongitude}],destinations:[{lat:t,lng:n}],travelMode:"DRIVING"};r.getDistanceMatrix(a,(function(t,n){if("OK"!==n)return;const i=t.rows[0].elements[0].distance.text.toUpperCase();Wf(`.${e}`).length&&Wf(`.${e}`).html(`${i} AWAY`)}))},processDealers(e,t){const{dealerLocatorDealerList:n}=this.variables,{createDealerMarker:i,createDealerListItem:r,attachMarkerEvents:a,attachListClickEvent:s,getDistance:o,setupMapScroll:l}=this.methods;Wf(n).empty(),Wf.each(e,(function(e,l){const c={lat:parseFloat(l.Lattitude),lng:parseFloat(l.Longitude)},d=i.call(Gf,c,l.DealerName),u=r.call(Gf,l,t,c);Wf(n).append(u),a.call(Gf,d,u),s.call(Gf,u,d),o.call(Gf,l.DealerCode,c.lat,c.lng),(new google.maps.LatLngBounds).extend(c)})),Bt.method.hideLoader()},initMap(e=Gf.variables.currentPosition){const{dealerLocatorMap:t}=this.variables,n={lat:e.latitude,lng:e.longitude};Gf.variables.dynInputLat=e.latitude,Gf.variables.dynInputLng=e.longitude;const i={zoom:7,center:n,mapId:"map"},r=new google.maps.Map(Wf(t).get(0),i);Gf.variables.map=r;new google.maps.marker.AdvancedMarkerElement({position:n,map:r,title:"Current Location"});r.setCenter(n)},changeView(){const{dealerLocatorMapViewBtn:e,dealerLocatorListViewBtn:t,dealerLocatorSection:n,dealerLocatorMapView:r,dealerLocatorListView:a}=this.variables;Wf(window).width()<i.breakPoints.LARGE&&Wf(n).removeClass(r).addClass(a),Wf(e).on(i.eventsListeners.CLICK,(function(){Wf(n).addClass(r).removeClass(a)})),Wf(t).on(i.eventsListeners.CLICK,(function(){Wf(n).removeClass(r).addClass(a)}))},initModal(){const{dealerLocatorModal:e}=this.variables;Gf.variables.modal=Cs.methods.initModal(Wf(e))},async initGeocoderScript(){const{dealerLocatorSection:e}=this.variables,{getLocationDropdown:t,getCurrentLocation:n,handleGeolocationPermission:i,showModal:r}=this.methods,a=Wf(e).find('[name="geocoder-url"]').val();if(null==Ut.variables.googleGeocoder&&!Wf("main").data("iseditmode")){Bt.method.showLoader();try{await Ut.methods.loadScript(a),i.call(Gf),t.call(Gf),n.call(Gf)}catch(e){r.call(Gf,"api-failure")}}},showModal(e){const{modal:t,dealerLocatorModal:n}=this.variables,i=Wf(n).find(Cs.variables.modalTitle),r=Wf(n).find(Cs.variables.modalMessage),a=Wf(n).data(`${e}-title`)??"",s=Wf(n).data(`${e}-subtitle`)??"";Wf(i).text(a),Wf(r).text(s),t.show()},init(){const{dealerLocatorSection:e}=Gf.variables;Wf(e).length&&(this.initGeocoderScript.call(Gf),this.changeView.call(Gf),this.initModal.call(Gf))}}},jf="181",qf=100,Yf=301,Xf=302,Kf=303,Zf=304,Jf=306,Qf=1e3,eg=1001,tg=1002,ng=1003,ig=1005,rg=1006,ag=1007,sg=1008,og=1009,lg=1010,cg=1011,dg=1012,ug=1013,hg=1014,pg=1015,mg=1016,fg=1017,gg=1018,vg=1020,_g=35902,bg=35899,yg=1023,xg=1026,wg=1027,Sg=1028,Tg=1029,Eg=1030,Mg=1031,Cg=1033,Ag=33776,kg=33777,Dg=33778,Lg=33779,Ig=35840,Pg=35841,Rg=35842,Og=35843,Ng=36196,Bg=37492,Fg=37496,Ug=37808,zg=37809,Vg=37810,Hg=37811,$g=37812,Wg=37813,Gg=37814,jg=37815,qg=37816,Yg=37817,Xg=37818,Kg=37819,Zg=37820,Jg=37821,Qg=36492,ev=36494,tv=36495,nv=36283,iv=36284,rv=36285,av=36286,sv=2300,ov=2301,lv=2302,cv=2400,dv=2401,uv=2402,hv="",pv="srgb",mv="srgb-linear",fv="linear",gv="srgb",vv=7680,_v=35044,bv="300 es",yv=2e3,xv=2001;function wv(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function Sv(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Tv(){const e=Sv("canvas");return e.style.display="block",e}const Ev={};let Mv=null;function Cv(...e){const t="THREE."+e.shift();Mv?Mv("log",t,...e):console.log(t,...e)}function Av(...e){const t="THREE."+e.shift();Mv?Mv("warn",t,...e):console.warn(t,...e)}function kv(...e){const t="THREE."+e.shift();Mv?Mv("error",t,...e):console.error(t,...e)}function Dv(...e){const t=e.join(" ");t in Ev||(Ev[t]=!0,Av(...e))}class Lv{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return void 0!==n&&(void 0!==n[e]&&-1!==n[e].indexOf(t))}removeEventListener(e,t){const n=this._listeners;if(void 0===n)return;const i=n[e];if(void 0!==i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}dispatchEvent(e){const t=this._listeners;if(void 0===t)return;const n=t[e.type];if(void 0!==n){e.target=this;const t=n.slice(0);for(let n=0,i=t.length;n<i;n++)t[n].call(this,e);e.target=null}}}const Iv=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const Pv=Math.PI/180,Rv=180/Math.PI;function Ov(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Iv[255&e]+Iv[e>>8&255]+Iv[e>>16&255]+Iv[e>>24&255]+"-"+Iv[255&t]+Iv[t>>8&255]+"-"+Iv[t>>16&15|64]+Iv[t>>24&255]+"-"+Iv[63&n|128]+Iv[n>>8&255]+"-"+Iv[n>>16&255]+Iv[n>>24&255]+Iv[255&i]+Iv[i>>8&255]+Iv[i>>16&255]+Iv[i>>24&255]).toLowerCase()}function Nv(e,t,n){return Math.max(t,Math.min(n,e))}function Bv(e,t){return(e%t+t)%t}function Fv(e,t,n){return(1-n)*e+n*t}function Uv(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function zv(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}class Vv{constructor(e=0,t=0){Vv.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Nv(this.x,e.x,t.x),this.y=Nv(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Nv(this.x,e,t),this.y=Nv(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Nv(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Nv(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Hv{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,a,s){let o=n[i+0],l=n[i+1],c=n[i+2],d=n[i+3],u=r[a+0],h=r[a+1],p=r[a+2],m=r[a+3];if(s<=0)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=d);if(s>=1)return e[t+0]=u,e[t+1]=h,e[t+2]=p,void(e[t+3]=m);if(d!==m||o!==u||l!==h||c!==p){let e=o*u+l*h+c*p+d*m;e<0&&(u=-u,h=-h,p=-p,m=-m,e=-e);let t=1-s;if(e<.9995){const n=Math.acos(e),i=Math.sin(n);t=Math.sin(t*n)/i,o=o*t+u*(s=Math.sin(s*n)/i),l=l*t+h*s,c=c*t+p*s,d=d*t+m*s}else{o=o*t+u*s,l=l*t+h*s,c=c*t+p*s,d=d*t+m*s;const e=1/Math.sqrt(o*o+l*l+c*c+d*d);o*=e,l*=e,c*=e,d*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,i,r,a){const s=n[i],o=n[i+1],l=n[i+2],c=n[i+3],d=r[a],u=r[a+1],h=r[a+2],p=r[a+3];return e[t]=s*p+c*d+o*h-l*u,e[t+1]=o*p+c*u+l*d-s*h,e[t+2]=l*p+c*h+s*u-o*d,e[t+3]=c*p-s*d-o*u-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,r=e._z,a=e._order,s=Math.cos,o=Math.sin,l=s(n/2),c=s(i/2),d=s(r/2),u=o(n/2),h=o(i/2),p=o(r/2);switch(a){case"XYZ":this._x=u*c*d+l*h*p,this._y=l*h*d-u*c*p,this._z=l*c*p+u*h*d,this._w=l*c*d-u*h*p;break;case"YXZ":this._x=u*c*d+l*h*p,this._y=l*h*d-u*c*p,this._z=l*c*p-u*h*d,this._w=l*c*d+u*h*p;break;case"ZXY":this._x=u*c*d-l*h*p,this._y=l*h*d+u*c*p,this._z=l*c*p+u*h*d,this._w=l*c*d-u*h*p;break;case"ZYX":this._x=u*c*d-l*h*p,this._y=l*h*d+u*c*p,this._z=l*c*p-u*h*d,this._w=l*c*d+u*h*p;break;case"YZX":this._x=u*c*d+l*h*p,this._y=l*h*d+u*c*p,this._z=l*c*p-u*h*d,this._w=l*c*d-u*h*p;break;case"XZY":this._x=u*c*d-l*h*p,this._y=l*h*d-u*c*p,this._z=l*c*p+u*h*d,this._w=l*c*d+u*h*p;break;default:Av("Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],a=t[1],s=t[5],o=t[9],l=t[2],c=t[6],d=t[10],u=n+s+d;if(u>0){const e=.5/Math.sqrt(u+1);this._w=.25/e,this._x=(c-o)*e,this._y=(r-l)*e,this._z=(a-i)*e}else if(n>s&&n>d){const e=2*Math.sqrt(1+n-s-d);this._w=(c-o)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(r+l)/e}else if(s>d){const e=2*Math.sqrt(1+s-n-d);this._w=(r-l)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+d-n-s);this._w=(a-i)/e,this._x=(r+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Nv(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,a=e._w,s=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+a*s+i*l-r*o,this._y=i*c+a*o+r*s-n*l,this._z=r*c+a*l+n*o-i*s,this._w=a*c-n*s-i*o-r*l,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let n=e._x,i=e._y,r=e._z,a=e._w,s=this.dot(e);s<0&&(n=-n,i=-i,r=-r,a=-a,s=-s);let o=1-t;if(s<.9995){const e=Math.acos(s),l=Math.sin(e);o=Math.sin(o*e)/l,t=Math.sin(t*e)/l,this._x=this._x*o+n*t,this._y=this._y*o+i*t,this._z=this._z*o+r*t,this._w=this._w*o+a*t,this._onChangeCallback()}else this._x=this._x*o+n*t,this._y=this._y*o+i*t,this._z=this._z*o+r*t,this._w=this._w*o+a*t,this.normalize();return this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class $v{constructor(e=0,t=0,n=0){$v.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Gv.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Gv.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,s=e.z,o=e.w,l=2*(a*i-s*n),c=2*(s*t-r*i),d=2*(r*n-a*t);return this.x=t+o*l+a*d-s*c,this.y=n+o*c+s*l-r*d,this.z=i+o*d+r*c-a*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Nv(this.x,e.x,t.x),this.y=Nv(this.y,e.y,t.y),this.z=Nv(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Nv(this.x,e,t),this.y=Nv(this.y,e,t),this.z=Nv(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Nv(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,a=t.x,s=t.y,o=t.z;return this.x=i*o-r*s,this.y=r*a-n*o,this.z=n*s-i*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Wv.copy(this).projectOnVector(e),this.sub(Wv)}reflect(e){return this.sub(Wv.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Nv(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Wv=new $v,Gv=new Hv;class jv{constructor(e,t,n,i,r,a,s,o,l){jv.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,a,s,o,l)}set(e,t,n,i,r,a,s,o,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=s,c[3]=t,c[4]=r,c[5]=o,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],s=n[3],o=n[6],l=n[1],c=n[4],d=n[7],u=n[2],h=n[5],p=n[8],m=i[0],f=i[3],g=i[6],v=i[1],_=i[4],b=i[7],y=i[2],x=i[5],w=i[8];return r[0]=a*m+s*v+o*y,r[3]=a*f+s*_+o*x,r[6]=a*g+s*b+o*w,r[1]=l*m+c*v+d*y,r[4]=l*f+c*_+d*x,r[7]=l*g+c*b+d*w,r[2]=u*m+h*v+p*y,r[5]=u*f+h*_+p*x,r[8]=u*g+h*b+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8];return t*a*c-t*s*l-n*r*c+n*s*o+i*r*l-i*a*o}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],d=c*a-s*l,u=s*o-c*r,h=l*r-a*o,p=t*d+n*u+i*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=d*m,e[1]=(i*l-c*n)*m,e[2]=(s*n-i*a)*m,e[3]=u*m,e[4]=(c*t-i*o)*m,e[5]=(i*r-s*t)*m,e[6]=h*m,e[7]=(n*o-l*t)*m,e[8]=(a*t-n*r)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,a,s){const o=Math.cos(r),l=Math.sin(r);return this.set(n*o,n*l,-n*(o*a+l*s)+a+e,-i*l,i*o,-i*(-l*a+o*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(qv.makeScale(e,t)),this}rotate(e){return this.premultiply(qv.makeRotation(-e)),this}translate(e,t){return this.premultiply(qv.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const qv=new jv,Yv=(new jv).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Xv=(new jv).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Kv(){const e={enabled:!0,workingColorSpace:mv,spaces:{},convert:function(e,t,n){return!1!==this.enabled&&t!==n&&t&&n?(this.spaces[t].transfer===gv&&(e.r=Jv(e.r),e.g=Jv(e.g),e.b=Jv(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===gv&&(e.r=Qv(e.r),e.g=Qv(e.g),e.b=Qv(e.b)),e):e},workingToColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},colorSpaceToWorking:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===hv?fv:this.spaces[e].transfer},getToneMappingMode:function(e){return this.spaces[e].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(e,t=this.workingColorSpace){return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(e=this.workingColorSpace){return this.spaces[e].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(t,n){return Dv("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),e.workingToColorSpace(t,n)},toWorkingColorSpace:function(t,n){return Dv("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),e.colorSpaceToWorking(t,n)}},t=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],i=[.3127,.329];return e.define({[mv]:{primaries:t,whitePoint:i,transfer:fv,toXYZ:Yv,fromXYZ:Xv,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:pv},outputColorSpaceConfig:{drawingBufferColorSpace:pv}},[pv]:{primaries:t,whitePoint:i,transfer:gv,toXYZ:Yv,fromXYZ:Xv,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:pv}}}),e}const Zv=Kv();function Jv(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Qv(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let e_;let t_=0;class n_{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:t_++}),this.uuid=Ov(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):null!==t?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(i_(i[t].image)):e.push(i_(i[t]))}else e=i_(i);n.url=e}return t||(e.images[this.uuid]=n),n}}function i_(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?class{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{void 0===e_&&(e_=Sv("canvas")),e_.width=e.width,e_.height=e.height;const t=e_.getContext("2d");e instanceof ImageData?t.putImageData(e,0,0):t.drawImage(e,0,0,e.width,e.height),n=e_}return n.toDataURL(t)}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=Sv("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let e=0;e<r.length;e++)r[e]=255*Jv(r[e]/255);return n.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Jv(t[e]/255)):t[e]=Jv(t[e]);return{data:t,width:e.width,height:e.height}}return Av("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(Av("Texture: Unable to serialize Texture."),{})}let r_=0;const a_=new $v;class s_ extends Lv{constructor(e=s_.DEFAULT_IMAGE,t=s_.DEFAULT_MAPPING,n=1001,i=1001,r=1006,a=1008,s=1023,o=1009,l=s_.DEFAULT_ANISOTROPY,c=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:r_++}),this.uuid=Ov(),this.name="",this.source=new n_(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new Vv(0,0),this.repeat=new Vv(1,1),this.center=new Vv(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new jv,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(a_).x}get height(){return this.source.getSize(a_).y}get depth(){return this.source.getSize(a_).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(void 0===n){Av(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const i=this[t];void 0!==i?i&&n&&i.isVector2&&n.isVector2||i&&n&&i.isVector3&&n.isVector3||i&&n&&i.isMatrix3&&n.isMatrix3?i.copy(n):this[t]=n:Av(`Texture.setValues(): property '${t}' does not exist.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Qf:e.x=e.x-Math.floor(e.x);break;case eg:e.x=e.x<0?0:1;break;case tg:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Qf:e.y=e.y-Math.floor(e.y);break;case eg:e.y=e.y<0?0:1;break;case tg:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}s_.DEFAULT_IMAGE=null,s_.DEFAULT_MAPPING=300,s_.DEFAULT_ANISOTROPY=1;class o_{constructor(e=0,t=0,n=0,i=1){o_.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const a=.01,s=.1,o=e.elements,l=o[0],c=o[4],d=o[8],u=o[1],h=o[5],p=o[9],m=o[2],f=o[6],g=o[10];if(Math.abs(c-u)<a&&Math.abs(d-m)<a&&Math.abs(p-f)<a){if(Math.abs(c+u)<s&&Math.abs(d+m)<s&&Math.abs(p+f)<s&&Math.abs(l+h+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(h+1)/2,v=(g+1)/2,_=(c+u)/4,b=(d+m)/4,y=(p+f)/4;return e>o&&e>v?e<a?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=_/n,r=b/n):o>v?o<a?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),n=_/i,r=y/i):v<a?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=b/r,i=y/r),this.set(n,i,r,t),this}let v=Math.sqrt((f-p)*(f-p)+(d-m)*(d-m)+(u-c)*(u-c));return Math.abs(v)<.001&&(v=1),this.x=(f-p)/v,this.y=(d-m)/v,this.z=(u-c)/v,this.w=Math.acos((l+h+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Nv(this.x,e.x,t.x),this.y=Nv(this.y,e.y,t.y),this.z=Nv(this.z,e.z,t.z),this.w=Nv(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Nv(this.x,e,t),this.y=Nv(this.y,e,t),this.z=Nv(this.z,e,t),this.w=Nv(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Nv(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class l_ extends Lv{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:rg,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new o_(0,0,e,t),this.scissorTest=!1,this.viewport=new o_(0,0,e,t);const i={width:e,height:t,depth:n.depth},r=new s_(i);this.textures=[];const a=n.count;for(let e=0;e<a;e++)this.textures[e]=r.clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:rg,generateMipmaps:!1,flipY:!1,internalFormat:null};void 0!==e.mapping&&(t.mapping=e.mapping),void 0!==e.wrapS&&(t.wrapS=e.wrapS),void 0!==e.wrapT&&(t.wrapT=e.wrapT),void 0!==e.wrapR&&(t.wrapR=e.wrapR),void 0!==e.magFilter&&(t.magFilter=e.magFilter),void 0!==e.minFilter&&(t.minFilter=e.minFilter),void 0!==e.format&&(t.format=e.format),void 0!==e.type&&(t.type=e.type),void 0!==e.anisotropy&&(t.anisotropy=e.anisotropy),void 0!==e.colorSpace&&(t.colorSpace=e.colorSpace),void 0!==e.flipY&&(t.flipY=e.flipY),void 0!==e.generateMipmaps&&(t.generateMipmaps=e.generateMipmaps),void 0!==e.internalFormat&&(t.internalFormat=e.internalFormat);for(let e=0;e<this.textures.length;e++){this.textures[e].setValues(t)}}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.textures.length;i<r;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n,!0!==this.textures[i].isData3DTexture&&(this.textures[i].isArrayTexture=this.textures[i].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const n=Object.assign({},e.textures[t].image);this.textures[t].source=new n_(n)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class c_ extends l_{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class d_ extends s_{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=ng,this.minFilter=ng,this.wrapR=eg,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class u_ extends s_{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=ng,this.minFilter=ng,this.wrapR=eg,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class h_{constructor(e=new $v(1/0,1/0,1/0),t=new $v(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(m_.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(m_.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=m_.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const i=n.getAttribute("position");if(!0===t&&void 0!==i&&!0!==e.isInstancedMesh)for(let t=0,n=i.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,m_):m_.fromBufferAttribute(i,t),m_.applyMatrix4(e.matrixWorld),this.expandByPoint(m_);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),f_.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),f_.copy(n.boundingBox)),f_.applyMatrix4(e.matrixWorld),this.union(f_)}const i=e.children;for(let e=0,n=i.length;e<n;e++)this.expandByObject(i[e],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,m_),m_.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(w_),S_.subVectors(this.max,w_),g_.subVectors(e.a,w_),v_.subVectors(e.b,w_),__.subVectors(e.c,w_),b_.subVectors(v_,g_),y_.subVectors(__,v_),x_.subVectors(g_,__);let t=[0,-b_.z,b_.y,0,-y_.z,y_.y,0,-x_.z,x_.y,b_.z,0,-b_.x,y_.z,0,-y_.x,x_.z,0,-x_.x,-b_.y,b_.x,0,-y_.y,y_.x,0,-x_.y,x_.x,0];return!!M_(t,g_,v_,__,S_)&&(t=[1,0,0,0,1,0,0,0,1],!!M_(t,g_,v_,__,S_)&&(T_.crossVectors(b_,y_),t=[T_.x,T_.y,T_.z],M_(t,g_,v_,__,S_)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,m_).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(m_).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(p_[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),p_[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),p_[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),p_[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),p_[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),p_[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),p_[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),p_[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(p_)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const p_=[new $v,new $v,new $v,new $v,new $v,new $v,new $v,new $v],m_=new $v,f_=new h_,g_=new $v,v_=new $v,__=new $v,b_=new $v,y_=new $v,x_=new $v,w_=new $v,S_=new $v,T_=new $v,E_=new $v;function M_(e,t,n,i,r){for(let a=0,s=e.length-3;a<=s;a+=3){E_.fromArray(e,a);const s=r.x*Math.abs(E_.x)+r.y*Math.abs(E_.y)+r.z*Math.abs(E_.z),o=t.dot(E_),l=n.dot(E_),c=i.dot(E_);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>s)return!1}return!0}const C_=new h_,A_=new $v,k_=new $v;class D_{constructor(e=new $v,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):C_.setFromPoints(e).getCenter(n);let i=0;for(let t=0,r=e.length;t<r;t++)i=Math.max(i,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;A_.subVectors(e,this.center);const t=A_.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(A_,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(k_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(A_.copy(e.center).add(k_)),this.expandByPoint(A_.copy(e.center).sub(k_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const L_=new $v,I_=new $v,P_=new $v,R_=new $v,O_=new $v,N_=new $v,B_=new $v;class F_{constructor(e=new $v,t=new $v(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,L_)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=L_.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(L_.copy(this.origin).addScaledVector(this.direction,t),L_.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){I_.copy(e).add(t).multiplyScalar(.5),P_.copy(t).sub(e).normalize(),R_.copy(this.origin).sub(I_);const r=.5*e.distanceTo(t),a=-this.direction.dot(P_),s=R_.dot(this.direction),o=-R_.dot(P_),l=R_.lengthSq(),c=Math.abs(1-a*a);let d,u,h,p;if(c>0)if(d=a*o-s,u=a*s-o,p=r*c,d>=0)if(u>=-p)if(u<=p){const e=1/c;d*=e,u*=e,h=d*(d+a*u+2*s)+u*(a*d+u+2*o)+l}else u=r,d=Math.max(0,-(a*u+s)),h=-d*d+u*(u+2*o)+l;else u=-r,d=Math.max(0,-(a*u+s)),h=-d*d+u*(u+2*o)+l;else u<=-p?(d=Math.max(0,-(-a*r+s)),u=d>0?-r:Math.min(Math.max(-r,-o),r),h=-d*d+u*(u+2*o)+l):u<=p?(d=0,u=Math.min(Math.max(-r,-o),r),h=u*(u+2*o)+l):(d=Math.max(0,-(a*r+s)),u=d>0?r:Math.min(Math.max(-r,-o),r),h=-d*d+u*(u+2*o)+l);else u=a>0?-r:r,d=Math.max(0,-(a*u+s)),h=-d*d+u*(u+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(I_).addScaledVector(P_,u),h}intersectSphere(e,t){L_.subVectors(e.center,this.origin);const n=L_.dot(this.direction),i=L_.dot(L_)-n*n,r=e.radius*e.radius;if(i>r)return null;const a=Math.sqrt(r-i),s=n-a,o=n+a;return o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return!(e.radius<0)&&this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,a,s,o;const l=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,u=this.origin;return l>=0?(n=(e.min.x-u.x)*l,i=(e.max.x-u.x)*l):(n=(e.max.x-u.x)*l,i=(e.min.x-u.x)*l),c>=0?(r=(e.min.y-u.y)*c,a=(e.max.y-u.y)*c):(r=(e.max.y-u.y)*c,a=(e.min.y-u.y)*c),n>a||r>i?null:((r>n||isNaN(n))&&(n=r),(a<i||isNaN(i))&&(i=a),d>=0?(s=(e.min.z-u.z)*d,o=(e.max.z-u.z)*d):(s=(e.max.z-u.z)*d,o=(e.min.z-u.z)*d),n>o||s>i?null:((s>n||n!=n)&&(n=s),(o<i||i!=i)&&(i=o),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,L_)}intersectTriangle(e,t,n,i,r){O_.subVectors(t,e),N_.subVectors(n,e),B_.crossVectors(O_,N_);let a,s=this.direction.dot(B_);if(s>0){if(i)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}R_.subVectors(this.origin,e);const o=a*this.direction.dot(N_.crossVectors(R_,N_));if(o<0)return null;const l=a*this.direction.dot(O_.cross(R_));if(l<0)return null;if(o+l>s)return null;const c=-a*R_.dot(B_);return c<0?null:this.at(c/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class U_{constructor(e,t,n,i,r,a,s,o,l,c,d,u,h,p,m,f){U_.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,a,s,o,l,c,d,u,h,p,m,f)}set(e,t,n,i,r,a,s,o,l,c,d,u,h,p,m,f){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=c,g[10]=d,g[14]=u,g[3]=h,g[7]=p,g[11]=m,g[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new U_).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/z_.setFromMatrixColumn(e,0).length(),r=1/z_.setFromMatrixColumn(e,1).length(),a=1/z_.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),d=Math.sin(r);if("XYZ"===e.order){const e=a*c,n=a*d,i=s*c,r=s*d;t[0]=o*c,t[4]=-o*d,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-s*o,t[2]=r-e*l,t[6]=i+n*l,t[10]=a*o}else if("YXZ"===e.order){const e=o*c,n=o*d,i=l*c,r=l*d;t[0]=e+r*s,t[4]=i*s-n,t[8]=a*l,t[1]=a*d,t[5]=a*c,t[9]=-s,t[2]=n*s-i,t[6]=r+e*s,t[10]=a*o}else if("ZXY"===e.order){const e=o*c,n=o*d,i=l*c,r=l*d;t[0]=e-r*s,t[4]=-a*d,t[8]=i+n*s,t[1]=n+i*s,t[5]=a*c,t[9]=r-e*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){const e=a*c,n=a*d,i=s*c,r=s*d;t[0]=o*c,t[4]=i*l-n,t[8]=e*l+r,t[1]=o*d,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){const e=a*o,n=a*l,i=s*o,r=s*l;t[0]=o*c,t[4]=r-e*d,t[8]=i*d+n,t[1]=d,t[5]=a*c,t[9]=-s*c,t[2]=-l*c,t[6]=n*d+i,t[10]=e-r*d}else if("XZY"===e.order){const e=a*o,n=a*l,i=s*o,r=s*l;t[0]=o*c,t[4]=-d,t[8]=l*c,t[1]=e*d+r,t[5]=a*c,t[9]=n*d-i,t[2]=i*d-n,t[6]=s*c,t[10]=r*d+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(H_,e,$_)}lookAt(e,t,n){const i=this.elements;return j_.subVectors(e,t),0===j_.lengthSq()&&(j_.z=1),j_.normalize(),W_.crossVectors(n,j_),0===W_.lengthSq()&&(1===Math.abs(n.z)?j_.x+=1e-4:j_.z+=1e-4,j_.normalize(),W_.crossVectors(n,j_)),W_.normalize(),G_.crossVectors(j_,W_),i[0]=W_.x,i[4]=G_.x,i[8]=j_.x,i[1]=W_.y,i[5]=G_.y,i[9]=j_.y,i[2]=W_.z,i[6]=G_.z,i[10]=j_.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],c=n[1],d=n[5],u=n[9],h=n[13],p=n[2],m=n[6],f=n[10],g=n[14],v=n[3],_=n[7],b=n[11],y=n[15],x=i[0],w=i[4],S=i[8],T=i[12],E=i[1],M=i[5],C=i[9],A=i[13],k=i[2],D=i[6],L=i[10],I=i[14],P=i[3],R=i[7],O=i[11],N=i[15];return r[0]=a*x+s*E+o*k+l*P,r[4]=a*w+s*M+o*D+l*R,r[8]=a*S+s*C+o*L+l*O,r[12]=a*T+s*A+o*I+l*N,r[1]=c*x+d*E+u*k+h*P,r[5]=c*w+d*M+u*D+h*R,r[9]=c*S+d*C+u*L+h*O,r[13]=c*T+d*A+u*I+h*N,r[2]=p*x+m*E+f*k+g*P,r[6]=p*w+m*M+f*D+g*R,r[10]=p*S+m*C+f*L+g*O,r[14]=p*T+m*A+f*I+g*N,r[3]=v*x+_*E+b*k+y*P,r[7]=v*w+_*M+b*D+y*R,r[11]=v*S+_*C+b*L+y*O,r[15]=v*T+_*A+b*I+y*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],s=e[5],o=e[9],l=e[13],c=e[2],d=e[6],u=e[10],h=e[14];return e[3]*(+r*o*d-i*l*d-r*s*u+n*l*u+i*s*h-n*o*h)+e[7]*(+t*o*h-t*l*u+r*a*u-i*a*h+i*l*c-r*o*c)+e[11]*(+t*l*d-t*s*h-r*a*d+n*a*h+r*s*c-n*l*c)+e[15]*(-i*s*c-t*o*d+t*s*u+i*a*d-n*a*u+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],d=e[9],u=e[10],h=e[11],p=e[12],m=e[13],f=e[14],g=e[15],v=d*f*l-m*u*l+m*o*h-s*f*h-d*o*g+s*u*g,_=p*u*l-c*f*l-p*o*h+a*f*h+c*o*g-a*u*g,b=c*m*l-p*d*l+p*s*h-a*m*h-c*s*g+a*d*g,y=p*d*o-c*m*o-p*s*u+a*m*u+c*s*f-a*d*f,x=t*v+n*_+i*b+r*y;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/x;return e[0]=v*w,e[1]=(m*u*r-d*f*r-m*i*h+n*f*h+d*i*g-n*u*g)*w,e[2]=(s*f*r-m*o*r+m*i*l-n*f*l-s*i*g+n*o*g)*w,e[3]=(d*o*r-s*u*r-d*i*l+n*u*l+s*i*h-n*o*h)*w,e[4]=_*w,e[5]=(c*f*r-p*u*r+p*i*h-t*f*h-c*i*g+t*u*g)*w,e[6]=(p*o*r-a*f*r-p*i*l+t*f*l+a*i*g-t*o*g)*w,e[7]=(a*u*r-c*o*r+c*i*l-t*u*l-a*i*h+t*o*h)*w,e[8]=b*w,e[9]=(p*d*r-c*m*r-p*n*h+t*m*h+c*n*g-t*d*g)*w,e[10]=(a*m*r-p*s*r+p*n*l-t*m*l-a*n*g+t*s*g)*w,e[11]=(c*s*r-a*d*r-c*n*l+t*d*l+a*n*h-t*s*h)*w,e[12]=y*w,e[13]=(c*m*i-p*d*i+p*n*u-t*m*u-c*n*f+t*d*f)*w,e[14]=(p*s*i-a*m*i-p*n*o+t*m*o+a*n*f-t*s*f)*w,e[15]=(a*d*i-c*s*i+c*n*o-t*d*o-a*n*u+t*s*u)*w,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,s=e.y,o=e.z,l=r*a,c=r*s;return this.set(l*a+n,l*s-i*o,l*o+i*s,0,l*s+i*o,c*s+n,c*o-i*a,0,l*o-i*s,c*o+i*a,r*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,a){return this.set(1,n,r,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,a=t._y,s=t._z,o=t._w,l=r+r,c=a+a,d=s+s,u=r*l,h=r*c,p=r*d,m=a*c,f=a*d,g=s*d,v=o*l,_=o*c,b=o*d,y=n.x,x=n.y,w=n.z;return i[0]=(1-(m+g))*y,i[1]=(h+b)*y,i[2]=(p-_)*y,i[3]=0,i[4]=(h-b)*x,i[5]=(1-(u+g))*x,i[6]=(f+v)*x,i[7]=0,i[8]=(p+_)*w,i[9]=(f-v)*w,i[10]=(1-(u+m))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=z_.set(i[0],i[1],i[2]).length();const a=z_.set(i[4],i[5],i[6]).length(),s=z_.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],V_.copy(this);const o=1/r,l=1/a,c=1/s;return V_.elements[0]*=o,V_.elements[1]*=o,V_.elements[2]*=o,V_.elements[4]*=l,V_.elements[5]*=l,V_.elements[6]*=l,V_.elements[8]*=c,V_.elements[9]*=c,V_.elements[10]*=c,t.setFromRotationMatrix(V_),n.x=r,n.y=a,n.z=s,this}makePerspective(e,t,n,i,r,a,s=2e3,o=!1){const l=this.elements,c=2*r/(t-e),d=2*r/(n-i),u=(t+e)/(t-e),h=(n+i)/(n-i);let p,m;if(o)p=r/(a-r),m=a*r/(a-r);else if(s===yv)p=-(a+r)/(a-r),m=-2*a*r/(a-r);else{if(s!==xv)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);p=-a/(a-r),m=-a*r/(a-r)}return l[0]=c,l[4]=0,l[8]=u,l[12]=0,l[1]=0,l[5]=d,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,i,r,a,s=2e3,o=!1){const l=this.elements,c=2/(t-e),d=2/(n-i),u=-(t+e)/(t-e),h=-(n+i)/(n-i);let p,m;if(o)p=1/(a-r),m=a/(a-r);else if(s===yv)p=-2/(a-r),m=-(a+r)/(a-r);else{if(s!==xv)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);p=-1/(a-r),m=-r/(a-r)}return l[0]=c,l[4]=0,l[8]=0,l[12]=u,l[1]=0,l[5]=d,l[9]=0,l[13]=h,l[2]=0,l[6]=0,l[10]=p,l[14]=m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const z_=new $v,V_=new U_,H_=new $v(0,0,0),$_=new $v(1,1,1),W_=new $v,G_=new $v,j_=new $v,q_=new U_,Y_=new Hv;class X_{constructor(e=0,t=0,n=0,i=X_.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,r=i[0],a=i[4],s=i[8],o=i[1],l=i[5],c=i[9],d=i[2],u=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(Nv(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Nv(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-d,r),this._z=0);break;case"ZXY":this._x=Math.asin(Nv(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-Nv(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(u,h),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(Nv(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-d,r)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-Nv(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-c,h),this._y=0);break;default:Av("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return q_.makeRotationFromQuaternion(e),this.setFromRotationMatrix(q_,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Y_.setFromEuler(this),this.setFromQuaternion(Y_,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}X_.DEFAULT_ORDER="XYZ";class K_{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let Z_=0;const J_=new $v,Q_=new Hv,eb=new U_,tb=new $v,nb=new $v,ib=new $v,rb=new Hv,ab=new $v(1,0,0),sb=new $v(0,1,0),ob=new $v(0,0,1),lb={type:"added"},cb={type:"removed"},db={type:"childadded",child:null},ub={type:"childremoved",child:null};class hb extends Lv{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Z_++}),this.uuid=Ov(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=hb.DEFAULT_UP.clone();const e=new $v,t=new X_,n=new Hv,i=new $v(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new U_},normalMatrix:{value:new jv}}),this.matrix=new U_,this.matrixWorld=new U_,this.matrixAutoUpdate=hb.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=hb.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new K_,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Q_.setFromAxisAngle(e,t),this.quaternion.multiply(Q_),this}rotateOnWorldAxis(e,t){return Q_.setFromAxisAngle(e,t),this.quaternion.premultiply(Q_),this}rotateX(e){return this.rotateOnAxis(ab,e)}rotateY(e){return this.rotateOnAxis(sb,e)}rotateZ(e){return this.rotateOnAxis(ob,e)}translateOnAxis(e,t){return J_.copy(e).applyQuaternion(this.quaternion),this.position.add(J_.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ab,e)}translateY(e){return this.translateOnAxis(sb,e)}translateZ(e){return this.translateOnAxis(ob,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(eb.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?tb.copy(e):tb.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),nb.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?eb.lookAt(nb,tb,this.up):eb.lookAt(tb,nb,this.up),this.quaternion.setFromRotationMatrix(eb),i&&(eb.extractRotation(i.matrixWorld),Q_.setFromRotationMatrix(eb),this.quaternion.premultiply(Q_.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(kv("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(lb),db.child=e,this.dispatchEvent(db),db.child=null):kv("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(cb),ub.child=e,this.dispatchEvent(ub),ub.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),eb.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),eb.multiply(e.parent.matrixWorld)),e.applyMatrix4(eb),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(lb),db.child=e,this.dispatchEvent(db),db.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let r=0,a=i.length;r<a;r++)i[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(nb,e,ib),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(nb,rb,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){t[n].updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){e[t].updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map((e=>({...e,boundingBox:e.boundingBox?e.boundingBox.toJSON():void 0,boundingSphere:e.boundingSphere?e.boundingSphere.toJSON():void 0}))),i.instanceInfo=this._instanceInfo.map((e=>({...e}))),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),null!==this._colorsTexture&&(i.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(i.boundingSphere=this.boundingSphere.toJSON()),null!==this.boundingBox&&(i.boundingBox=this.boundingBox.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(r(e.animations,n))}}if(t){const t=a(e.geometries),i=a(e.materials),r=a(e.textures),s=a(e.images),o=a(e.shapes),l=a(e.skeletons),c=a(e.animations),d=a(e.nodes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),s.length>0&&(n.images=s),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),d.length>0&&(n.nodes=d)}return n.object=i,n;function a(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}hb.DEFAULT_UP=new $v(0,1,0),hb.DEFAULT_MATRIX_AUTO_UPDATE=!0,hb.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const pb=new $v,mb=new $v,fb=new $v,gb=new $v,vb=new $v,_b=new $v,bb=new $v,yb=new $v,xb=new $v,wb=new $v,Sb=new o_,Tb=new o_,Eb=new o_;class Mb{constructor(e=new $v,t=new $v,n=new $v){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),pb.subVectors(e,t),i.cross(pb);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){pb.subVectors(i,t),mb.subVectors(n,t),fb.subVectors(e,t);const a=pb.dot(pb),s=pb.dot(mb),o=pb.dot(fb),l=mb.dot(mb),c=mb.dot(fb),d=a*l-s*s;if(0===d)return r.set(0,0,0),null;const u=1/d,h=(l*o-s*c)*u,p=(a*c-s*o)*u;return r.set(1-h-p,p,h)}static containsPoint(e,t,n,i){return null!==this.getBarycoord(e,t,n,i,gb)&&(gb.x>=0&&gb.y>=0&&gb.x+gb.y<=1)}static getInterpolation(e,t,n,i,r,a,s,o){return null===this.getBarycoord(e,t,n,i,gb)?(o.x=0,o.y=0,"z"in o&&(o.z=0),"w"in o&&(o.w=0),null):(o.setScalar(0),o.addScaledVector(r,gb.x),o.addScaledVector(a,gb.y),o.addScaledVector(s,gb.z),o)}static getInterpolatedAttribute(e,t,n,i,r,a){return Sb.setScalar(0),Tb.setScalar(0),Eb.setScalar(0),Sb.fromBufferAttribute(e,t),Tb.fromBufferAttribute(e,n),Eb.fromBufferAttribute(e,i),a.setScalar(0),a.addScaledVector(Sb,r.x),a.addScaledVector(Tb,r.y),a.addScaledVector(Eb,r.z),a}static isFrontFacing(e,t,n,i){return pb.subVectors(n,t),mb.subVectors(e,t),pb.cross(mb).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return pb.subVectors(this.c,this.b),mb.subVectors(this.a,this.b),.5*pb.cross(mb).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Mb.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Mb.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,r){return Mb.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return Mb.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Mb.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let a,s;vb.subVectors(i,n),_b.subVectors(r,n),yb.subVectors(e,n);const o=vb.dot(yb),l=_b.dot(yb);if(o<=0&&l<=0)return t.copy(n);xb.subVectors(e,i);const c=vb.dot(xb),d=_b.dot(xb);if(c>=0&&d<=c)return t.copy(i);const u=o*d-c*l;if(u<=0&&o>=0&&c<=0)return a=o/(o-c),t.copy(n).addScaledVector(vb,a);wb.subVectors(e,r);const h=vb.dot(wb),p=_b.dot(wb);if(p>=0&&h<=p)return t.copy(r);const m=h*l-o*p;if(m<=0&&l>=0&&p<=0)return s=l/(l-p),t.copy(n).addScaledVector(_b,s);const f=c*p-h*d;if(f<=0&&d-c>=0&&h-p>=0)return bb.subVectors(r,i),s=(d-c)/(d-c+(h-p)),t.copy(i).addScaledVector(bb,s);const g=1/(f+m+u);return a=m*g,s=u*g,t.copy(n).addScaledVector(vb,a).addScaledVector(_b,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Cb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ab={h:0,s:0,l:0},kb={h:0,s:0,l:0};function Db(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class Lb{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t="srgb"){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Zv.colorSpaceToWorking(this,t),this}setRGB(e,t,n,i=Zv.workingColorSpace){return this.r=e,this.g=t,this.b=n,Zv.colorSpaceToWorking(this,i),this}setHSL(e,t,n,i=Zv.workingColorSpace){if(e=Bv(e,1),t=Nv(t,0,1),n=Nv(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=Db(r,i,e+1/3),this.g=Db(r,i,e),this.b=Db(r,i,e-1/3)}return Zv.colorSpaceToWorking(this,i),this}setStyle(e,t="srgb"){function n(t){void 0!==t&&parseFloat(t)<1&&Av("Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const a=i[1],s=i[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:Av("Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=i[1],r=n.length;if(3===r)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,t);if(6===r)return this.setHex(parseInt(n,16),t);Av("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t="srgb"){const n=Cb[e.toLowerCase()];return void 0!==n?this.setHex(n,t):Av("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Jv(e.r),this.g=Jv(e.g),this.b=Jv(e.b),this}copyLinearToSRGB(e){return this.r=Qv(e.r),this.g=Qv(e.g),this.b=Qv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e="srgb"){return Zv.workingToColorSpace(Ib.copy(this),e),65536*Math.round(Nv(255*Ib.r,0,255))+256*Math.round(Nv(255*Ib.g,0,255))+Math.round(Nv(255*Ib.b,0,255))}getHexString(e="srgb"){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Zv.workingColorSpace){Zv.workingToColorSpace(Ib.copy(this),t);const n=Ib.r,i=Ib.g,r=Ib.b,a=Math.max(n,i,r),s=Math.min(n,i,r);let o,l;const c=(s+a)/2;if(s===a)o=0,l=0;else{const e=a-s;switch(l=c<=.5?e/(a+s):e/(2-a-s),a){case n:o=(i-r)/e+(i<r?6:0);break;case i:o=(r-n)/e+2;break;case r:o=(n-i)/e+4}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e,t=Zv.workingColorSpace){return Zv.workingToColorSpace(Ib.copy(this),t),e.r=Ib.r,e.g=Ib.g,e.b=Ib.b,e}getStyle(e="srgb"){Zv.workingToColorSpace(Ib.copy(this),e);const t=Ib.r,n=Ib.g,i=Ib.b;return e!==pv?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*i)})`}offsetHSL(e,t,n){return this.getHSL(Ab),this.setHSL(Ab.h+e,Ab.s+t,Ab.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Ab),e.getHSL(kb);const n=Fv(Ab.h,kb.h,t),i=Fv(Ab.s,kb.s,t),r=Fv(Ab.l,kb.l,t);return this.setHSL(n,i,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*i,this.g=r[1]*t+r[4]*n+r[7]*i,this.b=r[2]*t+r[5]*n+r[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ib=new Lb;Lb.NAMES=Cb;let Pb=0;class Rb extends Lv{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Pb++}),this.uuid=Ov(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=qf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Lb(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=vv,this.stencilZFail=vv,this.stencilZPass=vv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){Av(`Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:Av(`Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),204!==this.blendSrc&&(n.blendSrc=this.blendSrc),205!==this.blendDst&&(n.blendDst=this.blendDst),this.blendEquation!==qf&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==vv&&(n.stencilFail=this.stencilFail),this.stencilZFail!==vv&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==vv&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Ob extends Rb{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Lb(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new X_,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Nb=new $v,Bb=new Vv;let Fb=0;class Ub{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Fb++}),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=_v,this.updateRanges=[],this.gpuType=pg,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Bb.fromBufferAttribute(this,t),Bb.applyMatrix3(e),this.setXY(t,Bb.x,Bb.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Nb.fromBufferAttribute(this,t),Nb.applyMatrix3(e),this.setXYZ(t,Nb.x,Nb.y,Nb.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Nb.fromBufferAttribute(this,t),Nb.applyMatrix4(e),this.setXYZ(t,Nb.x,Nb.y,Nb.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Nb.fromBufferAttribute(this,t),Nb.applyNormalMatrix(e),this.setXYZ(t,Nb.x,Nb.y,Nb.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Nb.fromBufferAttribute(this,t),Nb.transformDirection(e),this.setXYZ(t,Nb.x,Nb.y,Nb.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Uv(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=zv(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Uv(t,this.array)),t}setX(e,t){return this.normalized&&(t=zv(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Uv(t,this.array)),t}setY(e,t){return this.normalized&&(t=zv(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Uv(t,this.array)),t}setZ(e,t){return this.normalized&&(t=zv(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Uv(t,this.array)),t}setW(e,t){return this.normalized&&(t=zv(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=zv(t,this.array),n=zv(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=zv(t,this.array),n=zv(n,this.array),i=zv(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=zv(t,this.array),n=zv(n,this.array),i=zv(i,this.array),r=zv(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==_v&&(e.usage=this.usage),e}}class zb extends Ub{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Vb extends Ub{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Hb extends Ub{constructor(e,t,n){super(new Float32Array(e),t,n)}}let $b=0;const Wb=new U_,Gb=new hb,jb=new $v,qb=new h_,Yb=new h_,Xb=new $v;class Kb extends Lv{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:$b++}),this.uuid=Ov(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(wv(e)?Vb:zb)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new jv).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Wb.makeRotationFromQuaternion(e),this.applyMatrix4(Wb),this}rotateX(e){return Wb.makeRotationX(e),this.applyMatrix4(Wb),this}rotateY(e){return Wb.makeRotationY(e),this.applyMatrix4(Wb),this}rotateZ(e){return Wb.makeRotationZ(e),this.applyMatrix4(Wb),this}translate(e,t,n){return Wb.makeTranslation(e,t,n),this.applyMatrix4(Wb),this}scale(e,t,n){return Wb.makeScale(e,t,n),this.applyMatrix4(Wb),this}lookAt(e){return Gb.lookAt(e),Gb.updateMatrix(),this.applyMatrix4(Gb.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(jb).negate(),this.translate(jb.x,jb.y,jb.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}this.setAttribute("position",new Hb(t,3))}else{const n=Math.min(e.length,t.count);for(let i=0;i<n;i++){const n=e[i];t.setXYZ(i,n.x,n.y,n.z||0)}e.length>t.count&&Av("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new h_);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return kv("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new $v(-1/0,-1/0,-1/0),new $v(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];qb.setFromBufferAttribute(n),this.morphTargetsRelative?(Xb.addVectors(this.boundingBox.min,qb.min),this.boundingBox.expandByPoint(Xb),Xb.addVectors(this.boundingBox.max,qb.max),this.boundingBox.expandByPoint(Xb)):(this.boundingBox.expandByPoint(qb.min),this.boundingBox.expandByPoint(qb.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&kv('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new D_);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return kv("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new $v,1/0);if(e){const n=this.boundingSphere.center;if(qb.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Yb.setFromBufferAttribute(n),this.morphTargetsRelative?(Xb.addVectors(qb.min,Yb.min),qb.expandByPoint(Xb),Xb.addVectors(qb.max,Yb.max),qb.expandByPoint(Xb)):(qb.expandByPoint(Yb.min),qb.expandByPoint(Yb.max))}qb.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)Xb.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(Xb));if(t)for(let r=0,a=t.length;r<a;r++){const a=t[r],s=this.morphTargetsRelative;for(let t=0,r=a.count;t<r;t++)Xb.fromBufferAttribute(a,t),s&&(jb.fromBufferAttribute(e,t),Xb.add(jb)),i=Math.max(i,n.distanceToSquared(Xb))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&kv('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void kv("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.position,i=t.normal,r=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ub(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),s=[],o=[];for(let e=0;e<n.count;e++)s[e]=new $v,o[e]=new $v;const l=new $v,c=new $v,d=new $v,u=new Vv,h=new Vv,p=new Vv,m=new $v,f=new $v;function g(e,t,i){l.fromBufferAttribute(n,e),c.fromBufferAttribute(n,t),d.fromBufferAttribute(n,i),u.fromBufferAttribute(r,e),h.fromBufferAttribute(r,t),p.fromBufferAttribute(r,i),c.sub(l),d.sub(l),h.sub(u),p.sub(u);const a=1/(h.x*p.y-p.x*h.y);isFinite(a)&&(m.copy(c).multiplyScalar(p.y).addScaledVector(d,-h.y).multiplyScalar(a),f.copy(d).multiplyScalar(h.x).addScaledVector(c,-p.x).multiplyScalar(a),s[e].add(m),s[t].add(m),s[i].add(m),o[e].add(f),o[t].add(f),o[i].add(f))}let v=this.groups;0===v.length&&(v=[{start:0,count:e.count}]);for(let t=0,n=v.length;t<n;++t){const n=v[t],i=n.start;for(let t=i,r=i+n.count;t<r;t+=3)g(e.getX(t+0),e.getX(t+1),e.getX(t+2))}const _=new $v,b=new $v,y=new $v,x=new $v;function w(e){y.fromBufferAttribute(i,e),x.copy(y);const t=s[e];_.copy(t),_.sub(y.multiplyScalar(y.dot(t))).normalize(),b.crossVectors(x,t);const n=b.dot(o[e])<0?-1:1;a.setXYZW(e,_.x,_.y,_.z,n)}for(let t=0,n=v.length;t<n;++t){const n=v[t],i=n.start;for(let t=i,r=i+n.count;t<r;t+=3)w(e.getX(t+0)),w(e.getX(t+1)),w(e.getX(t+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Ub(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new $v,r=new $v,a=new $v,s=new $v,o=new $v,l=new $v,c=new $v,d=new $v;if(e)for(let u=0,h=e.count;u<h;u+=3){const h=e.getX(u+0),p=e.getX(u+1),m=e.getX(u+2);i.fromBufferAttribute(t,h),r.fromBufferAttribute(t,p),a.fromBufferAttribute(t,m),c.subVectors(a,r),d.subVectors(i,r),c.cross(d),s.fromBufferAttribute(n,h),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,m),s.add(c),o.add(c),l.add(c),n.setXYZ(h,s.x,s.y,s.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(m,l.x,l.y,l.z)}else for(let e=0,s=t.count;e<s;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,r),d.subVectors(i,r),c.cross(d),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Xb.fromBufferAttribute(e,t),Xb.normalize(),e.setXYZ(t,Xb.x,Xb.y,Xb.z)}toNonIndexed(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,a=new n.constructor(t.length*i);let s=0,o=0;for(let r=0,l=t.length;r<l;r++){s=e.isInterleavedBufferAttribute?t[r]*e.data.stride+e.offset:t[r]*i;for(let e=0;e<i;e++)a[o++]=n[s++]}return new Ub(a,i,r)}if(null===this.index)return Av("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Kb,n=this.index.array,i=this.attributes;for(const r in i){const a=e(i[r],n);t.setAttribute(r,a)}const r=this.morphAttributes;for(const i in r){const a=[],s=r[i];for(let t=0,i=s.length;t<i;t++){const i=e(s[t],n);a.push(i)}t.morphAttributes[i]=a}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let e=0,n=a.length;e<n;e++){const n=a[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const i=n[t];e.data.attributes[t]=i.toJSON(e.data)}const i={};let r=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],a=[];for(let t=0,i=n.length;t<i;t++){const i=n[t];a.push(i.toJSON(e.data))}a.length>0&&(i[t]=a,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere=s.toJSON()),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone());const i=e.attributes;for(const e in i){const n=i[e];this.setAttribute(e,n.clone(t))}const r=e.morphAttributes;for(const e in r){const n=[],i=r[e];for(let e=0,r=i.length;e<r;e++)n.push(i[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let e=0,t=a.length;e<t;e++){const t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Zb=new U_,Jb=new F_,Qb=new D_,ey=new $v,ty=new $v,ny=new $v,iy=new $v,ry=new $v,ay=new $v,sy=new $v,oy=new $v;class ly extends hb{constructor(e=new Kb,t=new Ob){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const s=this.morphTargetInfluences;if(r&&s){ay.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=s[n],o=r[n];0!==i&&(ry.fromBufferAttribute(o,e),a?ay.addScaledVector(ry,i):ay.addScaledVector(ry.sub(t),i))}t.add(ay)}return t}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),Qb.copy(n.boundingSphere),Qb.applyMatrix4(r),Jb.copy(e.ray).recast(e.near),!1===Qb.containsPoint(Jb.origin)){if(null===Jb.intersectSphere(Qb,ey))return;if(Jb.origin.distanceToSquared(ey)>(e.far-e.near)**2)return}Zb.copy(r).invert(),Jb.copy(e.ray).applyMatrix4(Zb),null!==n.boundingBox&&!1===Jb.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,Jb)}}_computeIntersections(e,t,n){let i;const r=this.geometry,a=this.material,s=r.index,o=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,d=r.attributes.normal,u=r.groups,h=r.drawRange;if(null!==s)if(Array.isArray(a))for(let r=0,o=u.length;r<o;r++){const o=u[r],p=a[o.materialIndex];for(let r=Math.max(o.start,h.start),a=Math.min(s.count,Math.min(o.start+o.count,h.start+h.count));r<a;r+=3){i=cy(this,p,e,n,l,c,d,s.getX(r),s.getX(r+1),s.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),i.face.materialIndex=o.materialIndex,t.push(i))}}else{for(let r=Math.max(0,h.start),o=Math.min(s.count,h.start+h.count);r<o;r+=3){i=cy(this,a,e,n,l,c,d,s.getX(r),s.getX(r+1),s.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}else if(void 0!==o)if(Array.isArray(a))for(let r=0,s=u.length;r<s;r++){const s=u[r],p=a[s.materialIndex];for(let r=Math.max(s.start,h.start),a=Math.min(o.count,Math.min(s.start+s.count,h.start+h.count));r<a;r+=3){i=cy(this,p,e,n,l,c,d,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),i.face.materialIndex=s.materialIndex,t.push(i))}}else{for(let r=Math.max(0,h.start),s=Math.min(o.count,h.start+h.count);r<s;r+=3){i=cy(this,a,e,n,l,c,d,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}}}function cy(e,t,n,i,r,a,s,o,l,c){e.getVertexPosition(o,ty),e.getVertexPosition(l,ny),e.getVertexPosition(c,iy);const d=function(e,t,n,i,r,a,s,o){let l;if(l=1===t.side?i.intersectTriangle(s,a,r,!0,o):i.intersectTriangle(r,a,s,0===t.side,o),null===l)return null;oy.copy(o),oy.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(oy);return c<n.near||c>n.far?null:{distance:c,point:oy.clone(),object:e}}(e,t,n,i,ty,ny,iy,sy);if(d){const e=new $v;Mb.getBarycoord(sy,ty,ny,iy,e),r&&(d.uv=Mb.getInterpolatedAttribute(r,o,l,c,e,new Vv)),a&&(d.uv1=Mb.getInterpolatedAttribute(a,o,l,c,e,new Vv)),s&&(d.normal=Mb.getInterpolatedAttribute(s,o,l,c,e,new $v),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));const t={a:o,b:l,c:c,normal:new $v,materialIndex:0};Mb.getNormal(ty,ny,iy,t.normal),d.face=t,d.barycoord=e}return d}class dy extends Kb{constructor(e=1,t=1,n=1,i=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};const s=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);const o=[],l=[],c=[],d=[];let u=0,h=0;function p(e,t,n,i,r,a,p,m,f,g,v){const _=a/f,b=p/g,y=a/2,x=p/2,w=m/2,S=f+1,T=g+1;let E=0,M=0;const C=new $v;for(let a=0;a<T;a++){const s=a*b-x;for(let o=0;o<S;o++){const u=o*_-y;C[e]=u*i,C[t]=s*r,C[n]=w,l.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=m>0?1:-1,c.push(C.x,C.y,C.z),d.push(o/f),d.push(1-a/g),E+=1}}for(let e=0;e<g;e++)for(let t=0;t<f;t++){const n=u+t+S*e,i=u+t+S*(e+1),r=u+(t+1)+S*(e+1),a=u+(t+1)+S*e;o.push(n,i,a),o.push(i,r,a),M+=6}s.addGroup(h,M,v),h+=M,u+=E}p("z","y","x",-1,-1,n,t,e,a,r,0),p("z","y","x",1,-1,n,t,-e,a,r,1),p("x","z","y",1,1,e,n,t,i,a,2),p("x","z","y",1,-1,e,n,-t,i,a,3),p("x","y","z",1,-1,e,t,n,i,r,4),p("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(o),this.setAttribute("position",new Hb(l,3)),this.setAttribute("normal",new Hb(c,3)),this.setAttribute("uv",new Hb(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dy(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function uy(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(Av("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][i]=null):t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function hy(e){const t={};for(let n=0;n<e.length;n++){const i=uy(e[n]);for(const e in i)t[e]=i[e]}return t}function py(e){const t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:Zv.workingColorSpace}const my={clone:uy,merge:hy};class fy extends Rb{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=uy(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class gy extends hb{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new U_,this.projectionMatrix=new U_,this.projectionMatrixInverse=new U_,this.coordinateSystem=yv,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const vy=new $v,_y=new Vv,by=new Vv;class yy extends gy{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Rv*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Pv*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Rv*Math.atan(Math.tan(.5*Pv*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){vy.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(vy.x,vy.y).multiplyScalar(-e/vy.z),vy.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(vy.x,vy.y).multiplyScalar(-e/vy.z)}getViewSize(e,t){return this.getViewBounds(e,_y,by),t.subVectors(by,_y)}setViewOffset(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Pv*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/e,t-=a.offsetY*n/s,i*=a.width/e,n*=a.height/s}const s=this.filmOffset;0!==s&&(r+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const xy=-90;class wy extends hb{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new yy(xy,1,e,t);i.layers=this.layers,this.add(i);const r=new yy(xy,1,e,t);r.layers=this.layers,this.add(r);const a=new yy(xy,1,e,t);a.layers=this.layers,this.add(a);const s=new yy(xy,1,e,t);s.layers=this.layers,this.add(s);const o=new yy(xy,1,e,t);o.layers=this.layers,this.add(o);const l=new yy(xy,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,r,a,s,o]=t;for(const e of t)this.remove(e);if(e===yv)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else{if(e!==xv)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1)}for(const e of t)this.add(e),e.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,a,s,o,l,c]=this.children,d=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const m=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,r),e.setRenderTarget(n,1,i),e.render(t,a),e.setRenderTarget(n,2,i),e.render(t,s),e.setRenderTarget(n,3,i),e.render(t,o),e.setRenderTarget(n,4,i),e.render(t,l),n.texture.generateMipmaps=m,e.setRenderTarget(n,5,i),e.render(t,c),e.setRenderTarget(d,u,h),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class Sy extends s_{constructor(e=[],t=301,n,i,r,a,s,o,l,c){super(e,t,n,i,r,a,s,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Ty extends c_{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new Sy(i),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},i=new dy(5,5,5),r=new fy({name:"CubemapFromEquirect",uniforms:uy(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});r.uniforms.tEquirect.value=t;const a=new ly(i,r),s=t.minFilter;t.minFilter===sg&&(t.minFilter=rg);return new wy(1,10,this).update(e,a),t.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(e,t=!0,n=!0,i=!0){const r=e.getRenderTarget();for(let r=0;r<6;r++)e.setRenderTarget(this,r),e.clear(t,n,i);e.setRenderTarget(r)}}class Ey extends hb{constructor(){super(),this.isGroup=!0,this.type="Group"}}const My={type:"move"};class Cy{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ey,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ey,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new $v,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new $v),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ey,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new $v,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new $v),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,a=null;const s=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;for(const i of e.hand.values()){const e=t.getJointPose(i,n),r=this._getHandJoint(l,i);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=e.radius),r.visible=null!==e}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],s=i.position.distanceTo(r.position),o=.02,c=.005;l.inputState.pinching&&s>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));null!==s&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(My)))}return null!==s&&(s.visible=null!==i),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new Ey;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Ay extends hb{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new X_,this.environmentIntensity=1,this.environmentRotation=new X_,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class ky extends s_{constructor(e=null,t=1,n=1,i,r,a,s,o,l=1003,c=1003,d,u){super(null,a,s,o,l,c,i,r,d,u),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Dy=new $v,Ly=new $v,Iy=new jv;class Py{constructor(e=new $v(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=Dy.subVectors(n,t).cross(Ly.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Dy),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Iy.getNormalMatrix(e),i=this.coplanarPoint(Dy).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Ry=new D_,Oy=new Vv(.5,.5),Ny=new $v;class By{constructor(e=new Py,t=new Py,n=new Py,i=new Py,r=new Py,a=new Py){this.planes=[e,t,n,i,r,a]}set(e,t,n,i,r,a){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=2e3,n=!1){const i=this.planes,r=e.elements,a=r[0],s=r[1],o=r[2],l=r[3],c=r[4],d=r[5],u=r[6],h=r[7],p=r[8],m=r[9],f=r[10],g=r[11],v=r[12],_=r[13],b=r[14],y=r[15];if(i[0].setComponents(l-a,h-c,g-p,y-v).normalize(),i[1].setComponents(l+a,h+c,g+p,y+v).normalize(),i[2].setComponents(l+s,h+d,g+m,y+_).normalize(),i[3].setComponents(l-s,h-d,g-m,y-_).normalize(),n)i[4].setComponents(o,u,f,b).normalize(),i[5].setComponents(l-o,h-u,g-f,y-b).normalize();else if(i[4].setComponents(l-o,h-u,g-f,y-b).normalize(),t===yv)i[5].setComponents(l+o,h+u,g+f,y+b).normalize();else{if(t!==xv)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(o,u,f,b).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Ry.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Ry.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ry)}intersectsSprite(e){Ry.center.set(0,0,0);const t=Oy.distanceTo(e.center);return Ry.radius=.7071067811865476+t,Ry.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ry)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let e=0;e<6;e++){if(t[e].distanceToPoint(n)<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Ny.x=i.normal.x>0?e.max.x:e.min.x,Ny.y=i.normal.y>0?e.max.y:e.min.y,Ny.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Ny)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}class Fy extends s_{constructor(e,t,n=1014,i,r,a,s=1003,o=1003,l,c=1026,d=1){if(c!==xg&&c!==wg)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super({width:e,height:t,depth:d},i,r,a,s,o,c,n,l),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new n_(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class Uy extends s_{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class zy extends Kb{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,a=t/2,s=Math.floor(n),o=Math.floor(i),l=s+1,c=o+1,d=e/s,u=t/o,h=[],p=[],m=[],f=[];for(let e=0;e<c;e++){const t=e*u-a;for(let n=0;n<l;n++){const i=n*d-r;p.push(i,-t,0),m.push(0,0,1),f.push(n/s),f.push(1-e/o)}}for(let e=0;e<o;e++)for(let t=0;t<s;t++){const n=t+l*e,i=t+l*(e+1),r=t+1+l*(e+1),a=t+1+l*e;h.push(n,i,a),h.push(i,r,a)}this.setIndex(h),this.setAttribute("position",new Hb(p,3)),this.setAttribute("normal",new Hb(m,3)),this.setAttribute("uv",new Hb(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zy(e.width,e.height,e.widthSegments,e.heightSegments)}}class Vy extends Kb{constructor(e=1,t=32,n=16,i=0,r=2*Math.PI,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const o=Math.min(a+s,Math.PI);let l=0;const c=[],d=new $v,u=new $v,h=[],p=[],m=[],f=[];for(let h=0;h<=n;h++){const g=[],v=h/n;let _=0;0===h&&0===a?_=.5/t:h===n&&o===Math.PI&&(_=-.5/t);for(let n=0;n<=t;n++){const o=n/t;d.x=-e*Math.cos(i+o*r)*Math.sin(a+v*s),d.y=e*Math.cos(a+v*s),d.z=e*Math.sin(i+o*r)*Math.sin(a+v*s),p.push(d.x,d.y,d.z),u.copy(d).normalize(),m.push(u.x,u.y,u.z),f.push(o+_,1-v),g.push(l++)}c.push(g)}for(let e=0;e<n;e++)for(let i=0;i<t;i++){const t=c[e][i+1],r=c[e][i],s=c[e+1][i],l=c[e+1][i+1];(0!==e||a>0)&&h.push(t,r,l),(e!==n-1||o<Math.PI)&&h.push(r,s,l)}this.setIndex(h),this.setAttribute("position",new Hb(p,3)),this.setAttribute("normal",new Hb(m,3)),this.setAttribute("uv",new Hb(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vy(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Hy extends Rb{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class $y extends Rb{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Wy(e,t){return e&&e.constructor!==t?"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}function Gy(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}class jy{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let a;n:{i:if(!(e<i)){for(let a=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(r=i,i=t[++n],e<i)break t}a=t.length;break n}if(e>=r)break e;{const s=t[1];e<s&&(n=2,r=s);for(let a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(i=r,r=t[--n-1],e>=r)break t}a=n,n=0}}for(;n<a;){const i=n+a>>>1;e<t[i]?a=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let e=0;e!==i;++e)t[e]=n[r+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class qy extends jy{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:cv,endingEnd:cv}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,a=e+1,s=i[r],o=i[a];if(void 0===s)switch(this.getSettings_().endingStart){case dv:r=e,s=2*t-n;break;case uv:r=i.length-2,s=t+i[r]-i[r+1];break;default:r=e,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case dv:a=e,o=2*n-t;break;case uv:a=1,o=n+i[1]-i[0];break;default:a=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-n),this._offsetPrev=r*c,this._offsetNext=a*c}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=this._offsetPrev,d=this._offsetNext,u=this._weightPrev,h=this._weightNext,p=(n-t)/(i-t),m=p*p,f=m*p,g=-u*f+2*u*m-u*p,v=(1+u)*f+(-1.5-2*u)*m+(-.5+u)*p+1,_=(-1-h)*f+(1.5+h)*m+.5*p,b=h*f-h*m;for(let e=0;e!==s;++e)r[e]=g*a[c+e]+v*a[l+e]+_*a[o+e]+b*a[d+e];return r}}class Yy extends jy{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=(n-t)/(i-t),d=1-c;for(let e=0;e!==s;++e)r[e]=a[l+e]*d+a[o+e]*c;return r}}class Xy extends jy{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ky{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Wy(t,this.TimeBufferType),this.values=Wy(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Wy(e.times,Array),values:Wy(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Xy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Yy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new qy(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case sv:t=this.InterpolantFactoryMethodDiscrete;break;case ov:t=this.InterpolantFactoryMethodLinear;break;case lv:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return Av("KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return sv;case this.InterpolantFactoryMethodLinear:return ov;case this.InterpolantFactoryMethodSmooth:return lv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,a=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==r||a!==i){r>=a&&(a=Math.max(a,1),r=a-1);const e=this.getValueSize();this.times=n.slice(r,a),this.values=this.values.slice(r*e,a*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(kv("KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(kv("KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let t=0;t!==r;t++){const i=n[t];if("number"==typeof i&&isNaN(i)){kv("KeyframeTrack: Time is not a valid number.",this,t,i),e=!1;break}if(null!==a&&a>i){kv("KeyframeTrack: Out of order keys.",this,t,i,a),e=!1;break}a=i}if(void 0!==i&&Gy(i))for(let t=0,n=i.length;t!==n;++t){const n=i[t];if(isNaN(n)){kv("KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===lv,r=e.length-1;let a=1;for(let s=1;s<r;++s){let r=!1;const o=e[s];if(o!==e[s+1]&&(1!==s||o!==e[0]))if(i)r=!0;else{const e=s*n,i=e-n,a=e+n;for(let s=0;s!==n;++s){const n=t[e+s];if(n!==t[i+s]||n!==t[a+s]){r=!0;break}}}if(r){if(s!==a){e[a]=e[s];const i=s*n,r=a*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++a}}if(r>0){e[a]=e[r];for(let e=r*n,i=a*n,s=0;s!==n;++s)t[i+s]=t[e+s];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}Ky.prototype.ValueTypeName="",Ky.prototype.TimeBufferType=Float32Array,Ky.prototype.ValueBufferType=Float32Array,Ky.prototype.DefaultInterpolation=ov;class Zy extends Ky{constructor(e,t,n){super(e,t,n)}}Zy.prototype.ValueTypeName="bool",Zy.prototype.ValueBufferType=Array,Zy.prototype.DefaultInterpolation=sv,Zy.prototype.InterpolantFactoryMethodLinear=void 0,Zy.prototype.InterpolantFactoryMethodSmooth=void 0;class Jy extends Ky{constructor(e,t,n,i){super(e,t,n,i)}}Jy.prototype.ValueTypeName="color";class Qy extends Ky{constructor(e,t,n,i){super(e,t,n,i)}}Qy.prototype.ValueTypeName="number";class ex extends jy{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(n-t)/(i-t);let l=e*s;for(let e=l+s;l!==e;l+=4)Hv.slerpFlat(r,0,a,l-s,a,l,o);return r}}class tx extends Ky{constructor(e,t,n,i){super(e,t,n,i)}InterpolantFactoryMethodLinear(e){return new ex(this.times,this.values,this.getValueSize(),e)}}tx.prototype.ValueTypeName="quaternion",tx.prototype.InterpolantFactoryMethodSmooth=void 0;class nx extends Ky{constructor(e,t,n){super(e,t,n)}}nx.prototype.ValueTypeName="string",nx.prototype.ValueBufferType=Array,nx.prototype.DefaultInterpolation=sv,nx.prototype.InterpolantFactoryMethodLinear=void 0,nx.prototype.InterpolantFactoryMethodSmooth=void 0;class ix extends Ky{constructor(e,t,n,i){super(e,t,n,i)}}ix.prototype.ValueTypeName="vector";class rx{constructor(e,t,n){const i=this;let r,a=!1,s=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this._abortController=null,this.itemStart=function(e){o++,!1===a&&void 0!==i.onStart&&i.onStart(e,s,o),a=!0},this.itemEnd=function(e){s++,void 0!==i.onProgress&&i.onProgress(e,s,o),s===o&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],i=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const ax=new rx;class sx{constructor(e){this.manager=void 0!==e?e:ax,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}sx.DEFAULT_MATERIAL_NAME="__DEFAULT";class ox extends Error{constructor(e,t){super(e),this.response=t}}new WeakMap;class lx extends hb{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Lb(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}const cx=new U_,dx=new $v,ux=new $v;class hx{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vv(512,512),this.mapType=og,this.map=null,this.mapPass=null,this.matrix=new U_,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new By,this._frameExtents=new Vv(1,1),this._viewportCount=1,this._viewports=[new o_(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;dx.setFromMatrixPosition(e.matrixWorld),t.position.copy(dx),ux.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(ux),t.updateMatrixWorld(),cx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cx,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(cx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}const px=new U_,mx=new $v,fx=new $v;class gx extends hx{constructor(){super(new yy(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vv(4,2),this._viewportCount=6,this._viewports=[new o_(2,1,1,1),new o_(0,1,1,1),new o_(3,1,1,1),new o_(1,1,1,1),new o_(3,0,1,1),new o_(1,0,1,1)],this._cubeDirections=[new $v(1,0,0),new $v(-1,0,0),new $v(0,0,1),new $v(0,0,-1),new $v(0,1,0),new $v(0,-1,0)],this._cubeUps=[new $v(0,1,0),new $v(0,1,0),new $v(0,1,0),new $v(0,1,0),new $v(0,0,1),new $v(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),mx.setFromMatrixPosition(e.matrixWorld),n.position.copy(mx),fx.copy(n.position),fx.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(fx),n.updateMatrixWorld(),i.makeTranslation(-mx.x,-mx.y,-mx.z),px.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(px,n.coordinateSystem,n.reversedDepth)}}class vx extends lx{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new gx}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class _x extends gy{constructor(e=-1,t=1,n=1,i=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,a=n+e,s=i+t,o=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,a=r+e*this.view.width,s-=t*this.view.offsetY,o=s-t*this.view.height}this.projectionMatrix.makeOrthographic(r,a,s,o,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class bx extends lx{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}new WeakMap;class yx extends yy{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class xx{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const wx="\\[\\]\\.:\\/",Sx=new RegExp("[\\[\\]\\.:\\/]","g"),Tx="[^\\[\\]\\.:\\/]",Ex="[^"+wx.replace("\\.","")+"]",Mx=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Tx)+/(WCOD+)?/.source.replace("WCOD",Ex)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Tx)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Tx)+"$"),Cx=["material","materials","bones","map"];class Ax{constructor(e,t,n){this.path=t,this.parsedPath=n||Ax.parseTrackName(t),this.node=Ax.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Ax.Composite(e,t,n):new Ax(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Sx,"")}static parseTrackName(e){const t=Mx.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==Cx.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const a=n(r.children);if(a)return a}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=Ax.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void Av("PropertyBinding: No target node found for track: "+this.path+".");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void kv("PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void kv("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void kv("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void kv("PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void kv("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void kv("PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void kv("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const a=e[i];if(void 0===a){return void kv("PropertyBinding: Trying to update property for track: "+t.nodeName+"."+i+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,!0===e.isMaterial?s=this.Versioning.NeedsUpdate:!0===e.isObject3D&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void kv("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void kv("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ax.Composite=class{constructor(e,t,n){const i=n||Ax.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Ax.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Ax.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Ax.prototype.GetterByBindingType=[Ax.prototype._getValue_direct,Ax.prototype._getValue_array,Ax.prototype._getValue_arrayElement,Ax.prototype._getValue_toArray],Ax.prototype.SetterByBindingTypeAndVersioning=[[Ax.prototype._setValue_direct,Ax.prototype._setValue_direct_setNeedsUpdate,Ax.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ax.prototype._setValue_array,Ax.prototype._setValue_array_setNeedsUpdate,Ax.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ax.prototype._setValue_arrayElement,Ax.prototype._setValue_arrayElement_setNeedsUpdate,Ax.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ax.prototype._setValue_fromArray,Ax.prototype._setValue_fromArray_setNeedsUpdate,Ax.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);function kx(e,t,n,i){const r=function(e){switch(e){case og:case lg:return{byteLength:1,components:1};case dg:case cg:case mg:return{byteLength:2,components:1};case fg:case gg:return{byteLength:2,components:4};case hg:case ug:case pg:return{byteLength:4,components:1};case _g:case bg:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${e}.`)}(i);switch(n){case 1021:return e*t;case Sg:case Tg:return e*t/r.components*r.byteLength;case Eg:case Mg:return e*t*2/r.components*r.byteLength;case 1022:return e*t*3/r.components*r.byteLength;case yg:case Cg:return e*t*4/r.components*r.byteLength;case Ag:case kg:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Dg:case Lg:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case Pg:case Og:return Math.max(e,16)*Math.max(t,8)/4;case Ig:case Rg:return Math.max(e,8)*Math.max(t,8)/2;case Ng:case Bg:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Fg:case Ug:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case zg:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case Vg:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case Hg:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case $g:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case Wg:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case Gg:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case jg:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case qg:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case Yg:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case Xg:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case Kg:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case Zg:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case Jg:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case Qg:case ev:case tv:return Math.ceil(e/4)*Math.ceil(t/4)*16;case nv:case iv:return Math.ceil(e/4)*Math.ceil(t/4)*8;case rv:case av:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function Dx(){let e=null,t=!1,n=null,i=null;function r(t,a){n(t,a),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Lx(e){const t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const i=t.get(n);i&&(e.deleteBuffer(i.buffer),t.delete(n))},update:function(n,i){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const e=t.get(n);return void((!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const r=t.get(n);if(void 0===r)t.set(n,function(t,n){const i=t.array,r=t.usage,a=i.byteLength,s=e.createBuffer();let o;if(e.bindBuffer(n,s),e.bufferData(n,i,r),t.onUploadCallback(),i instanceof Float32Array)o=e.FLOAT;else if("undefined"!=typeof Float16Array&&i instanceof Float16Array)o=e.HALF_FLOAT;else if(i instanceof Uint16Array)o=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(i instanceof Int16Array)o=e.SHORT;else if(i instanceof Uint32Array)o=e.UNSIGNED_INT;else if(i instanceof Int32Array)o=e.INT;else if(i instanceof Int8Array)o=e.BYTE;else if(i instanceof Uint8Array)o=e.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);o=e.UNSIGNED_BYTE}return{buffer:s,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version,size:a}}(n,i));else if(r.version<n.version){if(r.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,i){const r=n.array,a=n.updateRanges;if(e.bindBuffer(i,t),0===a.length)e.bufferSubData(i,0,r);else{a.sort(((e,t)=>e.start-t.start));let t=0;for(let e=1;e<a.length;e++){const n=a[t],i=a[e];i.start<=n.start+n.count+1?n.count=Math.max(n.count,i.start+i.count-n.start):(++t,a[t]=i)}a.length=t+1;for(let t=0,n=a.length;t<n;t++){const n=a[t];e.bufferSubData(i,n.start*r.BYTES_PER_ELEMENT,r,n.start,n.count)}n.clearUpdateRanges()}n.onUploadCallback()}(r.buffer,n,i),r.version=n.version}}}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:jf}})),"undefined"!=typeof window&&(window.__THREE__?Av("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=jf);const Ix={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"uniform sampler2D dfgLUT;\nstruct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transpose( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 uv = vec2( roughness, dotNV );\n\treturn texture2D( dfgLUT, uv ).rg;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nvec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 dfgV = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNV * dotNV), 0.0, dotNV), material.roughness );\n\tvec2 dfgL = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNL * dotNL), 0.0, dotNL), material.roughness );\n\tvec3 FssEss_V = material.specularColor * dfgV.x + material.specularF90 * dfgV.y;\n\tvec3 FssEss_L = material.specularColor * dfgL.x + material.specularF90 * dfgL.y;\n\tfloat Ess_V = dfgV.x + dfgV.y;\n\tfloat Ess_L = dfgL.x + dfgL.y;\n\tfloat Ems_V = 1.0 - Ess_V;\n\tfloat Ems_L = 1.0 - Ess_L;\n\tvec3 Favg = material.specularColor + ( 1.0 - material.specularColor ) * 0.047619;\n\tvec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg * Favg + EPSILON );\n\tfloat compensationFactor = Ems_V * Ems_L;\n\tvec3 multiScatter = Fms * compensationFactor;\n\treturn singleScatter + multiScatter;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\tfloat depth = unpackRGBAToDepth( texture2D( depths, uv ) );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\treturn step( depth, compare );\n\t\t#else\n\t\t\treturn step( compare, depth );\n\t\t#endif\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow( sampler2D shadow, vec2 uv, float compare ) {\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\tfloat hard_shadow = step( distribution.x, compare );\n\t\t#else\n\t\t\tfloat hard_shadow = step( compare, distribution.x );\n\t\t#endif\n\t\tif ( hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\tfloat fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];\n\t#else\n\t\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;\n\t#endif\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Px={common:{diffuse:{value:new Lb(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new jv},alphaMap:{value:null},alphaMapTransform:{value:new jv},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new jv}},envmap:{envMap:{value:null},envMapRotation:{value:new jv},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new jv}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new jv}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new jv},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new jv},normalScale:{value:new Vv(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new jv},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new jv}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new jv}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new jv}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Lb(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Lb(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new jv},alphaTest:{value:0},uvTransform:{value:new jv}},sprite:{diffuse:{value:new Lb(16777215)},opacity:{value:1},center:{value:new Vv(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new jv},alphaMap:{value:null},alphaMapTransform:{value:new jv},alphaTest:{value:0}}},Rx={basic:{uniforms:hy([Px.common,Px.specularmap,Px.envmap,Px.aomap,Px.lightmap,Px.fog]),vertexShader:Ix.meshbasic_vert,fragmentShader:Ix.meshbasic_frag},lambert:{uniforms:hy([Px.common,Px.specularmap,Px.envmap,Px.aomap,Px.lightmap,Px.emissivemap,Px.bumpmap,Px.normalmap,Px.displacementmap,Px.fog,Px.lights,{emissive:{value:new Lb(0)}}]),vertexShader:Ix.meshlambert_vert,fragmentShader:Ix.meshlambert_frag},phong:{uniforms:hy([Px.common,Px.specularmap,Px.envmap,Px.aomap,Px.lightmap,Px.emissivemap,Px.bumpmap,Px.normalmap,Px.displacementmap,Px.fog,Px.lights,{emissive:{value:new Lb(0)},specular:{value:new Lb(1118481)},shininess:{value:30}}]),vertexShader:Ix.meshphong_vert,fragmentShader:Ix.meshphong_frag},standard:{uniforms:hy([Px.common,Px.envmap,Px.aomap,Px.lightmap,Px.emissivemap,Px.bumpmap,Px.normalmap,Px.displacementmap,Px.roughnessmap,Px.metalnessmap,Px.fog,Px.lights,{emissive:{value:new Lb(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ix.meshphysical_vert,fragmentShader:Ix.meshphysical_frag},toon:{uniforms:hy([Px.common,Px.aomap,Px.lightmap,Px.emissivemap,Px.bumpmap,Px.normalmap,Px.displacementmap,Px.gradientmap,Px.fog,Px.lights,{emissive:{value:new Lb(0)}}]),vertexShader:Ix.meshtoon_vert,fragmentShader:Ix.meshtoon_frag},matcap:{uniforms:hy([Px.common,Px.bumpmap,Px.normalmap,Px.displacementmap,Px.fog,{matcap:{value:null}}]),vertexShader:Ix.meshmatcap_vert,fragmentShader:Ix.meshmatcap_frag},points:{uniforms:hy([Px.points,Px.fog]),vertexShader:Ix.points_vert,fragmentShader:Ix.points_frag},dashed:{uniforms:hy([Px.common,Px.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ix.linedashed_vert,fragmentShader:Ix.linedashed_frag},depth:{uniforms:hy([Px.common,Px.displacementmap]),vertexShader:Ix.depth_vert,fragmentShader:Ix.depth_frag},normal:{uniforms:hy([Px.common,Px.bumpmap,Px.normalmap,Px.displacementmap,{opacity:{value:1}}]),vertexShader:Ix.meshnormal_vert,fragmentShader:Ix.meshnormal_frag},sprite:{uniforms:hy([Px.sprite,Px.fog]),vertexShader:Ix.sprite_vert,fragmentShader:Ix.sprite_frag},background:{uniforms:{uvTransform:{value:new jv},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ix.background_vert,fragmentShader:Ix.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new jv}},vertexShader:Ix.backgroundCube_vert,fragmentShader:Ix.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ix.cube_vert,fragmentShader:Ix.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ix.equirect_vert,fragmentShader:Ix.equirect_frag},distanceRGBA:{uniforms:hy([Px.common,Px.displacementmap,{referencePosition:{value:new $v},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ix.distanceRGBA_vert,fragmentShader:Ix.distanceRGBA_frag},shadow:{uniforms:hy([Px.lights,Px.fog,{color:{value:new Lb(0)},opacity:{value:1}}]),vertexShader:Ix.shadow_vert,fragmentShader:Ix.shadow_frag}};Rx.physical={uniforms:hy([Rx.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new jv},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new jv},clearcoatNormalScale:{value:new Vv(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new jv},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new jv},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new jv},sheen:{value:0},sheenColor:{value:new Lb(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new jv},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new jv},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new jv},transmissionSamplerSize:{value:new Vv},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new jv},attenuationDistance:{value:0},attenuationColor:{value:new Lb(0)},specularColor:{value:new Lb(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new jv},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new jv},anisotropyVector:{value:new Vv},anisotropyMap:{value:null},anisotropyMapTransform:{value:new jv}}]),vertexShader:Ix.meshphysical_vert,fragmentShader:Ix.meshphysical_frag};const Ox={r:0,b:0,g:0},Nx=new X_,Bx=new U_;function Fx(e,t,n,i,r,a,s){const o=new Lb(0);let l,c,d=!0===a?0:1,u=null,h=0,p=null;function m(e){let i=!0===e.isScene?e.background:null;if(i&&i.isTexture){i=(e.backgroundBlurriness>0?n:t).get(i)}return i}function f(t,n){t.getRGB(Ox,py(e)),i.buffers.color.setClear(Ox.r,Ox.g,Ox.b,n,s)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),d=t,f(o,d)},getClearAlpha:function(){return d},setClearAlpha:function(e){d=e,f(o,d)},render:function(t){let n=!1;const r=m(t);null===r?f(o,d):r&&r.isColor&&(f(r,1),n=!0);const a=e.xr.getEnvironmentBlendMode();"additive"===a?i.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===a&&i.buffers.color.setClear(0,0,0,0,s),(e.autoClear||n)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){const i=m(n);i&&(i.isCubeTexture||i.mapping===Jf)?(void 0===c&&(c=new ly(new dy(1,1,1),new fy({name:"BackgroundCubeMaterial",uniforms:uy(Rx.backgroundCube.uniforms),vertexShader:Rx.backgroundCube.vertexShader,fragmentShader:Rx.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),Nx.copy(n.backgroundRotation),Nx.x*=-1,Nx.y*=-1,Nx.z*=-1,i.isCubeTexture&&!1===i.isRenderTargetTexture&&(Nx.y*=-1,Nx.z*=-1),c.material.uniforms.envMap.value=i,c.material.uniforms.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(Bx.makeRotationFromEuler(Nx)),c.material.toneMapped=Zv.getTransfer(i.colorSpace)!==gv,u===i&&h===i.version&&p===e.toneMapping||(c.material.needsUpdate=!0,u=i,h=i.version,p=e.toneMapping),c.layers.enableAll(),t.unshift(c,c.geometry,c.material,0,0,null)):i&&i.isTexture&&(void 0===l&&(l=new ly(new zy(2,2),new fy({name:"BackgroundMaterial",uniforms:uy(Rx.background.uniforms),vertexShader:Rx.background.vertexShader,fragmentShader:Rx.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=i,l.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,l.material.toneMapped=Zv.getTransfer(i.colorSpace)!==gv,!0===i.matrixAutoUpdate&&i.updateMatrix(),l.material.uniforms.uvTransform.value.copy(i.matrix),u===i&&h===i.version&&p===e.toneMapping||(l.material.needsUpdate=!0,u=i,h=i.version,p=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null))},dispose:function(){void 0!==c&&(c.geometry.dispose(),c.material.dispose(),c=void 0),void 0!==l&&(l.geometry.dispose(),l.material.dispose(),l=void 0)}}}function Ux(e,t){const n=e.getParameter(e.MAX_VERTEX_ATTRIBS),i={},r=c(null);let a=r,s=!1;function o(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function c(e){const t=[],i=[],r=[];for(let e=0;e<n;e++)t[e]=0,i[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:i,attributeDivisors:r,object:e,attributes:{},index:null}}function d(){const e=a.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function u(e){h(e,0)}function h(t,n){const i=a.newAttributes,r=a.enabledAttributes,s=a.attributeDivisors;i[t]=1,0===r[t]&&(e.enableVertexAttribArray(t),r[t]=1),s[t]!==n&&(e.vertexAttribDivisor(t,n),s[t]=n)}function p(){const t=a.newAttributes,n=a.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function m(t,n,i,r,a,s,o){!0===o?e.vertexAttribIPointer(t,n,i,a,s):e.vertexAttribPointer(t,n,i,r,a,s)}function f(){g(),s=!0,a!==r&&(a=r,o(a.object))}function g(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function(n,r,l,f,g){let v=!1;const _=function(t,n,r){const a=!0===r.wireframe;let s=i[t.id];void 0===s&&(s={},i[t.id]=s);let o=s[n.id];void 0===o&&(o={},s[n.id]=o);let l=o[a];void 0===l&&(l=c(e.createVertexArray()),o[a]=l);return l}(f,l,r);a!==_&&(a=_,o(a.object)),v=function(e,t,n,i){const r=a.attributes,s=t.attributes;let o=0;const l=n.getAttributes();for(const t in l){if(l[t].location>=0){const n=r[t];let i=s[t];if(void 0===i&&("instanceMatrix"===t&&e.instanceMatrix&&(i=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(i=e.instanceColor)),void 0===n)return!0;if(n.attribute!==i)return!0;if(i&&n.data!==i.data)return!0;o++}}return a.attributesNum!==o||a.index!==i}(n,f,l,g),v&&function(e,t,n,i){const r={},s=t.attributes;let o=0;const l=n.getAttributes();for(const t in l){if(l[t].location>=0){let n=s[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));const i={};i.attribute=n,n&&n.data&&(i.data=n.data),r[t]=i,o++}}a.attributes=r,a.attributesNum=o,a.index=i}(n,f,l,g),null!==g&&t.update(g,e.ELEMENT_ARRAY_BUFFER),(v||s)&&(s=!1,function(n,i,r,a){d();const s=a.attributes,o=r.getAttributes(),l=i.defaultAttributeValues;for(const i in o){const r=o[i];if(r.location>=0){let o=s[i];if(void 0===o&&("instanceMatrix"===i&&n.instanceMatrix&&(o=n.instanceMatrix),"instanceColor"===i&&n.instanceColor&&(o=n.instanceColor)),void 0!==o){const i=o.normalized,s=o.itemSize,l=t.get(o);if(void 0===l)continue;const c=l.buffer,d=l.type,p=l.bytesPerElement,f=d===e.INT||d===e.UNSIGNED_INT||o.gpuType===ug;if(o.isInterleavedBufferAttribute){const t=o.data,l=t.stride,g=o.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)h(r.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<r.locationSize;e++)u(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)m(r.location+e,s/r.locationSize,d,i,l*p,(g+s/r.locationSize*e)*p,f)}else{if(o.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)h(r.location+e,o.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let e=0;e<r.locationSize;e++)u(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)m(r.location+e,s/r.locationSize,d,i,s*p,s/r.locationSize*e*p,f)}}else if(void 0!==l){const t=l[i];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(r.location,t);break;case 3:e.vertexAttrib3fv(r.location,t);break;case 4:e.vertexAttrib4fv(r.location,t);break;default:e.vertexAttrib1fv(r.location,t)}}}}p()}(n,r,l,f),null!==g&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(g).buffer))},reset:f,resetDefaultState:g,dispose:function(){f();for(const e in i){const t=i[e];for(const e in t){const n=t[e];for(const e in n)l(n[e].object),delete n[e];delete t[e]}delete i[e]}},releaseStatesOfGeometry:function(e){if(void 0===i[e.id])return;const t=i[e.id];for(const e in t){const n=t[e];for(const e in n)l(n[e].object),delete n[e];delete t[e]}delete i[e.id]},releaseStatesOfProgram:function(e){for(const t in i){const n=i[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)l(r[e].object),delete r[e];delete n[e.id]}},initAttributes:d,enableAttribute:u,disableUnusedAttributes:p}}function zx(e,t,n){let i;function r(t,r,a){0!==a&&(e.drawArraysInstanced(i,t,r,a),n.update(r,i,a))}this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=r,this.renderMultiDraw=function(e,r,a){if(0===a)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,e,0,r,0,a);let s=0;for(let e=0;e<a;e++)s+=r[e];n.update(s,i,1)},this.renderMultiDrawInstances=function(e,a,s,o){if(0===s)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)r(e[t],a[t],o[t]);else{l.multiDrawArraysInstancedWEBGL(i,e,0,a,0,o,0,s);let t=0;for(let e=0;e<s;e++)t+=a[e]*o[e];n.update(t,i,1)}}}function Vx(e,t,n,i){let r;function a(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let s=void 0!==n.precision?n.precision:"highp";const o=a(s);o!==s&&(Av("WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);const l=!0===n.logarithmicDepthBuffer,c=!0===n.reversedDepthBuffer&&t.has("EXT_clip_control"),d=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:a,textureFormatReadable:function(t){return t===yg||i.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const r=n===mg&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(n!==og&&i.convert(n)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==pg&&!r)},precision:s,logarithmicDepthBuffer:l,reversedDepthBuffer:c,maxTextures:d,maxVertexTextures:u,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:u>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function Hx(e){const t=this;let n=null,i=0,r=!1,a=!1;const s=new Py,o=new jv,l={value:null,needsUpdate:!1};function c(e,n,i,r){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==r||null===c){const t=i+4*a,r=n.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=i;t!==a;++t,n+=4)s.copy(e[t]).applyMatrix4(r,o),s.normal.toArray(c,n),c[n+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==i||r;return r=t,i=e.length,n},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(s,o,d){const u=s.clippingPlanes,h=s.clipIntersection,p=s.clipShadows,m=e.get(s);if(!r||null===u||0===u.length||a&&!p)a?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=i>0);t.numPlanes=i,t.numIntersection=0}();else{const e=a?0:i,t=4*e;let r=m.clippingState||null;l.value=r,r=c(u,o,t,d);for(let e=0;e!==t;++e)r[e]=n[e];m.clippingState=r,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function $x(e){let t=new WeakMap;function n(e,t){return t===Kf?e.mapping=Yf:t===Zf&&(e.mapping=Xf),e}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const a=r.mapping;if(a===Kf||a===Zf){if(t.has(r)){return n(t.get(r).texture,r.mapping)}{const a=r.image;if(a&&a.height>0){const s=new Ty(a.height);return s.fromEquirectangularTexture(e,r),t.set(r,s),r.addEventListener("dispose",i),n(s.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}const Wx=[.125,.215,.35,.446,.526,.582],Gx=20,jx=new _x,qx=new Lb;let Yx=null,Xx=0,Kx=0,Zx=!1;const Jx=new $v;class Qx{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,n=.1,i=100,r={}){const{size:a=256,position:s=Jx}=r;Yx=this._renderer.getRenderTarget(),Xx=this._renderer.getActiveCubeFace(),Kx=this._renderer.getActiveMipmapLevel(),Zx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,n,i,o,s),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=iw(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=nw(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose(),null!==this._backgroundBox&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._ggxMaterial&&this._ggxMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(Yx,Xx,Kx),this._renderer.xr.enabled=Zx,e.scissorTest=!1,tw(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Yf||e.mapping===Xf?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Yx=this._renderer.getRenderTarget(),Xx=this._renderer.getActiveCubeFace(),Kx=this._renderer.getActiveMipmapLevel(),Zx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:rg,minFilter:rg,generateMipmaps:!1,type:mg,format:yg,colorSpace:mv,depthBuffer:!1},i=ew(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=ew(e,t,n);const{_lodMax:i}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=function(e){const t=[],n=[],i=[];let r=e;const a=e-4+1+Wx.length;for(let s=0;s<a;s++){const a=Math.pow(2,r);t.push(a);let o=1/a;s>e-4?o=Wx[s-e+4-1]:0===s&&(o=0),n.push(o);const l=1/(a-2),c=-l,d=1+l,u=[c,c,d,c,d,d,c,c,d,d,c,d],h=6,p=6,m=3,f=2,g=1,v=new Float32Array(m*p*h),_=new Float32Array(f*p*h),b=new Float32Array(g*p*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(i,m*p*e),_.set(u,f*p*e);const r=[e,e,e,e,e,e];b.set(r,g*p*e)}const y=new Kb;y.setAttribute("position",new Ub(v,m)),y.setAttribute("uv",new Ub(_,f)),y.setAttribute("faceIndex",new Ub(b,g)),i.push(new ly(y,null)),r>4&&r--}return{lodMeshes:i,sizeLods:t,sigmas:n}}(i)),this._blurMaterial=function(e,t,n){const i=new Float32Array(Gx),r=new $v(0,1,0);return new fy({name:"SphericalGaussianBlur",defines:{n:Gx,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:rw(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(i,e,t),this._ggxMaterial=function(e,t,n){return new fy({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:256,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:rw(),fragmentShader:'\n\n\t\t\tprecision highp float;\n\t\t\tprecision highp int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform float roughness;\n\t\t\tuniform float mipInt;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\t#define PI 3.14159265359\n\n\t\t\t// Van der Corput radical inverse\n\t\t\tfloat radicalInverse_VdC(uint bits) {\n\t\t\t\tbits = (bits << 16u) | (bits >> 16u);\n\t\t\t\tbits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\n\t\t\t\tbits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\n\t\t\t\tbits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\n\t\t\t\tbits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\n\t\t\t\treturn float(bits) * 2.3283064365386963e-10; // / 0x100000000\n\t\t\t}\n\n\t\t\t// Hammersley sequence\n\t\t\tvec2 hammersley(uint i, uint N) {\n\t\t\t\treturn vec2(float(i) / float(N), radicalInverse_VdC(i));\n\t\t\t}\n\n\t\t\t// GGX VNDF importance sampling (Eric Heitz 2018)\n\t\t\t// "Sampling the GGX Distribution of Visible Normals"\n\t\t\t// https://jcgt.org/published/0007/04/01/\n\t\t\tvec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {\n\t\t\t\tfloat alpha = roughness * roughness;\n\n\t\t\t\t// Section 3.2: Transform view direction to hemisphere configuration\n\t\t\t\tvec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));\n\n\t\t\t\t// Section 4.1: Orthonormal basis\n\t\t\t\tfloat lensq = Vh.x * Vh.x + Vh.y * Vh.y;\n\t\t\t\tvec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);\n\t\t\t\tvec3 T2 = cross(Vh, T1);\n\n\t\t\t\t// Section 4.2: Parameterization of projected area\n\t\t\t\tfloat r = sqrt(Xi.x);\n\t\t\t\tfloat phi = 2.0 * PI * Xi.y;\n\t\t\t\tfloat t1 = r * cos(phi);\n\t\t\t\tfloat t2 = r * sin(phi);\n\t\t\t\tfloat s = 0.5 * (1.0 + Vh.z);\n\t\t\t\tt2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;\n\n\t\t\t\t// Section 4.3: Reprojection onto hemisphere\n\t\t\t\tvec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;\n\n\t\t\t\t// Section 3.4: Transform back to ellipsoid configuration\n\t\t\t\treturn normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));\n\t\t\t}\n\n\t\t\tvoid main() {\n\t\t\t\tvec3 N = normalize(vOutputDirection);\n\t\t\t\tvec3 V = N; // Assume view direction equals normal for pre-filtering\n\n\t\t\t\tvec3 prefilteredColor = vec3(0.0);\n\t\t\t\tfloat totalWeight = 0.0;\n\n\t\t\t\t// For very low roughness, just sample the environment directly\n\t\t\t\tif (roughness < 0.001) {\n\t\t\t\t\tgl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Tangent space basis for VNDF sampling\n\t\t\t\tvec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\n\t\t\t\tvec3 tangent = normalize(cross(up, N));\n\t\t\t\tvec3 bitangent = cross(N, tangent);\n\n\t\t\t\tfor(uint i = 0u; i < uint(GGX_SAMPLES); i++) {\n\t\t\t\t\tvec2 Xi = hammersley(i, uint(GGX_SAMPLES));\n\n\t\t\t\t\t// For PMREM, V = N, so in tangent space V is always (0, 0, 1)\n\t\t\t\t\tvec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);\n\n\t\t\t\t\t// Transform H back to world space\n\t\t\t\t\tvec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);\n\t\t\t\t\tvec3 L = normalize(2.0 * dot(V, H) * H - V);\n\n\t\t\t\t\tfloat NdotL = max(dot(N, L), 0.0);\n\n\t\t\t\t\tif(NdotL > 0.0) {\n\t\t\t\t\t\t// Sample environment at fixed mip level\n\t\t\t\t\t\t// VNDF importance sampling handles the distribution filtering\n\t\t\t\t\t\tvec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);\n\n\t\t\t\t\t\t// Weight by NdotL for the split-sum approximation\n\t\t\t\t\t\t// VNDF PDF naturally accounts for the visible microfacet distribution\n\t\t\t\t\t\tprefilteredColor += sampleColor * NdotL;\n\t\t\t\t\t\ttotalWeight += NdotL;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (totalWeight > 0.0) {\n\t\t\t\t\tprefilteredColor = prefilteredColor / totalWeight;\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = vec4(prefilteredColor, 1.0);\n\t\t\t}\n\t\t',blending:0,depthTest:!1,depthWrite:!1})}(i,e,t)}return i}_compileMaterial(e){const t=new ly(new Kb,e);this._renderer.compile(t,jx)}_sceneToCubeUV(e,t,n,i,r){const a=new yy(90,1,t,n),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],l=this._renderer,c=l.autoClear,d=l.toneMapping;l.getClearColor(qx),l.toneMapping=0,l.autoClear=!1;l.state.buffers.depth.getReversed()&&(l.setRenderTarget(i),l.clearDepth(),l.setRenderTarget(null)),null===this._backgroundBox&&(this._backgroundBox=new ly(new dy,new Ob({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1})));const u=this._backgroundBox,h=u.material;let p=!1;const m=e.background;m?m.isColor&&(h.color.copy(m),e.background=null,p=!0):(h.color.copy(qx),p=!0);for(let t=0;t<6;t++){const n=t%3;0===n?(a.up.set(0,s[t],0),a.position.set(r.x,r.y,r.z),a.lookAt(r.x+o[t],r.y,r.z)):1===n?(a.up.set(0,0,s[t]),a.position.set(r.x,r.y,r.z),a.lookAt(r.x,r.y+o[t],r.z)):(a.up.set(0,s[t],0),a.position.set(r.x,r.y,r.z),a.lookAt(r.x,r.y,r.z+o[t]));const c=this._cubeSize;tw(i,n*c,t>2?c:0,c,c),l.setRenderTarget(i),p&&l.render(u,a),l.render(e,a)}l.toneMapping=d,l.autoClear=c,e.background=m}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Yf||e.mapping===Xf;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=iw()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=nw());const r=i?this._cubemapMaterial:this._equirectMaterial,a=this._lodMeshes[0];a.material=r;r.uniforms.envMap.value=e;const s=this._cubeSize;tw(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(a,jx)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodMeshes.length;for(let t=1;t<i;t++)this._applyGGXFilter(e,t-1,t);t.autoClear=n}_applyGGXFilter(e,t,n){const i=this._renderer,r=this._pingPongRenderTarget,a=this._ggxMaterial,s=this._lodMeshes[n];s.material=a;const o=a.uniforms,l=n/(this._lodMeshes.length-1),c=t/(this._lodMeshes.length-1),d=Math.sqrt(l*l-c*c)*(.05+.95*l),{_lodMax:u}=this,h=this._sizeLods[n],p=3*h*(n>u-4?n-u+4:0),m=4*(this._cubeSize-h);o.envMap.value=e.texture,o.roughness.value=d,o.mipInt.value=u-t,tw(r,p,m,3*h,2*h),i.setRenderTarget(r),i.render(s,jx),o.envMap.value=r.texture,o.roughness.value=0,o.mipInt.value=u-n,tw(e,p,m,3*h,2*h),i.setRenderTarget(e),i.render(s,jx)}_blur(e,t,n,i,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",r),this._halfBlur(a,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,a,s){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&kv("blur direction must be either latitudinal or longitudinal!");const c=this._lodMeshes[i];c.material=l;const d=l.uniforms,u=this._sizeLods[n]-1,h=isFinite(r)?Math.PI/(2*u):2*Math.PI/39,p=r/h,m=isFinite(r)?1+Math.floor(3*p):Gx;m>Gx&&Av(`sigmaRadians, ${r}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const f=[];let g=0;for(let e=0;e<Gx;++e){const t=e/p,n=Math.exp(-t*t/2);f.push(n),0===e?g+=n:e<m&&(g+=2*n)}for(let e=0;e<f.length;e++)f[e]=f[e]/g;d.envMap.value=e.texture,d.samples.value=m,d.weights.value=f,d.latitudinal.value="latitudinal"===a,s&&(d.poleAxis.value=s);const{_lodMax:v}=this;d.dTheta.value=h,d.mipInt.value=v-n;const _=this._sizeLods[i];tw(t,3*_*(i>v-4?i-v+4:0),4*(this._cubeSize-_),3*_,2*_),o.setRenderTarget(t),o.render(c,jx)}}function ew(e,t,n){const i=new c_(e,t,n);return i.texture.mapping=Jf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function tw(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function nw(){return new fy({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:rw(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function iw(){return new fy({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:rw(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function rw(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function aw(e){let t=new WeakMap,n=null;function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const a=r.mapping,s=a===Kf||a===Zf,o=a===Yf||a===Xf;if(s||o){let a=t.get(r);const l=void 0!==a?a.texture.pmremVersion:0;if(r.isRenderTargetTexture&&r.pmremVersion!==l)return null===n&&(n=new Qx(e)),a=s?n.fromEquirectangular(r,a):n.fromCubemap(r,a),a.texture.pmremVersion=r.pmremVersion,t.set(r,a),a.texture;if(void 0!==a)return a.texture;{const l=r.image;return s&&l&&l.height>0||o&&l&&function(e){let t=0;const n=6;for(let i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(l)?(null===n&&(n=new Qx(e)),a=s?n.fromEquirectangular(r):n.fromCubemap(r),a.texture.pmremVersion=r.pmremVersion,t.set(r,a),r.addEventListener("dispose",i),a.texture):null}}}return r},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function sw(e){const t={};function n(n){if(void 0!==t[n])return t[n];const i=e.getExtension(n);return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){const t=n(e);return null===t&&Dv("WebGLRenderer: "+e+" extension not supported."),t}}}function ow(e,t,n,i){const r={},a=new WeakMap;function s(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const e in o.attributes)t.remove(o.attributes[e]);o.removeEventListener("dispose",s),delete r[o.id];const l=a.get(o);l&&(t.remove(l),a.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],i=e.index,r=e.attributes.position;let s=0;if(null!==i){const e=i.array;s=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],a=e[t+2];n.push(i,r,r,a,a,i)}}else{if(void 0===r)return;{const e=r.array;s=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}}const o=new(wv(n)?Vb:zb)(n,1);o.version=s;const l=a.get(e);l&&t.remove(l),a.set(e,o)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",s),r[t.id]=!0,n.memory.geometries++),t},update:function(n){const i=n.attributes;for(const n in i)t.update(i[n],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return a.get(e)}}}function lw(e,t,n){let i,r,a;function s(t,s,o){0!==o&&(e.drawElementsInstanced(i,s,r,t*a,o),n.update(s,i,o))}this.setMode=function(e){i=e},this.setIndex=function(e){r=e.type,a=e.bytesPerElement},this.render=function(t,s){e.drawElements(i,s,r,t*a),n.update(s,i,1)},this.renderInstances=s,this.renderMultiDraw=function(e,a,s){if(0===s)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,a,0,r,e,0,s);let o=0;for(let e=0;e<s;e++)o+=a[e];n.update(o,i,1)},this.renderMultiDrawInstances=function(e,o,l,c){if(0===l)return;const d=t.get("WEBGL_multi_draw");if(null===d)for(let t=0;t<e.length;t++)s(e[t]/a,o[t],c[t]);else{d.multiDrawElementsInstancedWEBGL(i,o,0,r,e,0,c,0,l);let t=0;for(let e=0;e<l;e++)t+=o[e]*c[e];n.update(t,i,1)}}}function cw(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,i,r){switch(t.calls++,i){case e.TRIANGLES:t.triangles+=r*(n/3);break;case e.LINES:t.lines+=r*(n/2);break;case e.LINE_STRIP:t.lines+=r*(n-1);break;case e.LINE_LOOP:t.lines+=r*n;break;case e.POINTS:t.points+=r*n;break;default:kv("WebGLInfo: Unknown draw mode:",i)}}}}function dw(e,t,n){const i=new WeakMap,r=new o_;return{update:function(a,s,o){const l=a.morphTargetInfluences,c=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,d=void 0!==c?c.length:0;let u=i.get(s);if(void 0===u||u.count!==d){void 0!==u&&u.texture.dispose();const h=void 0!==s.morphAttributes.position,p=void 0!==s.morphAttributes.normal,m=void 0!==s.morphAttributes.color,f=s.morphAttributes.position||[],g=s.morphAttributes.normal||[],v=s.morphAttributes.color||[];let _=0;!0===h&&(_=1),!0===p&&(_=2),!0===m&&(_=3);let b=s.attributes.position.count*_,y=1;b>t.maxTextureSize&&(y=Math.ceil(b/t.maxTextureSize),b=t.maxTextureSize);const x=new Float32Array(b*y*4*d),w=new d_(x,b,y,d);w.type=pg,w.needsUpdate=!0;const S=4*_;for(let E=0;E<d;E++){const M=f[E],C=g[E],A=v[E],k=b*y*4*E;for(let D=0;D<M.count;D++){const L=D*S;!0===h&&(r.fromBufferAttribute(M,D),x[k+L+0]=r.x,x[k+L+1]=r.y,x[k+L+2]=r.z,x[k+L+3]=0),!0===p&&(r.fromBufferAttribute(C,D),x[k+L+4]=r.x,x[k+L+5]=r.y,x[k+L+6]=r.z,x[k+L+7]=0),!0===m&&(r.fromBufferAttribute(A,D),x[k+L+8]=r.x,x[k+L+9]=r.y,x[k+L+10]=r.z,x[k+L+11]=4===A.itemSize?r.w:1)}}function T(){w.dispose(),i.delete(s),s.removeEventListener("dispose",T)}u={count:d,texture:w,size:new Vv(b,y)},i.set(s,u),s.addEventListener("dispose",T)}if(!0===a.isInstancedMesh&&null!==a.morphTexture)o.getUniforms().setValue(e,"morphTexture",a.morphTexture,n);else{let I=0;for(let R=0;R<l.length;R++)I+=l[R];const P=s.morphTargetsRelative?1:1-I;o.getUniforms().setValue(e,"morphTargetBaseInfluence",P),o.getUniforms().setValue(e,"morphTargetInfluences",l)}o.getUniforms().setValue(e,"morphTargetsTexture",u.texture,n),o.getUniforms().setValue(e,"morphTargetsTextureSize",u.size)}}}function uw(e,t,n,i){let r=new WeakMap;function a(e){const t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(s){const o=i.render.frame,l=s.geometry,c=t.get(s,l);if(r.get(c)!==o&&(t.update(c),r.set(c,o)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",a)&&s.addEventListener("dispose",a),r.get(s)!==o&&(n.update(s.instanceMatrix,e.ARRAY_BUFFER),null!==s.instanceColor&&n.update(s.instanceColor,e.ARRAY_BUFFER),r.set(s,o))),s.isSkinnedMesh){const e=s.skeleton;r.get(e)!==o&&(e.update(),r.set(e,o))}return c},dispose:function(){r=new WeakMap}}}const hw=new s_,pw=new Fy(1,1),mw=new d_,fw=new u_,gw=new Sy,vw=[],_w=[],bw=new Float32Array(16),yw=new Float32Array(9),xw=new Float32Array(4);function ww(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let a=vw[r];if(void 0===a&&(a=new Float32Array(r),vw[r]=a),0!==t){i.toArray(a,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(a,r)}return a}function Sw(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Tw(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function Ew(e,t){let n=_w[t];void 0===n&&(n=new Int32Array(t),_w[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function Mw(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Cw(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Sw(n,t))return;e.uniform2fv(this.addr,t),Tw(n,t)}}function Aw(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Sw(n,t))return;e.uniform3fv(this.addr,t),Tw(n,t)}}function kw(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Sw(n,t))return;e.uniform4fv(this.addr,t),Tw(n,t)}}function Dw(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Sw(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Tw(n,t)}else{if(Sw(n,i))return;xw.set(i),e.uniformMatrix2fv(this.addr,!1,xw),Tw(n,i)}}function Lw(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Sw(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Tw(n,t)}else{if(Sw(n,i))return;yw.set(i),e.uniformMatrix3fv(this.addr,!1,yw),Tw(n,i)}}function Iw(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Sw(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Tw(n,t)}else{if(Sw(n,i))return;bw.set(i),e.uniformMatrix4fv(this.addr,!1,bw),Tw(n,i)}}function Pw(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Rw(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Sw(n,t))return;e.uniform2iv(this.addr,t),Tw(n,t)}}function Ow(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Sw(n,t))return;e.uniform3iv(this.addr,t),Tw(n,t)}}function Nw(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Sw(n,t))return;e.uniform4iv(this.addr,t),Tw(n,t)}}function Bw(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Fw(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Sw(n,t))return;e.uniform2uiv(this.addr,t),Tw(n,t)}}function Uw(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Sw(n,t))return;e.uniform3uiv(this.addr,t),Tw(n,t)}}function zw(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Sw(n,t))return;e.uniform4uiv(this.addr,t),Tw(n,t)}}function Vw(e,t,n){const i=this.cache,r=n.allocateTextureUnit();let a;i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),this.type===e.SAMPLER_2D_SHADOW?(pw.compareFunction=515,a=pw):a=hw,n.setTexture2D(t||a,r)}function Hw(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||fw,r)}function $w(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||gw,r)}function Ww(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||mw,r)}function Gw(e,t){e.uniform1fv(this.addr,t)}function jw(e,t){const n=ww(t,this.size,2);e.uniform2fv(this.addr,n)}function qw(e,t){const n=ww(t,this.size,3);e.uniform3fv(this.addr,n)}function Yw(e,t){const n=ww(t,this.size,4);e.uniform4fv(this.addr,n)}function Xw(e,t){const n=ww(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Kw(e,t){const n=ww(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Zw(e,t){const n=ww(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Jw(e,t){e.uniform1iv(this.addr,t)}function Qw(e,t){e.uniform2iv(this.addr,t)}function eS(e,t){e.uniform3iv(this.addr,t)}function tS(e,t){e.uniform4iv(this.addr,t)}function nS(e,t){e.uniform1uiv(this.addr,t)}function iS(e,t){e.uniform2uiv(this.addr,t)}function rS(e,t){e.uniform3uiv(this.addr,t)}function aS(e,t){e.uniform4uiv(this.addr,t)}function sS(e,t,n){const i=this.cache,r=t.length,a=Ew(n,r);Sw(i,a)||(e.uniform1iv(this.addr,a),Tw(i,a));for(let e=0;e!==r;++e)n.setTexture2D(t[e]||hw,a[e])}function oS(e,t,n){const i=this.cache,r=t.length,a=Ew(n,r);Sw(i,a)||(e.uniform1iv(this.addr,a),Tw(i,a));for(let e=0;e!==r;++e)n.setTexture3D(t[e]||fw,a[e])}function lS(e,t,n){const i=this.cache,r=t.length,a=Ew(n,r);Sw(i,a)||(e.uniform1iv(this.addr,a),Tw(i,a));for(let e=0;e!==r;++e)n.setTextureCube(t[e]||gw,a[e])}function cS(e,t,n){const i=this.cache,r=t.length,a=Ew(n,r);Sw(i,a)||(e.uniform1iv(this.addr,a),Tw(i,a));for(let e=0;e!==r;++e)n.setTexture2DArray(t[e]||mw,a[e])}class dS{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return Mw;case 35664:return Cw;case 35665:return Aw;case 35666:return kw;case 35674:return Dw;case 35675:return Lw;case 35676:return Iw;case 5124:case 35670:return Pw;case 35667:case 35671:return Rw;case 35668:case 35672:return Ow;case 35669:case 35673:return Nw;case 5125:return Bw;case 36294:return Fw;case 36295:return Uw;case 36296:return zw;case 35678:case 36198:case 36298:case 36306:case 35682:return Vw;case 35679:case 36299:case 36307:return Hw;case 35680:case 36300:case 36308:case 36293:return $w;case 36289:case 36303:case 36311:case 36292:return Ww}}(t.type)}}class uS{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Gw;case 35664:return jw;case 35665:return qw;case 35666:return Yw;case 35674:return Xw;case 35675:return Kw;case 35676:return Zw;case 5124:case 35670:return Jw;case 35667:case 35671:return Qw;case 35668:case 35672:return eS;case 35669:case 35673:return tS;case 5125:return nS;case 36294:return iS;case 36295:return rS;case 36296:return aS;case 35678:case 36198:case 36298:case 36306:case 35682:return sS;case 35679:case 36299:case 36307:return oS;case 35680:case 36300:case 36308:case 36293:return lS;case 36289:case 36303:case 36311:case 36292:return cS}}(t.type)}}class hS{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let r=0,a=i.length;r!==a;++r){const a=i[r];a.setValue(e,t[a.id],n)}}}const pS=/(\w+)(\])?(\[|\.)?/g;function mS(e,t){e.seq.push(t),e.map[t.id]=t}function fS(e,t,n){const i=e.name,r=i.length;for(pS.lastIndex=0;;){const a=pS.exec(i),s=pS.lastIndex;let o=a[1];const l="]"===a[2],c=a[3];if(l&&(o|=0),void 0===c||"["===c&&s+2===r){mS(n,void 0===c?new dS(o,e,t):new uS(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new hS(o),mS(n,e)),n=e}}}class gS{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);fS(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,a=t.length;r!==a;++r){const a=t[r],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n}}function vS(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}let _S=0;const bS=new jv;function yS(e,t,n){const i=e.getShaderParameter(t,e.COMPILE_STATUS),r=(e.getShaderInfoLog(t)||"").trim();if(i&&""===r)return"";const a=/ERROR: 0:(\d+)/.exec(r);if(a){const i=parseInt(a[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){const n=e.split("\n"),i=[],r=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let e=r;e<a;e++){const r=e+1;i.push(`${r===t?">":" "} ${r}: ${n[e]}`)}return i.join("\n")}(e.getShaderSource(t),i)}return r}function xS(e,t){const n=function(e){Zv._getMatrix(bS,Zv.workingColorSpace,e);const t=`mat3( ${bS.elements.map((e=>e.toFixed(4)))} )`;switch(Zv.getTransfer(e)){case fv:return[t,"LinearTransferOETF"];case gv:return[t,"sRGBTransferOETF"];default:return Av("WebGLProgram: Unsupported color space: ",e),[t,"LinearTransferOETF"]}}(t);return[`vec4 ${e}( vec4 value ) {`,`\treturn ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join("\n")}function wS(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Cineon";break;case 4:n="ACESFilmic";break;case 6:n="AgX";break;case 7:n="Neutral";break;case 5:n="Custom";break;default:Av("WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const SS=new $v;function TS(){Zv.getLuminanceCoefficients(SS);return["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${SS.x.toFixed(4)}, ${SS.y.toFixed(4)}, ${SS.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")}function ES(e){return""!==e}function MS(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function CS(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const AS=/^[ \t]*#include +<([\w\d./]+)>/gm;function kS(e){return e.replace(AS,LS)}const DS=new Map;function LS(e,t){let n=Ix[t];if(void 0===n){const e=DS.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=Ix[e],Av('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return kS(n)}const IS=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function PS(e){return e.replace(IS,RS)}function RS(e,t,n,i){let r="";for(let e=parseInt(t);e<parseInt(n);e++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return r}function OS(e){let t=`precision ${e.precision} float;\n\tprecision ${e.precision} int;\n\tprecision ${e.precision} sampler2D;\n\tprecision ${e.precision} samplerCube;\n\tprecision ${e.precision} sampler3D;\n\tprecision ${e.precision} sampler2DArray;\n\tprecision ${e.precision} sampler2DShadow;\n\tprecision ${e.precision} samplerCubeShadow;\n\tprecision ${e.precision} sampler2DArrayShadow;\n\tprecision ${e.precision} isampler2D;\n\tprecision ${e.precision} isampler3D;\n\tprecision ${e.precision} isamplerCube;\n\tprecision ${e.precision} isampler2DArray;\n\tprecision ${e.precision} usampler2D;\n\tprecision ${e.precision} usampler3D;\n\tprecision ${e.precision} usamplerCube;\n\tprecision ${e.precision} usampler2DArray;\n\t`;return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function NS(e,t,n,i){const r=e.getContext(),a=n.defines;let s=n.vertexShader,o=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Yf:case Xf:t="ENVMAP_TYPE_CUBE";break;case Jf:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),d=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===Xf&&(t="ENVMAP_MODE_REFRACTION");return t}(n),u=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),h=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),p=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(ES).join("\n")}(n),m=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(a),f=r.createProgram();let g,v,_=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(ES).join("\n"),g.length>0&&(g+="\n"),v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(ES).join("\n"),v.length>0&&(v+="\n")):(g=[OS(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ES).join("\n"),v=[OS(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+d:"",n.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?Ix.tonemapping_pars_fragment:"",0!==n.toneMapping?wS("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Ix.colorspace_pars_fragment,xS("linearToOutputTexel",n.outputColorSpace),TS(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(ES).join("\n")),s=kS(s),s=MS(s,n),s=CS(s,n),o=kS(o),o=MS(o,n),o=CS(o,n),s=PS(s),o=PS(o),!0!==n.isRawShaderMaterial&&(_="#version 300 es\n",g=[p,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===bv?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===bv?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const b=_+g+s,y=_+v+o,x=vS(r,r.VERTEX_SHADER,b),w=vS(r,r.FRAGMENT_SHADER,y);function S(t){if(e.debug.checkShaderErrors){const n=r.getProgramInfoLog(f)||"",i=r.getShaderInfoLog(x)||"",a=r.getShaderInfoLog(w)||"",s=n.trim(),o=i.trim(),l=a.trim();let c=!0,d=!0;if(!1===r.getProgramParameter(f,r.LINK_STATUS))if(c=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(r,f,x,w);else{const e=yS(r,x,"vertex"),n=yS(r,w,"fragment");kv("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(f,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+s+"\n"+e+"\n"+n)}else""!==s?Av("WebGLProgram: Program Info Log:",s):""!==o&&""!==l||(d=!1);d&&(t.diagnostics={runnable:c,programLog:s,vertexShader:{log:o,prefix:g},fragmentShader:{log:l,prefix:v}})}r.deleteShader(x),r.deleteShader(w),T=new gS(r,f),E=function(e,t){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r),a=i.name;let s=1;i.type===e.FLOAT_MAT2&&(s=2),i.type===e.FLOAT_MAT3&&(s=3),i.type===e.FLOAT_MAT4&&(s=4),n[a]={type:i.type,location:e.getAttribLocation(t,a),locationSize:s}}return n}(r,f)}let T,E;r.attachShader(f,x),r.attachShader(f,w),void 0!==n.index0AttributeName?r.bindAttribLocation(f,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(f,0,"position"),r.linkProgram(f),this.getUniforms=function(){return void 0===T&&S(this),T},this.getAttributes=function(){return void 0===E&&S(this),E};let M=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===M&&(M=r.getProgramParameter(f,37297)),M},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(f),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=_S++,this.cacheKey=t,this.usedTimes=1,this.program=f,this.vertexShader=x,this.fragmentShader=w,this}let BS=0;class FS{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(i)&&(a.add(i),i.usedTimes++),!1===a.has(r)&&(a.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new US(e),t.set(e,n)),n}}class US{constructor(e){this.id=BS++,this.code=e,this.usedTimes=0}}function zS(e,t,n,i,r,a,s){const o=new K_,l=new FS,c=new Set,d=[],u=r.logarithmicDepthBuffer,h=r.vertexTextures;let p=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function f(e){return c.add(e),0===e?"uv":`uv${e}`}return{getParameters:function(a,o,d,g,v){const _=g.fog,b=v.geometry,y=a.isMeshStandardMaterial?g.environment:null,x=(a.isMeshStandardMaterial?n:t).get(a.envMap||y),w=x&&x.mapping===Jf?x.image.height:null,S=m[a.type];null!==a.precision&&(p=r.getMaxPrecision(a.precision),p!==a.precision&&Av("WebGLProgram.getParameters:",a.precision,"not supported, using",p,"instead."));const T=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,E=void 0!==T?T.length:0;let M,C,A,k,D=0;if(void 0!==b.morphAttributes.position&&(D=1),void 0!==b.morphAttributes.normal&&(D=2),void 0!==b.morphAttributes.color&&(D=3),S){const e=Rx[S];M=e.vertexShader,C=e.fragmentShader}else M=a.vertexShader,C=a.fragmentShader,l.update(a),A=l.getVertexShaderID(a),k=l.getFragmentShaderID(a);const L=e.getRenderTarget(),I=e.state.buffers.depth.getReversed(),P=!0===v.isInstancedMesh,R=!0===v.isBatchedMesh,O=!!a.map,N=!!a.matcap,B=!!x,F=!!a.aoMap,U=!!a.lightMap,z=!!a.bumpMap,V=!!a.normalMap,H=!!a.displacementMap,$=!!a.emissiveMap,W=!!a.metalnessMap,G=!!a.roughnessMap,j=a.anisotropy>0,q=a.clearcoat>0,Y=a.dispersion>0,X=a.iridescence>0,K=a.sheen>0,Z=a.transmission>0,J=j&&!!a.anisotropyMap,Q=q&&!!a.clearcoatMap,ee=q&&!!a.clearcoatNormalMap,te=q&&!!a.clearcoatRoughnessMap,ne=X&&!!a.iridescenceMap,ie=X&&!!a.iridescenceThicknessMap,re=K&&!!a.sheenColorMap,ae=K&&!!a.sheenRoughnessMap,se=!!a.specularMap,oe=!!a.specularColorMap,le=!!a.specularIntensityMap,ce=Z&&!!a.transmissionMap,de=Z&&!!a.thicknessMap,ue=!!a.gradientMap,he=!!a.alphaMap,pe=a.alphaTest>0,me=!!a.alphaHash,fe=!!a.extensions;let ge=0;a.toneMapped&&(null!==L&&!0!==L.isXRRenderTarget||(ge=e.toneMapping));const ve={shaderID:S,shaderType:a.type,shaderName:a.name,vertexShader:M,fragmentShader:C,defines:a.defines,customVertexShaderID:A,customFragmentShaderID:k,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:p,batching:R,batchingColor:R&&null!==v._colorsTexture,instancing:P,instancingColor:P&&null!==v.instanceColor,instancingMorph:P&&null!==v.morphTexture,supportsVertexTextures:h,outputColorSpace:null===L?e.outputColorSpace:!0===L.isXRRenderTarget?L.texture.colorSpace:mv,alphaToCoverage:!!a.alphaToCoverage,map:O,matcap:N,envMap:B,envMapMode:B&&x.mapping,envMapCubeUVHeight:w,aoMap:F,lightMap:U,bumpMap:z,normalMap:V,displacementMap:h&&H,emissiveMap:$,normalMapObjectSpace:V&&1===a.normalMapType,normalMapTangentSpace:V&&0===a.normalMapType,metalnessMap:W,roughnessMap:G,anisotropy:j,anisotropyMap:J,clearcoat:q,clearcoatMap:Q,clearcoatNormalMap:ee,clearcoatRoughnessMap:te,dispersion:Y,iridescence:X,iridescenceMap:ne,iridescenceThicknessMap:ie,sheen:K,sheenColorMap:re,sheenRoughnessMap:ae,specularMap:se,specularColorMap:oe,specularIntensityMap:le,transmission:Z,transmissionMap:ce,thicknessMap:de,gradientMap:ue,opaque:!1===a.transparent&&1===a.blending&&!1===a.alphaToCoverage,alphaMap:he,alphaTest:pe,alphaHash:me,combine:a.combine,mapUv:O&&f(a.map.channel),aoMapUv:F&&f(a.aoMap.channel),lightMapUv:U&&f(a.lightMap.channel),bumpMapUv:z&&f(a.bumpMap.channel),normalMapUv:V&&f(a.normalMap.channel),displacementMapUv:H&&f(a.displacementMap.channel),emissiveMapUv:$&&f(a.emissiveMap.channel),metalnessMapUv:W&&f(a.metalnessMap.channel),roughnessMapUv:G&&f(a.roughnessMap.channel),anisotropyMapUv:J&&f(a.anisotropyMap.channel),clearcoatMapUv:Q&&f(a.clearcoatMap.channel),clearcoatNormalMapUv:ee&&f(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:te&&f(a.clearcoatRoughnessMap.channel),iridescenceMapUv:ne&&f(a.iridescenceMap.channel),iridescenceThicknessMapUv:ie&&f(a.iridescenceThicknessMap.channel),sheenColorMapUv:re&&f(a.sheenColorMap.channel),sheenRoughnessMapUv:ae&&f(a.sheenRoughnessMap.channel),specularMapUv:se&&f(a.specularMap.channel),specularColorMapUv:oe&&f(a.specularColorMap.channel),specularIntensityMapUv:le&&f(a.specularIntensityMap.channel),transmissionMapUv:ce&&f(a.transmissionMap.channel),thicknessMapUv:de&&f(a.thicknessMap.channel),alphaMapUv:he&&f(a.alphaMap.channel),vertexTangents:!!b.attributes.tangent&&(V||j),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!b.attributes.color&&4===b.attributes.color.itemSize,pointsUvs:!0===v.isPoints&&!!b.attributes.uv&&(O||he),fog:!!_,useFog:!0===a.fog,fogExp2:!!_&&_.isFogExp2,flatShading:!0===a.flatShading&&!1===a.wireframe,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:u,reversedDepthBuffer:I,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==b.morphAttributes.position,morphNormals:void 0!==b.morphAttributes.normal,morphColors:void 0!==b.morphAttributes.color,morphTargetsCount:E,morphTextureStride:D,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numLightProbes:o.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&d.length>0,shadowMapType:e.shadowMap.type,toneMapping:ge,decodeVideoTexture:O&&!0===a.map.isVideoTexture&&Zv.getTransfer(a.map.colorSpace)===gv,decodeVideoTextureEmissive:$&&!0===a.emissiveMap.isVideoTexture&&Zv.getTransfer(a.emissiveMap.colorSpace)===gv,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:1===a.side,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionClipCullDistance:fe&&!0===a.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(fe&&!0===a.extensions.multiDraw||R)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:a.customProgramCacheKey()};return ve.vertexUv1s=c.has(1),ve.vertexUv2s=c.has(2),ve.vertexUv3s=c.has(3),c.clear(),ve},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){o.disableAll(),t.supportsVertexTextures&&o.enable(0);t.instancing&&o.enable(1);t.instancingColor&&o.enable(2);t.instancingMorph&&o.enable(3);t.matcap&&o.enable(4);t.envMap&&o.enable(5);t.normalMapObjectSpace&&o.enable(6);t.normalMapTangentSpace&&o.enable(7);t.clearcoat&&o.enable(8);t.iridescence&&o.enable(9);t.alphaTest&&o.enable(10);t.vertexColors&&o.enable(11);t.vertexAlphas&&o.enable(12);t.vertexUv1s&&o.enable(13);t.vertexUv2s&&o.enable(14);t.vertexUv3s&&o.enable(15);t.vertexTangents&&o.enable(16);t.anisotropy&&o.enable(17);t.alphaHash&&o.enable(18);t.batching&&o.enable(19);t.dispersion&&o.enable(20);t.batchingColor&&o.enable(21);t.gradientMap&&o.enable(22);e.push(o.mask),o.disableAll(),t.fog&&o.enable(0);t.useFog&&o.enable(1);t.flatShading&&o.enable(2);t.logarithmicDepthBuffer&&o.enable(3);t.reversedDepthBuffer&&o.enable(4);t.skinning&&o.enable(5);t.morphTargets&&o.enable(6);t.morphNormals&&o.enable(7);t.morphColors&&o.enable(8);t.premultipliedAlpha&&o.enable(9);t.shadowMapEnabled&&o.enable(10);t.doubleSided&&o.enable(11);t.flipSided&&o.enable(12);t.useDepthPacking&&o.enable(13);t.dithering&&o.enable(14);t.transmission&&o.enable(15);t.sheen&&o.enable(16);t.opaque&&o.enable(17);t.pointsUvs&&o.enable(18);t.decodeVideoTexture&&o.enable(19);t.decodeVideoTextureEmissive&&o.enable(20);t.alphaToCoverage&&o.enable(21);e.push(o.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=m[e.type];let n;if(t){const e=Rx[t];n=my.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,t=d.length;e<t;e++){const t=d[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new NS(e,n,t,a),d.push(i)),i},releaseProgram:function(e){if(0==--e.usedTimes){const t=d.indexOf(e);d[t]=d[d.length-1],d.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:d,dispose:function(){l.dispose()}}}function VS(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function HS(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function $S(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function WS(){const e=[];let t=0;const n=[],i=[],r=[];function a(n,i,r,a,s,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:a,renderOrder:n.renderOrder,z:s,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=s,l.group=o),t++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){t=0,n.length=0,i.length=0,r.length=0},push:function(e,t,s,o,l,c){const d=a(e,t,s,o,l,c);s.transmission>0?i.push(d):!0===s.transparent?r.push(d):n.push(d)},unshift:function(e,t,s,o,l,c){const d=a(e,t,s,o,l,c);s.transmission>0?i.unshift(d):!0===s.transparent?r.unshift(d):n.unshift(d)},finish:function(){for(let n=t,i=e.length;n<i;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||HS),i.length>1&&i.sort(t||$S),r.length>1&&r.sort(t||$S)}}}function GS(){let e=new WeakMap;return{get:function(t,n){const i=e.get(t);let r;return void 0===i?(r=new WS,e.set(t,[r])):n>=i.length?(r=new WS,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function jS(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new $v,color:new Lb};break;case"SpotLight":n={position:new $v,direction:new $v,color:new Lb,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new $v,color:new Lb,distance:0,decay:0};break;case"HemisphereLight":n={direction:new $v,skyColor:new Lb,groundColor:new Lb};break;case"RectAreaLight":n={color:new Lb,position:new $v,halfWidth:new $v,halfHeight:new $v}}return e[t.id]=n,n}}}let qS=0;function YS(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function XS(e){const t=new jS,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vv};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vv,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let e=0;e<9;e++)i.probe.push(new $v);const r=new $v,a=new U_,s=new U_;return{setup:function(r){let a=0,s=0,o=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let l=0,c=0,d=0,u=0,h=0,p=0,m=0,f=0,g=0,v=0,_=0;r.sort(YS);for(let e=0,b=r.length;e<b;e++){const b=r[e],y=b.color,x=b.intensity,w=b.distance,S=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)a+=y.r*x,s+=y.g*x,o+=y.b*x;else if(b.isLightProbe){for(let e=0;e<9;e++)i.probe[e].addScaledVector(b.sh.coefficients[e],x);_++}else if(b.isDirectionalLight){const e=t.get(b);if(e.color.copy(b.color).multiplyScalar(b.intensity),b.castShadow){const e=b.shadow,t=n.get(b);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,i.directionalShadow[l]=t,i.directionalShadowMap[l]=S,i.directionalShadowMatrix[l]=b.shadow.matrix,p++}i.directional[l]=e,l++}else if(b.isSpotLight){const e=t.get(b);e.position.setFromMatrixPosition(b.matrixWorld),e.color.copy(y).multiplyScalar(x),e.distance=w,e.coneCos=Math.cos(b.angle),e.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),e.decay=b.decay,i.spot[d]=e;const r=b.shadow;if(b.map&&(i.spotLightMap[g]=b.map,g++,r.updateMatrices(b),b.castShadow&&v++),i.spotLightMatrix[d]=r.matrix,b.castShadow){const e=n.get(b);e.shadowIntensity=r.intensity,e.shadowBias=r.bias,e.shadowNormalBias=r.normalBias,e.shadowRadius=r.radius,e.shadowMapSize=r.mapSize,i.spotShadow[d]=e,i.spotShadowMap[d]=S,f++}d++}else if(b.isRectAreaLight){const e=t.get(b);e.color.copy(y).multiplyScalar(x),e.halfWidth.set(.5*b.width,0,0),e.halfHeight.set(0,.5*b.height,0),i.rectArea[u]=e,u++}else if(b.isPointLight){const e=t.get(b);if(e.color.copy(b.color).multiplyScalar(b.intensity),e.distance=b.distance,e.decay=b.decay,b.castShadow){const e=b.shadow,t=n.get(b);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,i.pointShadow[c]=t,i.pointShadowMap[c]=S,i.pointShadowMatrix[c]=b.shadow.matrix,m++}i.point[c]=e,c++}else if(b.isHemisphereLight){const e=t.get(b);e.skyColor.copy(b.color).multiplyScalar(x),e.groundColor.copy(b.groundColor).multiplyScalar(x),i.hemi[h]=e,h++}}u>0&&(!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Px.LTC_FLOAT_1,i.rectAreaLTC2=Px.LTC_FLOAT_2):(i.rectAreaLTC1=Px.LTC_HALF_1,i.rectAreaLTC2=Px.LTC_HALF_2)),i.ambient[0]=a,i.ambient[1]=s,i.ambient[2]=o;const b=i.hash;b.directionalLength===l&&b.pointLength===c&&b.spotLength===d&&b.rectAreaLength===u&&b.hemiLength===h&&b.numDirectionalShadows===p&&b.numPointShadows===m&&b.numSpotShadows===f&&b.numSpotMaps===g&&b.numLightProbes===_||(i.directional.length=l,i.spot.length=d,i.rectArea.length=u,i.point.length=c,i.hemi.length=h,i.directionalShadow.length=p,i.directionalShadowMap.length=p,i.pointShadow.length=m,i.pointShadowMap.length=m,i.spotShadow.length=f,i.spotShadowMap.length=f,i.directionalShadowMatrix.length=p,i.pointShadowMatrix.length=m,i.spotLightMatrix.length=f+g-v,i.spotLightMap.length=g,i.numSpotLightShadowsWithMaps=v,i.numLightProbes=_,b.directionalLength=l,b.pointLength=c,b.spotLength=d,b.rectAreaLength=u,b.hemiLength=h,b.numDirectionalShadows=p,b.numPointShadows=m,b.numSpotShadows=f,b.numSpotMaps=g,b.numLightProbes=_,i.version=qS++)},setupView:function(e,t){let n=0,o=0,l=0,c=0,d=0;const u=t.matrixWorldInverse;for(let t=0,h=e.length;t<h;t++){const h=e[t];if(h.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(h.matrixWorld),r.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(r),e.direction.transformDirection(u),n++}else if(h.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(u),e.direction.setFromMatrixPosition(h.matrixWorld),r.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(r),e.direction.transformDirection(u),l++}else if(h.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(u),s.identity(),a.copy(h.matrixWorld),a.premultiply(u),s.extractRotation(a),e.halfWidth.set(.5*h.width,0,0),e.halfHeight.set(0,.5*h.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),c++}else if(h.isPointLight){const e=i.point[o];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(u),o++}else if(h.isHemisphereLight){const e=i.hemi[d];e.direction.setFromMatrixPosition(h.matrixWorld),e.direction.transformDirection(u),d++}}},state:i}}function KS(e){const t=new XS(e),n=[],i=[];const r={lightsArray:n,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){r.camera=e,n.length=0,i.length=0},state:r,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){i.push(e)}}}function ZS(e){let t=new WeakMap;return{get:function(n,i=0){const r=t.get(n);let a;return void 0===r?(a=new KS(e),t.set(n,[a])):i>=r.length?(a=new KS(e),r.push(a)):a=r[i],a},dispose:function(){t=new WeakMap}}}function JS(e,t,n){let i=new By;const r=new Vv,a=new Vv,s=new o_,o=new Hy({depthPacking:3201}),l=new $y,c={},d=n.maxTextureSize,u={0:1,1:0,2:2},h=new fy({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vv},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const m=new Kb;m.setAttribute("position",new Ub(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const f=new ly(m,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let v=this.type;function _(n,i){const a=t.update(f);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new c_(r.x,r.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,a,h,f,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,a,p,f,null)}function b(t,n,i,r){let a=null;const s=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)a=s;else if(a=!0===i.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0||!0===n.alphaToCoverage){const e=a.uuid,t=n.uuid;let i=c[e];void 0===i&&(i={},c[e]=i);let r=i[t];void 0===r&&(r=a.clone(),i[t]=r,n.addEventListener("dispose",x)),a=r}if(a.visible=n.visible,a.wireframe=n.wireframe,a.side=3===r?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:u[n.side],a.alphaMap=n.alphaMap,a.alphaTest=!0===n.alphaToCoverage?.5:n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===i.isPointLight&&!0===a.isMeshDistanceMaterial){e.properties.get(a).light=i}return a}function y(n,r,a,s,o){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===o)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const i=t.update(n),l=n.material;if(Array.isArray(l)){const t=i.groups;for(let c=0,d=t.length;c<d;c++){const d=t[c],u=l[d.materialIndex];if(u&&u.visible){const t=b(n,u,s,o);n.onBeforeShadow(e,n,r,a,i,t,d),e.renderBufferDirect(a,null,i,t,n,d),n.onAfterShadow(e,n,r,a,i,t,d)}}}else if(l.visible){const t=b(n,l,s,o);n.onBeforeShadow(e,n,r,a,i,t,null),e.renderBufferDirect(a,null,i,t,n,null),n.onAfterShadow(e,n,r,a,i,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)y(l[e],r,a,s,o)}function x(e){e.target.removeEventListener("dispose",x);for(const t in c){const n=c[t],i=e.target.uuid;if(i in n){n[i].dispose(),delete n[i]}}}this.render=function(t,n,o){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),h=e.state;h.setBlending(0),!0===h.buffers.depth.getReversed()?h.buffers.color.setClear(0,0,0,0):h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);const p=3!==v&&3===this.type,m=3===v&&3!==this.type;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=c.shadow;if(void 0===u){Av("WebGLShadowMap:",c,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;r.copy(u.mapSize);const f=u.getFrameExtents();if(r.multiply(f),a.copy(u.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(a.x=Math.floor(d/f.x),r.x=a.x*f.x,u.mapSize.x=a.x),r.y>d&&(a.y=Math.floor(d/f.y),r.y=a.y*f.y,u.mapSize.y=a.y)),null===u.map||!0===p||!0===m){const e=3!==this.type?{minFilter:ng,magFilter:ng}:{};null!==u.map&&u.map.dispose(),u.map=new c_(r.x,r.y,e),u.map.texture.name=c.name+".shadowMap",u.camera.updateProjectionMatrix()}e.setRenderTarget(u.map),e.clear();const g=u.getViewportCount();for(let e=0;e<g;e++){const t=u.getViewport(e);s.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),h.viewport(s),u.updateMatrices(c,e),i=u.getFrustum(),y(n,o,u.camera,c,this.type)}!0!==u.isPointLightShadow&&3===this.type&&_(u,o),u.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(l,c,u)}}const QS={0:1,2:6,4:7,3:5,1:0,6:2,7:4,5:3};function eT(e,t){const n=new function(){let t=!1;const n=new o_;let i=null;const r=new o_(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,s,o){!0===o&&(t*=s,i*=s,a*=s),n.set(t,i,a,s),!1===r.equals(n)&&(e.clearColor(t,i,a,s),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},i=new function(){let n=!1,i=!1,r=null,a=null,s=null;return{setReversed:function(e){if(i!==e){const n=t.get("EXT_clip_control");e?n.clipControlEXT(n.LOWER_LEFT_EXT,n.ZERO_TO_ONE_EXT):n.clipControlEXT(n.LOWER_LEFT_EXT,n.NEGATIVE_ONE_TO_ONE_EXT),i=e;const r=s;s=null,this.setClear(r)}},getReversed:function(){return i},setTest:function(t){t?z(e.DEPTH_TEST):V(e.DEPTH_TEST)},setMask:function(t){r===t||n||(e.depthMask(t),r=t)},setFunc:function(t){if(i&&(t=QS[t]),a!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}a=t}},setLocked:function(e){n=e},setClear:function(t){s!==t&&(i&&(t=1-t),e.clearDepth(t),s=t)},reset:function(){n=!1,r=null,a=null,s=null,i=!1}}},r=new function(){let t=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,c=null;return{setTest:function(n){t||(n?z(e.STENCIL_TEST):V(e.STENCIL_TEST))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,s){i===t&&r===n&&a===s||(e.stencilFunc(t,n,s),i=t,r=n,a=s)},setOp:function(t,n,i){s===t&&o===n&&l===i||(e.stencilOp(t,n,i),s=t,o=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,c=null}}},a=new WeakMap,s=new WeakMap;let o={},l={},c=new WeakMap,d=[],u=null,h=!1,p=null,m=null,f=null,g=null,v=null,_=null,b=null,y=new Lb(0,0,0),x=0,w=!1,S=null,T=null,E=null,M=null,C=null;const A=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let k=!1,D=0;const L=e.getParameter(e.VERSION);-1!==L.indexOf("WebGL")?(D=parseFloat(/^WebGL (\d)/.exec(L)[1]),k=D>=1):-1!==L.indexOf("OpenGL ES")&&(D=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),k=D>=2);let I=null,P={};const R=e.getParameter(e.SCISSOR_BOX),O=e.getParameter(e.VIEWPORT),N=(new o_).fromArray(R),B=(new o_).fromArray(O);function F(t,n,i,r){const a=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let s=0;s<i;s++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,r,0,e.RGBA,e.UNSIGNED_BYTE,a):e.texImage2D(n+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a);return s}const U={};function z(t){!0!==o[t]&&(e.enable(t),o[t]=!0)}function V(t){!1!==o[t]&&(e.disable(t),o[t]=!1)}U[e.TEXTURE_2D]=F(e.TEXTURE_2D,e.TEXTURE_2D,1),U[e.TEXTURE_CUBE_MAP]=F(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),U[e.TEXTURE_2D_ARRAY]=F(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),U[e.TEXTURE_3D]=F(e.TEXTURE_3D,e.TEXTURE_3D,1,1),n.setClear(0,0,0,1),i.setClear(1),r.setClear(0),z(e.DEPTH_TEST),i.setFunc(3),G(!1),j(1),z(e.CULL_FACE),W(0);const H={[qf]:e.FUNC_ADD,101:e.FUNC_SUBTRACT,102:e.FUNC_REVERSE_SUBTRACT};H[103]=e.MIN,H[104]=e.MAX;const $={200:e.ZERO,201:e.ONE,202:e.SRC_COLOR,204:e.SRC_ALPHA,210:e.SRC_ALPHA_SATURATE,208:e.DST_COLOR,206:e.DST_ALPHA,203:e.ONE_MINUS_SRC_COLOR,205:e.ONE_MINUS_SRC_ALPHA,209:e.ONE_MINUS_DST_COLOR,207:e.ONE_MINUS_DST_ALPHA,211:e.CONSTANT_COLOR,212:e.ONE_MINUS_CONSTANT_COLOR,213:e.CONSTANT_ALPHA,214:e.ONE_MINUS_CONSTANT_ALPHA};function W(t,n,i,r,a,s,o,l,c,d){if(0!==t){if(!1===h&&(z(e.BLEND),h=!0),5===t)a=a||n,s=s||i,o=o||r,n===m&&a===v||(e.blendEquationSeparate(H[n],H[a]),m=n,v=a),i===f&&r===g&&s===_&&o===b||(e.blendFuncSeparate($[i],$[r],$[s],$[o]),f=i,g=r,_=s,b=o),!1!==l.equals(y)&&c===x||(e.blendColor(l.r,l.g,l.b,c),y.copy(l),x=c),p=t,w=!1;else if(t!==p||d!==w){if(m===qf&&v===qf||(e.blendEquation(e.FUNC_ADD),m=qf,v=qf),d)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ZERO,e.ONE);break;default:kv("WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE,e.ONE,e.ONE);break;case 3:kv("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case 4:kv("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:kv("WebGLState: Invalid blending: ",t)}f=null,g=null,_=null,b=null,y.set(0,0,0),x=0,p=t,w=d}}else!0===h&&(V(e.BLEND),h=!1)}function G(t){S!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),S=t)}function j(t){0!==t?(z(e.CULL_FACE),t!==T&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):V(e.CULL_FACE),T=t}function q(t,n,i){t?(z(e.POLYGON_OFFSET_FILL),M===n&&C===i||(e.polygonOffset(n,i),M=n,C=i)):V(e.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:i,stencil:r},enable:z,disable:V,bindFramebuffer:function(t,n){return l[t]!==n&&(e.bindFramebuffer(t,n),l[t]=n,t===e.DRAW_FRAMEBUFFER&&(l[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(l[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){let i=d,r=!1;if(t){i=c.get(n),void 0===i&&(i=[],c.set(n,i));const a=t.textures;if(i.length!==a.length||i[0]!==e.COLOR_ATTACHMENT0){for(let t=0,n=a.length;t<n;t++)i[t]=e.COLOR_ATTACHMENT0+t;i.length=a.length,r=!0}}else i[0]!==e.BACK&&(i[0]=e.BACK,r=!0);r&&e.drawBuffers(i)},useProgram:function(t){return u!==t&&(e.useProgram(t),u=t,!0)},setBlending:W,setMaterial:function(t,a){2===t.side?V(e.CULL_FACE):z(e.CULL_FACE);let s=1===t.side;a&&(s=!s),G(s),1===t.blending&&!1===t.transparent?W(0):W(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),i.setFunc(t.depthFunc),i.setTest(t.depthTest),i.setMask(t.depthWrite),n.setMask(t.colorWrite);const o=t.stencilWrite;r.setTest(o),o&&(r.setMask(t.stencilWriteMask),r.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),r.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),q(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?z(e.SAMPLE_ALPHA_TO_COVERAGE):V(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:G,setCullFace:j,setLineWidth:function(t){t!==E&&(k&&e.lineWidth(t),E=t)},setPolygonOffset:q,setScissorTest:function(t){t?z(e.SCISSOR_TEST):V(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+A-1),I!==t&&(e.activeTexture(t),I=t)},bindTexture:function(t,n,i){void 0===i&&(i=null===I?e.TEXTURE0+A-1:I);let r=P[i];void 0===r&&(r={type:void 0,texture:void 0},P[i]=r),r.type===t&&r.texture===n||(I!==i&&(e.activeTexture(i),I=i),e.bindTexture(t,n||U[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=P[I];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D(...arguments)}catch(e){e("WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D(...arguments)}catch(e){e("WebGLState:",e)}},texImage2D:function(){try{e.texImage2D(...arguments)}catch(e){e("WebGLState:",e)}},texImage3D:function(){try{e.texImage3D(...arguments)}catch(e){e("WebGLState:",e)}},updateUBOMapping:function(t,n){let i=s.get(n);void 0===i&&(i=new WeakMap,s.set(n,i));let r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))},uniformBlockBinding:function(t,n){const i=s.get(n).get(t);a.get(n)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),a.set(n,i))},texStorage2D:function(){try{e.texStorage2D(...arguments)}catch(e){e("WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D(...arguments)}catch(e){e("WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D(...arguments)}catch(e){e("WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D(...arguments)}catch(e){e("WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D(...arguments)}catch(e){e("WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D(...arguments)}catch(e){e("WebGLState:",e)}},scissor:function(t){!1===N.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),N.copy(t))},viewport:function(t){!1===B.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),B.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),i.setReversed(!1),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),o={},I=null,P={},l={},c=new WeakMap,d=[],u=null,h=!1,p=null,m=null,f=null,g=null,v=null,_=null,b=null,y=new Lb(0,0,0),x=0,w=!1,S=null,T=null,E=null,M=null,C=null,N.set(0,0,e.canvas.width,e.canvas.height),B.set(0,0,e.canvas.width,e.canvas.height),n.reset(),i.reset(),r.reset()}}}function tT(e,t,n,i,r,a,s){const o=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),c=new Vv,d=new WeakMap;let u;const h=new WeakMap;let p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function m(e,t){return p?new OffscreenCanvas(e,t):Sv("canvas")}function f(e,t,n){let i=1;const r=$(e);if((r.width>n||r.height>n)&&(i=n/Math.max(r.width,r.height)),i<1){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&e instanceof VideoFrame){const n=Math.floor(i*r.width),a=Math.floor(i*r.height);void 0===u&&(u=m(n,a));const s=t?m(n,a):u;s.width=n,s.height=a;return s.getContext("2d").drawImage(e,0,0,n,a),Av("WebGLRenderer: Texture has been resized from ("+r.width+"x"+r.height+") to ("+n+"x"+a+")."),s}return"data"in e&&Av("WebGLRenderer: Image in DataTexture is too big ("+r.width+"x"+r.height+")."),e}return e}function g(e){return e.generateMipmaps}function v(t){e.generateMipmap(t)}function _(t){return t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function b(n,i,r,a,s=!1){if(null!==n){if(void 0!==e[n])return e[n];Av("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=i;if(i===e.RED&&(r===e.FLOAT&&(o=e.R32F),r===e.HALF_FLOAT&&(o=e.R16F),r===e.UNSIGNED_BYTE&&(o=e.R8)),i===e.RED_INTEGER&&(r===e.UNSIGNED_BYTE&&(o=e.R8UI),r===e.UNSIGNED_SHORT&&(o=e.R16UI),r===e.UNSIGNED_INT&&(o=e.R32UI),r===e.BYTE&&(o=e.R8I),r===e.SHORT&&(o=e.R16I),r===e.INT&&(o=e.R32I)),i===e.RG&&(r===e.FLOAT&&(o=e.RG32F),r===e.HALF_FLOAT&&(o=e.RG16F),r===e.UNSIGNED_BYTE&&(o=e.RG8)),i===e.RG_INTEGER&&(r===e.UNSIGNED_BYTE&&(o=e.RG8UI),r===e.UNSIGNED_SHORT&&(o=e.RG16UI),r===e.UNSIGNED_INT&&(o=e.RG32UI),r===e.BYTE&&(o=e.RG8I),r===e.SHORT&&(o=e.RG16I),r===e.INT&&(o=e.RG32I)),i===e.RGB_INTEGER&&(r===e.UNSIGNED_BYTE&&(o=e.RGB8UI),r===e.UNSIGNED_SHORT&&(o=e.RGB16UI),r===e.UNSIGNED_INT&&(o=e.RGB32UI),r===e.BYTE&&(o=e.RGB8I),r===e.SHORT&&(o=e.RGB16I),r===e.INT&&(o=e.RGB32I)),i===e.RGBA_INTEGER&&(r===e.UNSIGNED_BYTE&&(o=e.RGBA8UI),r===e.UNSIGNED_SHORT&&(o=e.RGBA16UI),r===e.UNSIGNED_INT&&(o=e.RGBA32UI),r===e.BYTE&&(o=e.RGBA8I),r===e.SHORT&&(o=e.RGBA16I),r===e.INT&&(o=e.RGBA32I)),i===e.RGB&&(r===e.UNSIGNED_INT_5_9_9_9_REV&&(o=e.RGB9_E5),r===e.UNSIGNED_INT_10F_11F_11F_REV&&(o=e.R11F_G11F_B10F)),i===e.RGBA){const t=s?fv:Zv.getTransfer(a);r===e.FLOAT&&(o=e.RGBA32F),r===e.HALF_FLOAT&&(o=e.RGBA16F),r===e.UNSIGNED_BYTE&&(o=t===gv?e.SRGB8_ALPHA8:e.RGBA8),r===e.UNSIGNED_SHORT_4_4_4_4&&(o=e.RGBA4),r===e.UNSIGNED_SHORT_5_5_5_1&&(o=e.RGB5_A1)}return o!==e.R16F&&o!==e.R32F&&o!==e.RG16F&&o!==e.RG32F&&o!==e.RGBA16F&&o!==e.RGBA32F||t.get("EXT_color_buffer_float"),o}function y(t,n){let i;return t?null===n||n===hg||n===vg?i=e.DEPTH24_STENCIL8:n===pg?i=e.DEPTH32F_STENCIL8:n===dg&&(i=e.DEPTH24_STENCIL8,Av("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||n===hg||n===vg?i=e.DEPTH_COMPONENT24:n===pg?i=e.DEPTH_COMPONENT32F:n===dg&&(i=e.DEPTH_COMPONENT16),i}function x(e,t){return!0===g(e)||e.isFramebufferTexture&&e.minFilter!==ng&&e.minFilter!==rg?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function w(e){const t=e.target;t.removeEventListener("dispose",w),function(e){const t=i.get(e);if(void 0===t.__webglInit)return;const n=e.source,r=h.get(n);if(r){const i=r[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&T(e),0===Object.keys(r).length&&h.delete(n)}i.remove(e)}(t),t.isVideoTexture&&d.delete(t)}function S(t){const n=t.target;n.removeEventListener("dispose",S),function(t){const n=i.get(t);t.depthTexture&&(t.depthTexture.dispose(),i.remove(t.depthTexture));if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++){if(Array.isArray(n.__webglFramebuffer[t]))for(let i=0;i<n.__webglFramebuffer[t].length;i++)e.deleteFramebuffer(n.__webglFramebuffer[t][i]);else e.deleteFramebuffer(n.__webglFramebuffer[t]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[t])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const r=t.textures;for(let t=0,n=r.length;t<n;t++){const n=i.get(r[t]);n.__webglTexture&&(e.deleteTexture(n.__webglTexture),s.memory.textures--),i.remove(r[t])}i.remove(t)}(n)}function T(t){const n=i.get(t);e.deleteTexture(n.__webglTexture);const r=t.source;delete h.get(r)[n.__cacheKey],s.memory.textures--}let E=0;function M(t,r){const a=i.get(t);if(t.isVideoTexture&&function(e){const t=s.render.frame;d.get(e)!==t&&(d.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&!0!==t.isExternalTexture&&t.version>0&&a.__version!==t.version){const e=t.image;if(null===e)Av("WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void P(a,t,r);Av("WebGLRenderer: Texture marked for update but image is incomplete")}}else t.isExternalTexture&&(a.__webglTexture=t.sourceTexture?t.sourceTexture:null);n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+r)}const C={[Qf]:e.REPEAT,[eg]:e.CLAMP_TO_EDGE,[tg]:e.MIRRORED_REPEAT},A={[ng]:e.NEAREST,1004:e.NEAREST_MIPMAP_NEAREST,[ig]:e.NEAREST_MIPMAP_LINEAR,[rg]:e.LINEAR,[ag]:e.LINEAR_MIPMAP_NEAREST,[sg]:e.LINEAR_MIPMAP_LINEAR},k={512:e.NEVER,519:e.ALWAYS,513:e.LESS,515:e.LEQUAL,514:e.EQUAL,518:e.GEQUAL,516:e.GREATER,517:e.NOTEQUAL};function D(n,a){if(a.type!==pg||!1!==t.has("OES_texture_float_linear")||a.magFilter!==rg&&a.magFilter!==ag&&a.magFilter!==ig&&a.magFilter!==sg&&a.minFilter!==rg&&a.minFilter!==ag&&a.minFilter!==ig&&a.minFilter!==sg||Av("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(n,e.TEXTURE_WRAP_S,C[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,C[a.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,C[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,A[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,A[a.minFilter]),a.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,k[a.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(a.magFilter===ng)return;if(a.minFilter!==ig&&a.minFilter!==sg)return;if(a.type===pg&&!1===t.has("OES_texture_float_linear"))return;if(a.anisotropy>1||i.get(a).__currentAnisotropy){const s=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy}}}function L(t,n){let i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",w));const r=n.source;let a=h.get(r);void 0===a&&(a={},h.set(r,a));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(o!==t.__cacheKey){void 0===a[o]&&(a[o]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,i=!0),a[o].usedTimes++;const r=a[t.__cacheKey];void 0!==r&&(a[t.__cacheKey].usedTimes--,0===r.usedTimes&&T(n)),t.__cacheKey=o,t.__webglTexture=a[o].texture}return i}function I(e,t,n){return Math.floor(Math.floor(e/n)/t)}function P(t,s,o){let l=e.TEXTURE_2D;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),s.isData3DTexture&&(l=e.TEXTURE_3D);const c=L(t,s),d=s.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+o);const u=i.get(d);if(d.version!==u.__version||!0===c){n.activeTexture(e.TEXTURE0+o);const t=Zv.getPrimaries(Zv.workingColorSpace),i=s.colorSpace===hv?null:Zv.getPrimaries(s.colorSpace),h=s.colorSpace===hv||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);let p=f(s.image,!1,r.maxTextureSize);p=H(s,p);const m=a.convert(s.format,s.colorSpace),_=a.convert(s.type);let w,S=b(s.internalFormat,m,_,s.colorSpace,s.isVideoTexture);D(l,s);const T=s.mipmaps,E=!0!==s.isVideoTexture,M=void 0===u.__version||!0===c,C=d.dataReady,A=x(s,p);if(s.isDepthTexture)S=y(s.format===wg,s.type),M&&(E?n.texStorage2D(e.TEXTURE_2D,1,S,p.width,p.height):n.texImage2D(e.TEXTURE_2D,0,S,p.width,p.height,0,m,_,null));else if(s.isDataTexture)if(T.length>0){E&&M&&n.texStorage2D(e.TEXTURE_2D,A,S,T[0].width,T[0].height);for(let t=0,i=T.length;t<i;t++)w=T[t],E?C&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,m,_,w.data):n.texImage2D(e.TEXTURE_2D,t,S,w.width,w.height,0,m,_,w.data);s.generateMipmaps=!1}else E?(M&&n.texStorage2D(e.TEXTURE_2D,A,S,p.width,p.height),C&&function(t,i,r,a){const s=t.updateRanges;if(0===s.length)n.texSubImage2D(e.TEXTURE_2D,0,0,0,i.width,i.height,r,a,i.data);else{s.sort(((e,t)=>e.start-t.start));let o=0;for(let e=1;e<s.length;e++){const t=s[o],n=s[e],r=t.start+t.count,a=I(n.start,i.width,4),l=I(t.start,i.width,4);n.start<=r+1&&a===l&&I(n.start+n.count-1,i.width,4)===a?t.count=Math.max(t.count,n.start+n.count-t.start):(++o,s[o]=n)}s.length=o+1;const l=e.getParameter(e.UNPACK_ROW_LENGTH),c=e.getParameter(e.UNPACK_SKIP_PIXELS),d=e.getParameter(e.UNPACK_SKIP_ROWS);e.pixelStorei(e.UNPACK_ROW_LENGTH,i.width);for(let t=0,o=s.length;t<o;t++){const o=s[t],l=Math.floor(o.start/4),c=Math.ceil(o.count/4),d=l%i.width,u=Math.floor(l/i.width),h=c,p=1;e.pixelStorei(e.UNPACK_SKIP_PIXELS,d),e.pixelStorei(e.UNPACK_SKIP_ROWS,u),n.texSubImage2D(e.TEXTURE_2D,0,d,u,h,p,r,a,i.data)}t.clearUpdateRanges(),e.pixelStorei(e.UNPACK_ROW_LENGTH,l),e.pixelStorei(e.UNPACK_SKIP_PIXELS,c),e.pixelStorei(e.UNPACK_SKIP_ROWS,d)}}(s,p,m,_)):n.texImage2D(e.TEXTURE_2D,0,S,p.width,p.height,0,m,_,p.data);else if(s.isCompressedTexture)if(s.isCompressedArrayTexture){E&&M&&n.texStorage3D(e.TEXTURE_2D_ARRAY,A,S,T[0].width,T[0].height,p.depth);for(let t=0,i=T.length;t<i;t++)if(w=T[t],s.format!==yg)if(null!==m)if(E){if(C)if(s.layerUpdates.size>0){const i=kx(w.width,w.height,s.format,s.type);for(const r of s.layerUpdates){const a=w.data.subarray(r*i/w.data.BYTES_PER_ELEMENT,(r+1)*i/w.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,r,w.width,w.height,1,m,a)}s.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,w.width,w.height,p.depth,m,w.data)}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,S,w.width,w.height,p.depth,0,w.data,0,0);else Av("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else E?C&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,w.width,w.height,p.depth,m,_,w.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,S,w.width,w.height,p.depth,0,m,_,w.data)}else{E&&M&&n.texStorage2D(e.TEXTURE_2D,A,S,T[0].width,T[0].height);for(let t=0,i=T.length;t<i;t++)w=T[t],s.format!==yg?null!==m?E?C&&n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,m,w.data):n.compressedTexImage2D(e.TEXTURE_2D,t,S,w.width,w.height,0,w.data):Av("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?C&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,w.width,w.height,m,_,w.data):n.texImage2D(e.TEXTURE_2D,t,S,w.width,w.height,0,m,_,w.data)}else if(s.isDataArrayTexture)if(E){if(M&&n.texStorage3D(e.TEXTURE_2D_ARRAY,A,S,p.width,p.height,p.depth),C)if(s.layerUpdates.size>0){const t=kx(p.width,p.height,s.format,s.type);for(const i of s.layerUpdates){const r=p.data.subarray(i*t/p.data.BYTES_PER_ELEMENT,(i+1)*t/p.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,i,p.width,p.height,1,m,_,r)}s.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,p.width,p.height,p.depth,m,_,p.data)}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,S,p.width,p.height,p.depth,0,m,_,p.data);else if(s.isData3DTexture)E?(M&&n.texStorage3D(e.TEXTURE_3D,A,S,p.width,p.height,p.depth),C&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,p.width,p.height,p.depth,m,_,p.data)):n.texImage3D(e.TEXTURE_3D,0,S,p.width,p.height,p.depth,0,m,_,p.data);else if(s.isFramebufferTexture){if(M)if(E)n.texStorage2D(e.TEXTURE_2D,A,S,p.width,p.height);else{let t=p.width,i=p.height;for(let r=0;r<A;r++)n.texImage2D(e.TEXTURE_2D,r,S,t,i,0,m,_,null),t>>=1,i>>=1}}else if(T.length>0){if(E&&M){const t=$(T[0]);n.texStorage2D(e.TEXTURE_2D,A,S,t.width,t.height)}for(let t=0,i=T.length;t<i;t++)w=T[t],E?C&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,m,_,w):n.texImage2D(e.TEXTURE_2D,t,S,m,_,w);s.generateMipmaps=!1}else if(E){if(M){const t=$(p);n.texStorage2D(e.TEXTURE_2D,A,S,t.width,t.height)}C&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,m,_,p)}else n.texImage2D(e.TEXTURE_2D,0,S,m,_,p);g(s)&&v(l),u.__version=d.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}function R(t,r,s,l,c,d){const u=a.convert(s.format,s.colorSpace),h=a.convert(s.type),p=b(s.internalFormat,u,h,s.colorSpace),m=i.get(r),f=i.get(s);if(f.__renderTarget=r,!m.__hasExternalTextures){const t=Math.max(1,r.width>>d),i=Math.max(1,r.height>>d);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?n.texImage3D(c,d,p,t,i,r.depth,0,u,h,null):n.texImage2D(c,d,p,t,i,0,u,h,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),V(r)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,l,c,f.__webglTexture,0,z(r)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,l,c,f.__webglTexture,d),n.bindFramebuffer(e.FRAMEBUFFER,null)}function O(t,n,i){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){const r=n.depthTexture,a=r&&r.isDepthTexture?r.type:null,s=y(n.stencilBuffer,a),l=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=z(n);V(n)?o.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,c,s,n.width,n.height):i?e.renderbufferStorageMultisample(e.RENDERBUFFER,c,s,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,s,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,t)}else{const t=n.textures;for(let r=0;r<t.length;r++){const s=t[r],l=a.convert(s.format,s.colorSpace),c=a.convert(s.type),d=b(s.internalFormat,l,c,s.colorSpace),u=z(n);i&&!1===V(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,d,n.width,n.height):V(n)?o.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,d,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,d,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function N(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const a=i.get(r.depthTexture);a.__renderTarget=r,a.__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),M(r.depthTexture,0);const s=a.__webglTexture,l=z(r);if(r.depthTexture.format===xg)V(r)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0);else{if(r.depthTexture.format!==wg)throw new Error("Unknown depthTexture format");V(r)?o.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0)}}function B(t){const r=i.get(t),a=!0===t.isWebGLCubeRenderTarget;if(r.__boundDepthTexture!==t.depthTexture){const e=t.depthTexture;if(r.__depthDisposeCallback&&r.__depthDisposeCallback(),e){const t=()=>{delete r.__boundDepthTexture,delete r.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),r.__depthDisposeCallback=t}r.__boundDepthTexture=e}if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");const e=t.texture.mipmaps;e&&e.length>0?N(r.__webglFramebuffer[0],t):N(r.__webglFramebuffer,t)}else if(a){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)if(n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[i]),void 0===r.__webglDepthbuffer[i])r.__webglDepthbuffer[i]=e.createRenderbuffer(),O(r.__webglDepthbuffer[i],t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,a=r.__webglDepthbuffer[i];e.bindRenderbuffer(e.RENDERBUFFER,a),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,a)}}else{const i=t.texture.mipmaps;if(i&&i.length>0?n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[0]):n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),void 0===r.__webglDepthbuffer)r.__webglDepthbuffer=e.createRenderbuffer(),O(r.__webglDepthbuffer,t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,i=r.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,i),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,i)}}n.bindFramebuffer(e.FRAMEBUFFER,null)}const F=[],U=[];function z(e){return Math.min(r.maxSamples,e.samples)}function V(e){const n=i.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function H(e,t){const n=e.colorSpace,i=e.format,r=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==mv&&n!==hv&&(Zv.getTransfer(n)===gv?i===yg&&r===og||Av("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):kv("WebGLTextures: Unsupported texture color space:",n)),t}function $(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?(c.width=e.naturalWidth||e.width,c.height=e.naturalHeight||e.height):"undefined"!=typeof VideoFrame&&e instanceof VideoFrame?(c.width=e.displayWidth,c.height=e.displayHeight):(c.width=e.width,c.height=e.height),c}this.allocateTextureUnit=function(){const e=E;return e>=r.maxTextures&&Av("WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+r.maxTextures),E+=1,e},this.resetTextureUnits=function(){E=0},this.setTexture2D=M,this.setTexture2DArray=function(t,r){const a=i.get(t);!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version?P(a,t,r):(t.isExternalTexture&&(a.__webglTexture=t.sourceTexture?t.sourceTexture:null),n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+r))},this.setTexture3D=function(t,r){const a=i.get(t);!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version?P(a,t,r):n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+r)},this.setTextureCube=function(t,s){const o=i.get(t);t.version>0&&o.__version!==t.version?function(t,s,o){if(6!==s.image.length)return;const l=L(t,s),c=s.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+o);const d=i.get(c);if(c.version!==d.__version||!0===l){n.activeTexture(e.TEXTURE0+o);const t=Zv.getPrimaries(Zv.workingColorSpace),i=s.colorSpace===hv?null:Zv.getPrimaries(s.colorSpace),u=s.colorSpace===hv||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,u);const h=s.isCompressedTexture||s.image[0].isCompressedTexture,p=s.image[0]&&s.image[0].isDataTexture,m=[];for(let e=0;e<6;e++)m[e]=h||p?p?s.image[e].image:s.image[e]:f(s.image[e],!0,r.maxCubemapSize),m[e]=H(s,m[e]);const _=m[0],y=a.convert(s.format,s.colorSpace),w=a.convert(s.type),S=b(s.internalFormat,y,w,s.colorSpace),T=!0!==s.isVideoTexture,E=void 0===d.__version||!0===l,M=c.dataReady;let C,A=x(s,_);if(D(e.TEXTURE_CUBE_MAP,s),h){T&&E&&n.texStorage2D(e.TEXTURE_CUBE_MAP,A,S,_.width,_.height);for(let t=0;t<6;t++){C=m[t].mipmaps;for(let i=0;i<C.length;i++){const r=C[i];s.format!==yg?null!==y?T?M&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,r.width,r.height,y,r.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,S,r.width,r.height,0,r.data):Av("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):T?M&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,r.width,r.height,y,w,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,S,r.width,r.height,0,y,w,r.data)}}}else{if(C=s.mipmaps,T&&E){C.length>0&&A++;const t=$(m[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,A,S,t.width,t.height)}for(let t=0;t<6;t++)if(p){T?M&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,m[t].width,m[t].height,y,w,m[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,S,m[t].width,m[t].height,0,y,w,m[t].data);for(let i=0;i<C.length;i++){const r=C[i].image[t].image;T?M&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,r.width,r.height,y,w,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,S,r.width,r.height,0,y,w,r.data)}}else{T?M&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,y,w,m[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,S,y,w,m[t]);for(let i=0;i<C.length;i++){const r=C[i];T?M&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,y,w,r.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,S,y,w,r.image[t])}}}g(s)&&v(e.TEXTURE_CUBE_MAP),d.__version=c.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}(o,t,s):n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture,e.TEXTURE0+s)},this.rebindTextures=function(t,n,r){const a=i.get(t);void 0!==n&&R(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==r&&B(t)},this.setupRenderTarget=function(t){const r=t.texture,o=i.get(t),l=i.get(r);t.addEventListener("dispose",S);const c=t.textures,d=!0===t.isWebGLCubeRenderTarget,u=c.length>1;if(u||(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=r.version,s.memory.textures++),d){o.__webglFramebuffer=[];for(let t=0;t<6;t++)if(r.mipmaps&&r.mipmaps.length>0){o.__webglFramebuffer[t]=[];for(let n=0;n<r.mipmaps.length;n++)o.__webglFramebuffer[t][n]=e.createFramebuffer()}else o.__webglFramebuffer[t]=e.createFramebuffer()}else{if(r.mipmaps&&r.mipmaps.length>0){o.__webglFramebuffer=[];for(let t=0;t<r.mipmaps.length;t++)o.__webglFramebuffer[t]=e.createFramebuffer()}else o.__webglFramebuffer=e.createFramebuffer();if(u)for(let t=0,n=c.length;t<n;t++){const n=i.get(c[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),s.memory.textures++)}if(t.samples>0&&!1===V(t)){o.__webglMultisampledFramebuffer=e.createFramebuffer(),o.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,o.__webglMultisampledFramebuffer);for(let n=0;n<c.length;n++){const i=c[n];o.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,o.__webglColorRenderbuffer[n]);const r=a.convert(i.format,i.colorSpace),s=a.convert(i.type),l=b(i.internalFormat,r,s,i.colorSpace,!0===t.isXRRenderTarget),d=z(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,d,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,o.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(o.__webglDepthRenderbuffer=e.createRenderbuffer(),O(o.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(d){n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),D(e.TEXTURE_CUBE_MAP,r);for(let n=0;n<6;n++)if(r.mipmaps&&r.mipmaps.length>0)for(let i=0;i<r.mipmaps.length;i++)R(o.__webglFramebuffer[n][i],t,r,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,i);else R(o.__webglFramebuffer[n],t,r,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);g(r)&&v(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(u){for(let r=0,a=c.length;r<a;r++){const a=c[r],s=i.get(a);let l=e.TEXTURE_2D;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(l=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(l,s.__webglTexture),D(l,a),R(o.__webglFramebuffer,t,a,e.COLOR_ATTACHMENT0+r,l,0),g(a)&&v(l)}n.unbindTexture()}else{let i=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(i=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(i,l.__webglTexture),D(i,r),r.mipmaps&&r.mipmaps.length>0)for(let n=0;n<r.mipmaps.length;n++)R(o.__webglFramebuffer[n],t,r,e.COLOR_ATTACHMENT0,i,n);else R(o.__webglFramebuffer,t,r,e.COLOR_ATTACHMENT0,i,0);g(r)&&v(i),n.unbindTexture()}t.depthBuffer&&B(t)},this.updateRenderTargetMipmap=function(e){const t=e.textures;for(let r=0,a=t.length;r<a;r++){const a=t[r];if(g(a)){const t=_(e),r=i.get(a).__webglTexture;n.bindTexture(t,r),v(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===V(t)){const r=t.textures,a=t.width,s=t.height;let o=e.COLOR_BUFFER_BIT;const c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,d=i.get(t),u=r.length>1;if(u)for(let t=0;t<r.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,d.__webglMultisampledFramebuffer);const h=t.texture.mipmaps;h&&h.length>0?n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglFramebuffer[0]):n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglFramebuffer);for(let n=0;n<r.length;n++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),u){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,d.__webglColorRenderbuffer[n]);const t=i.get(r[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,s,0,0,a,s,o,e.NEAREST),!0===l&&(F.length=0,U.length=0,F.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&!1===t.resolveDepthBuffer&&(F.push(c),U.push(c),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,U)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,F))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),u)for(let t=0;t<r.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,d.__webglColorRenderbuffer[t]);const a=i.get(r[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&l){const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=B,this.setupFrameBufferTexture=R,this.useMultisampledRTT=V}function nT(e,t){return{convert:function(n,i=""){let r;const a=Zv.getTransfer(i);if(n===og)return e.UNSIGNED_BYTE;if(n===fg)return e.UNSIGNED_SHORT_4_4_4_4;if(n===gg)return e.UNSIGNED_SHORT_5_5_5_1;if(n===_g)return e.UNSIGNED_INT_5_9_9_9_REV;if(n===bg)return e.UNSIGNED_INT_10F_11F_11F_REV;if(n===lg)return e.BYTE;if(n===cg)return e.SHORT;if(n===dg)return e.UNSIGNED_SHORT;if(n===ug)return e.INT;if(n===hg)return e.UNSIGNED_INT;if(n===pg)return e.FLOAT;if(n===mg)return e.HALF_FLOAT;if(1021===n)return e.ALPHA;if(1022===n)return e.RGB;if(n===yg)return e.RGBA;if(n===xg)return e.DEPTH_COMPONENT;if(n===wg)return e.DEPTH_STENCIL;if(n===Sg)return e.RED;if(n===Tg)return e.RED_INTEGER;if(n===Eg)return e.RG;if(n===Mg)return e.RG_INTEGER;if(n===Cg)return e.RGBA_INTEGER;if(n===Ag||n===kg||n===Dg||n===Lg)if(a===gv){if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(n===Ag)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===kg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Dg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Lg)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=t.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(n===Ag)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===kg)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Dg)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Lg)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Ig||n===Pg||n===Rg||n===Og){if(r=t.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(n===Ig)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Pg)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Rg)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Og)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Ng||n===Bg||n===Fg){if(r=t.get("WEBGL_compressed_texture_etc"),null===r)return null;if(n===Ng||n===Bg)return a===gv?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===Fg)return a===gv?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===Ug||n===zg||n===Vg||n===Hg||n===$g||n===Wg||n===Gg||n===jg||n===qg||n===Yg||n===Xg||n===Kg||n===Zg||n===Jg){if(r=t.get("WEBGL_compressed_texture_astc"),null===r)return null;if(n===Ug)return a===gv?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===zg)return a===gv?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Vg)return a===gv?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Hg)return a===gv?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===$g)return a===gv?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Wg)return a===gv?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Gg)return a===gv?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===jg)return a===gv?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===qg)return a===gv?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Yg)return a===gv?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Xg)return a===gv?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Kg)return a===gv?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Zg)return a===gv?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Jg)return a===gv?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Qg||n===ev||n===tv){if(r=t.get("EXT_texture_compression_bptc"),null===r)return null;if(n===Qg)return a===gv?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===ev)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===tv)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===nv||n===iv||n===rv||n===av){if(r=t.get("EXT_texture_compression_rgtc"),null===r)return null;if(n===nv)return r.COMPRESSED_RED_RGTC1_EXT;if(n===iv)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===rv)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===av)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===vg?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}class iT{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(null===this.texture){const n=new Uy(e.texture);e.depthNear===t.depthNear&&e.depthFar===t.depthFar||(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,n=new fy({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ly(new zy(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class rT extends Lv{constructor(e,t){super();const n=this;let i=null,r=1,a=null,s="local-floor",o=1,l=null,c=null,d=null,u=null,h=null,p=null;const m="undefined"!=typeof XRWebGLBinding,f=new iT,g={},v=t.getContextAttributes();let _=null,b=null;const y=[],x=[],w=new Vv;let S=null;const T=new yy;T.viewport=new o_;const E=new yy;E.viewport=new o_;const M=[T,E],C=new yx;let A=null,k=null;function D(e){const t=x.indexOf(e.inputSource);if(-1===t)return;const n=y[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||a),n.dispatchEvent({type:e.type,data:e.inputSource}))}function L(){i.removeEventListener("select",D),i.removeEventListener("selectstart",D),i.removeEventListener("selectend",D),i.removeEventListener("squeeze",D),i.removeEventListener("squeezestart",D),i.removeEventListener("squeezeend",D),i.removeEventListener("end",L),i.removeEventListener("inputsourceschange",I);for(let e=0;e<y.length;e++){const t=x[e];null!==t&&(x[e]=null,y[e].disconnect(t))}A=null,k=null,f.reset();for(const e in g)delete g[e];e.setRenderTarget(_),h=null,u=null,d=null,i=null,b=null,B.stop(),n.isPresenting=!1,e.setPixelRatio(S),e.setSize(w.width,w.height,!1),n.dispatchEvent({type:"sessionend"})}function I(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=x.indexOf(n);i>=0&&(x[i]=null,y[i].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let i=x.indexOf(n);if(-1===i){for(let e=0;e<y.length;e++){if(e>=x.length){x.push(n),i=e;break}if(null===x[e]){x[e]=n,i=e;break}}if(-1===i)break}const r=y[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=y[e];return void 0===t&&(t=new Cy,y[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=y[e];return void 0===t&&(t=new Cy,y[e]=t),t.getGripSpace()},this.getHand=function(e){let t=y[e];return void 0===t&&(t=new Cy,y[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&Av("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&Av("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==u?u:h},this.getBinding=function(){return null===d&&m&&(d=new XRWebGLBinding(i,t)),d},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(c){if(i=c,null!==i){_=e.getRenderTarget(),i.addEventListener("select",D),i.addEventListener("selectstart",D),i.addEventListener("selectend",D),i.addEventListener("squeeze",D),i.addEventListener("squeezestart",D),i.addEventListener("squeezeend",D),i.addEventListener("end",L),i.addEventListener("inputsourceschange",I),!0!==v.xrCompatible&&await t.makeXRCompatible(),S=e.getPixelRatio(),e.getSize(w);if(m&&"createProjectionLayer"in XRWebGLBinding.prototype){let n=null,a=null,s=null;v.depth&&(s=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=v.stencil?wg:xg,a=v.stencil?vg:hg);const o={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:r};d=this.getBinding(),u=d.createProjectionLayer(o),i.updateRenderState({layers:[u]}),e.setPixelRatio(1),e.setSize(u.textureWidth,u.textureHeight,!1),b=new c_(u.textureWidth,u.textureHeight,{format:yg,type:og,depthTexture:new Fy(u.textureWidth,u.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:!1===u.ignoreDepthValues,resolveStencilBuffer:!1===u.ignoreDepthValues})}else{const n={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:r};h=new XRWebGLLayer(i,t,n),i.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),b=new c_(h.framebufferWidth,h.framebufferHeight,{format:yg,type:og,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil,resolveDepthBuffer:!1===h.ignoreDepthValues,resolveStencilBuffer:!1===h.ignoreDepthValues})}b.isXRRenderTarget=!0,this.setFoveation(o),l=null,a=await i.requestReferenceSpace(s),B.setContext(i),B.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode},this.getDepthTexture=function(){return f.getDepthTexture()};const P=new $v,R=new $v;function O(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;let t=e.near,n=e.far;null!==f.texture&&(f.depthNear>0&&(t=f.depthNear),f.depthFar>0&&(n=f.depthFar)),C.near=E.near=T.near=t,C.far=E.far=T.far=n,A===C.near&&k===C.far||(i.updateRenderState({depthNear:C.near,depthFar:C.far}),A=C.near,k=C.far),C.layers.mask=6|e.layers.mask,T.layers.mask=3&C.layers.mask,E.layers.mask=5&C.layers.mask;const r=e.parent,a=C.cameras;O(C,r);for(let e=0;e<a.length;e++)O(a[e],r);2===a.length?function(e,t,n){P.setFromMatrixPosition(t.matrixWorld),R.setFromMatrixPosition(n.matrixWorld);const i=P.distanceTo(R),r=t.projectionMatrix.elements,a=n.projectionMatrix.elements,s=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],d=(r[8]-1)/r[0],u=(a[8]+1)/a[0],h=s*d,p=s*u,m=i/(-d+u),f=m*-d;if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(f),e.translateZ(m),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===r[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{const t=s+m,n=o+m,r=h-f,a=p+(i-f),d=l*o/n*t,u=c*o/n*t;e.projectionMatrix.makePerspective(r,a,d,u,t,n),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(C,T,E):C.projectionMatrix.copy(T.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Rv*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,C,r)},this.getCamera=function(){return C},this.getFoveation=function(){if(null!==u||null!==h)return o},this.setFoveation=function(e){o=e,null!==u&&(u.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==f.texture},this.getDepthSensingMesh=function(){return f.getMesh(C)},this.getCameraTexture=function(e){return g[e]};let N=null;const B=new Dx;B.setAnimationLoop((function(t,r){if(c=r.getViewerPose(l||a),p=r,null!==c){const t=c.views;null!==h&&(e.setRenderTargetFramebuffer(b,h.framebuffer),e.setRenderTarget(b));let r=!1;t.length!==C.cameras.length&&(C.cameras.length=0,r=!0);for(let n=0;n<t.length;n++){const i=t[n];let a=null;if(null!==h)a=h.getViewport(i);else{const t=d.getViewSubImage(u,i);a=t.viewport,0===n&&(e.setRenderTargetTextures(b,t.colorTexture,t.depthStencilTexture),e.setRenderTarget(b))}let s=M[n];void 0===s&&(s=new yy,s.layers.enable(n),s.viewport=new o_,M[n]=s),s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(i.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(a.x,a.y,a.width,a.height),0===n&&(C.matrix.copy(s.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),!0===r&&C.cameras.push(s)}const a=i.enabledFeatures;if(a&&a.includes("depth-sensing")&&"gpu-optimized"==i.depthUsage&&m){d=n.getBinding();const e=d.getDepthInformation(t[0]);e&&e.isValid&&e.texture&&f.init(e,i.renderState)}if(a&&a.includes("camera-access")&&m){e.state.unbindTexture(),d=n.getBinding();for(let e=0;e<t.length;e++){const n=t[e].camera;if(n){let e=g[n];e||(e=new Uy,g[n]=e);const t=d.getCameraImage(n);e.sourceTexture=t}}}}for(let e=0;e<y.length;e++){const t=x[e],n=y[e];null!==t&&void 0!==n&&n.update(t,r,l||a)}N&&N(t,r),r.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:r}),p=null})),this.setAnimationLoop=function(e){N=e},this.dispose=function(){}}}const aT=new X_,sT=new U_;function oT(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function i(e,i){e.opacity.value=i.opacity,i.color&&e.diffuse.value.copy(i.color),i.emissive&&e.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(e.map.value=i.map,n(i.map,e.mapTransform)),i.alphaMap&&(e.alphaMap.value=i.alphaMap,n(i.alphaMap,e.alphaMapTransform)),i.bumpMap&&(e.bumpMap.value=i.bumpMap,n(i.bumpMap,e.bumpMapTransform),e.bumpScale.value=i.bumpScale,1===i.side&&(e.bumpScale.value*=-1)),i.normalMap&&(e.normalMap.value=i.normalMap,n(i.normalMap,e.normalMapTransform),e.normalScale.value.copy(i.normalScale),1===i.side&&e.normalScale.value.negate()),i.displacementMap&&(e.displacementMap.value=i.displacementMap,n(i.displacementMap,e.displacementMapTransform),e.displacementScale.value=i.displacementScale,e.displacementBias.value=i.displacementBias),i.emissiveMap&&(e.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,e.emissiveMapTransform)),i.specularMap&&(e.specularMap.value=i.specularMap,n(i.specularMap,e.specularMapTransform)),i.alphaTest>0&&(e.alphaTest.value=i.alphaTest);const r=t.get(i),a=r.envMap,s=r.envMapRotation;a&&(e.envMap.value=a,aT.copy(s),aT.x*=-1,aT.y*=-1,aT.z*=-1,a.isCubeTexture&&!1===a.isRenderTargetTexture&&(aT.y*=-1,aT.z*=-1),e.envMapRotation.value.setFromMatrix4(sT.makeRotationFromEuler(aT)),e.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,e.reflectivity.value=i.reflectivity,e.ior.value=i.ior,e.refractionRatio.value=i.refractionRatio),i.lightMap&&(e.lightMap.value=i.lightMap,e.lightMapIntensity.value=i.lightMapIntensity,n(i.lightMap,e.lightMapTransform)),i.aoMap&&(e.aoMap.value=i.aoMap,e.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,py(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,r,a,s,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(e,r):r.isMeshToonMaterial?(i(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(i(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(i(e,r),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,n(t.metalnessMap,e.metalnessMapTransform));e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,n(t.roughnessMap,e.roughnessMapTransform));t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,i){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),1===t.side&&e.clearcoatNormalScale.value.negate()));t.dispersion>0&&(e.dispersion.value=t.dispersion);t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,r,o)):r.isMeshMatcapMaterial?(i(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?i(e,r):r.isMeshDistanceMaterial?(i(e,r),function(e,n){const i=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(i.matrixWorld),e.nearDistance.value=i.shadow.camera.near,e.farDistance.value=i.shadow.camera.far}(e,r)):r.isMeshNormalMaterial?i(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,i,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*r,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r,a,s):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function lT(e,t,n,i){let r={},a={},s=[];const o=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e,t,n,i){const r=e.value,a=t+"_"+n;if(void 0===i[a])return i[a]="number"==typeof r||"boolean"==typeof r?r:r.clone(),!0;{const e=i[a];if("number"==typeof r||"boolean"==typeof r){if(e!==r)return i[a]=r,!0}else if(!1===e.equals(r))return e.copy(r),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?Av("WebGLRenderer: Texture samplers can not be part of an uniforms group."):Av("WebGLRenderer: Unsupported uniform value type.",e),t}function d(t){const n=t.target;n.removeEventListener("dispose",d);const i=s.indexOf(n.__bindingPointIndex);s.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete a[n.id]}return{bind:function(e,t){const n=t.program;i.uniformBlockBinding(e,n)},update:function(n,u){let h=r[n.id];void 0===h&&(!function(e){const t=e.uniforms;let n=0;const i=16;for(let e=0,r=t.length;e<r;e++){const r=Array.isArray(t[e])?t[e]:[t[e]];for(let e=0,t=r.length;e<t;e++){const t=r[e],a=Array.isArray(t.value)?t.value:[t.value];for(let e=0,r=a.length;e<r;e++){const r=c(a[e]),s=n%i,o=s%r.boundary,l=s+o;n+=o,0!==l&&i-l<r.storage&&(n+=i-l),t.__data=new Float32Array(r.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=n,n+=r.storage}}}const r=n%i;r>0&&(n+=i-r);e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<o;e++)if(-1===s.indexOf(e))return s.push(e),e;return kv("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const i=e.createBuffer(),r=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,i),e.bufferData(e.UNIFORM_BUFFER,r,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,i),i}(n),r[n.id]=h,n.addEventListener("dispose",d));const p=u.program;i.updateUBOMapping(n,p);const m=t.render.frame;a[n.id]!==m&&(!function(t){const n=r[t.id],i=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let t=0,n=i.length;t<n;t++){const n=Array.isArray(i[t])?i[t]:[i[t]];for(let i=0,r=n.length;i<r;i++){const r=n[i];if(!0===l(r,t,i,a)){const t=r.__offset,n=Array.isArray(r.value)?r.value:[r.value];let i=0;for(let a=0;a<n.length;a++){const s=n[a],o=c(s);"number"==typeof s||"boolean"==typeof s?(r.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,t+i,r.__data)):s.isMatrix3?(r.__data[0]=s.elements[0],r.__data[1]=s.elements[1],r.__data[2]=s.elements[2],r.__data[3]=0,r.__data[4]=s.elements[3],r.__data[5]=s.elements[4],r.__data[6]=s.elements[5],r.__data[7]=0,r.__data[8]=s.elements[6],r.__data[9]=s.elements[7],r.__data[10]=s.elements[8],r.__data[11]=0):(s.toArray(r.__data,i),i+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,r.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=m)},dispose:function(){for(const t in r)e.deleteBuffer(r[t]);s=[],r={},a={}}}}const cT=new Uint16Array([11481,15204,11534,15171,11808,15015,12385,14843,12894,14716,13396,14600,13693,14483,13976,14366,14237,14171,14405,13961,14511,13770,14605,13598,14687,13444,14760,13305,14822,13066,14876,12857,14923,12675,14963,12517,14997,12379,15025,12230,15049,12023,15070,11843,15086,11687,15100,11551,15111,11433,15120,11330,15127,11217,15132,11060,15135,10922,15138,10801,15139,10695,15139,10600,13012,14923,13020,14917,13064,14886,13176,14800,13349,14666,13513,14526,13724,14398,13960,14230,14200,14020,14383,13827,14488,13651,14583,13491,14667,13348,14740,13132,14803,12908,14856,12713,14901,12542,14938,12394,14968,12241,14992,12017,15010,11822,15024,11654,15034,11507,15041,11380,15044,11269,15044,11081,15042,10913,15037,10764,15031,10635,15023,10520,15014,10419,15003,10330,13657,14676,13658,14673,13670,14660,13698,14622,13750,14547,13834,14442,13956,14317,14112,14093,14291,13889,14407,13704,14499,13538,14586,13389,14664,13201,14733,12966,14792,12758,14842,12577,14882,12418,14915,12272,14940,12033,14959,11826,14972,11646,14980,11490,14983,11355,14983,11212,14979,11008,14971,10830,14961,10675,14950,10540,14936,10420,14923,10315,14909,10204,14894,10041,14089,14460,14090,14459,14096,14452,14112,14431,14141,14388,14186,14305,14252,14130,14341,13941,14399,13756,14467,13585,14539,13430,14610,13272,14677,13026,14737,12808,14790,12617,14833,12449,14869,12303,14896,12065,14916,11845,14929,11655,14937,11490,14939,11347,14936,11184,14930,10970,14921,10783,14912,10621,14900,10480,14885,10356,14867,10247,14848,10062,14827,9894,14805,9745,14400,14208,14400,14206,14402,14198,14406,14174,14415,14122,14427,14035,14444,13913,14469,13767,14504,13613,14548,13463,14598,13324,14651,13082,14704,12858,14752,12658,14795,12483,14831,12330,14860,12106,14881,11875,14895,11675,14903,11501,14905,11351,14903,11178,14900,10953,14892,10757,14880,10589,14865,10442,14847,10313,14827,10162,14805,9965,14782,9792,14757,9642,14731,9507,14562,13883,14562,13883,14563,13877,14566,13862,14570,13830,14576,13773,14584,13689,14595,13582,14613,13461,14637,13336,14668,13120,14704,12897,14741,12695,14776,12516,14808,12358,14835,12150,14856,11910,14870,11701,14878,11519,14882,11361,14884,11187,14880,10951,14871,10748,14858,10572,14842,10418,14823,10286,14801,10099,14777,9897,14751,9722,14725,9567,14696,9430,14666,9309,14702,13604,14702,13604,14702,13600,14703,13591,14705,13570,14707,13533,14709,13477,14712,13400,14718,13305,14727,13106,14743,12907,14762,12716,14784,12539,14807,12380,14827,12190,14844,11943,14855,11727,14863,11539,14870,11376,14871,11204,14868,10960,14858,10748,14845,10565,14829,10406,14809,10269,14786,10058,14761,9852,14734,9671,14705,9512,14674,9374,14641,9253,14608,9076,14821,13366,14821,13365,14821,13364,14821,13358,14821,13344,14821,13320,14819,13252,14817,13145,14815,13011,14814,12858,14817,12698,14823,12539,14832,12389,14841,12214,14850,11968,14856,11750,14861,11558,14866,11390,14867,11226,14862,10972,14853,10754,14840,10565,14823,10401,14803,10259,14780,10032,14754,9820,14725,9635,14694,9473,14661,9333,14627,9203,14593,8988,14557,8798,14923,13014,14922,13014,14922,13012,14922,13004,14920,12987,14919,12957,14915,12907,14909,12834,14902,12738,14894,12623,14888,12498,14883,12370,14880,12203,14878,11970,14875,11759,14873,11569,14874,11401,14872,11243,14865,10986,14855,10762,14842,10568,14825,10401,14804,10255,14781,10017,14754,9799,14725,9611,14692,9445,14658,9301,14623,9139,14587,8920,14548,8729,14509,8562,15008,12672,15008,12672,15008,12671,15007,12667,15005,12656,15001,12637,14997,12605,14989,12556,14978,12490,14966,12407,14953,12313,14940,12136,14927,11934,14914,11742,14903,11563,14896,11401,14889,11247,14879,10992,14866,10767,14851,10570,14833,10400,14812,10252,14789,10007,14761,9784,14731,9592,14698,9424,14663,9279,14627,9088,14588,8868,14548,8676,14508,8508,14467,8360,15080,12386,15080,12386,15079,12385,15078,12383,15076,12378,15072,12367,15066,12347,15057,12315,15045,12253,15030,12138,15012,11998,14993,11845,14972,11685,14951,11530,14935,11383,14920,11228,14904,10981,14887,10762,14870,10567,14850,10397,14827,10248,14803,9997,14774,9771,14743,9578,14710,9407,14674,9259,14637,9048,14596,8826,14555,8632,14514,8464,14471,8317,14427,8182,15139,12008,15139,12008,15138,12008,15137,12007,15135,12003,15130,11990,15124,11969,15115,11929,15102,11872,15086,11794,15064,11693,15041,11581,15013,11459,14987,11336,14966,11170,14944,10944,14921,10738,14898,10552,14875,10387,14850,10239,14824,9983,14794,9758,14762,9563,14728,9392,14692,9244,14653,9014,14611,8791,14569,8597,14526,8427,14481,8281,14436,8110,14391,7885,15188,11617,15188,11617,15187,11617,15186,11618,15183,11617,15179,11612,15173,11601,15163,11581,15150,11546,15133,11495,15110,11427,15083,11346,15051,11246,15024,11057,14996,10868,14967,10687,14938,10517,14911,10362,14882,10206,14853,9956,14821,9737,14787,9543,14752,9375,14715,9228,14675,8980,14632,8760,14589,8565,14544,8395,14498,8248,14451,8049,14404,7824,14357,7630,15228,11298,15228,11298,15227,11299,15226,11301,15223,11303,15219,11302,15213,11299,15204,11290,15191,11271,15174,11217,15150,11129,15119,11015,15087,10886,15057,10744,15024,10599,14990,10455,14957,10318,14924,10143,14891,9911,14856,9701,14820,9516,14782,9352,14744,9200,14703,8946,14659,8725,14615,8533,14568,8366,14521,8220,14472,7992,14423,7770,14374,7578,14315,7408,15260,10819,15260,10819,15259,10822,15258,10826,15256,10832,15251,10836,15246,10841,15237,10838,15225,10821,15207,10788,15183,10734,15151,10660,15120,10571,15087,10469,15049,10359,15012,10249,14974,10041,14937,9837,14900,9647,14860,9475,14820,9320,14779,9147,14736,8902,14691,8688,14646,8499,14598,8335,14549,8189,14499,7940,14448,7720,14397,7529,14347,7363,14256,7218,15285,10410,15285,10411,15285,10413,15284,10418,15282,10425,15278,10434,15272,10442,15264,10449,15252,10445,15235,10433,15210,10403,15179,10358,15149,10301,15113,10218,15073,10059,15033,9894,14991,9726,14951,9565,14909,9413,14865,9273,14822,9073,14777,8845,14730,8641,14682,8459,14633,8300,14583,8129,14531,7883,14479,7670,14426,7482,14373,7321,14305,7176,14201,6939,15305,9939,15305,9940,15305,9945,15304,9955,15302,9967,15298,9989,15293,10010,15286,10033,15274,10044,15258,10045,15233,10022,15205,9975,15174,9903,15136,9808,15095,9697,15053,9578,15009,9451,14965,9327,14918,9198,14871,8973,14825,8766,14775,8579,14725,8408,14675,8259,14622,8058,14569,7821,14515,7615,14460,7435,14405,7276,14350,7108,14256,6866,14149,6653,15321,9444,15321,9445,15321,9448,15320,9458,15317,9470,15314,9490,15310,9515,15302,9540,15292,9562,15276,9579,15251,9577,15226,9559,15195,9519,15156,9463,15116,9389,15071,9304,15025,9208,14978,9023,14927,8838,14878,8661,14827,8496,14774,8344,14722,8206,14667,7973,14612,7749,14556,7555,14499,7382,14443,7229,14385,7025,14322,6791,14210,6588,14100,6409,15333,8920,15333,8921,15332,8927,15332,8943,15329,8965,15326,9002,15322,9048,15316,9106,15307,9162,15291,9204,15267,9221,15244,9221,15212,9196,15175,9134,15133,9043,15088,8930,15040,8801,14990,8665,14938,8526,14886,8391,14830,8261,14775,8087,14719,7866,14661,7664,14603,7482,14544,7322,14485,7178,14426,6936,14367,6713,14281,6517,14166,6348,14054,6198,15341,8360,15341,8361,15341,8366,15341,8379,15339,8399,15336,8431,15332,8473,15326,8527,15318,8585,15302,8632,15281,8670,15258,8690,15227,8690,15191,8664,15149,8612,15104,8543,15055,8456,15001,8360,14948,8259,14892,8122,14834,7923,14776,7734,14716,7558,14656,7397,14595,7250,14534,7070,14472,6835,14410,6628,14350,6443,14243,6283,14125,6135,14010,5889,15348,7715,15348,7717,15348,7725,15347,7745,15345,7780,15343,7836,15339,7905,15334,8e3,15326,8103,15310,8193,15293,8239,15270,8270,15240,8287,15204,8283,15163,8260,15118,8223,15067,8143,15014,8014,14958,7873,14899,7723,14839,7573,14778,7430,14715,7293,14652,7164,14588,6931,14524,6720,14460,6531,14396,6362,14330,6210,14207,6015,14086,5781,13969,5576,15352,7114,15352,7116,15352,7128,15352,7159,15350,7195,15348,7237,15345,7299,15340,7374,15332,7457,15317,7544,15301,7633,15280,7703,15251,7754,15216,7775,15176,7767,15131,7733,15079,7670,15026,7588,14967,7492,14906,7387,14844,7278,14779,7171,14714,6965,14648,6770,14581,6587,14515,6420,14448,6269,14382,6123,14299,5881,14172,5665,14049,5477,13929,5310,15355,6329,15355,6330,15355,6339,15355,6362,15353,6410,15351,6472,15349,6572,15344,6688,15337,6835,15323,6985,15309,7142,15287,7220,15260,7277,15226,7310,15188,7326,15142,7318,15090,7285,15036,7239,14976,7177,14914,7045,14849,6892,14782,6736,14714,6581,14645,6433,14576,6293,14506,6164,14438,5946,14369,5733,14270,5540,14140,5369,14014,5216,13892,5043,15357,5483,15357,5484,15357,5496,15357,5528,15356,5597,15354,5692,15351,5835,15347,6011,15339,6195,15328,6317,15314,6446,15293,6566,15268,6668,15235,6746,15197,6796,15152,6811,15101,6790,15046,6748,14985,6673,14921,6583,14854,6479,14785,6371,14714,6259,14643,6149,14571,5946,14499,5750,14428,5567,14358,5401,14242,5250,14109,5111,13980,4870,13856,4657,15359,4555,15359,4557,15358,4573,15358,4633,15357,4715,15355,4841,15353,5061,15349,5216,15342,5391,15331,5577,15318,5770,15299,5967,15274,6150,15243,6223,15206,6280,15161,6310,15111,6317,15055,6300,14994,6262,14928,6208,14860,6141,14788,5994,14715,5838,14641,5684,14566,5529,14492,5384,14418,5247,14346,5121,14216,4892,14079,4682,13948,4496,13822,4330,15359,3498,15359,3501,15359,3520,15359,3598,15358,3719,15356,3860,15355,4137,15351,4305,15344,4563,15334,4809,15321,5116,15303,5273,15280,5418,15250,5547,15214,5653,15170,5722,15120,5761,15064,5763,15002,5733,14935,5673,14865,5597,14792,5504,14716,5400,14640,5294,14563,5185,14486,5041,14410,4841,14335,4655,14191,4482,14051,4325,13918,4183,13790,4012,15360,2282,15360,2285,15360,2306,15360,2401,15359,2547,15357,2748,15355,3103,15352,3349,15345,3675,15336,4020,15324,4272,15307,4496,15285,4716,15255,4908,15220,5086,15178,5170,15128,5214,15072,5234,15010,5231,14943,5206,14871,5166,14796,5102,14718,4971,14639,4833,14559,4687,14480,4541,14402,4401,14315,4268,14167,4142,14025,3958,13888,3747,13759,3556,15360,923,15360,925,15360,946,15360,1052,15359,1214,15357,1494,15356,1892,15352,2274,15346,2663,15338,3099,15326,3393,15309,3679,15288,3980,15260,4183,15226,4325,15185,4437,15136,4517,15080,4570,15018,4591,14950,4581,14877,4545,14800,4485,14720,4411,14638,4325,14556,4231,14475,4136,14395,3988,14297,3803,14145,3628,13999,3465,13861,3314,13729,3177,15360,263,15360,264,15360,272,15360,325,15359,407,15358,548,15356,780,15352,1144,15347,1580,15339,2099,15328,2425,15312,2795,15292,3133,15264,3329,15232,3517,15191,3689,15143,3819,15088,3923,15025,3978,14956,3999,14882,3979,14804,3931,14722,3855,14639,3756,14554,3645,14470,3529,14388,3409,14279,3289,14124,3173,13975,3055,13834,2848,13701,2658,15360,49,15360,49,15360,52,15360,75,15359,111,15358,201,15356,283,15353,519,15348,726,15340,1045,15329,1415,15314,1795,15295,2173,15269,2410,15237,2649,15197,2866,15150,3054,15095,3140,15032,3196,14963,3228,14888,3236,14808,3224,14725,3191,14639,3146,14553,3088,14466,2976,14382,2836,14262,2692,14103,2549,13952,2409,13808,2278,13674,2154,15360,4,15360,4,15360,4,15360,13,15359,33,15358,59,15357,112,15353,199,15348,302,15341,456,15331,628,15316,827,15297,1082,15272,1332,15241,1601,15202,1851,15156,2069,15101,2172,15039,2256,14970,2314,14894,2348,14813,2358,14728,2344,14640,2311,14551,2263,14463,2203,14376,2133,14247,2059,14084,1915,13930,1761,13784,1609,13648,1464,15360,0,15360,0,15360,0,15360,3,15359,18,15358,26,15357,53,15354,80,15348,97,15341,165,15332,238,15318,326,15299,427,15275,529,15245,654,15207,771,15161,885,15108,994,15046,1089,14976,1170,14900,1229,14817,1266,14731,1284,14641,1282,14550,1260,14460,1223,14370,1174,14232,1116,14066,1050,13909,981,13761,910,13623,839]);let dT=null;class uT{constructor(e={}){const{canvas:t=Tv(),context:n=null,depth:i=!0,stencil:r=!1,alpha:a=!1,antialias:s=!1,premultipliedAlpha:o=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:d=!1,reversedDepthBuffer:u=!1}=e;let h;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!=typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=n.getContextAttributes().alpha}else h=a;const p=new Set([Cg,Mg,Tg]),m=new Set([og,hg,dg,vg,fg,gg]),f=new Uint32Array(4),g=new Int32Array(4);let v=null,_=null;const b=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=0,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const x=this;let w=!1;this._outputColorSpace=pv;let S=0,T=0,E=null,M=-1,C=null;const A=new o_,k=new o_;let D=null;const L=new Lb(0);let I=0,P=t.width,R=t.height,O=1,N=null,B=null;const F=new o_(0,0,P,R),U=new o_(0,0,P,R);let z=!1;const V=new By;let H=!1,$=!1;const W=new U_,G=new $v,j=new o_,q={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Y=!1;function X(){return null===E?O:1}let K,Z,J,Q,ee,te,ne,ie,re,ae,se,oe,le,ce,de,ue,he,pe,me,fe,ge,ve,_e,be,ye=n;function xe(e,n){return t.getContext(e,n)}try{const e={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r181"),t.addEventListener("webglcontextlost",Te,!1),t.addEventListener("webglcontextrestored",Ee,!1),t.addEventListener("webglcontextcreationerror",Me,!1),null===ye){const t="webgl2";if(ye=xe(t,e),null===ye)throw xe(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(e){throw e("WebGLRenderer: "+e.message),e}function we(){K=new sw(ye),K.init(),ve=new nT(ye,K),Z=new Vx(ye,K,e,ve),J=new eT(ye,K),Z.reversedDepthBuffer&&u&&J.buffers.depth.setReversed(!0),Q=new cw(ye),ee=new VS,te=new tT(ye,K,J,ee,Z,ve,Q),ne=new $x(x),ie=new aw(x),re=new Lx(ye),_e=new Ux(ye,re),ae=new ow(ye,re,Q,_e),se=new uw(ye,ae,re,Q),me=new dw(ye,Z,te),ue=new Hx(ee),oe=new zS(x,ne,ie,K,Z,_e,ue),le=new oT(x,ee),ce=new GS,de=new ZS(K),pe=new Fx(x,ne,ie,J,se,h,o),he=new JS(x,se,Z),be=new lT(ye,Q,Z,J),fe=new zx(ye,K,Q),ge=new lw(ye,K,Q),Q.programs=oe.programs,x.capabilities=Z,x.extensions=K,x.properties=ee,x.renderLists=ce,x.shadowMap=he,x.state=J,x.info=Q}we();const Se=new rT(x,ye);function Te(e){e.preventDefault(),Cv("WebGLRenderer: Context Lost."),w=!0}function Ee(){Cv("WebGLRenderer: Context Restored."),w=!1;const e=Q.autoReset,t=he.enabled,n=he.autoUpdate,i=he.needsUpdate,r=he.type;we(),Q.autoReset=e,he.enabled=t,he.autoUpdate=n,he.needsUpdate=i,he.type=r}function Me(e){kv("WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Ce(e){const t=e.target;t.removeEventListener("dispose",Ce),function(e){(function(e){const t=ee.get(e).programs;void 0!==t&&(t.forEach((function(e){oe.releaseProgram(e)})),e.isShaderMaterial&&oe.releaseShaderCache(e))})(e),ee.remove(e)}(t)}function Ae(e,t,n){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=1,e.needsUpdate=!0,Fe(e,t,n),e.side=0,e.needsUpdate=!0,Fe(e,t,n),e.side=2):Fe(e,t,n)}this.xr=Se,this.getContext=function(){return ye},this.getContextAttributes=function(){return ye.getContextAttributes()},this.forceContextLoss=function(){const e=K.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=K.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(e){void 0!==e&&(O=e,this.setSize(P,R,!1))},this.getSize=function(e){return e.set(P,R)},this.setSize=function(e,n,i=!0){Se.isPresenting?Av("WebGLRenderer: Can't change size while VR device is presenting."):(P=e,R=n,t.width=Math.floor(e*O),t.height=Math.floor(n*O),!0===i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(P*O,R*O).floor()},this.setDrawingBufferSize=function(e,n,i){P=e,R=n,O=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(A)},this.getViewport=function(e){return e.copy(F)},this.setViewport=function(e,t,n,i){e.isVector4?F.set(e.x,e.y,e.z,e.w):F.set(e,t,n,i),J.viewport(A.copy(F).multiplyScalar(O).round())},this.getScissor=function(e){return e.copy(U)},this.setScissor=function(e,t,n,i){e.isVector4?U.set(e.x,e.y,e.z,e.w):U.set(e,t,n,i),J.scissor(k.copy(U).multiplyScalar(O).round())},this.getScissorTest=function(){return z},this.setScissorTest=function(e){J.setScissorTest(z=e)},this.setOpaqueSort=function(e){N=e},this.setTransparentSort=function(e){B=e},this.getClearColor=function(e){return e.copy(pe.getClearColor())},this.setClearColor=function(){pe.setClearColor(...arguments)},this.getClearAlpha=function(){return pe.getClearAlpha()},this.setClearAlpha=function(){pe.setClearAlpha(...arguments)},this.clear=function(e=!0,t=!0,n=!0){let i=0;if(e){let e=!1;if(null!==E){const t=E.texture.format;e=p.has(t)}if(e){const e=E.texture.type,t=m.has(e),n=pe.getClearColor(),i=pe.getClearAlpha(),r=n.r,a=n.g,s=n.b;t?(f[0]=r,f[1]=a,f[2]=s,f[3]=i,ye.clearBufferuiv(ye.COLOR,0,f)):(g[0]=r,g[1]=a,g[2]=s,g[3]=i,ye.clearBufferiv(ye.COLOR,0,g))}else i|=ye.COLOR_BUFFER_BIT}t&&(i|=ye.DEPTH_BUFFER_BIT),n&&(i|=ye.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ye.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Te,!1),t.removeEventListener("webglcontextrestored",Ee,!1),t.removeEventListener("webglcontextcreationerror",Me,!1),pe.dispose(),ce.dispose(),de.dispose(),ee.dispose(),ne.dispose(),ie.dispose(),se.dispose(),_e.dispose(),be.dispose(),oe.dispose(),Se.dispose(),Se.removeEventListener("sessionstart",De),Se.removeEventListener("sessionend",Le),Ie.stop()},this.renderBufferDirect=function(e,t,n,i,r,a){null===t&&(t=q);const s=r.isMesh&&r.matrixWorld.determinant()<0,o=function(e,t,n,i,r){!0!==t.isScene&&(t=q);te.resetTextureUnits();const a=t.fog,s=i.isMeshStandardMaterial?t.environment:null,o=null===E?x.outputColorSpace:!0===E.isXRRenderTarget?E.texture.colorSpace:mv,l=(i.isMeshStandardMaterial?ie:ne).get(i.envMap||s),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,d=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),u=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let m=0;i.toneMapped&&(null!==E&&!0!==E.isXRRenderTarget||(m=x.toneMapping));const f=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,g=void 0!==f?f.length:0,v=ee.get(i),b=_.state.lights;if(!0===H&&(!0===$||e!==C)){const t=e===C&&i.id===M;ue.setState(i,e,t)}let y=!1;i.version===v.__version?v.needsLights&&v.lightsStateVersion!==b.state.version||v.outputColorSpace!==o||r.isBatchedMesh&&!1===v.batching?y=!0:r.isBatchedMesh||!0!==v.batching?r.isBatchedMesh&&!0===v.batchingColor&&null===r.colorTexture||r.isBatchedMesh&&!1===v.batchingColor&&null!==r.colorTexture||r.isInstancedMesh&&!1===v.instancing?y=!0:r.isInstancedMesh||!0!==v.instancing?r.isSkinnedMesh&&!1===v.skinning?y=!0:r.isSkinnedMesh||!0!==v.skinning?r.isInstancedMesh&&!0===v.instancingColor&&null===r.instanceColor||r.isInstancedMesh&&!1===v.instancingColor&&null!==r.instanceColor||r.isInstancedMesh&&!0===v.instancingMorph&&null===r.morphTexture||r.isInstancedMesh&&!1===v.instancingMorph&&null!==r.morphTexture||v.envMap!==l||!0===i.fog&&v.fog!==a?y=!0:void 0===v.numClippingPlanes||v.numClippingPlanes===ue.numPlanes&&v.numIntersection===ue.numIntersection?(v.vertexAlphas!==c||v.vertexTangents!==d||v.morphTargets!==u||v.morphNormals!==h||v.morphColors!==p||v.toneMapping!==m||v.morphTargetsCount!==g)&&(y=!0):y=!0:y=!0:y=!0:y=!0:(y=!0,v.__version=i.version);let w=v.currentProgram;!0===y&&(w=Fe(i,t,r));let S=!1,T=!1,A=!1;const k=w.getUniforms(),D=v.uniforms;J.useProgram(w.program)&&(S=!0,T=!0,A=!0);i.id!==M&&(M=i.id,T=!0);if(S||C!==e){J.buffers.depth.getReversed()&&!0!==e.reversedDepth&&(e._reversedDepth=!0,e.updateProjectionMatrix()),k.setValue(ye,"projectionMatrix",e.projectionMatrix),k.setValue(ye,"viewMatrix",e.matrixWorldInverse);const t=k.map.cameraPosition;void 0!==t&&t.setValue(ye,G.setFromMatrixPosition(e.matrixWorld)),Z.logarithmicDepthBuffer&&k.setValue(ye,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&k.setValue(ye,"isOrthographic",!0===e.isOrthographicCamera),C!==e&&(C=e,T=!0,A=!0)}if(r.isSkinnedMesh){k.setOptional(ye,r,"bindMatrix"),k.setOptional(ye,r,"bindMatrixInverse");const e=r.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),k.setValue(ye,"boneTexture",e.boneTexture,te))}r.isBatchedMesh&&(k.setOptional(ye,r,"batchingTexture"),k.setValue(ye,"batchingTexture",r._matricesTexture,te),k.setOptional(ye,r,"batchingIdTexture"),k.setValue(ye,"batchingIdTexture",r._indirectTexture,te),k.setOptional(ye,r,"batchingColorTexture"),null!==r._colorsTexture&&k.setValue(ye,"batchingColorTexture",r._colorsTexture,te));const L=n.morphAttributes;void 0===L.position&&void 0===L.normal&&void 0===L.color||me.update(r,n,w);(T||v.receiveShadow!==r.receiveShadow)&&(v.receiveShadow=r.receiveShadow,k.setValue(ye,"receiveShadow",r.receiveShadow));i.isMeshGouraudMaterial&&null!==i.envMap&&(D.envMap.value=l,D.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);i.isMeshStandardMaterial&&null===i.envMap&&null!==t.environment&&(D.envMapIntensity.value=t.environmentIntensity);void 0!==D.dfgLUT&&(D.dfgLUT.value=(null===dT&&(dT=new ky(cT,32,32,Eg,mg),dT.minFilter=rg,dT.magFilter=rg,dT.wrapS=eg,dT.wrapT=eg,dT.generateMipmaps=!1,dT.needsUpdate=!0),dT));T&&(k.setValue(ye,"toneMappingExposure",x.toneMappingExposure),v.needsLights&&(P=A,(I=D).ambientLightColor.needsUpdate=P,I.lightProbe.needsUpdate=P,I.directionalLights.needsUpdate=P,I.directionalLightShadows.needsUpdate=P,I.pointLights.needsUpdate=P,I.pointLightShadows.needsUpdate=P,I.spotLights.needsUpdate=P,I.spotLightShadows.needsUpdate=P,I.rectAreaLights.needsUpdate=P,I.hemisphereLights.needsUpdate=P),a&&!0===i.fog&&le.refreshFogUniforms(D,a),le.refreshMaterialUniforms(D,i,O,R,_.state.transmissionRenderTarget[e.id]),gS.upload(ye,Ue(v),D,te));var I,P;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(gS.upload(ye,Ue(v),D,te),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&k.setValue(ye,"center",r.center);if(k.setValue(ye,"modelViewMatrix",r.modelViewMatrix),k.setValue(ye,"normalMatrix",r.normalMatrix),k.setValue(ye,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const e=i.uniformsGroups;for(let t=0,n=e.length;t<n;t++){const n=e[t];be.update(n,w),be.bind(n,w)}}return w}(e,t,n,i,r);J.setMaterial(i,s);let l=n.index,c=1;if(!0===i.wireframe){if(l=ae.getWireframeAttribute(n),void 0===l)return;c=2}const d=n.drawRange,u=n.attributes.position;let h=d.start*c,p=(d.start+d.count)*c;null!==a&&(h=Math.max(h,a.start*c),p=Math.min(p,(a.start+a.count)*c)),null!==l?(h=Math.max(h,0),p=Math.min(p,l.count)):null!=u&&(h=Math.max(h,0),p=Math.min(p,u.count));const m=p-h;if(m<0||m===1/0)return;let f;_e.setup(r,i,o,n,l);let g=fe;if(null!==l&&(f=re.get(l),g=ge,g.setIndex(f)),r.isMesh)!0===i.wireframe?(J.setLineWidth(i.wireframeLinewidth*X()),g.setMode(ye.LINES)):g.setMode(ye.TRIANGLES);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),J.setLineWidth(e*X()),r.isLineSegments?g.setMode(ye.LINES):r.isLineLoop?g.setMode(ye.LINE_LOOP):g.setMode(ye.LINE_STRIP)}else r.isPoints?g.setMode(ye.POINTS):r.isSprite&&g.setMode(ye.TRIANGLES);if(r.isBatchedMesh)if(null!==r._multiDrawInstances)Dv("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),g.renderMultiDrawInstances(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount,r._multiDrawInstances);else if(K.get("WEBGL_multi_draw"))g.renderMultiDraw(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount);else{const e=r._multiDrawStarts,t=r._multiDrawCounts,n=r._multiDrawCount,a=l?re.get(l).bytesPerElement:1,s=ee.get(i).currentProgram.getUniforms();for(let i=0;i<n;i++)s.setValue(ye,"_gl_DrawID",i),g.render(e[i]/a,t[i])}else if(r.isInstancedMesh)g.renderInstances(h,m,r.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);g.renderInstances(h,m,t)}else g.render(h,m)},this.compile=function(e,t,n=null){null===n&&(n=e),_=de.get(n),_.init(t),y.push(_),n.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(_.pushLight(e),e.castShadow&&_.pushShadow(e))})),e!==n&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(_.pushLight(e),e.castShadow&&_.pushShadow(e))})),_.setupLights();const i=new Set;return e.traverse((function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;const t=e.material;if(t)if(Array.isArray(t))for(let r=0;r<t.length;r++){const a=t[r];Ae(a,n,e),i.add(a)}else Ae(t,n,e),i.add(t)})),_=y.pop(),i},this.compileAsync=function(e,t,n=null){const i=this.compile(e,t,n);return new Promise((t=>{function n(){i.forEach((function(e){ee.get(e).currentProgram.isReady()&&i.delete(e)})),0!==i.size?setTimeout(n,10):t(e)}null!==K.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};let ke=null;function De(){Ie.stop()}function Le(){Ie.start()}const Ie=new Dx;function Pe(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)_.pushLight(e),e.castShadow&&_.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||V.intersectsSprite(e)){i&&j.setFromMatrixPosition(e.matrixWorld).applyMatrix4(W);const t=se.update(e),r=e.material;r.visible&&v.push(e,t,r,n,j.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||V.intersectsObject(e))){const t=se.update(e),r=e.material;if(i&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),j.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),j.copy(t.boundingSphere.center)),j.applyMatrix4(e.matrixWorld).applyMatrix4(W)),Array.isArray(r)){const i=t.groups;for(let a=0,s=i.length;a<s;a++){const s=i[a],o=r[s.materialIndex];o&&o.visible&&v.push(e,t,o,n,j.z,s)}}else r.visible&&v.push(e,t,r,n,j.z,null)}const r=e.children;for(let e=0,a=r.length;e<a;e++)Pe(r[e],t,n,i)}function Re(e,t,n,i){const{opaque:r,transmissive:a,transparent:s}=e;_.setupLightsView(n),!0===H&&ue.setGlobalState(x.clippingPlanes,n),i&&J.viewport(A.copy(i)),r.length>0&&Ne(r,t,n),a.length>0&&Ne(a,t,n),s.length>0&&Ne(s,t,n),J.buffers.depth.setTest(!0),J.buffers.depth.setMask(!0),J.buffers.color.setMask(!0),J.setPolygonOffset(!1)}function Oe(e,t,n,i){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===_.state.transmissionRenderTarget[i.id]&&(_.state.transmissionRenderTarget[i.id]=new c_(1,1,{generateMipmaps:!0,type:K.has("EXT_color_buffer_half_float")||K.has("EXT_color_buffer_float")?mg:og,minFilter:sg,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Zv.workingColorSpace}));const a=_.state.transmissionRenderTarget[i.id],s=i.viewport||A;a.setSize(s.z*x.transmissionResolutionScale,s.w*x.transmissionResolutionScale);const o=x.getRenderTarget(),l=x.getActiveCubeFace(),c=x.getActiveMipmapLevel();x.setRenderTarget(a),x.getClearColor(L),I=x.getClearAlpha(),I<1&&x.setClearColor(16777215,.5),x.clear(),Y&&pe.render(n);const d=x.toneMapping;x.toneMapping=0;const u=i.viewport;if(void 0!==i.viewport&&(i.viewport=void 0),_.setupLightsView(i),!0===H&&ue.setGlobalState(x.clippingPlanes,i),Ne(e,n,i),te.updateMultisampleRenderTarget(a),te.updateRenderTargetMipmap(a),!1===K.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let r=0,a=t.length;r<a;r++){const a=t[r],{object:s,geometry:o,material:l,group:c}=a;if(2===l.side&&s.layers.test(i.layers)){const t=l.side;l.side=1,l.needsUpdate=!0,Be(s,n,i,o,l,c),l.side=t,l.needsUpdate=!0,e=!0}}!0===e&&(te.updateMultisampleRenderTarget(a),te.updateRenderTargetMipmap(a))}x.setRenderTarget(o,l,c),x.setClearColor(L,I),void 0!==u&&(i.viewport=u),x.toneMapping=d}function Ne(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,a=e.length;r<a;r++){const a=e[r],{object:s,geometry:o,group:l}=a;let c=a.material;!0===c.allowOverride&&null!==i&&(c=i),s.layers.test(n.layers)&&Be(s,t,n,o,c,l)}}function Be(e,t,n,i,r,a){e.onBeforeRender(x,t,n,i,r,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(x,t,n,i,e,a),!0===r.transparent&&2===r.side&&!1===r.forceSinglePass?(r.side=1,r.needsUpdate=!0,x.renderBufferDirect(n,t,i,r,e,a),r.side=0,r.needsUpdate=!0,x.renderBufferDirect(n,t,i,r,e,a),r.side=2):x.renderBufferDirect(n,t,i,r,e,a),e.onAfterRender(x,t,n,i,r,a)}function Fe(e,t,n){!0!==t.isScene&&(t=q);const i=ee.get(e),r=_.state.lights,a=_.state.shadowsArray,s=r.state.version,o=oe.getParameters(e,r.state,a,t,n),l=oe.getProgramCacheKey(o);let c=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?ie:ne).get(e.envMap||i.environment),i.envMapRotation=null!==i.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===c&&(e.addEventListener("dispose",Ce),c=new Map,i.programs=c);let d=c.get(l);if(void 0!==d){if(i.currentProgram===d&&i.lightsStateVersion===s)return ze(e,o),d}else o.uniforms=oe.getUniforms(e),e.onBeforeCompile(o,x),d=oe.acquireProgram(o,l),c.set(l,d),i.uniforms=o.uniforms;const u=i.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(u.clippingPlanes=ue.uniform),ze(e,o),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=s,i.needsLights&&(u.ambientLightColor.value=r.state.ambient,u.lightProbe.value=r.state.probe,u.directionalLights.value=r.state.directional,u.directionalLightShadows.value=r.state.directionalShadow,u.spotLights.value=r.state.spot,u.spotLightShadows.value=r.state.spotShadow,u.rectAreaLights.value=r.state.rectArea,u.ltc_1.value=r.state.rectAreaLTC1,u.ltc_2.value=r.state.rectAreaLTC2,u.pointLights.value=r.state.point,u.pointLightShadows.value=r.state.pointShadow,u.hemisphereLights.value=r.state.hemi,u.directionalShadowMap.value=r.state.directionalShadowMap,u.directionalShadowMatrix.value=r.state.directionalShadowMatrix,u.spotShadowMap.value=r.state.spotShadowMap,u.spotLightMatrix.value=r.state.spotLightMatrix,u.spotLightMap.value=r.state.spotLightMap,u.pointShadowMap.value=r.state.pointShadowMap,u.pointShadowMatrix.value=r.state.pointShadowMatrix),i.currentProgram=d,i.uniformsList=null,d}function Ue(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=gS.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function ze(e,t){const n=ee.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Ie.setAnimationLoop((function(e){ke&&ke(e)})),"undefined"!=typeof self&&Ie.setContext(self),this.setAnimationLoop=function(e){ke=e,Se.setAnimationLoop(e),null===e?Ie.stop():Ie.start()},Se.addEventListener("sessionstart",De),Se.addEventListener("sessionend",Le),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void kv("WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===w)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Se.enabled&&!0===Se.isPresenting&&(!0===Se.cameraAutoUpdate&&Se.updateCamera(t),t=Se.getCamera()),!0===e.isScene&&e.onBeforeRender(x,e,t,E),_=de.get(e,y.length),_.init(t),y.push(_),W.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),V.setFromProjectionMatrix(W,yv,t.reversedDepth),$=this.localClippingEnabled,H=ue.init(this.clippingPlanes,$),v=ce.get(e,b.length),v.init(),b.push(v),!0===Se.enabled&&!0===Se.isPresenting){const e=x.xr.getDepthSensingMesh();null!==e&&Pe(e,t,-1/0,x.sortObjects)}Pe(e,t,0,x.sortObjects),v.finish(),!0===x.sortObjects&&v.sort(N,B),Y=!1===Se.enabled||!1===Se.isPresenting||!1===Se.hasDepthSensing(),Y&&pe.addToRenderList(v,e),this.info.render.frame++,!0===H&&ue.beginShadows();const n=_.state.shadowsArray;he.render(n,e,t),!0===H&&ue.endShadows(),!0===this.info.autoReset&&this.info.reset();const i=v.opaque,r=v.transmissive;if(_.setupLights(),t.isArrayCamera){const n=t.cameras;if(r.length>0)for(let t=0,a=n.length;t<a;t++){Oe(i,r,e,n[t])}Y&&pe.render(e);for(let t=0,i=n.length;t<i;t++){const i=n[t];Re(v,e,i,i.viewport)}}else r.length>0&&Oe(i,r,e,t),Y&&pe.render(e),Re(v,e,t);null!==E&&0===T&&(te.updateMultisampleRenderTarget(E),te.updateRenderTargetMipmap(E)),!0===e.isScene&&e.onAfterRender(x,e,t),_e.resetDefaultState(),M=-1,C=null,y.pop(),y.length>0?(_=y[y.length-1],!0===H&&ue.setGlobalState(x.clippingPlanes,_.state.camera)):_=null,b.pop(),v=b.length>0?b[b.length-1]:null},this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(e,t,n){const i=ee.get(e);i.__autoAllocateDepthBuffer=!1===e.resolveDepthBuffer,!1===i.__autoAllocateDepthBuffer&&(i.__useRenderToTexture=!1),ee.get(e.texture).__webglTexture=t,ee.get(e.depthTexture).__webglTexture=i.__autoAllocateDepthBuffer?void 0:n,i.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(e,t){const n=ee.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t};const Ve=ye.createFramebuffer();this.setRenderTarget=function(e,t=0,n=0){E=e,S=t,T=n;let i=!0,r=null,a=!1,s=!1;if(e){const o=ee.get(e);if(void 0!==o.__useDefaultFramebuffer)J.bindFramebuffer(ye.FRAMEBUFFER,null),i=!1;else if(void 0===o.__webglFramebuffer)te.setupRenderTarget(e);else if(o.__hasExternalTextures)te.rebindTextures(e,ee.get(e.texture).__webglTexture,ee.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){const t=e.depthTexture;if(o.__boundDepthTexture!==t){if(null!==t&&ee.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");te.setupDepthRenderbuffer(e)}}const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(s=!0);const c=ee.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=Array.isArray(c[t])?c[t][n]:c[t],a=!0):r=e.samples>0&&!1===te.useMultisampledRTT(e)?ee.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,A.copy(e.viewport),k.copy(e.scissor),D=e.scissorTest}else A.copy(F).multiplyScalar(O).floor(),k.copy(U).multiplyScalar(O).floor(),D=z;0!==n&&(r=Ve);if(J.bindFramebuffer(ye.FRAMEBUFFER,r)&&i&&J.drawBuffers(e,r),J.viewport(A),J.scissor(k),J.setScissorTest(D),a){const i=ee.get(e.texture);ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_CUBE_MAP_POSITIVE_X+t,i.__webglTexture,n)}else if(s){const i=t;for(let t=0;t<e.textures.length;t++){const r=ee.get(e.textures[t]);ye.framebufferTextureLayer(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0+t,r.__webglTexture,n,i)}}else if(null!==e&&0!==n){const t=ee.get(e.texture);ye.framebufferTexture2D(ye.FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,t.__webglTexture,n)}M=-1},this.readRenderTargetPixels=function(e,t,n,i,r,a,s,o=0){if(!e||!e.isWebGLRenderTarget)return void kv("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let l=ee.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(l=l[s]),l){J.bindFramebuffer(ye.FRAMEBUFFER,l);try{const s=e.textures[o],l=s.format,c=s.type;if(!Z.textureFormatReadable(l))return void kv("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!Z.textureTypeReadable(c))return void kv("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&(e.textures.length>1&&ye.readBuffer(ye.COLOR_ATTACHMENT0+o),ye.readPixels(t,n,i,r,ve.convert(l),ve.convert(c),a))}finally{const e=null!==E?ee.get(E).__webglFramebuffer:null;J.bindFramebuffer(ye.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,i,r,a,s,o=0){if(!e||!e.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let l=ee.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(l=l[s]),l){if(t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r){J.bindFramebuffer(ye.FRAMEBUFFER,l);const s=e.textures[o],c=s.format,d=s.type;if(!Z.textureFormatReadable(c))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Z.textureTypeReadable(d))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const u=ye.createBuffer();ye.bindBuffer(ye.PIXEL_PACK_BUFFER,u),ye.bufferData(ye.PIXEL_PACK_BUFFER,a.byteLength,ye.STREAM_READ),e.textures.length>1&&ye.readBuffer(ye.COLOR_ATTACHMENT0+o),ye.readPixels(t,n,i,r,ve.convert(c),ve.convert(d),0);const h=null!==E?ee.get(E).__webglFramebuffer:null;J.bindFramebuffer(ye.FRAMEBUFFER,h);const p=ye.fenceSync(ye.SYNC_GPU_COMMANDS_COMPLETE,0);return ye.flush(),await function(e,t,n){return new Promise((function(i,r){setTimeout((function a(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:r();break;case e.TIMEOUT_EXPIRED:setTimeout(a,n);break;default:i()}}),n)}))}(ye,p,4),ye.bindBuffer(ye.PIXEL_PACK_BUFFER,u),ye.getBufferSubData(ye.PIXEL_PACK_BUFFER,0,a),ye.deleteBuffer(u),ye.deleteSync(p),a}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e,t=null,n=0){const i=Math.pow(2,-n),r=Math.floor(e.image.width*i),a=Math.floor(e.image.height*i),s=null!==t?t.x:0,o=null!==t?t.y:0;te.setTexture2D(e,0),ye.copyTexSubImage2D(ye.TEXTURE_2D,n,0,0,s,o,r,a),J.unbindTexture()};const He=ye.createFramebuffer(),$e=ye.createFramebuffer();this.copyTextureToTexture=function(e,t,n=null,i=null,r=0,a=null){let s,o,l,c,d,u,h,p,m;null===a&&(0!==r?(Dv("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),a=r,r=0):a=0);const f=e.isCompressedTexture?e.mipmaps[a]:e.image;if(null!==n)s=n.max.x-n.min.x,o=n.max.y-n.min.y,l=n.isBox3?n.max.z-n.min.z:1,c=n.min.x,d=n.min.y,u=n.isBox3?n.min.z:0;else{const t=Math.pow(2,-r);s=Math.floor(f.width*t),o=Math.floor(f.height*t),l=e.isDataArrayTexture?f.depth:e.isData3DTexture?Math.floor(f.depth*t):1,c=0,d=0,u=0}null!==i?(h=i.x,p=i.y,m=i.z):(h=0,p=0,m=0);const g=ve.convert(t.format),v=ve.convert(t.type);let _;t.isData3DTexture?(te.setTexture3D(t,0),_=ye.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?(te.setTexture2DArray(t,0),_=ye.TEXTURE_2D_ARRAY):(te.setTexture2D(t,0),_=ye.TEXTURE_2D),ye.pixelStorei(ye.UNPACK_FLIP_Y_WEBGL,t.flipY),ye.pixelStorei(ye.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),ye.pixelStorei(ye.UNPACK_ALIGNMENT,t.unpackAlignment);const b=ye.getParameter(ye.UNPACK_ROW_LENGTH),y=ye.getParameter(ye.UNPACK_IMAGE_HEIGHT),x=ye.getParameter(ye.UNPACK_SKIP_PIXELS),w=ye.getParameter(ye.UNPACK_SKIP_ROWS),S=ye.getParameter(ye.UNPACK_SKIP_IMAGES);ye.pixelStorei(ye.UNPACK_ROW_LENGTH,f.width),ye.pixelStorei(ye.UNPACK_IMAGE_HEIGHT,f.height),ye.pixelStorei(ye.UNPACK_SKIP_PIXELS,c),ye.pixelStorei(ye.UNPACK_SKIP_ROWS,d),ye.pixelStorei(ye.UNPACK_SKIP_IMAGES,u);const T=e.isDataArrayTexture||e.isData3DTexture,E=t.isDataArrayTexture||t.isData3DTexture;if(e.isDepthTexture){const n=ee.get(e),i=ee.get(t),f=ee.get(n.__renderTarget),g=ee.get(i.__renderTarget);J.bindFramebuffer(ye.READ_FRAMEBUFFER,f.__webglFramebuffer),J.bindFramebuffer(ye.DRAW_FRAMEBUFFER,g.__webglFramebuffer);for(let n=0;n<l;n++)T&&(ye.framebufferTextureLayer(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ee.get(e).__webglTexture,r,u+n),ye.framebufferTextureLayer(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ee.get(t).__webglTexture,a,m+n)),ye.blitFramebuffer(c,d,s,o,h,p,s,o,ye.DEPTH_BUFFER_BIT,ye.NEAREST);J.bindFramebuffer(ye.READ_FRAMEBUFFER,null),J.bindFramebuffer(ye.DRAW_FRAMEBUFFER,null)}else if(0!==r||e.isRenderTargetTexture||ee.has(e)){const n=ee.get(e),i=ee.get(t);J.bindFramebuffer(ye.READ_FRAMEBUFFER,He),J.bindFramebuffer(ye.DRAW_FRAMEBUFFER,$e);for(let e=0;e<l;e++)T?ye.framebufferTextureLayer(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,n.__webglTexture,r,u+e):ye.framebufferTexture2D(ye.READ_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,n.__webglTexture,r),E?ye.framebufferTextureLayer(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,i.__webglTexture,a,m+e):ye.framebufferTexture2D(ye.DRAW_FRAMEBUFFER,ye.COLOR_ATTACHMENT0,ye.TEXTURE_2D,i.__webglTexture,a),0!==r?ye.blitFramebuffer(c,d,s,o,h,p,s,o,ye.COLOR_BUFFER_BIT,ye.NEAREST):E?ye.copyTexSubImage3D(_,a,h,p,m+e,c,d,s,o):ye.copyTexSubImage2D(_,a,h,p,c,d,s,o);J.bindFramebuffer(ye.READ_FRAMEBUFFER,null),J.bindFramebuffer(ye.DRAW_FRAMEBUFFER,null)}else E?e.isDataTexture||e.isData3DTexture?ye.texSubImage3D(_,a,h,p,m,s,o,l,g,v,f.data):t.isCompressedArrayTexture?ye.compressedTexSubImage3D(_,a,h,p,m,s,o,l,g,f.data):ye.texSubImage3D(_,a,h,p,m,s,o,l,g,v,f):e.isDataTexture?ye.texSubImage2D(ye.TEXTURE_2D,a,h,p,s,o,g,v,f.data):e.isCompressedTexture?ye.compressedTexSubImage2D(ye.TEXTURE_2D,a,h,p,f.width,f.height,g,f.data):ye.texSubImage2D(ye.TEXTURE_2D,a,h,p,s,o,g,v,f);ye.pixelStorei(ye.UNPACK_ROW_LENGTH,b),ye.pixelStorei(ye.UNPACK_IMAGE_HEIGHT,y),ye.pixelStorei(ye.UNPACK_SKIP_PIXELS,x),ye.pixelStorei(ye.UNPACK_SKIP_ROWS,w),ye.pixelStorei(ye.UNPACK_SKIP_IMAGES,S),0===a&&t.generateMipmaps&&ye.generateMipmap(_),J.unbindTexture()},this.initRenderTarget=function(e){void 0===ee.get(e).__webglFramebuffer&&te.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?te.setTextureCube(e,0):e.isData3DTexture?te.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?te.setTexture2DArray(e,0):te.setTexture2D(e,0),J.unbindTexture()},this.resetState=function(){S=0,T=0,E=null,J.reset(),_e.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return yv}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Zv._getDrawingBufferColorSpace(e),t.unpackColorSpace=Zv._getUnpackColorSpace()}}function hT(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var pT={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function mT(e){pT=e}var fT={exec:()=>null};function gT(e,t=""){let n="string"==typeof e?e:e.source,i={replace:(e,t)=>{let r="string"==typeof t?t:t.source;return r=r.replace(_T.caret,"$1"),n=n.replace(e,r),i},getRegex:()=>new RegExp(n,t)};return i}var vT=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),_T={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},bT=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,yT=/(?:[*+-]|\d{1,9}[.)])/,xT=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,wT=gT(xT).replace(/bull/g,yT).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),ST=gT(xT).replace(/bull/g,yT).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),TT=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,ET=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,MT=gT(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",ET).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),CT=gT(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,yT).getRegex(),AT="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",kT=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,DT=gT("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",kT).replace("tag",AT).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),LT=gT(TT).replace("hr",bT).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",AT).getRegex(),IT={blockquote:gT(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",LT).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:MT,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:bT,html:DT,lheading:wT,list:CT,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:LT,table:fT,text:/^[^\n]+/},PT=gT("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",bT).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",AT).getRegex(),RT={...IT,lheading:ST,table:PT,paragraph:gT(TT).replace("hr",bT).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",PT).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",AT).getRegex()},OT={...IT,html:gT("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",kT).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:fT,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:gT(TT).replace("hr",bT).replace("heading"," *#{1,6} *[^\n]").replace("lheading",wT).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},NT=/^( {2,}|\\)\n(?!\s*$)/,BT=/[\p{P}\p{S}]/u,FT=/[\s\p{P}\p{S}]/u,UT=/[^\s\p{P}\p{S}]/u,zT=gT(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,FT).getRegex(),VT=/(?!~)[\p{P}\p{S}]/u,HT=gT(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",vT?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),$T=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,WT=gT($T,"u").replace(/punct/g,BT).getRegex(),GT=gT($T,"u").replace(/punct/g,VT).getRegex(),jT="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",qT=gT(jT,"gu").replace(/notPunctSpace/g,UT).replace(/punctSpace/g,FT).replace(/punct/g,BT).getRegex(),YT=gT(jT,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,VT).getRegex(),XT=gT("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,UT).replace(/punctSpace/g,FT).replace(/punct/g,BT).getRegex(),KT=gT(/\\(punct)/,"gu").replace(/punct/g,BT).getRegex(),ZT=gT(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),JT=gT(kT).replace("(?:--\x3e|$)","--\x3e").getRegex(),QT=gT("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",JT).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),eE=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,tE=gT(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",eE).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),nE=gT(/^!?\[(label)\]\[(ref)\]/).replace("label",eE).replace("ref",ET).getRegex(),iE=gT(/^!?\[(ref)\](?:\[\])?/).replace("ref",ET).getRegex(),rE=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,aE={_backpedal:fT,anyPunctuation:KT,autolink:ZT,blockSkip:HT,br:NT,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:fT,emStrongLDelim:WT,emStrongRDelimAst:qT,emStrongRDelimUnd:XT,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:tE,nolink:iE,punctuation:zT,reflink:nE,reflinkSearch:gT("reflink|nolink(?!\\()","g").replace("reflink",nE).replace("nolink",iE).getRegex(),tag:QT,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:fT},sE={...aE,link:gT(/^!?\[(label)\]\((.*?)\)/).replace("label",eE).getRegex(),reflink:gT(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",eE).getRegex()},oE={...aE,emStrongRDelimAst:YT,emStrongLDelim:GT,url:gT(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",rE).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:gT(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",rE).getRegex()},lE={...oE,br:gT(NT).replace("{2,}","*").getRegex(),text:gT(oE.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},cE={normal:IT,gfm:RT,pedantic:OT},dE={normal:aE,gfm:oE,breaks:lE,pedantic:sE},uE={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},hE=e=>uE[e];function pE(e,t){if(t){if(_T.escapeTest.test(e))return e.replace(_T.escapeReplace,hE)}else if(_T.escapeTestNoEncode.test(e))return e.replace(_T.escapeReplaceNoEncode,hE);return e}function mE(e){try{e=encodeURI(e).replace(_T.percentDecode,"%")}catch{return null}return e}function fE(e,t){let n=e.replace(_T.findPipe,((e,t,n)=>{let i=!1,r=t;for(;--r>=0&&"\\"===n[r];)i=!i;return i?"|":" |"})).split(_T.splitPipe),i=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(_T.slashPipe,"|");return n}function gE(e,t,n){let i=e.length;if(0===i)return"";let r=0;for(;r<i;){let a=e.charAt(i-r-1);if(a!==t||n){if(a===t||!n)break;r++}else r++}return e.slice(0,i-r)}function vE(e,t,n,i,r){let a=t.href,s=t.title||null,o=e[1].replace(r.other.outputLinkReplace,"$1");i.state.inLink=!0;let l={type:"!"===e[0].charAt(0)?"image":"link",raw:n,href:a,title:s,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,l}var _E=class{options;rules;lexer;constructor(e){this.options=e||pT}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:gE(e,"\n")}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let e=t[0],n=function(e,t,n){let i=e.match(n.other.indentCodeCompensation);if(null===i)return t;let r=i[1];return t.split("\n").map((e=>{let t=e.match(n.other.beginningSpace);if(null===t)return e;let[i]=t;return i.length>=r.length?e.slice(r.length):e})).join("\n")}(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let t=gE(e,"#");(this.options.pedantic||!t||this.rules.other.endingSpaceChar.test(t))&&(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:gE(t[0],"\n")}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let e=gE(t[0],"\n").split("\n"),n="",i="",r=[];for(;e.length>0;){let t,a=!1,s=[];for(t=0;t<e.length;t++)if(this.rules.other.blockquoteStart.test(e[t]))s.push(e[t]),a=!0;else{if(a)break;s.push(e[t])}e=e.slice(t);let o=s.join("\n"),l=o.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}\n${o}`:o,i=i?`${i}\n${l}`:l;let c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,r,!0),this.lexer.state.top=c,0===e.length)break;let d=r.at(-1);if("code"===d?.type)break;if("blockquote"===d?.type){let t=d,a=t.raw+"\n"+e.join("\n"),s=this.blockquote(a);r[r.length-1]=s,n=n.substring(0,n.length-t.raw.length)+s.raw,i=i.substring(0,i.length-t.text.length)+s.text;break}if("list"!==d?.type);else{let t=d,a=t.raw+"\n"+e.join("\n"),s=this.list(a);r[r.length-1]=s,n=n.substring(0,n.length-d.raw.length)+s.raw,i=i.substring(0,i.length-t.raw.length)+s.raw,e=a.substring(r.at(-1).raw.length).split("\n")}}return{type:"blockquote",raw:n,tokens:r,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),i=n.length>1,r={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");let a=this.rules.other.listItemRegex(n),s=!1;for(;e;){let n=!1,i="",o="";if(!(t=a.exec(e))||this.rules.block.hr.test(e))break;i=t[0],e=e.substring(i.length);let l=t[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,(e=>" ".repeat(3*e.length))),c=e.split("\n",1)[0],d=!l.trim(),u=0;if(this.options.pedantic?(u=2,o=l.trimStart()):d?u=t[1].length+1:(u=t[2].search(this.rules.other.nonSpaceChar),u=u>4?1:u,o=l.slice(u),u+=t[1].length),d&&this.rules.other.blankLine.test(c)&&(i+=c+"\n",e=e.substring(c.length+1),n=!0),!n){let t=this.rules.other.nextBulletRegex(u),n=this.rules.other.hrRegex(u),r=this.rules.other.fencesBeginRegex(u),a=this.rules.other.headingBeginRegex(u),s=this.rules.other.htmlBeginRegex(u);for(;e;){let h,p=e.split("\n",1)[0];if(c=p,this.options.pedantic?(c=c.replace(this.rules.other.listReplaceNesting,"  "),h=c):h=c.replace(this.rules.other.tabCharGlobal,"    "),r.test(c)||a.test(c)||s.test(c)||t.test(c)||n.test(c))break;if(h.search(this.rules.other.nonSpaceChar)>=u||!c.trim())o+="\n"+h.slice(u);else{if(d||l.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||r.test(l)||a.test(l)||n.test(l))break;o+="\n"+c}!d&&!c.trim()&&(d=!0),i+=p+"\n",e=e.substring(p.length+1),l=h.slice(u)}}r.loose||(s?r.loose=!0:this.rules.other.doubleBlankLine.test(i)&&(s=!0)),r.items.push({type:"list_item",raw:i,task:!!this.options.gfm&&this.rules.other.listIsTask.test(o),loose:!1,text:o,tokens:[]}),r.raw+=i}let o=r.items.at(-1);if(!o)return;o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd(),r.raw=r.raw.trimEnd();for(let e of r.items){if(this.lexer.state.top=!1,e.tokens=this.lexer.blockTokens(e.text,[]),e.task){if(e.text=e.text.replace(this.rules.other.listReplaceTask,""),"text"===e.tokens[0]?.type||"paragraph"===e.tokens[0]?.type){e.tokens[0].raw=e.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),e.tokens[0].text=e.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let e=this.lexer.inlineQueue.length-1;e>=0;e--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[e].src)){this.lexer.inlineQueue[e].src=this.lexer.inlineQueue[e].src.replace(this.rules.other.listReplaceTask,"");break}}let t=this.rules.other.listTaskCheckbox.exec(e.raw);if(t){let n={type:"checkbox",raw:t[0]+" ",checked:"[ ]"!==t[0]};e.checked=n.checked,r.loose?e.tokens[0]&&["paragraph","text"].includes(e.tokens[0].type)&&"tokens"in e.tokens[0]&&e.tokens[0].tokens?(e.tokens[0].raw=n.raw+e.tokens[0].raw,e.tokens[0].text=n.raw+e.tokens[0].text,e.tokens[0].tokens.unshift(n)):e.tokens.unshift({type:"paragraph",raw:n.raw,text:n.raw,tokens:[n]}):e.tokens.unshift(n)}}if(!r.loose){let t=e.tokens.filter((e=>"space"===e.type)),n=t.length>0&&t.some((e=>this.rules.other.anyLine.test(e.raw)));r.loose=n}}if(r.loose)for(let e of r.items){e.loose=!0;for(let t of e.tokens)"text"===t.type&&(t.type="paragraph")}return r}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:i}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let n=fE(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===i.length){for(let e of i)this.rules.other.tableAlignRight.test(e)?a.align.push("right"):this.rules.other.tableAlignCenter.test(e)?a.align.push("center"):this.rules.other.tableAlignLeft.test(e)?a.align.push("left"):a.align.push(null);for(let e=0;e<n.length;e++)a.header.push({text:n[e],tokens:this.lexer.inline(n[e]),header:!0,align:a.align[e]});for(let e of r)a.rows.push(fE(e,a.header.length).map(((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:a.align[t]}))));return a}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let t=gE(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{let e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let n=0;for(let i=0;i<e.length;i++)if("\\"===e[i])i++;else if(e[i]===t[0])n++;else if(e[i]===t[1]&&(n--,n<0))return i;return n>0?-2:-1}(t[2],"()");if(-2===e)return;if(e>-1){let n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],i="";if(this.options.pedantic){let e=this.rules.other.pedanticHrefTitle.exec(n);e&&(n=e[1],i=e[3])}else i=t[3]?t[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(n=this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?n.slice(1):n.slice(1,-1)),vE(t,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=t[(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!e){let e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return vE(n,e,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!(!i||i[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!i[1]&&!i[2]||!n||this.rules.inline.punctuation.exec(n))){let n,r,a=[...i[0]].length-1,s=a,o=0,l="*"===i[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+a);null!=(i=l.exec(t));){if(n=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!n)continue;if(r=[...n].length,i[3]||i[4]){s+=r;continue}if((i[5]||i[6])&&a%3&&!((a+r)%3)){o+=r;continue}if(s-=r,s>0)continue;r=Math.min(r,r+s+o);let t=[...i[0]][0].length,l=e.slice(0,a+i.index+t+r);if(Math.min(a,r)%2){let e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}let c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(e),i=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return n&&i&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let e,n;return"@"===t[2]?(e=t[1],n="mailto:"+e):(e=t[1],n=e),{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,n;if("@"===t[2])e=t[0],n="mailto:"+e;else{let i;do{i=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(i!==t[0]);e=t[0],n="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},bE=class e{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||pT,this.options.tokenizer=this.options.tokenizer||new _E,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:_T,block:cE.normal,inline:dE.normal};this.options.pedantic?(t.block=cE.pedantic,t.inline=dE.pedantic):this.options.gfm&&(t.block=cE.gfm,this.options.breaks?t.inline=dE.breaks:t.inline=dE.gfm),this.tokenizer.rules=t}static get rules(){return{block:cE,inline:dE}}static lex(t,n){return new e(n).lex(t)}static lexInline(t,n){return new e(n).inlineTokens(t)}lex(e){e=e.replace(_T.carriageReturn,"\n"),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){for(this.options.pedantic&&(e=e.replace(_T.tabCharGlobal,"    ").replace(_T.spaceLine,""));e;){let i;if(this.options.extensions?.block?.some((n=>!!(i=n.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0))))continue;if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length);let n=t.at(-1);1===i.raw.length&&void 0!==n?n.raw+="\n":t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length);let n=t.at(-1);"paragraph"===n?.type||"text"===n?.type?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+i.raw,n.text+="\n"+i.text,this.inlineQueue.at(-1).src=n.text):t.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length);let n=t.at(-1);"paragraph"===n?.type||"text"===n?.type?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+i.raw,n.text+="\n"+i.raw,this.inlineQueue.at(-1).src=n.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title},t.push(i));continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}let r=e;if(this.options.extensions?.startBlock){let t,n=1/0,i=e.slice(1);this.options.extensions.startBlock.forEach((e=>{t=e.call({lexer:this},i),"number"==typeof t&&t>=0&&(n=Math.min(n,t))})),n<1/0&&n>=0&&(r=e.substring(0,n+1))}if(this.state.top&&(i=this.tokenizer.paragraph(r))){let a=t.at(-1);n&&"paragraph"===a?.type?(a.raw+=(a.raw.endsWith("\n")?"":"\n")+i.raw,a.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):t.push(i),n=r.length!==e.length,e=e.substring(i.raw.length)}else if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length);let n=t.at(-1);"text"===n?.type?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+i.raw,n.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=n.text):t.push(i)}else if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,i=e,r=null;if(this.tokens.links){let e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(r=this.tokenizer.rules.inline.reflinkSearch.exec(i));)e.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(r=this.tokenizer.rules.inline.anyPunctuation.exec(i));)i=i.slice(0,r.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(r=this.tokenizer.rules.inline.blockSkip.exec(i));)n=r[2]?r[2].length:0,i=i.slice(0,r.index+n)+"["+"a".repeat(r[0].length-n-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);i=this.options.hooks?.emStrongMask?.call({lexer:this},i)??i;let a=!1,s="";for(;e;){let n;if(a||(s=""),a=!1,this.options.extensions?.inline?.some((i=>!!(n=i.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0))))continue;if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length);let i=t.at(-1);"text"===n.type&&"text"===i?.type?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(n=this.tokenizer.emStrong(e,i,s)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.autolink(e)){e=e.substring(n.raw.length),t.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e))){e=e.substring(n.raw.length),t.push(n);continue}let r=e;if(this.options.extensions?.startInline){let t,n=1/0,i=e.slice(1);this.options.extensions.startInline.forEach((e=>{t=e.call({lexer:this},i),"number"==typeof t&&t>=0&&(n=Math.min(n,t))})),n<1/0&&n>=0&&(r=e.substring(0,n+1))}if(n=this.tokenizer.inlineText(r)){e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(s=n.raw.slice(-1)),a=!0;let i=t.at(-1);"text"===i?.type?(i.raw+=n.raw,i.text+=n.text):t.push(n)}else if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return t}},yE=class{options;parser;constructor(e){this.options=e||pT}space(e){return""}code({text:e,lang:t,escaped:n}){let i=(t||"").match(_T.notSpaceStart)?.[0],r=e.replace(_T.endingNewline,"")+"\n";return i?'<pre><code class="language-'+pE(i)+'">'+(n?r:pE(r,!0))+"</code></pre>\n":"<pre><code>"+(n?r:pE(r,!0))+"</code></pre>\n"}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return"<hr>\n"}list(e){let t=e.ordered,n=e.start,i="";for(let t=0;t<e.items.length;t++){let n=e.items[t];i+=this.listitem(n)}let r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+i+"</"+r+">\n"}listitem(e){return`<li>${this.parser.parse(e.tokens)}</li>\n`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t="",n="";for(let t=0;t<e.header.length;t++)n+=this.tablecell(e.header[t]);t+=this.tablerow({text:n});let i="";for(let t=0;t<e.rows.length;t++){let r=e.rows[t];n="";for(let e=0;e<r.length;e++)n+=this.tablecell(r[e]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+i+"</table>\n"}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${pE(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){let i=this.parser.parseInline(n),r=mE(e);if(null===r)return i;let a='<a href="'+(e=r)+'"';return t&&(a+=' title="'+pE(t)+'"'),a+=">"+i+"</a>",a}image({href:e,title:t,text:n,tokens:i}){i&&(n=this.parser.parseInline(i,this.parser.textRenderer));let r=mE(e);if(null===r)return pE(n);let a=`<img src="${e=r}" alt="${n}"`;return t&&(a+=` title="${pE(t)}"`),a+=">",a}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:pE(e.text)}},xE=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}checkbox({raw:e}){return e}},wE=class e{options;renderer;textRenderer;constructor(e){this.options=e||pT,this.options.renderer=this.options.renderer||new yE,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new xE}static parse(t,n){return new e(n).parse(t)}static parseInline(t,n){return new e(n).parseInline(t)}parse(e){let t="";for(let n=0;n<e.length;n++){let i=e[n];if(this.options.extensions?.renderers?.[i.type]){let e=i,n=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==n||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(e.type)){t+=n||"";continue}}let r=i;switch(r.type){case"space":t+=this.renderer.space(r);break;case"hr":t+=this.renderer.hr(r);break;case"heading":t+=this.renderer.heading(r);break;case"code":t+=this.renderer.code(r);break;case"table":t+=this.renderer.table(r);break;case"blockquote":t+=this.renderer.blockquote(r);break;case"list":t+=this.renderer.list(r);break;case"checkbox":t+=this.renderer.checkbox(r);break;case"html":t+=this.renderer.html(r);break;case"def":t+=this.renderer.def(r);break;case"paragraph":t+=this.renderer.paragraph(r);break;case"text":t+=this.renderer.text(r);break;default:{let e='Token with "'+r.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return t}parseInline(e,t=this.renderer){let n="";for(let i=0;i<e.length;i++){let r=e[i];if(this.options.extensions?.renderers?.[r.type]){let e=this.options.extensions.renderers[r.type].call({parser:this},r);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){n+=e||"";continue}}let a=r;switch(a.type){case"escape":case"text":n+=t.text(a);break;case"html":n+=t.html(a);break;case"link":n+=t.link(a);break;case"image":n+=t.image(a);break;case"checkbox":n+=t.checkbox(a);break;case"strong":n+=t.strong(a);break;case"em":n+=t.em(a);break;case"codespan":n+=t.codespan(a);break;case"br":n+=t.br(a);break;case"del":n+=t.del(a);break;default:{let e='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}},SE=class{options;block;constructor(e){this.options=e||pT}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?bE.lex:bE.lexInline}provideParser(){return this.block?wE.parse:wE.parseInline}},TE=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=wE;Renderer=yE;TextRenderer=xE;Lexer=bE;Tokenizer=_E;Hooks=SE;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(let i of e)switch(n=n.concat(t.call(this,i)),i.type){case"table":{let e=i;for(let i of e.header)n=n.concat(this.walkTokens(i.tokens,t));for(let i of e.rows)for(let e of i)n=n.concat(this.walkTokens(e.tokens,t));break}case"list":{let e=i;n=n.concat(this.walkTokens(e.items,t));break}default:{let e=i;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach((i=>{let r=e[i].flat(1/0);n=n.concat(this.walkTokens(r,t))})):e.tokens&&(n=n.concat(this.walkTokens(e.tokens,t)))}}return n}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach((e=>{let n={...e};if(n.async=this.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){let n=t.renderers[e.name];t.renderers[e.name]=n?function(...t){let i=e.renderer.apply(this,t);return!1===i&&(i=n.apply(this,t)),i}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");let n=t[e.level];n?n.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)})),n.extensions=t),e.renderer){let t=this.defaults.renderer||new yE(this.defaults);for(let n in e.renderer){if(!(n in t))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;let i=n,r=e.renderer[i],a=t[i];t[i]=(...e)=>{let n=r.apply(t,e);return!1===n&&(n=a.apply(t,e)),n||""}}n.renderer=t}if(e.tokenizer){let t=this.defaults.tokenizer||new _E(this.defaults);for(let n in e.tokenizer){if(!(n in t))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;let i=n,r=e.tokenizer[i],a=t[i];t[i]=(...e)=>{let n=r.apply(t,e);return!1===n&&(n=a.apply(t,e)),n}}n.tokenizer=t}if(e.hooks){let t=this.defaults.hooks||new SE;for(let n in e.hooks){if(!(n in t))throw new Error(`hook '${n}' does not exist`);if(["options","block"].includes(n))continue;let i=n,r=e.hooks[i],a=t[i];SE.passThroughHooks.has(n)?t[i]=e=>{if(this.defaults.async&&SE.passThroughHooksRespectAsync.has(n))return(async()=>{let n=await r.call(t,e);return a.call(t,n)})();let i=r.call(t,e);return a.call(t,i)}:t[i]=(...e)=>{if(this.defaults.async)return(async()=>{let n=await r.apply(t,e);return!1===n&&(n=await a.apply(t,e)),n})();let n=r.apply(t,e);return!1===n&&(n=a.apply(t,e)),n}}n.hooks=t}if(e.walkTokens){let t=this.defaults.walkTokens,i=e.walkTokens;n.walkTokens=function(e){let n=[];return n.push(i.call(this,e)),t&&(n=n.concat(t.call(this,e))),n}}this.defaults={...this.defaults,...n}})),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return bE.lex(e,t??this.defaults)}parser(e,t){return wE.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{let i={...n},r={...this.defaults,...i},a=this.onError(!!r.silent,!!r.async);if(!0===this.defaults.async&&!1===i.async)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||null===t)return a(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=e),r.async)return(async()=>{let n=r.hooks?await r.hooks.preprocess(t):t,i=await(r.hooks?await r.hooks.provideLexer():e?bE.lex:bE.lexInline)(n,r),a=r.hooks?await r.hooks.processAllTokens(i):i;r.walkTokens&&await Promise.all(this.walkTokens(a,r.walkTokens));let s=await(r.hooks?await r.hooks.provideParser():e?wE.parse:wE.parseInline)(a,r);return r.hooks?await r.hooks.postprocess(s):s})().catch(a);try{r.hooks&&(t=r.hooks.preprocess(t));let n=(r.hooks?r.hooks.provideLexer():e?bE.lex:bE.lexInline)(t,r);r.hooks&&(n=r.hooks.processAllTokens(n)),r.walkTokens&&this.walkTokens(n,r.walkTokens);let i=(r.hooks?r.hooks.provideParser():e?wE.parse:wE.parseInline)(n,r);return r.hooks&&(i=r.hooks.postprocess(i)),i}catch(e){return a(e)}}}onError(e,t){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){let e="<p>An error occurred:</p><pre>"+pE(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}};function EE(e,t){return TE.parse(e,t)}EE.options=EE.setOptions=function(e){return TE.setOptions(e),EE.defaults=TE.defaults,mT(EE.defaults),EE},EE.getDefaults=hT,EE.defaults=pT,EE.use=function(...e){return TE.use(...e),EE.defaults=TE.defaults,mT(EE.defaults),EE},EE.walkTokens=function(e,t){return TE.walkTokens(e,t)},EE.parseInline=TE.parseInline,EE.Parser=wE,EE.parser=wE.parse,EE.Renderer=yE,EE.TextRenderer=xE,EE.Lexer=bE,EE.lexer=bE.lex,EE.Tokenizer=_E,EE.Hooks=SE,EE.parse=EE;EE.options,EE.setOptions,EE.use,EE.walkTokens,EE.parseInline,wE.parse,bE.lex;const{entries:ME,setPrototypeOf:CE,isFrozen:AE,getPrototypeOf:kE,getOwnPropertyDescriptor:DE}=Object;let{freeze:LE,seal:IE,create:PE}=Object,{apply:RE,construct:OE}="undefined"!=typeof Reflect&&Reflect;LE||(LE=function(e){return e}),IE||(IE=function(e){return e}),RE||(RE=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return e.apply(t,i)}),OE||(OE=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new e(...n)});const NE=ZE(Array.prototype.forEach),BE=ZE(Array.prototype.lastIndexOf),FE=ZE(Array.prototype.pop),UE=ZE(Array.prototype.push),zE=ZE(Array.prototype.splice),VE=ZE(String.prototype.toLowerCase),HE=ZE(String.prototype.toString),$E=ZE(String.prototype.match),WE=ZE(String.prototype.replace),GE=ZE(String.prototype.indexOf),jE=ZE(String.prototype.trim),qE=ZE(Object.prototype.hasOwnProperty),YE=ZE(RegExp.prototype.test),XE=(KE=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return OE(KE,t)});var KE;function ZE(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return RE(e,t,i)}}function JE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:VE;CE&&CE(e,null);let i=t.length;for(;i--;){let r=t[i];if("string"==typeof r){const e=n(r);e!==r&&(AE(t)||(t[i]=e),r=e)}e[r]=!0}return e}function QE(e){for(let t=0;t<e.length;t++){qE(e,t)||(e[t]=null)}return e}function eM(e){const t=PE(null);for(const[n,i]of ME(e)){qE(e,n)&&(Array.isArray(i)?t[n]=QE(i):i&&"object"==typeof i&&i.constructor===Object?t[n]=eM(i):t[n]=i)}return t}function tM(e,t){for(;null!==e;){const n=DE(e,t);if(n){if(n.get)return ZE(n.get);if("function"==typeof n.value)return ZE(n.value)}e=kE(e)}return function(){return null}}const nM=LE(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),iM=LE(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),rM=LE(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),aM=LE(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),sM=LE(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),oM=LE(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),lM=LE(["#text"]),cM=LE(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),dM=LE(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),uM=LE(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),hM=LE(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),pM=IE(/\{\{[\w\W]*|[\w\W]*\}\}/gm),mM=IE(/<%[\w\W]*|[\w\W]*%>/gm),fM=IE(/\$\{[\w\W]*/gm),gM=IE(/^data-[\-\w.\u00B7-\uFFFF]+$/),vM=IE(/^aria-[\-\w]+$/),_M=IE(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),bM=IE(/^(?:\w+script|data):/i),yM=IE(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),xM=IE(/^html$/i),wM=IE(/^[a-z][.\w]*(-[.\w]+)+$/i);var SM=Object.freeze({__proto__:null,ARIA_ATTR:vM,ATTR_WHITESPACE:yM,CUSTOM_ELEMENT:wM,DATA_ATTR:gM,DOCTYPE_NAME:xM,ERB_EXPR:mM,IS_ALLOWED_URI:_M,IS_SCRIPT_OR_DATA:bM,MUSTACHE_EXPR:pM,TMPLIT_EXPR:fM});const TM=1,EM=3,MM=7,CM=8,AM=9,kM=function(){return"undefined"==typeof window?null:window},DM=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));const r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML(e){return e},createScriptURL(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};var LM=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kM();const n=t=>e(t);if(n.version="3.3.1",n.removed=[],!t||!t.document||t.document.nodeType!==AM||!t.Element)return n.isSupported=!1,n;let{document:i}=t;const r=i,a=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:l,Element:c,NodeFilter:d,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:p,trustedTypes:m}=t,f=c.prototype,g=tM(f,"cloneNode"),v=tM(f,"remove"),_=tM(f,"nextSibling"),b=tM(f,"childNodes"),y=tM(f,"parentNode");if("function"==typeof o){const e=i.createElement("template");e.content&&e.content.ownerDocument&&(i=e.content.ownerDocument)}let x,w="";const{implementation:S,createNodeIterator:T,createDocumentFragment:E,getElementsByTagName:M}=i,{importNode:C}=r;let A={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof ME&&"function"==typeof y&&S&&void 0!==S.createHTMLDocument;const{MUSTACHE_EXPR:k,ERB_EXPR:D,TMPLIT_EXPR:L,DATA_ATTR:I,ARIA_ATTR:P,IS_SCRIPT_OR_DATA:R,ATTR_WHITESPACE:O,CUSTOM_ELEMENT:N}=SM;let{IS_ALLOWED_URI:B}=SM,F=null;const U=JE({},[...nM,...iM,...rM,...sM,...lM]);let z=null;const V=JE({},[...cM,...dM,...uM,...hM]);let H=Object.seal(PE(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$=null,W=null;const G=Object.seal(PE(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let j=!0,q=!0,Y=!1,X=!0,K=!1,Z=!0,J=!1,Q=!1,ee=!1,te=!1,ne=!1,ie=!1,re=!0,ae=!1;const se="user-content-";let oe=!0,le=!1,ce={},de=null;const ue=JE({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let he=null;const pe=JE({},["audio","video","img","source","image","track"]);let me=null;const fe=JE({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ge="http://www.w3.org/1998/Math/MathML",ve="http://www.w3.org/2000/svg",_e="http://www.w3.org/1999/xhtml";let be=_e,ye=!1,xe=null;const we=JE({},[ge,ve,_e],HE);let Se=JE({},["mi","mo","mn","ms","mtext"]),Te=JE({},["annotation-xml"]);const Ee=JE({},["title","style","font","a","script"]);let Me=null;const Ce=["application/xhtml+xml","text/html"],Ae="text/html";let ke=null,De=null;const Le=i.createElement("form"),Ie=function(e){return e instanceof RegExp||e instanceof Function},Pe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!De||De!==e){if(e&&"object"==typeof e||(e={}),e=eM(e),Me=-1===Ce.indexOf(e.PARSER_MEDIA_TYPE)?Ae:e.PARSER_MEDIA_TYPE,ke="application/xhtml+xml"===Me?HE:VE,F=qE(e,"ALLOWED_TAGS")?JE({},e.ALLOWED_TAGS,ke):U,z=qE(e,"ALLOWED_ATTR")?JE({},e.ALLOWED_ATTR,ke):V,xe=qE(e,"ALLOWED_NAMESPACES")?JE({},e.ALLOWED_NAMESPACES,HE):we,me=qE(e,"ADD_URI_SAFE_ATTR")?JE(eM(fe),e.ADD_URI_SAFE_ATTR,ke):fe,he=qE(e,"ADD_DATA_URI_TAGS")?JE(eM(pe),e.ADD_DATA_URI_TAGS,ke):pe,de=qE(e,"FORBID_CONTENTS")?JE({},e.FORBID_CONTENTS,ke):ue,$=qE(e,"FORBID_TAGS")?JE({},e.FORBID_TAGS,ke):eM({}),W=qE(e,"FORBID_ATTR")?JE({},e.FORBID_ATTR,ke):eM({}),ce=!!qE(e,"USE_PROFILES")&&e.USE_PROFILES,j=!1!==e.ALLOW_ARIA_ATTR,q=!1!==e.ALLOW_DATA_ATTR,Y=e.ALLOW_UNKNOWN_PROTOCOLS||!1,X=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,K=e.SAFE_FOR_TEMPLATES||!1,Z=!1!==e.SAFE_FOR_XML,J=e.WHOLE_DOCUMENT||!1,te=e.RETURN_DOM||!1,ne=e.RETURN_DOM_FRAGMENT||!1,ie=e.RETURN_TRUSTED_TYPE||!1,ee=e.FORCE_BODY||!1,re=!1!==e.SANITIZE_DOM,ae=e.SANITIZE_NAMED_PROPS||!1,oe=!1!==e.KEEP_CONTENT,le=e.IN_PLACE||!1,B=e.ALLOWED_URI_REGEXP||_M,be=e.NAMESPACE||_e,Se=e.MATHML_TEXT_INTEGRATION_POINTS||Se,Te=e.HTML_INTEGRATION_POINTS||Te,H=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Ie(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(H.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Ie(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(H.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(H.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),K&&(q=!1),ne&&(te=!0),ce&&(F=JE({},lM),z=[],!0===ce.html&&(JE(F,nM),JE(z,cM)),!0===ce.svg&&(JE(F,iM),JE(z,dM),JE(z,hM)),!0===ce.svgFilters&&(JE(F,rM),JE(z,dM),JE(z,hM)),!0===ce.mathMl&&(JE(F,sM),JE(z,uM),JE(z,hM))),e.ADD_TAGS&&("function"==typeof e.ADD_TAGS?G.tagCheck=e.ADD_TAGS:(F===U&&(F=eM(F)),JE(F,e.ADD_TAGS,ke))),e.ADD_ATTR&&("function"==typeof e.ADD_ATTR?G.attributeCheck=e.ADD_ATTR:(z===V&&(z=eM(z)),JE(z,e.ADD_ATTR,ke))),e.ADD_URI_SAFE_ATTR&&JE(me,e.ADD_URI_SAFE_ATTR,ke),e.FORBID_CONTENTS&&(de===ue&&(de=eM(de)),JE(de,e.FORBID_CONTENTS,ke)),e.ADD_FORBID_CONTENTS&&(de===ue&&(de=eM(de)),JE(de,e.ADD_FORBID_CONTENTS,ke)),oe&&(F["#text"]=!0),J&&JE(F,["html","head","body"]),F.table&&(JE(F,["tbody"]),delete $.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw XE('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw XE('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=e.TRUSTED_TYPES_POLICY,w=x.createHTML("")}else void 0===x&&(x=DM(m,a)),null!==x&&"string"==typeof w&&(w=x.createHTML(""));LE&&LE(e),De=e}},Re=JE({},[...iM,...rM,...aM]),Oe=JE({},[...sM,...oM]),Ne=function(e){let t=y(e);t&&t.tagName||(t={namespaceURI:be,tagName:"template"});const n=VE(e.tagName),i=VE(t.tagName);return!!xe[e.namespaceURI]&&(e.namespaceURI===ve?t.namespaceURI===_e?"svg"===n:t.namespaceURI===ge?"svg"===n&&("annotation-xml"===i||Se[i]):Boolean(Re[n]):e.namespaceURI===ge?t.namespaceURI===_e?"math"===n:t.namespaceURI===ve?"math"===n&&Te[i]:Boolean(Oe[n]):e.namespaceURI===_e?!(t.namespaceURI===ve&&!Te[i])&&(!(t.namespaceURI===ge&&!Se[i])&&(!Oe[n]&&(Ee[n]||!Re[n]))):!("application/xhtml+xml"!==Me||!xe[e.namespaceURI]))},Be=function(e){UE(n.removed,{element:e});try{y(e).removeChild(e)}catch(t){v(e)}},Fe=function(e,t){try{UE(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){UE(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(te||ne)try{Be(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Ue=function(e){let t=null,n=null;if(ee)e="<remove></remove>"+e;else{const t=$E(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===Me&&be===_e&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const r=x?x.createHTML(e):e;if(be===_e)try{t=(new p).parseFromString(r,Me)}catch(e){}if(!t||!t.documentElement){t=S.createDocument(be,"template",null);try{t.documentElement.innerHTML=ye?w:r}catch(e){}}const a=t.body||t.documentElement;return e&&n&&a.insertBefore(i.createTextNode(n),a.childNodes[0]||null),be===_e?M.call(t,J?"html":"body")[0]:J?t.documentElement:a},ze=function(e){return T.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},Ve=function(e){return e instanceof h&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof u)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},He=function(e){return"function"==typeof l&&e instanceof l};function $e(e,t,i){NE(e,(e=>{e.call(n,t,i,De)}))}const We=function(e){let t=null;if($e(A.beforeSanitizeElements,e,null),Ve(e))return Be(e),!0;const i=ke(e.nodeName);if($e(A.uponSanitizeElement,e,{tagName:i,allowedTags:F}),Z&&e.hasChildNodes()&&!He(e.firstElementChild)&&YE(/<[/\w!]/g,e.innerHTML)&&YE(/<[/\w!]/g,e.textContent))return Be(e),!0;if(e.nodeType===MM)return Be(e),!0;if(Z&&e.nodeType===CM&&YE(/<[/\w]/g,e.data))return Be(e),!0;if(!(G.tagCheck instanceof Function&&G.tagCheck(i))&&(!F[i]||$[i])){if(!$[i]&&je(i)){if(H.tagNameCheck instanceof RegExp&&YE(H.tagNameCheck,i))return!1;if(H.tagNameCheck instanceof Function&&H.tagNameCheck(i))return!1}if(oe&&!de[i]){const t=y(e)||e.parentNode,n=b(e)||e.childNodes;if(n&&t){for(let i=n.length-1;i>=0;--i){const r=g(n[i],!0);r.__removalCount=(e.__removalCount||0)+1,t.insertBefore(r,_(e))}}}return Be(e),!0}return e instanceof c&&!Ne(e)?(Be(e),!0):"noscript"!==i&&"noembed"!==i&&"noframes"!==i||!YE(/<\/no(script|embed|frames)/i,e.innerHTML)?(K&&e.nodeType===EM&&(t=e.textContent,NE([k,D,L],(e=>{t=WE(t,e," ")})),e.textContent!==t&&(UE(n.removed,{element:e.cloneNode()}),e.textContent=t)),$e(A.afterSanitizeElements,e,null),!1):(Be(e),!0)},Ge=function(e,t,n){if(re&&("id"===t||"name"===t)&&(n in i||n in Le))return!1;if(q&&!W[t]&&YE(I,t));else if(j&&YE(P,t));else if(G.attributeCheck instanceof Function&&G.attributeCheck(t,e));else if(!z[t]||W[t]){if(!(je(e)&&(H.tagNameCheck instanceof RegExp&&YE(H.tagNameCheck,e)||H.tagNameCheck instanceof Function&&H.tagNameCheck(e))&&(H.attributeNameCheck instanceof RegExp&&YE(H.attributeNameCheck,t)||H.attributeNameCheck instanceof Function&&H.attributeNameCheck(t,e))||"is"===t&&H.allowCustomizedBuiltInElements&&(H.tagNameCheck instanceof RegExp&&YE(H.tagNameCheck,n)||H.tagNameCheck instanceof Function&&H.tagNameCheck(n))))return!1}else if(me[t]);else if(YE(B,WE(n,O,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==GE(n,"data:")||!he[e]){if(Y&&!YE(R,WE(n,O,"")));else if(n)return!1}else;return!0},je=function(e){return"annotation-xml"!==e&&$E(e,N)},qe=function(e){$e(A.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||Ve(e))return;const i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z,forceKeepAttr:void 0};let r=t.length;for(;r--;){const a=t[r],{name:s,namespaceURI:o,value:l}=a,c=ke(s),d=l;let u="value"===s?d:jE(d);if(i.attrName=c,i.attrValue=u,i.keepAttr=!0,i.forceKeepAttr=void 0,$e(A.uponSanitizeAttribute,e,i),u=i.attrValue,!ae||"id"!==c&&"name"!==c||(Fe(s,e),u=se+u),Z&&YE(/((--!?|])>)|<\/(style|title|textarea)/i,u)){Fe(s,e);continue}if("attributename"===c&&$E(u,"href")){Fe(s,e);continue}if(i.forceKeepAttr)continue;if(!i.keepAttr){Fe(s,e);continue}if(!X&&YE(/\/>/i,u)){Fe(s,e);continue}K&&NE([k,D,L],(e=>{u=WE(u,e," ")}));const h=ke(e.nodeName);if(Ge(h,c,u)){if(x&&"object"==typeof m&&"function"==typeof m.getAttributeType)if(o);else switch(m.getAttributeType(h,c)){case"TrustedHTML":u=x.createHTML(u);break;case"TrustedScriptURL":u=x.createScriptURL(u)}if(u!==d)try{o?e.setAttributeNS(o,s,u):e.setAttribute(s,u),Ve(e)?Be(e):FE(n.removed)}catch(t){Fe(s,e)}}else Fe(s,e)}$e(A.afterSanitizeAttributes,e,null)},Ye=function e(t){let n=null;const i=ze(t);for($e(A.beforeSanitizeShadowDOM,t,null);n=i.nextNode();)$e(A.uponSanitizeShadowNode,n,null),We(n),qe(n),n.content instanceof s&&e(n.content);$e(A.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,a=null,o=null,c=null;if(ye=!e,ye&&(e="\x3c!--\x3e"),"string"!=typeof e&&!He(e)){if("function"!=typeof e.toString)throw XE("toString is not a function");if("string"!=typeof(e=e.toString()))throw XE("dirty is not a string, aborting")}if(!n.isSupported)return e;if(Q||Pe(t),n.removed=[],"string"==typeof e&&(le=!1),le){if(e.nodeName){const t=ke(e.nodeName);if(!F[t]||$[t])throw XE("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)i=Ue("\x3c!----\x3e"),a=i.ownerDocument.importNode(e,!0),a.nodeType===TM&&"BODY"===a.nodeName||"HTML"===a.nodeName?i=a:i.appendChild(a);else{if(!te&&!K&&!J&&-1===e.indexOf("<"))return x&&ie?x.createHTML(e):e;if(i=Ue(e),!i)return te?null:ie?w:""}i&&ee&&Be(i.firstChild);const d=ze(le?e:i);for(;o=d.nextNode();)We(o),qe(o),o.content instanceof s&&Ye(o.content);if(le)return e;if(te){if(ne)for(c=E.call(i.ownerDocument);i.firstChild;)c.appendChild(i.firstChild);else c=i;return(z.shadowroot||z.shadowrootmode)&&(c=C.call(r,c,!0)),c}let u=J?i.outerHTML:i.innerHTML;return J&&F["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&YE(xM,i.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+u),K&&NE([k,D,L],(e=>{u=WE(u,e," ")})),x&&ie?x.createHTML(u):u},n.setConfig=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Pe(e),Q=!0},n.clearConfig=function(){De=null,Q=!1},n.isValidAttribute=function(e,t,n){De||Pe({});const i=ke(e),r=ke(t);return Ge(i,r,n)},n.addHook=function(e,t){"function"==typeof t&&UE(A[e],t)},n.removeHook=function(e,t){if(void 0!==t){const n=BE(A[e],t);return-1===n?void 0:zE(A[e],n,1)[0]}return FE(A[e])},n.removeHooks=function(e){A[e]=[]},n.removeAllHooks=function(){A={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}(),IM=n(9755);class PM{constructor(){this.scene=null,this.camera=null,this.renderer=null,this.material=null,this.sphere=null,this.waveRings=[],this.clock=null,this.isAnimating=!1,this.rafId=null,this.canvasEl=null}createCanvas(e,t){const n=IM(t).get(0);this.canvasEl=IM(t),this.scene=new Ay,this.camera=new yy(75,1,.1,1e3),this.renderer=new uT({canvas:n,alpha:!0,antialias:!0,powerPreference:"high-performance"});const r=ks.methods.isMobile()?1:1.5;this.renderer.setPixelRatio(Math.min(window.devicePixelRatio||1,r));const a=this.renderer.getContext();a.canvas.addEventListener("webglcontextlost",(e=>{e.preventDefault(),console.warn("WebGL context LOST!")}),!1),a.canvas.addEventListener("webglcontextrestored",(()=>{console.warn("WebGL context RESTORED! Reinitializing..."),this.createCanvas(e,t)}),!1),this.renderer.setSize(150,150),this.camera.position.z=2.1,this.clock=new xx;const s=window.innerWidth<768?32:64,o=new Vy(1,s,s);this.material=new fy({vertexShader:"\n                varying vec3 vNormal;\n                varying vec3 vPosition;\n                varying vec3 vWorldPosition;\n                uniform float time;\n                uniform float audioLevel;\n                \n                vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n                vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n                vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }\n                vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\n                \n                float snoise(vec3 v) {\n                    const vec2 C = vec2(1.0/6.0, 1.0/3.0);\n                    const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);\n                    \n                    vec3 i  = floor(v + dot(v, C.yyy));\n                    vec3 x0 = v - i + dot(i, C.xxx);\n                    \n                    vec3 g = step(x0.yzx, x0.xyz);\n                    vec3 l = 1.0 - g;\n                    vec3 i1 = min(g.xyz, l.zxy);\n                    vec3 i2 = max(g.xyz, l.zxy);\n                    \n                    vec3 x1 = x0 - i1 + C.xxx;\n                    vec3 x2 = x0 - i2 + C.yyy;\n                    vec3 x3 = x0 - D.yyy;\n                    \n                    i = mod289(i);\n                    vec4 p = permute(permute(permute(\n                        i.z + vec4(0.0, i1.z, i2.z, 1.0))\n                        + i.y + vec4(0.0, i1.y, i2.y, 1.0))\n                        + i.x + vec4(0.0, i1.x, i2.x, 1.0));\n                        \n                    float n_ = 0.142857142857;\n                    vec3 ns = n_ * D.wyz - D.xzx;\n                    \n                    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);\n                    \n                    vec4 x_ = floor(j * ns.z);\n                    vec4 y_ = floor(j - 7.0 * x_);\n                    \n                    vec4 x = x_ *ns.x + ns.yyyy;\n                    vec4 y = y_ *ns.x + ns.yyyy;\n                    vec4 h = 1.0 - abs(x) - abs(y);\n                    \n                    vec4 b0 = vec4(x.xy, y.xy);\n                    vec4 b1 = vec4(x.zw, y.zw);\n                    \n                    vec4 s0 = floor(b0)*2.0 + 1.0;\n                    vec4 s1 = floor(b1)*2.0 + 1.0;\n                    vec4 sh = -step(h, vec4(0.0));\n                    \n                    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy;\n                    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww;\n                    \n                    vec3 p0 = vec3(a0.xy, h.x);\n                    vec3 p1 = vec3(a0.zw, h.y);\n                    vec3 p2 = vec3(a1.xy, h.z);\n                    vec3 p3 = vec3(a1.zw, h.w);\n                    \n                    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2,p2), dot(p3,p3)));\n                    p0 *= norm.x;\n                    p1 *= norm.y;\n                    p2 *= norm.z;\n                    p3 *= norm.w;\n                    \n                    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n                    m = m * m;\n                    return 42.0 * dot(m*m, vec4(dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3)));\n                }\n                \n                void main() {\n                    vPosition = position;\n                    \n                    vec3 pos = position;\n                    \n                    float noise1 = snoise(pos * 1.5 + vec3(time * 0.2, time * 0.15, time * 0.18));\n                    float noise2 = snoise(pos * 2.5 + vec3(time * 0.25, -time * 0.2, time * 0.22));\n                    \n                    float distortion = noise1 * 0.04 + noise2 * 0.025;\n                    distortion *= (1.0 + audioLevel * 1.5);\n                    \n                    pos += normal * distortion;\n                    \n                    vNormal = normalize(normalMatrix * normalize(normal + vec3(noise1, noise2, 0.7) * 0.3));\n                    \n                    vec4 worldPos = modelMatrix * vec4(pos, 1.0);\n                    vWorldPosition = worldPos.xyz;\n                    \n                    gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n                }\n            ",fragmentShader:"\n            varying vec3 vNormal;\n            varying vec3 vPosition;\n            varying vec3 vWorldPosition;\n            uniform float time;\n            uniform float audioLevel;\n            \n            void main() {\n                vec3 viewDirection = normalize(cameraPosition - vWorldPosition);\n                float fresnel = pow(1.0 - abs(dot(viewDirection, vNormal)), 3.5);\n                float flow1 = sin(vWorldPosition.x * 4.0 + vWorldPosition.y * 3.0 + time * 1.2);\n                float flow2 = cos(vWorldPosition.y * 5.0 - vWorldPosition.z * 4.0 - time * 1.5);\n                float flow3 = sin(vWorldPosition.z * 6.0 + vWorldPosition.x * 4.0 + time * 1.8);\n                float flowPattern = (flow1 + flow2 + flow3) * 0.33;\n                vec3 deepPurple = vec3(0.25, 0.1, 0.6);\n                vec3 brightBlue = vec3(0.2, 0.5, 1.4);\n                vec3 hotPink = vec3(0.9, 0.2, 0.6);\n                vec3 cyan = vec3(0.3, 0.9, 1.4);\n                vec3 color1 = mix(deepPurple, brightBlue, flowPattern * 0.5 + 0.5);\n                vec3 color2 = mix(hotPink, cyan, sin(flowPattern * 2.5 + time * 0.8) * 0.5 + 0.5);\n                vec3 baseColor = mix(color1, color2, cos(time * 0.5 + vWorldPosition.y * 2.0) * 0.5 + 0.5);\n                vec3 blueEmission = vec3(0.2, 0.5, 1.5) * smoothstep(0.2, 1.0, flowPattern);\n                baseColor += blueEmission * 0.4;\n                float streak = sin(flowPattern * 12.0 + time * 3.0);\n                float whiteStreak = smoothstep(0.7, 1.0, streak);\n                float coreDarkness = pow(1.0 - fresnel, 3.0);\n                vec3 darkCore = baseColor * 0.15 * coreDarkness;\n                vec3 brightEdge = mix(baseColor, vec3(0.6, 0.8, 1.5), 0.4) * fresnel * 1.8;\n                float lat = atan(vWorldPosition.y, length(vWorldPosition.xz));\n                float longi = atan(vWorldPosition.z, vWorldPosition.x);\n                float latNorm = (lat + 1.5708) / 3.1416;\n                float wavePos = fract(time * 0.3);\n                float curl = sin(longi * 6.0 + time * 3.0);\n                float waveDist = abs(latNorm - wavePos + curl * 0.05);\n                float curlWave = 1.0 - smoothstep(0.0, 0.18, waveDist);\n                vec3 curlWaveColor = vec3(0.3, 0.8, 1.5) * curlWave * 2.2;\n                vec3 finalColor = darkCore + brightEdge + vec3(1.0) * whiteStreak * 0.6;\n                finalColor += curlWaveColor;\n                finalColor *= (1.0 + audioLevel * 0.8);\n                float alpha = fresnel * 0.9 + whiteStreak * 0.05;\n                gl_FragColor = vec4(finalColor, alpha);\n            }",uniforms:{time:{value:0},audioLevel:{value:0}},transparent:!0,side:2}),this.sphere=new ly(o,this.material),this.scene.add(this.sphere),this.waveRings=[];for(let e=0;e<1;e++){const t=new Vy(1.3+.25*e,s,s),n=new fy({vertexShader:"\n                    varying vec3 vNormal;\n                    varying vec3 vWorldPosition;\n                    varying vec3 vPosition;\n                    uniform float time;\n                    uniform float offset;\n                    uniform float audioLevel;\n                    \n                    vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n                    vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n                    vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }\n                    vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\n                    \n                    float snoise(vec3 v) {\n                        const vec2 C = vec2(1.0/6.0, 1.0/3.0);\n                        const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);\n                        vec3 i  = floor(v + dot(v, C.yyy));\n                        vec3 x0 = v - i + dot(i, C.xxx);\n                        vec3 g = step(x0.yzx, x0.xyz);\n                        vec3 l = 1.0 - g;\n                        vec3 i1 = min(g.xyz, l.zxy);\n                        vec3 i2 = max(g.xyz, l.zxy);\n                        vec3 x1 = x0 - i1 + C.xxx;\n                        vec3 x2 = x0 - i2 + C.yyy;\n                        vec3 x3 = x0 - D.yyy;\n                        i = mod289(i);\n                        vec4 p = permute(permute(permute(\n                            i.z + vec4(0.0, i1.z, i2.z, 1.0))\n                            + i.y + vec4(0.0, i1.y, i2.y, 1.0))\n                            + i.x + vec4(0.0, i1.x, i2.x, 1.0));\n                        float n_ = 0.142857142857;\n                        vec3 ns = n_ * D.wyz - D.xzx;\n                        vec4 j = p - 49.0 * floor(p * ns.z * ns.z);\n                        vec4 x_ = floor(j * ns.z);\n                        vec4 y_ = floor(j - 7.0 * x_);\n                        vec4 x = x_ *ns.x + ns.yyyy;\n                        vec4 y = y_ *ns.x + ns.yyyy;\n                        vec4 h = 1.0 - abs(x) - abs(y);\n                        vec4 b0 = vec4(x.xy, y.xy);\n                        vec4 b1 = vec4(x.zw, y.zw);\n                        vec4 s0 = floor(b0)*2.0 + 1.0;\n                        vec4 s1 = floor(b1)*2.0 + 1.0;\n                        vec4 sh = -step(h, vec4(0.0));\n                        vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy;\n                        vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww;\n                        vec3 p0 = vec3(a0.xy, h.x);\n                        vec3 p1 = vec3(a0.zw, h.y);\n                        vec3 p2 = vec3(a1.xy, h.z);\n                        vec3 p3 = vec3(a1.zw, h.w);\n                        vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2,p2), dot(p3,p3)));\n                        p0 *= norm.x; p1 *= norm.y; p2 *= norm.z; p3 *= norm.w;\n                        vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n                        m = m * m;\n                        return 42.0 * dot(m*m, vec4(dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3)));\n                    }\n                    \n                    void main() {\n                        vPosition = position;\n                        \n                        vec3 pos = position * 0.85;\n                        \n                        float noise1 = snoise(pos * 1.2 + vec3(time * 0.3 - offset, time * 0.25, time * 0.28 + offset));\n                        float noise2 = snoise(pos * 2.0 + vec3(-time * 0.2, time * 0.35 + offset, -time * 0.22));\n                        \n                        float waveDistortion = noise1 * 0.08 + noise2 * 0.05;\n                        \n                        float pulse = sin(time * 1.5 - offset * 4.0) * 0.05;\n                        \n                        pos += normal * (waveDistortion + pulse) * (1.0 + audioLevel * 3.5);\n                        \n                        vNormal = normalize(normalMatrix * normalize(normal + vec3(noise1, noise2, 0.0) * 0.3));\n                        \n                        vec4 worldPos = modelMatrix * vec4(pos, 1.0);\n                        vWorldPosition = worldPos.xyz;\n                        \n                        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n                    }\n                ",fragmentShader:"\n                    varying vec3 vNormal;\n                    varying vec3 vWorldPosition;\n                    varying vec3 vPosition;\n                    uniform float time;\n                    uniform float offset;\n                    uniform float audioLevel;\n                    \n                    void main() {\n                        vec3 viewDirection = normalize(cameraPosition - vWorldPosition);\n                        float fresnel = pow(1.0 - abs(dot(viewDirection, vNormal)), 4.5);\n                        \n                        float flow = sin(vPosition.x * 5.0 + vPosition.y * 4.0 + time * 2.0 - offset * 4.0);\n                        flow += cos(vPosition.z * 6.0 - time * 2.5 + offset * 3.0);\n                        flow *= 0.5;\n                        \n                        vec3 waveColor = mix(\n                            vec3(0.85, 0.9, 1.0),\n                            vec3(0.95, 0.85, 1.0),\n                            flow * 0.5 + 0.5\n                        );\n                        \n                        float highlight = smoothstep(0.6, 1.0, flow);\n                        waveColor += vec3(1.0) * highlight * 0.5;\n                        \n                        float alpha = fresnel * (0.15 + audioLevel * 0.3 + highlight * 0.15);\n                        \n                        gl_FragColor = vec4(waveColor, alpha);\n                    }\n                ",uniforms:{time:{value:0},offset:{value:e},audioLevel:{value:0}},transparent:!0,side:2,depthWrite:!1,blending:2}),i=new ly(t,n);this.scene.add(i),this.waveRings.push(i)}const l=new bx(4210752,.5);this.scene.add(l);const c=new vx(8939263,1.5,10);c.position.set(2,2,3);const d=new vx(6728447,1.2,10);d.position.set(-2,-1,3),IM(window).width()>=i.breakPoints.LARGE&&(this.scene.add(c),this.scene.add(d)),this.start()}start(){if(this.isAnimating)return;this.isAnimating=!0,this.clock.getDelta();const e=()=>{this.isAnimating&&(this.animateFrame(),this.rafId=requestAnimationFrame(e))};this.rafId=requestAnimationFrame(e)}pause(){this.isAnimating=!1,this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=null)}resume(){this.isAnimating||this.start()}animateFrame(){let e=this.clock?this.clock.getDelta():1/60;e=Math.min(e,.05);this.material.uniforms.time.value+=.54*e;const t=Math.pow(.88,60*e);this.material.uniforms.audioLevel.value*=t,this.waveRings.forEach((e=>{e.material.uniforms.audioLevel.value*=t}));this.sphere.rotation.y+=.36*e,this.sphere.rotation.x+=.18*e,this.sphere.rotation.z+=.06*e,this.waveRings.forEach(((t,n)=>{t.material.uniforms.time.value+=.54*e;const i=60*(.001*n-.004),r=60*(.002+5e-4*n);t.rotation.y+=e*i,t.rotation.x+=e*r,t.rotation.z+=-.06*e})),this.renderer.render(this.scene,this.camera)}}class RM{constructor(e){this.canvas=document.getElementById(e),this.ctx=this.canvas.getContext("2d"),this.canvas.width=this.canvas.offsetWidth,this.canvas.height=48,this.bars=[],this.maxBars=80,this.smoothLevel=.7,this.lastValue=0,this.isAnimating=!1,this.slowTick=0}start(){this.isAnimating=!0}stop(){this.isAnimating=!1,this.bars=[],this.lastValue=0,this.slowTick=0,this.clear()}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}updateBars(e){let t=this.lastValue*this.smoothLevel+e*(1-this.smoothLevel);this.lastValue=t;let n=Math.min(t/40,1);this.slowTick++,this.slowTick%3==0&&(this.bars.push(n),this.bars.length>this.maxBars&&this.bars.shift())}draw(){this.clear();const e=this.canvas.width/this.maxBars,t=this.canvas.height/2;this.ctx.strokeStyle="white",this.ctx.lineWidth=1.8,this.ctx.lineCap="round",this.bars.forEach(((n,i)=>{let r=n*(this.canvas.height/2-5);this.ctx.beginPath(),this.ctx.moveTo(i*e+e/2,t-r),this.ctx.lineTo(i*e+e/2,t+r),this.ctx.stroke()}))}}const OM={variables:{aiAgentContainer:".ai-agent",aiAgentWelcome:".ai-agent__welcome",aiAgentWelcomeBtn:".ai-agent__intro--cta",aiAgentModal:".ai-agent__modal",aiAgentModalClose:".ai-agent__modal--close",aiAgentResponseClose:".ai-agent__response--close",aiAgentMainClose:".ai-agent__main--close",aiAgentModalBackdrop:".ai-agent__modal--backdrop",aiAgentBubble:".ai-agent__bubble",aiAgentMain:".ai-agent__main",aiAgentMainScreen:".ai-agent__main--screen",aiAgentText:".ai-agent__main--ask",aiAgentCanvas:".orbCanvas",aiAgentOrbContainer:".orb-container",aiAgentWaveform:".waveform-container",aiAgentLoader:".ai-agent__loader",aiAgentResponseDesktop:".ai-agent__response",aiAgentKeyboard:".ai-agent__keyboard",aiAgentResponseMobile:".ai-agent__response--mobile",aiAgentResponseDesk:".ai-agent__response--desktop",tapToSpeak:".tap-to-speak",tapToSpeakBtn:".tap-to-speak__btn",tapToSpeakDelete:".tap-to-speak__delete",tapToSpeakMic:".microphone-icon",tapToSpeakMicMute:".microphone-mute-icon",tapToSpeakSend:".send-icon",promptContainerMobile:".prompt-container__mobile",promptDesktop:".prompt-desktop",noSpeechText:".no-speech__text",noPermissionText:".no-permission__text",toggleVoice:".toggle-voice",toggleKeyboard:".toggle-keyboard",aiAgentTextarea:".keyboard-input",keyboardSendBtn:".keyboard__send-btn",keyboardBtn:".keyboard-btn",voicePromptBtn:".prompt__btn",mobileResponse:".mobile-response",mobileResponseText:".mobile-response__text",mobileResponseMute:".mobile-response__mute",mobileResponsePlay:".mobile-response__play",mobileResponseSeekbar:".mobile-response__seekbar",mobileResponseSeekbarProgress:".mobile-response__seekbar--progress",mobileResponseLinks:".mobile-response__links",mobileResponseLink:".mobile-response__link",mobileResponseLinkExpand:".mobile-response__link--expand",mobileResponseTag:".mobile-response__tag",mobileResponseTags:".mobile-response__tags",mobileResponseMedia:".mobile-response__media",mobileResponseVideo:".mobile-response__video",muteIcon:".mute-icon",unmuteIcon:".unmute-icon",playIcon:".play-icon",pauseIcon:".pause-icon",shimmerText:".shimmer-text",bodyHtml:"body, html",canvasInstances:[],canvas:new PM,isSpeechStarted:!1,audioContext:null,recognition:null,analyser:null,micStream:null,waveform:null,dataArray:null,isTranslated:!1,isKeyboard:!1,isWatched:!1,base64Audio:null,context:{},history:[],currentAudio:null,currentSourceBuffer:null,video:null,isMicPermission:!0,lastSpeechTime:null,silenceTimeout:null},methods:{keyboardHandler(){const{aiAgentTextarea:e}=this.variables;if(!ks.methods.isMobile())return;let t=window.visualViewport.height;window.visualViewport.addEventListener(i.eventsListeners.RESIZE,(()=>{window.visualViewport.height<t&&setTimeout((()=>{IM(e)[0].scrollIntoView({behavior:"smooth",block:"center"})}),600)}))},handleTextarea(){const{aiAgentTextarea:e,aiAgentKeyboard:t}=this.variables;IM(e).on(i.eventsListeners.INPUT,(function(){const e=IM(this);e.height(20);const t=this.scrollHeight;t<=60?e.height(t):e.height(60)}));const n=IM(t),r=n.find(e);if(n.length&&r.length){const e=new ResizeObserver((()=>{r.height(20);const e=r[0].scrollHeight;e<=60?r.height(e):r.height(60)}));n.each((function(){e.observe(this)}))}},translateMainScreen(){const{aiAgentMainScreen:e}=this.variables;if(!OM.variables.isTranslated){OM.variables.isTranslated=!0;const t=IM(e)[0],n=80-t.getBoundingClientRect().left;t.style.transform=`translateX(${n}px)`}},textAreaEventHandler(){const{aiAgentTextarea:e,aiAgentKeyboard:t}=this.variables;IM(e).on(i.eventsListeners.KEYDOWN,(function(e){e.key!==i.keyboardKeys.ENTER||e.shiftKey||(e.preventDefault(),IM(t).submit())}))},keyboardInputAgainEvent(){const{promptDesktop:e,aiAgentText:t,aiAgentMain:n,aiAgentOrbContainer:r,keyboardBtn:a,aiAgentTextarea:s,aiAgentKeyboard:o,keyboardSendBtn:l,aiAgentResponseMobile:c,aiAgentContainer:d}=this.variables,{resumeOrPauseOrb:u,removeVideoEventsHandler:h}=this.methods;IM(a).on(i.eventsListeners.CLICK,(()=>{IM(s).attr("disabled",!1),IM(s).focus(),IM(s).height(20),IM(l).removeClass("d-none"),IM(a).addClass("d-none"),IM(e).addClass("d-none opacity-0"),IM(o).removeClass("m-0"),IM(t).removeClass("d-none opacity-0").addClass("opacity-50"),IM(c).addClass("d-none opacity-0"),IM(n).find(r).show().removeClass("opacity-0"),u.call(OM),IM(c).html(`<div class="shimmer-text fs-16 lh-24 px-5">${IM(d).data("loading-text")}</div>`),h.call(OM)}))},KeyBoardInputSend(){const{promptDesktop:e,aiAgentMainScreen:t,aiAgentMainClose:n,aiAgentResponseDesktop:r,aiAgentText:a,aiAgentMain:s,aiAgentOrbContainer:o,keyboardBtn:l,aiAgentTextarea:c,aiAgentKeyboard:d,keyboardSendBtn:u,aiAgentResponseMobile:h,aiAgentResponseDesk:p,aiAgentContainer:m}=this.variables,{fetchApi:f,resumeOrPauseOrb:g,removeVideoEventsHandler:v,translateMainScreen:_}=this.methods;IM(d).on(i.eventsListeners.SUBMIT,(async b=>{b.preventDefault(),IM(c).val()&&IM(c).val().trim()&&(IM(c).attr("disabled",!0),IM(u).addClass("d-none"),IM(l).removeClass("d-none"),IM(window).width()<i.breakPoints.LARGE?(IM(s).find(o).addClass("opacity-0"),IM(a).removeClass("opacity-50").addClass("opacity-0"),setTimeout((()=>{IM(a).addClass("d-none"),IM(s).find(o).hide(),IM(h).removeClass("d-none opacity-0"),IM(d).addClass("m-0"),IM(h).height(IM(t).height()-142-IM(d).height()),g.call(OM)}),350)):(IM(e).text(IM(c).val().charAt(0).toUpperCase()+IM(c).val().slice(1)),IM(e).attr("title",IM(c).val()),IM(t).addClass("translate-left"),IM(n).addClass("d-none").removeClass("d-flex"),IM(a).addClass("opacity-0").removeClass("opacity-50"),setTimeout((()=>{IM(a).addClass("d-none"),IM(e).removeClass("d-none opacity-0"),IM(r).removeClass("d-none opacity-0"),IM(p).html(`<div class="shimmer-text fs-16 lh-24 px-5">${IM(m).data("loading-text")}</div>`),v.call(OM),_.call(OM),g.call(OM)}),500)),await f.call(OM))}))},toggleMode(){const{toggleKeyboard:e,toggleVoice:t,tapToSpeak:n,aiAgentKeyboard:r,tapToSpeakMic:a,tapToSpeakDelete:s,aiAgentTextarea:o,tapToSpeakSend:l,aiAgentWaveform:c,aiAgentText:d,promptDesktop:u,noSpeechText:h,aiAgentOrbContainer:p,aiAgentMain:m,promptContainerMobile:f,keyboardSendBtn:g,keyboardBtn:v,aiAgentResponseMobile:_,aiAgentContainer:b,noPermissionText:y,tapToSpeakMicMute:x}=this.variables,{stopMic:w,resumeOrPauseOrb:S,removeVideoEventsHandler:T,stopPlayback:E}=this.methods;IM(e).on(i.eventsListeners.CLICK,(()=>{OM.variables.isKeyboard||(OM.variables.isKeyboard=!0,IM(e).addClass("active"),IM(t).removeClass("active"),IM(u).addClass("opacity-0"),IM(h).add(y).addClass("opacity-0"),IM(".tap-to-play").addClass("d-none"),IM(f).removeClass("hide-before"),IM(l).hasClass("d-flex")&&(w.call(OM,!0),IM(c).addClass("opacity-0")),IM(n).addClass("opacity-0"),IM(f).removeClass("opacity-100"),IM(_).addClass("opacity-0"),IM(m).find(p).removeClass("opacity-0"),IM(r).removeClass("m-0"),E.call(OM),setTimeout((()=>{IM(n).hide(),IM(u).addClass("d-none"),IM(h).add(y).addClass("d-none"),IM(c).addClass("d-none"),IM(s).addClass("d-none"),IM(f).addClass("d-none"),IM(_).addClass("d-none"),IM(_).html(`<div class="shimmer-text fs-16 lh-24 px-5">${IM(b).data("loading-text")}</div>`),T.call(OM),IM(m).find(p).show(),IM(d).removeClass("d-none opacity-0").addClass("opacity-50"),this.variables.isMicPermission?IM(a).removeClass("d-none").addClass("d-flex"):IM(x).removeClass("d-none").addClass("d-flex"),IM(l).removeClass("d-flex").addClass("d-none"),IM(r).removeClass("d-none").addClass("opacity-100"),IM(o).focus(),S.call(OM)}),350))})),IM(t).on(i.eventsListeners.CLICK,(()=>{OM.variables.isKeyboard&&(OM.variables.isKeyboard=!1,IM(o).height(20),IM(o).val(""),IM(u).addClass("opacity-0"),IM(e).removeClass("active"),IM(t).addClass("active"),IM(r).removeClass("opacity-100"),IM(o).attr("disabled",!1),IM(g).removeClass("d-none"),IM(v).addClass("d-none"),IM(window).width()<i.breakPoints.LARGE&&(IM(m).find(p).removeClass("opacity-0"),IM(_).addClass("opacity-0"),IM(_).html(`<div class="shimmer-text fs-16 lh-24 px-5">${IM(b).data("loading-text")}</div>`),T.call(OM),setTimeout((()=>{IM(d).addClass("d-none").addClass("opacity-50").removeClass("opacity-0"),IM(m).find(p).show(),IM(_).addClass("d-none"),IM(r).removeClass("m-0"),S.call(OM)}),350)),setTimeout((()=>{this.variables.isMicPermission?IM(d).removeClass("d-none opacity-0").addClass("opacity-50"):(IM(y).removeClass("d-none opacity-0"),IM(d).addClass("d-none").addClass("opacity-50").removeClass("opacity-0")),IM(r).addClass("d-none"),IM(u).addClass("d-none"),IM(n).show().removeClass("opacity-0"),S.call(OM)}),350))}))},micAndSendBtn(){const{tapToSpeakBtn:e,tapToSpeakMic:t,noSpeechText:n,promptDesktop:r,tapToSpeakMicMute:a}=this.variables,{startMic:s,generatePrompt:o,stopPlayback:l}=this.methods;IM(e).on(i.eventsListeners.CLICK,(()=>{IM(t).hasClass("d-none")&&IM(a).hasClass("d-none")?o.call(OM):(l.call(OM),IM(r).addClass("d-none opacity-0"),IM(n).addClass("d-none opacity-0"),s.call(OM))}))},speakAgainMobile(){const{promptContainerMobile:e,aiAgentMain:t,tapToSpeak:n,aiAgentOrbContainer:r,aiAgentText:a,aiAgentResponseMobile:s,voicePromptBtn:o}=this.variables,{resumeOrPauseOrb:l,stopPlayback:c}=this.methods;IM(o).on(i.eventsListeners.CLICK,(()=>{IM(e).removeClass("opacity-100"),IM(s).addClass("opacity-0"),IM(".tap-to-play").addClass("d-none"),IM(e).removeClass("hide-before"),c.call(OM),setTimeout((()=>{IM(t).find(r).show().removeClass("opacity-0"),IM(e).addClass("d-none"),IM(s).addClass("d-none"),IM(a).removeClass("d-none opacity-0").addClass("opacity-50"),IM(n).show().removeClass("opacity-0"),l.call(OM)}),350)}))},stopRecording(){const{tapToSpeakMic:e,tapToSpeakSend:t,tapToSpeakDelete:n,aiAgentWaveform:r,aiAgentText:a}=this.variables,{stopMic:s}=this.methods;IM(n).on(i.eventsListeners.CLICK,(()=>{s.call(OM,!0),IM(e).removeClass("d-none").addClass("d-flex"),IM(n).addClass("d-none"),IM(t).removeClass("d-flex").addClass("d-none"),IM(r).addClass("d-none opacity-0"),IM(a).removeClass("d-none opacity-0").addClass("opacity-50")}))},handleScrollableState(){const{mobileResponse:e}=this.variables,t=IM(e)[0];function n(){const e=t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth;t.classList.toggle("scrollable",e),t.classList.toggle("not-scrollable",!e)}new ResizeObserver(n).observe(t),n()},generateUUID(){return"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},generateShortId(){const e=new Uint8Array(8);if("undefined"!=typeof crypto&&crypto.getRandomValues)crypto.getRandomValues(e);else for(let t=0;t<8;t++)e[t]=Math.floor(256*Math.random());return Array.from(e,(e=>e.toString(16).padStart(2,"0"))).join("")},getOrCreateUid(){const{generateUUID:e}=this.methods,t=sessionStorage.getItem("ria_user_id");if(t)return t;const n="ria_standalone_uid",i=localStorage.getItem(n);if(i)return i;const r="usr_"+e();try{localStorage.setItem(n,r)}catch(e){console.warn("Could not persist uid to localStorage:",e)}return r},getOrCreateCid(){const{generateShortId:e}=this.methods,t=sessionStorage.getItem("ria_conversation_id");if(t)return t;const n="ria_standalone_cid",i=sessionStorage.getItem(n);if(i)return i;const r="conv_"+e();try{sessionStorage.setItem(n,r)}catch(e){console.warn("Could not store cid in sessionStorage:",e)}return r},autoScrollMobileResponse(){const{mobileResponse:e}=this.variables,t=IM(e);if(!t.length)return;let n=!1;t.on(i.eventsListeners.SCROLL,(function(){const e=this,t=e.scrollHeight-e.scrollTop-e.clientHeight<10;n=!t}));new MutationObserver((()=>{n||t.scrollTop(t[0].scrollHeight)})).observe(t[0],{childList:!0,subtree:!0,characterData:!0}),t.scrollTop(t[0].scrollHeight)},responseTextDisplay(e){const{keyboardBtn:t,voicePromptBtn:n,tapToSpeakBtn:i,toggleKeyboard:r,toggleVoice:a,mobileResponseText:s}=this.variables,{addButtonEvents:o,addCtaEvents:l,renderMarkdown:c}=this.methods;if(!e.length)return;e=c(e);let d=0,u=null;const h=IM(s);!function s(){d<e.length?(h.get(0).innerHTML=e.substring(0,d+1),d++,u=setTimeout(s,20)):(IM(n).add(i).add(r).add(a).add(t).attr("disabled",!1),o.call(OM),l.call(OM))}()},removeVideoEventsHandler(){const{mobileResponseMute:e,mobileResponsePlay:t}=this.variables,{loadedData:n,timeUpdate:r}=i.eventsListeners;this.variables.video&&this.variables.video._handlers&&(this.variables.video.removeEventListener(n,this.variables.video._handlers.loadeddata),this.variables.video.removeEventListener(r,this.variables.video._handlers.timeupdate),delete this.variables.video._handlers,this.variables.video=null,IM(e).off(".videoControls"),IM(t).off(".videoControls"))},handleKeyboardFocus(){const{aiAgentTextarea:e}=this.variables;IM(e).on(i.eventsListeners.FOCUS,(function(){const e=this;setTimeout((()=>{e.scrollIntoView({behavior:"smooth",block:"center"})}),600)}))},resumeOrPauseOrb(e=!0){const{canvasInstances:t,aiAgentBubble:n}=this.variables;t.forEach((t=>{const i=IM(t.canvasEl),r=i.is(":visible"),a=i.closest(n).length>0;r?e&&a?t.pause():t.resume():t.pause()}))},setupAudio(){this.variables.audioContext=new(window.AudioContext||window.webkitAudioContext),this.variables.analyser=this.variables.audioContext.createAnalyser(),this.variables.analyser.fftSize=512,this.variables.analyser.smoothingTimeConstant=.85;const e=this.variables.analyser.fftSize;this.variables.dataArray=new Uint8Array(e),this.variables.hasSpeech=!1,this.variables.speechThreshold=.02},pickMimeType(){return["audio/ogg;codecs=opus","audio/webm;codecs=opus","audio/ogg","audio/webm","audio/mp4"].find((e=>MediaRecorder.isTypeSupported(e)))||"audio/webm"},async startMic(){const{audioContext:e,tapToSpeakSend:t,tapToSpeakDelete:n,tapToSpeakMic:i,aiAgentWaveform:r,aiAgentText:a,aiAgentContainer:s}=this.variables,{setupAudio:o,animateWaves:l,detectSpeech:c,watchMicPermission:d,handleMicPermission:u,pickMimeType:h}=this.methods;e||o.call(OM),this.variables.isWatched||(d.call(OM),this.variables.isWatched=!0),this.variables.hasSpeech=!1;try{this.variables.micStream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:22050,channelCount:1}});this.variables.audioContext.createMediaStreamSource(this.variables.micStream).connect(this.variables.analyser);const e=this.variables.analyser,o=e.fftSize,d=new Uint8Array(o),u=()=>{e.getByteTimeDomainData(d);let t=0;for(let e=0;e<o;e++){const n=(d[e]-128)/128;t+=n*n}return Math.sqrt(t/o)};this.variables.lastSoundTime=Date.now(),clearInterval(this.variables.speechTimer),clearInterval(this.variables.silenceTimeout),this.variables.speechTimer=setInterval((()=>{c.call(OM)}),150),this.variables.silenceTimeout=setInterval((()=>{if(u()>.015)return void(this.variables.lastSoundTime=Date.now());const e=IM(s).data("silence-timeout");Date.now()-this.variables.lastSoundTime>=e&&(IM(t).trigger("click"),clearInterval(this.variables.silenceTimeout),this.variables.silenceTimeout=null)}),200),IM(t).removeClass("d-none").addClass("d-flex"),IM(i).removeClass("d-flex").addClass("d-none"),IM(n).removeClass("d-none opacity-0"),IM(r).removeClass("d-none opacity-0"),IM(a).addClass("d-none opacity-0").removeClass("opacity-50");const p=new RM("waveform");p.start(),this.variables.waveform=p,l.call(OM,p);const m=h();this.variables.audioChunks=[],this.variables.mediaRecorder=new MediaRecorder(this.variables.micStream,{mimeType:m,audioBitsPerSecond:64e3}),this.variables.mediaRecorder.ondataavailable=e=>{e.data.size>0&&this.variables.audioChunks.push(e.data)},this.variables.mediaRecorder.start(100)}catch(e){console.error("Mic error:",e),u.call(OM,"denied")}},stopMic(e=!1){return new Promise((async(t,n)=>{try{if(clearInterval(this.variables.speechTimer),clearInterval(this.variables.silenceTimeout),this.variables.speechTimer=null,this.variables.silenceTimeout=null,this.variables.micStream&&(this.variables.micStream.getTracks().forEach((e=>e.stop())),this.variables.micStream=null),this.variables.waveform&&this.variables.waveform.stop(),e||!this.variables.mediaRecorder)return void t(null);if(await new Promise((e=>{this.variables.mediaRecorder.onstop=e,this.variables.mediaRecorder.stop()})),!this.variables.hasSpeech)return this.variables.audioChunks=[],void t(null);const n=this.methods.pickMimeType(),i=new Blob(this.variables.audioChunks,{type:n}),r=await new Promise(((e,t)=>{const n=new FileReader;n.onloadend=()=>e(n.result.split(",")[1]),n.onerror=t,n.readAsDataURL(i)}));this.variables.base64Audio=r,t(r)}catch(e){console.error("stopMic() failed:",e),n(e)}}))},showMicPermissionGuide(){const e=ks.methods.detectDevice();OM.methods.removeMicGuide();const t=`\n                <div id="micPermissionGuide">\n                    <div class="micPermissionGuideContainer">\n                        <button id="closeMicGuide">Ã</button>\n                        <h2 class="mb-5 fs-24">\n                            ð¤ Enable Microphone Access\n                        </h2>\n                        <div style="line-height: 1.6; flex:1">\n                            ${OM.methods.getDeviceSpecificInstructions(e)}\n                        </div>\n                        <button id="retryMicPermission">\n                            Close\n                        </button>\n                    </div>\n                </div>\n            `;IM("body").append(t),IM(document).on(i.eventsListeners.CLICK,"#closeMicGuide",(()=>{OM.methods.removeMicGuide()})),IM(document).on(i.eventsListeners.CLICK,"#retryMicPermission",(()=>{OM.methods.removeMicGuide()})),IM(document).on(i.eventsListeners.CLICK,"#micPermissionGuide",(e=>{"micPermissionGuide"===e.target.id&&OM.methods.removeMicGuide()}))},getDeviceSpecificInstructions(e){const t='<span class="arrow-indicator">â</span>';return e.isIOS?`\n                    <p><strong>On iPhone/iPad (Safari):</strong></p>\n                    <ol style="margin: 12px 0; padding-left: 24px;">\n                        <li style="margin-bottom: 12px;">\n                            Open your device <strong>Settings</strong> app ${t}\n                        </li>\n                        <li style="margin-bottom: 12px;">\n                            Scroll down and tap <strong>Safari</strong> ${t}\n                        </li>\n                        <li style="margin-bottom: 12px;">\n                            Tap <strong>Microphone</strong> ${t}\n                        </li>\n                        <li style="margin-bottom: 12px;">\n                            Select <strong>Ask</strong> or <strong>Allow</strong>\n                        </li>\n                        <li style="margin-bottom: 12px;">\n                            Return here and refresh the page\n                        </li>\n                    </ol>\n                    \n                    <div class="micPermissionGuideCommon" style="padding: 12px; border-radius: 8px; margin-top: 16px;">\n                        <strong>Alternative method:</strong><br>\n                        Tap the <strong>aA</strong> icon in the address bar ${t} \n                        <strong>Website Settings</strong> ${t} \n                        <strong>Microphone</strong> ${t} \n                        <strong>Allow</strong>\n                    </div>\n                `:e.isAndroid?"chrome"===e.browser?`\n                        <p><strong>On Android (Chrome):</strong></p>\n                        <ol style="margin: 12px 0; padding-left: 24px;">\n                            <li style="margin-bottom: 12px;">\n                                Tap the <strong>lock icon</strong> or <strong>site info</strong> in the address bar ${t}\n                            </li>\n                            <li style="margin-bottom: 12px;">\n                                Tap <strong>Permissions</strong> ${t}\n                            </li>\n                            <li style="margin-bottom: 12px;">\n                                Find <strong>Microphone</strong> and tap it ${t}\n                            </li>\n                            <li style="margin-bottom: 12px;">\n                                Select <strong>Allow</strong>\n                            </li>\n                            <li style="margin-bottom: 12px;">\n                                Refresh this page\n                            </li>\n                        </ol>\n                        \n                        <div class="micPermissionGuideCommon" style="padding: 12px; border-radius: 8px; margin-top: 16px;">\n                            <strong>Or from Settings:</strong><br>\n                            Open <strong>Chrome</strong> ${t} \n                            <strong>Three dots menu</strong> ${t} \n                            <strong>Settings</strong> ${t} \n                            <strong>Site Settings</strong> ${t} \n                            <strong>Microphone</strong>\n                        </div>\n                    `:`\n                    <p><strong>On Android:</strong></p>\n                    <ol style="margin: 12px 0; padding-left: 24px;">\n                        <li style="margin-bottom: 12px;">\n                            Tap the <strong>site info icon</strong> in the address bar ${t}\n                        </li>\n                        <li style="margin-bottom: 12px;">\n                            Tap <strong>Permissions</strong> or <strong>Site settings</strong> ${t}\n                        </li>\n                        <li style="margin-bottom: 12px;">\n                            Find and enable <strong>Microphone</strong>\n                        </li>\n                        <li style="margin-bottom: 12px;">\n                            Refresh this page\n                        </li>\n                    </ol>\n                `:"chrome"===e.browser||"edge"===e.browser?`\n                    <p><strong>On ${"chrome"===e.browser?"Chrome":"Edge"}:</strong></p>\n                    <ol style="margin: 12px 0; padding-left: 24px;">\n                        <li style="margin-bottom: 12px;">\n                            Click the <strong>lock icon</strong> or <strong>site info button</strong> in the address bar ${t}\n                        </li>\n                        <li style="margin-bottom: 12px;">\n                            Find <strong>Microphone</strong> in the permissions list ${t}\n                        </li>\n                        <li style="margin-bottom: 12px;">\n                            Change it from "Block" to <strong>Allow</strong>\n                        </li>\n                        <li style="margin-bottom: 12px;">\n                            Refresh this page\n                        </li>\n                    </ol>\n                    \n                    <div class="micPermissionGuideCommon" style=" padding: 12px; border-radius: 8px; margin-top: 16px;">\n                        <strong>Alternative:</strong><br>\n                        Go to <code>chrome://settings/content/microphone</code> ${t} \n                        Find this site and allow microphone access\n                    </div>\n                `:"safari"===e.browser?`\n                    <p><strong>On Safari (Mac):</strong></p>\n                    <ol style="margin: 12px 0; padding-left: 24px;">\n                        <li style="margin-bottom: 12px;">\n                            Click <strong>Safari</strong> in the menu bar ${t}\n                        </li>\n                        <li style="margin-bottom: 12px;">\n                            Select <strong>Settings for This Website</strong> ${t}\n                        </li>\n                        <li style="margin-bottom: 12px;">\n                            Find <strong>Microphone</strong> dropdown ${t}\n                        </li>\n                        <li style="margin-bottom: 12px;">\n                            Select <strong>Allow</strong>\n                        </li>\n                        <li style="margin-bottom: 12px;">\n                            Refresh this page\n                        </li>\n                    </ol>\n                    \n                    <div class="micPermissionGuideCommon" style="padding: 12px; border-radius: 8px; margin-top: 16px;">\n                        <strong>System Permissions:</strong><br>\n                        <strong>System Settings</strong> ${t} \n                        <strong>Privacy & Security</strong> ${t} \n                        <strong>Microphone</strong> ${t} \n                        Enable for your browser\n                    </div>\n                `:"firefox"===e.browser?`\n                    <p><strong>On Firefox:</strong></p>\n                    <ol style="margin: 12px 0; padding-left: 24px;">\n                        <li style="margin-bottom: 12px;">\n                            Click the <strong>site info icon</strong> (lock or "i") in the address bar ${t}\n                        </li>\n                        <li style="margin-bottom: 12px;">\n                            Click the <strong>arrow</strong> next to "Blocked Temporarily" ${t}\n                        </li>\n                        <li style="margin-bottom: 12px;">\n                            Find <strong>Use the Microphone</strong> ${t}\n                        </li>\n                        <li style="margin-bottom: 12px;">\n                            Change to <strong>Allow</strong>\n                        </li>\n                        <li style="margin-bottom: 12px;">\n                            Refresh this page\n                        </li>\n                    </ol>\n                `:`\n                <p><strong>General Steps:</strong></p>\n                <ol style="margin: 12px 0; padding-left: 24px;">\n                    <li style="margin-bottom: 12px;">\n                        Look for a <strong>site info icon</strong> (lock, "i", or similar) in your address bar ${t}\n                    </li>\n                    <li style="margin-bottom: 12px;">\n                        Click it and find <strong>Microphone</strong> permissions ${t}\n                    </li>\n                    <li style="margin-bottom: 12px;">\n                        Change the setting to <strong>Allow</strong>\n                    </li>\n                    <li style="margin-bottom: 12px;">\n                        Refresh this page\n                    </li>\n                </ol>\n                \n                <div class="micPermissionGuideCommon" style="padding: 12px; border-radius: 8px; margin-top: 16px;">\n                    <strong>Can't find it?</strong> Check your browser's settings menu for site permissions or privacy settings.\n                </div>\n            `},removeMicGuide(){IM("#micPermissionGuide").fadeOut(300,(function(){IM(this).remove()}))},async watchMicPermission(){const{handleMicPermission:e}=this.methods;if(navigator.permissions)try{const t=await navigator.permissions.query({name:"microphone"});t.onchange=()=>{e.call(OM,t.state)}}catch(e){console.warn("Mic permission watcher not supported")}},handleMicPermission(e){const{noPermissionText:t,tapToSpeakMicMute:n,aiAgentContainer:i,aiAgentText:r,tapToSpeakMic:a,aiAgentResponseMobile:s,aiAgentWaveform:o,promptContainerMobile:l,promptDesktop:c,noSpeechText:d}=this.variables;"granted"===e&&(IM(a).removeClass("d-none").addClass("d-flex"),IM(n).addClass("d-none").removeClass("d-flex"),IM(t).addClass("opacity-0"),setTimeout((()=>{this.variables.isMicPermission||(IM(r).removeClass("d-none opacity-0").addClass("opacity-50"),this.variables.isMicPermission=!0),IM(t).addClass("d-none")}),350),OM.methods.removeMicGuide()),"denied"===e&&(this.variables.isKeyboard||(IM(r).add(s).add(o).add(l).add(c).add(d).addClass("opacity-0"),setTimeout((()=>{IM(t).removeClass("d-none opacity-0"),IM(r).add(s).add(o).add(l).add(c).add(d).addClass("d-none")}),350)),IM(n).removeClass("d-none").addClass("d-flex"),IM(a).addClass("d-none").removeClass("d-flex"),this.variables.isMicPermission?(alert(IM(i).data("mic-access-denied")),OM.methods.showMicPermissionGuide(),this.variables.isMicPermission=!1):OM.methods.showMicPermissionGuide())},animateWaves(e){const{dataArray:t}=this.variables,{animateWaves:n}=this.methods;if(!e.isAnimating)return;requestAnimationFrame(n.bind(OM,e)),this.variables.analyser.getByteTimeDomainData(t);let i=0;for(let e=0;e<t.length;e++)i+=Math.abs(t[e]-128);let r=i/t.length;e.updateBars(r),e.draw()},showFloatingBtn(e){const{aiAgentBubble:t,canvasInstances:n}=this.variables;n.forEach((e=>{IM(e.canvasEl).closest(t).length?e.resume():e.pause()})),setTimeout((()=>{IM(t).removeClass("translate-100")}),e),setTimeout((()=>{IM(t).addClass("translate-orb-only")}),e+3500)},checkUser(){const{aiAgentWelcome:e}=this.variables,{showFloatingBtn:t,resumeOrPauseOrb:n}=this.methods;null===localStorage.getItem("isFirstUser")?(localStorage.setItem("isFirstUser",!1),setTimeout((()=>{IM(e).removeClass("d-none opacity-0"),n.call(OM)}),1500)):t.call(OM,1500)},detectSpeech(){const{analyser:e,dataArray:t,speechThreshold:n}=this.variables;if(!e)return;e.getByteTimeDomainData(t);let i=0;for(let e=0;e<t.length;e++){const n=(t[e]-128)/128;i+=n*n}Math.sqrt(i/t.length)>n&&(this.variables.hasSpeech=!0)},createCanvas(){const{aiAgentCanvas:e,canvasInstances:t,tapToSpeakMic:n,tapToSpeakDelete:r,tapToSpeakSend:a,aiAgentWaveform:s,aiAgentText:o}=this.variables,{stopMic:l,stopPlayback:c}=this.methods;t.length=0,IM(e).each(((e,n)=>{const i=new PM;i.createCanvas(OM,n),t.push(i)})),document.addEventListener(i.eventsListeners.visibilityChange,(()=>{t.forEach((e=>{document.hidden?e.pause():IM(e.canvasEl).is(":visible")&&e.resume()})),c.call(OM),IM(a).hasClass("d-flex")&&(l.call(OM,!0),IM(n).removeClass("d-none").addClass("d-flex"),IM(r).addClass("d-none"),IM(a).removeClass("d-flex").addClass("d-none"),IM(s).addClass("d-none opacity-0"),IM(o).removeClass("d-none opacity-0").addClass("opacity-50"))})),t.forEach((e=>{IM(e.canvasEl).is(":visible")?e.resume():e.pause()}))},verticalDrag(){const{aiAgentBubble:e}=this.variables,{MOUSEDOWN:t,MOUSEMOVE:n,MOUSEUP:r,TOUCHSTART:a,TOUCHMOVE:s,TOUCHEND:o}=i.eventsListeners,l=IM(e)[0];let c=!1,d=0,u=0,h=!1;function p(e){c=!0,h=!1,d=e,u=IM(l).offset().top}function m(e){if(!c)return;Math.abs(e-d)>5&&(h=!0);let t=u+(e-d);const n=window.innerHeight-IM(l).outerHeight()-10;t=Math.max(10,Math.min(t,n)),IM(l).css("top",t+"px")}function f(){c=!1}IM(l).on(t,(e=>{e.preventDefault(),p(e.clientY)})),IM(document).on(n,(e=>m(e.clientY))),IM(document).on(r,f),l.addEventListener(a,(e=>{p(e.touches[0].clientY)}),{passive:!1}),document.addEventListener(s,(e=>{c&&e.preventDefault(),m(e.touches[0].clientY)}),{passive:!1}),document.addEventListener(o,f),IM(l).on(i.eventsListeners.CLICK,(e=>{h&&(e.preventDefault(),e.stopImmediatePropagation())}))},closeModal(){const{aiAgentResponseDesktop:e,aiAgentMainClose:t,aiAgentMainScreen:n,aiAgentResponseDesk:r,aiAgentContainer:a,aiAgentMain:s,bodyHtml:o,toggleKeyboard:l,toggleVoice:c,aiAgentResponseClose:d,voicePromptBtn:u,tapToSpeakBtn:h,keyboardBtn:p,promptContainerMobile:m}=this.variables,{showFloatingBtn:f,removeVideoEventsHandler:g}=this.methods;IM(t).on(i.eventsListeners.CLICK,(()=>{IM(u).add(h).add(l).add(c).add(p).attr("disabled",!1),IM(l).trigger("click"),IM(c).trigger("click"),IM(s).addClass("opacity-0"),IM(".tap-to-play").addClass("d-none"),IM(m).removeClass("hide-before"),g.call(OM),setTimeout((()=>{IM(Qp.variables.section).length&&Qp.variables.observer.enable(),IM(s).addClass("d-none"),IM(o).removeClass("overflow-hidden"),f.call(OM,0)}),350)})),IM(d).on(i.eventsListeners.CLICK,(()=>{IM(u).add(h).add(l).add(c).add(p).attr("disabled",!1),IM(l).trigger("click"),IM(c).trigger("click"),IM(e).addClass("d-none opacity-0"),IM(n)[0].style.transform="translateX(0)",OM.variables.isTranslated=!1,IM(n).removeClass("translate-left"),IM(t).removeClass("d-none").addClass("d-flex"),IM(s).addClass("opacity-0"),IM(r).html(`<div class="shimmer-text fs-16 lh-24 px-5">${IM(a).data("loading-text")}</div>`),g.call(OM),setTimeout((()=>{IM(Qp.variables.section).length&&Qp.variables.observer.enable(),IM(s).addClass("d-none"),IM(o).removeClass("overflow-hidden"),f.call(OM,0)}),350)}))},showModal(){const{aiAgentBubble:e,aiAgentModal:t,aiAgentMain:n,bodyHtml:r,aiAgentWelcomeBtn:a}=this.variables,{resumeOrPauseOrb:s}=this.methods,{CLICK:o}=i.eventsListeners;IM(e).on(o,(()=>{IM(Qp.variables.section).length&&Qp.variables.observer.disable(),IM(n).removeClass("d-none opacity-0"),IM(r).addClass("overflow-hidden"),s.call(OM)})),IM(a).on(o,(()=>{IM(t).addClass("hide"),setTimeout((()=>{IM(Qp.variables.section).length&&Qp.variables.observer.disable(),IM(t).hide(),IM(n).removeClass("d-none opacity-0"),IM(r).addClass("overflow-hidden"),s.call(OM)}),1e3)}))},hideIntro(){const{aiAgentWelcome:e,aiAgentModalClose:t,aiAgentModalBackdrop:n}=this.variables,{showFloatingBtn:r}=this.methods;IM(t).add(n).on(i.eventsListeners.CLICK,(()=>{IM(e).addClass("opacity-0"),setTimeout((()=>{IM(e).hide(),r.call(OM,0)}),1e3)}))},videoEventsHandler(e){if(!e)return;const{mobileResponsePlay:t,mobileResponseMute:n,playIcon:r,pauseIcon:a,muteIcon:s,unmuteIcon:o,mobileResponseSeekbar:l,mobileResponseSeekbarProgress:c}=this.variables,{loadedData:d,timeUpdate:u,CLICK:h}=i.eventsListeners;this.variables.video._handlers={loadeddata:()=>{IM(`${t}, ${n}, ${l}`).removeClass("d-none")},timeupdate:()=>{const t=e.currentTime/e.duration*100;document.querySelector(c).style.width=t+"%"}},e.addEventListener(d,e._handlers.loadeddata),e.addEventListener(u,e._handlers.timeupdate),IM(n).on(`${h}.videoControls`,(()=>{const t=e.muted;e.muted=!t,IM(n).find(s).toggleClass("d-none",t),IM(n).find(o).toggleClass("d-none",!t)})),IM(t).on(`${i.eventsListeners.CLICK}.videoControls`,(()=>{e.paused?(e.play(),IM(r).addClass("d-none"),IM(a).removeClass("d-none")):(e.pause(),IM(r).removeClass("d-none"),IM(a).addClass("d-none"))}))},addCtaEvents(){const{aiAgentContainer:e,mobileResponseLink:t,mobileResponseLinkExpand:n,mobileResponseLinks:r}=this.variables,{CLICK:a}=i.eventsListeners;IM(r).length&&(1==IM(t).length&&IM(r).addClass("d-flex"),IM(r).removeClass("d-none opacity-0"),IM(n).each(((n,i)=>{IM(i).on(a,(n=>{n.stopPropagation();const r=IM(i).closest(t);r.toggleClass("expanded"),r.hasClass("expanded")?IM(i).text(IM(e).data("show-less-text")):IM(i).text(IM(e).data("know-more-text"))}))})),IM(t).each(((e,t)=>{IM(t).on(a,(e=>{IM(e.target).hasClass("mobile-response__link--expand")||window.open(IM(t).data("url"),"_blank")}))})))},addButtonEvents(){const{promptDesktop:e,aiAgentTextarea:t,aiAgentResponseMobile:n,mobileResponseTag:r,mobileResponseTags:a,aiAgentContainer:s}=this.variables,{fetchApi:o,removeVideoEventsHandler:l}=this.methods;IM(a).length&&(IM(a).removeClass("d-none opacity-0"),IM(r).each(((a,c)=>{IM(c).on(i.eventsListeners.CLICK,(()=>{IM(r).addClass("opacity-50"),IM(r).attr("disabled",!0),IM(r).eq(a).removeClass("opacity-50"),IM(t).val(IM(r).eq(a).text().trim()),IM(e).text(IM(r).eq(a).text().trim()),IM(e).attr("title",IM(r).eq(a).text().trim()),IM(n).html(`<div class="shimmer-text fs-16 lh-24 px-5">${IM(s).data("loading-text")}</div>`),l.call(OM),o.call(OM)}))})))},stopPlayback(){const e=OM.variables.currentAudio||document.getElementById("ttsAudio");if(e)try{e.pause(),e.currentTime=0,e.removeAttribute("src"),e.load()}catch(e){console.warn("Audio cleanup failed",e)}if(OM.variables.currentAudio=null,OM.variables.mediaSource){try{"open"===OM.variables.mediaSource.readyState&&OM.variables.mediaSource.endOfStream()}catch(e){console.warn("MediaSource already closed")}OM.variables.mediaSource=null}OM.variables.currentSourceBuffer=null;const t=document.getElementById("ttsPlayModal");t&&(t.style.display="none")},async fetchVoicePlayback(e){const{aiAgentContainer:t,promptContainerMobile:n}=this.variables,{stopPlayback:r}=this.methods,a=IM(t).data("voice-playback-url");r.call(OM);const s=!ks.methods.isIos()&&"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported("audio/mpeg");try{const o=IM(t).data("voice-playback-apikey")??"",l=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json","api-key":o},body:JSON.stringify({text:e,voice_name:"Coach"})});if(!l.ok)return console.error("Error generating audio:",l.status),void r.call(OM);if(!s){const p=l.body.getReader(),m=[];for(;;){const{done:_,value:b}=await p.read();if(_)break;m.push(b)}const f=new Blob(m,{type:"audio/mpeg"}),g=URL.createObjectURL(f);let v=document.getElementById("ttsAudio");if(v||(v=document.createElement("audio"),v.id="ttsAudio",v.playsInline=!0,document.body.appendChild(v)),v.src=g,v.onended=()=>{r.call(OM),URL.revokeObjectURL(g)},v.onerror=e=>{console.error("Audio error:",e),r.call(OM),URL.revokeObjectURL(g)},IM(window).width()<i.breakPoints.LARGE){const y=IM(".tap-to-play");y.removeClass("d-none"),IM(n).addClass("hide-before"),y.on(i.eventsListeners.CLICK,(()=>{v.play().catch((e=>console.error("Play failed:",e))),y.addClass("d-none"),IM(n).removeClass("hide-before")}))}return}OM.variables.mediaSource=new MediaSource,OM.variables.currentAudio=new Audio;const c=OM.variables.currentAudio;c.playsInline=!0,c.src=URL.createObjectURL(OM.variables.mediaSource),c.onended=()=>r.call(OM),c.onerror=e=>{console.error("Audio error:",e),r.call(OM)},OM.variables.mediaSource.addEventListener("sourceopen",(()=>{if(!OM.variables.currentSourceBuffer)try{OM.variables.currentSourceBuffer=OM.variables.mediaSource.addSourceBuffer("audio/mpeg")}catch(e){console.error("Error creating SourceBuffer:",e)}}),{once:!0});const d=l.body.getReader();let u=!0;async function h(e){return new Promise((t=>{const n=OM.variables.mediaSource;if(!n||"open"!==n.readyState)return t();const i=OM.variables.currentSourceBuffer;i?i.updating?i.addEventListener("updateend",(()=>{OM.variables.currentSourceBuffer?(i.appendBuffer(e),i.addEventListener("updateend",t,{once:!0})):t()}),{once:!0}):(i.appendBuffer(e),i.addEventListener("updateend",t,{once:!0})):n.addEventListener("sourceopen",(()=>{const n=OM.variables.currentSourceBuffer;if(!n)return t();n.appendBuffer(e),n.addEventListener("updateend",t,{once:!0})}),{once:!0})}))}for(;;){const{done:x,value:w}=await d.read();if(x||!OM.variables.mediaSource)break;await h(w),u&&(c.play().catch((e=>console.error("Play failed:",e))),u=!1)}"open"===OM.variables.mediaSource?.readyState&&OM.variables.mediaSource.endOfStream()}catch(S){console.error("Audio streaming error:",S),r.call(OM)}},handleResponseError(){const{voicePromptBtn:e,toggleKeyboard:t,toggleVoice:n,keyboardBtn:r,tapToSpeakBtn:a,aiAgentResponseMobile:s,aiAgentResponseDesk:o,aiAgentContainer:l}=this.variables;IM(e).add(a).add(t).add(n).add(r).attr("disabled",!1);const c=`\n                <div class="d-flex flex-column align-items-center justify-content-center">\n                    <h2 class="text-red-200 fvs-bold text-center ff-sequel fs-24 lh-26">${IM(l).data("server-error-title")}</h2>\n                    <p class="mobile-response__error fs-20 lh-24 mt-4 text-center">${IM(l).data("server-error-description")}</p>\n                </div>\n            `;IM(window).width()<i.breakPoints.LARGE?IM(s).html(c):setTimeout((()=>{IM(o).html(c)}),350)},renderMarkdown(e){const t=EE.parse(e),n=LM.sanitize(t),i=document.createElement("div");return i.innerHTML=n,i.querySelectorAll("a[href]").forEach((e=>{e.target="_blank",e.rel="noopener noreferrer"})),i.innerHTML},async fetchApi(){const{aiAgentTextarea:e,keyboardBtn:t,voicePromptBtn:n,aiAgentContainer:i,toggleKeyboard:r,toggleVoice:a,tapToSpeakBtn:s}=this.variables,{getOrCreateCid:o,getOrCreateUid:l,handleResponseError:c,handleThinkingMsg:d,handleDisplayResponse:u}=this.methods,{isKeyboard:h}=this.variables,p=IM(i).data("mg-assist-url"),m=h?"":OM.variables.base64Audio,f=h?IM(i).data("appname-keyboard"):IM(i).data("appname-voice"),g=h?IM(e).val().trim():"Listening...";let v={history:JSON.stringify(OM.variables.history),turbo:"on",query:g,voice:m,appname:f,token:"",context:OM.variables.context,uid:l.call(OM),cid:o.call(OM)};v=JSON.stringify(v),IM(n).add(s).add(r).add(a).add(t).attr("disabled",!0);try{const e=await fetch(p,{method:"POST",headers:{"Content-Type":"application/json"},body:v});if(!e.body)throw new Error("ReadableStream not supported");const t=e.body.getReader(),n=new TextDecoder("utf-8");let i="";for(;;){const{done:e,value:r}=await t.read();if(e)break;i+=n.decode(r,{stream:!0});const a=i.split("\n\n");i=a.pop();for(const e of a){const t=e.split("\n");let n=null,i="";for(const e of t)e.startsWith("event:")?n=e.slice(6).trim():e.startsWith("data:")&&(i+=e.slice(5)+"\n");if(i=i.trim(),i)try{let e=JSON.parse(i).message;"string"==typeof e&&(e=JSON.parse(e)),e.hasOwnProperty("strm")?d.call(OM,e):e.hasOwnProperty("response")&&(OM.variables.context={...e.context},OM.variables.history.push({content:g,role:"user"}),OM.variables.history.push({content:e.key,role:"assistant"}),u.call(OM,e))}catch(e){console.warn("â ï¸ SSE parse failed:",e,i)}}}}catch(e){console.error(e),c.call(OM)}},handleThinkingMsg(e){const{aiAgentResponseMobile:t,aiAgentResponseDesk:n,shimmerText:r}=this.variables,a=`<div class="shimmer-text fs-16 lh-24 opacity-0 px-5">${e.text}</div>`;setTimeout((()=>{IM(window).width()<i.breakPoints.LARGE?IM(t).html(a):IM(n).html(a),IM(r).removeClass("opacity-0")}),350)},getResponseString(e){return`\n                <div class="w-100 opacity-0 mobile-response h-100">\n                    ${e.images[0]||e.videos[0]?`<div class="w-100 h-auto mobile-response__media position-relative flex-shrink-0">\n                        <video playsinline webkit-playsinline autoplay muted loop poster="${e.images[0]}" class="w-100 object-fit-contain h-auto mobile-response__video">\n                            <source src="${e.videos[0]}" type="video/mp4" />\n                            <source src="${e.videos[0]}" type="video/webm" />\n                            <img src="${e.images[0]}" alt="Fallback image" class="w-100 object-fit-contain h-auto mobile-response__image"/>\n                        </video>\n                        <button type="button" class="mobile-response__mute z-1 bg-transparent d-none align-items-center justify-content-center cursor-pointer position-absolute"\n                            aria-label="" title="">\n                            <svg class="icon mute-icon text-white align-items-center justify-content-center" aria-roledescription="icon">\n                                <use xlink:href="/etc.clientlibs/mg-select/clientlibs/clientlib-site/resources/images/sprite/sprite.svg#mute"/>\n                            </svg>\n                            <svg class="icon unmute-icon text-white d-none align-items-center justify-content-center " aria-roledescription="icon">\n                                <use xlink:href="/etc.clientlibs/mg-select/clientlibs/clientlib-site/resources/images/sprite/sprite.svg#unmute"/>\n                            </svg>\n                        </button>\n                        <button type="button" class="mobile-response__play z-1 bg-transparent d-none align-items-center justify-content-center cursor-pointer position-absolute"\n                            aria-label="" title="">\n                            <svg class="icon play-icon d-none text-white align-items-center justify-content-center" aria-roledescription="icon">\n                                <use xlink:href="/etc.clientlibs/mg-select/clientlibs/clientlib-site/resources/images/sprite/sprite.svg#play"/>\n                            </svg>\n                            <svg class="icon pause-icon text-white align-items-center justify-content-center " aria-roledescription="icon">\n                                <use xlink:href="/etc.clientlibs/mg-select/clientlibs/clientlib-site/resources/images/sprite/sprite.svg#pause"/>\n                            </svg>\n                        </button>\n                        <div class="mobile-response__seekbar position-absolute d-none">\n                            <div class="mobile-response__seekbar--progress bg-red-300 h-100"></div>\n                        </div>\n                    </div>`:""}\n                    ${e.response?'<em><p class="mobile-response__text w-100"></p></em>':""}\n                    ${e.r10CTADetails&&e.r10CTADetails.official&&e.r10CTADetails.official.length?`<div class="mt-6 mobile-response__links flex-shrink-0 d-none opacity-0">\n                                ${e.r10CTADetails.official.map(((e,t)=>`\n                                        <div class="mobile-response__link" data-url="${e.url}">\n                                            <div class="mobile-response__link--header flex-column d-flex justify-content-between gap-3 flex-wrap">\n                                                <div class="d-flex align-items-center flex-fill gap-2 justify-content-between">\n                                                    <div class="mobile-response__link--title flex-shrink-0">${e.title}</div>\n                                                    <svg class="icon flex-shrink-0" aria-roledescription="icon">\n                                                        <use\n                                                            xlink:href="/etc.clientlibs/mg-select/clientlibs/clientlib-site/resources/images/sprite/sprite.svg#arrow-diagonal" />\n                                                    </svg>\n                                                </div>\n                                                <button class="mobile-response__link--expand">Know more</button>\n                                            </div>\n                                            <div class="mobile-response__link--description">${e.content}</div>\n                                        </div>\n                                    `)).join("")}\n                            </div>`:""}\n                    ${e.buttons&&e.buttons.length?`\n                            <div class="mt-6 mobile-response__tags d-none opacity-0 flex-shrink-0">\n                            ${e.buttons.map(((e,t)=>`\n                                    <button class="lh-20 mobile-response__tag px-4 text-center cursor-pointer">\n                                        ${e}\n                                    </button>`)).join("")}\n                            </div>\n                        `:""}\n                </div>\n                `},handleDisplayResponse(e){const{aiAgentResponseMobile:t,aiAgentResponseDesk:n,aiAgentMain:r,mobileResponse:a,mobileResponseVideo:s,mobileResponseMedia:o}=this.variables,{fetchVoicePlayback:l,videoEventsHandler:c,responseTextDisplay:d,handleScrollableState:u,autoScrollMobileResponse:h,getResponseString:p}=this.methods,m=p.call(OM,e);setTimeout((async()=>{OM.variables.isKeyboard||IM(r).hasClass("d-none")||document.hidden||l.call(OM,e.response),IM(window).width()<i.breakPoints.LARGE?IM(t).html(m):IM(n).html(m),h.call(OM),IM(a).removeClass("opacity-0");const p=IM(s).get(0);IM(o).length||u.call(OM),this.variables.video=p,c.call(OM,p),d.call(OM,e.response)}),350)},async generatePrompt(){const{noSpeechText:e,tapToSpeakSend:t,tapToSpeakMic:n,aiAgentWaveform:i,tapToSpeakDelete:r}=this.variables,{stopMic:a,fetchApi:s,handleVoicePrompt:o}=this.methods;await a.call(OM),IM(i).addClass("opacity-0"),IM(r).addClass("opacity-0"),IM(n).removeClass("d-none").addClass("d-flex"),IM(t).removeClass("d-flex").addClass("d-none"),setTimeout((()=>{IM(i).addClass("d-none"),IM(r).addClass("d-none")}),350),this.variables.hasSpeech?(o.call(OM),await s.call(OM)):setTimeout((()=>{IM(e).removeClass("d-none opacity-0")}),350)},handleVoicePrompt(){const{aiAgentMainClose:e,aiAgentResponseDesktop:t,promptContainerMobile:n,tapToSpeak:r,aiAgentMain:a,aiAgentOrbContainer:s,aiAgentMainScreen:o,promptDesktop:l,aiAgentKeyboard:c,aiAgentResponseMobile:d,aiAgentResponseDesk:u,aiAgentContainer:h}=this.variables,{resumeOrPauseOrb:p,removeVideoEventsHandler:m,translateMainScreen:f}=this.methods;IM(window).width()<i.breakPoints.LARGE?(IM(r).addClass("opacity-0"),IM(a).find(s).addClass("opacity-0"),setTimeout((()=>{IM(n).removeClass("d-none").addClass("opacity-100"),IM(r).hide(),IM(a).find(s).hide(),IM(d).html(`<div class="shimmer-text fs-16 lh-24 px-5">${IM(h).data("loading-text")}</div>`),m.call(OM),IM(d).removeClass("d-none opacity-0"),IM(d).height(IM(o).height()-142-IM(n).height()),IM(c).addClass("m-0"),p.call(OM)}),350)):(IM(l).text(IM(h).data("voice-ask-prompt")),IM(l).attr("title",IM(h).data("voice-ask-prompt")),IM(o).addClass("translate-left"),IM(e).addClass("d-none").removeClass("d-flex"),setTimeout((()=>{IM(l).removeClass("d-none opacity-0"),IM(t).removeClass("d-none opacity-0"),IM(u).html(`<div class="shimmer-text fs-16 lh-24 px-5">${IM(h).data("loading-text")}</div>`),m.call(OM),f.call(OM),p.call(OM)}),500))},init(){const{aiAgentContainer:e}=OM.variables;IM(e).length&&"edit-mode"!=IM(e).data("mode")&&(ks.methods.isIos()&&IM("body").addClass("ios"),this.hideIntro.call(OM),this.createCanvas.call(OM),this.verticalDrag.call(OM),this.checkUser.call(OM),this.micAndSendBtn.call(OM),this.stopRecording.call(OM),this.toggleMode.call(OM),this.handleTextarea.call(OM),this.textAreaEventHandler.call(OM),this.keyboardInputAgainEvent.call(OM),this.KeyBoardInputSend.call(OM),this.keyboardHandler.call(OM),this.handleKeyboardFocus.call(OM),this.speakAgainMobile.call(OM),this.closeModal.call(OM),this.showModal.call(OM))}}};var NM=n(9755);const BM={variables:{footer:".mg-select__footer",profile:".profile-section",editProfile:".profile-section__edit",profileWrapper:".profile-section__wrapper",bookingWrapper:".booking-wrapper",bookingClose:".booking-wrapper__close",profileClose:".profile-modal__close",loginWrapper:".login-wrapper",footerBookingButton:".footer__content--booking",loginSubmit:".login-wrapper__submit-button",profilefirstame:".first-name",profilelastname:".last-name",profilemobile:".mobile-number",profileemail:".email",profileaddress:".address",bookingModel:".model-name",bookDate:".book-date",bookColor:".book-color",bookId:".book-id",consentInput:".consent_input",isLoggedIn:!1},methods:{handleEdit(e){const{profileWrapper:t}=BM.variables;if(NM(t).length<=0)return;const n=JSON.parse(sessionStorage.getItem("bookingData")),i={firstName:n.Firstname,lastname:n.Lastname,number:n.MobNumber,email:n.Email,address:n.Address},r={bookDate:n.BookingDate,bookId:n.Bookingnumber,color:n.Color,model:n.Model,image:""};console.log(n),BM.methods.addProfileDetails(e,i),BM.methods.addBookDetails(e,r)},addBookDetails(e,t){const{profileWrapper:n,bookingModel:i,bookDate:r,bookColor:a,bookId:s}=BM.variables;NM(n).find(i).text(t.model),NM(n).find(s).text(t.bookId),NM(n).find(r).text(t.bookDate),NM(n).find(a).text(t.color)},addProfileDetails(e,t){const{profileWrapper:n,profilefirstame:i,profilelastname:r,profilemobile:a,profileemail:s,profileaddress:o}=BM.variables;NM(n).find(i)[0].value=t.firstName||"",NM(n).find(r)[0].value=t.lastName||"",NM(n).find(a)[0].value=t.number||"",NM(n).find(s)[0].value=t.email||"",NM(n).find(o)[0].value=t.address||""},handleOpenModal(e){const{footer:t,footerBookingButton:n,profile:r}=BM.variables;NM(t).find(n).on(i.eventsListeners.CLICK,(e=>{const n=NM(t).find(r);NM("body").append(n),NM(n).removeClass("d-none").addClass("inside-body-profile"),NM("body").addClass("overflow-hidden")}))},removeModal(e){const{profileClose:t}=BM.variables;NM(e).find(t).each((function(){NM(this).on("click",(function(){BM.methods.handleCloseModal()}))}))},handleCloseModal(){const{profile:e,footer:t}=BM.variables;NM(this).closest(e).addClass("d-none"),NM("body").removeClass("overflow-hidden"),NM("body").css("overflow","");const n=NM("body").find(".inside-body-profile");NM(t).append(NM(n).removeClass("inside-body-profile").addClass("d-none"))},init(){const{profile:e,profileWrapper:t,loginWrapper:n}=BM.variables;NM(e).length>0&&(NM(n).length>0||NM(t).length>0)&&NM(e).each(((e,t)=>{BM.methods.handleEdit(t),BM.methods.handleOpenModal(t),BM.methods.removeModal(t)}))}}};var FM=n(9755);const UM={variables:{eBookingForm:".ebooking__form",eBookingMobile:".ebooking__form--mobile",eBookingNumeric:".ebooking__form-input--numeric",eBookingOtpInputs:".ebooking__form--otp__input",eBookingOtpBtn:".ebooking__form--otp__btn",eBookingOtpScreen:".ebooking__form--otp-screen",eBookingOtpGroup:".ebooking__form--otp__group",eBookingError:".ebooking__form--error",eBookingInputs:".ebooking__form--input",eBookingSubmit:".ebooking__form--submit",eBookingBack:".ebooking__form--back",eBookingDealership:".ebooking__form--dealership",eBookingResendText:".ebooking__form--otp__resend",eBookingFormDetails:".ebooking__form--details",eBookingConsent:".ebooking__form--footer__consent",eBookingAmountSection:".ebooking__form--footer__amount",eBookingAddress:".ebooking__form--pincode__address",eBookingDetailScreen:".ebooking__form--last__screen",eBookingFormScroll:".ebooking__form--scroll",eBookingPincodeScreen:".ebooking__form--pincode__screen",eBookingFeatureScreen:".ebooking__form--feature-screen",eBookingSecondScreen:".ebooking__form--personal-details",eBookingShowroomPrice:".ebooking__showroom-price",eBookingDealerOption:".ebooking__form--dealership__option",eBookingSwiper:".ebooking__variation--swiper",eBookingVariationOptions:".ebooking__variation--options",eBookingVariationContainer:".ebooking__variation--main",eBookingVariationList:".ebooking__variation--list",eBookingVariationPrev:".ebooking__options--nav__prev",eBookingVariationNext:".ebooking__options--nav__next",eBookingSwiperPrev:".ebooking__variation--navigation__prev",eBookingSwiperNext:".ebooking__variation--navigation__next",eBookingSwiperPagination:".ebooking__variation--pagination",eBookingSwiperInput:".ebooking__variation--pagination__input",eBookingSwiperControls:".ebooking__variation--controls",eBookingColorText:".ebooking__variation--color",eBookingPayu:".ebooking__form--payu",eBookingModal:".ebooking__modal",eBookingVariationTab:".ebooking__variation--item",eBookingVariationSection:".ebooking__variation--section",eBookingPostPayment:".ebooking__post-payment",eBookingPostPaymentSuccess:".ebooking__post-payment__success",eBookingPostPaymentFailure:".ebooking__post-payment__failure",eBookingDMSNoResponse:".ebooking__post-payment__dms-noresponse",eBookingDMSSucess:".ebooking__post-payment__dms-success",eBookingOrderID:".ebooking__post-payment__orderid",eBookingTxnID:".ebooking__post-payment__txnid",eBookingAmount:".ebooking__form--booking__amount",eBookingConfetti:".ebooking__confetti",postPaymentDetails:".post-payment-details",isFeatureScreen:!0,isPincodeScreen:!1,isPersonalDetailScreen:!1,ctaLabel:".cta-section__label ",ctaSection:".cta-section__main",otpAttempts:0,activeTab:0,stateCode:null,city:null,modal:null},methods:{generateValidationSchema(){const{eBookingForm:e,eBookingInputs:t}=this.variables,n=[];FM(t).each((function(){n.push(FM(this).attr("name"))})),Ct.methods.generateFormSchema.call(Ct,n,e,e)},handlePanInput(){const{eBookingInputs:e}=this.variables;FM(`${e}[name="pan"]`).on(i.eventsListeners.INPUT,(function(){FM(this).val(FM(this).val().toUpperCase())}))},handleOtpFields(){const{eBookingOtpInputs:e}=this.variables;Ct.methods.handleOtpEvents(FM(e))},handleNumberField(){const{eBookingNumeric:e}=this.variables;FM(e).each((function(){Ct.methods.handleNumberInput(this)}))},handleDobField(){const{eBookingInputs:e}=this.variables;Ct.methods.handleDateField(FM(`${e}[name="dob"]`))},handlePincodeFields(){const{eBookingInputs:e,eBookingAddress:t,eBookingDealership:n}=this.variables,{fetchCityByPincode:r,fetchLatLngByPincode:a,getDealerData:s,handleChangeDealer:o}=this.methods,{INPUT:l}=i.eventsListeners;FM(`${e}[name="pincode"]`).on(l,(async function(){if("true"==FM(this).attr("aria-valid")){Bt.method.showLoader();if(await r.call(UM)){const e=await a.call(UM);if(e.lat&&e.lng){await s.call(UM,e.lat,e.lng)&&o.call(UM)}}}else FM(t).text("").addClass("opacity-0"),FM(n).html(`\n                            <option disabled selected hidden value="" >${FM(n).data("placeholder")}</option>\n                        `),FM(n).attr("disabled",!0)}))},handleBackBtn(){const{eBookingBack:e,eBookingSubmit:t,eBookingDetailScreen:n,eBookingPincodeScreen:r,eBookingSecondScreen:a,eBookingFeatureScreen:s,ctaLabel:o,ctaSection:l,eBookingFormScroll:c}=this.variables;FM(e).on(i.eventsListeners.CLICK,(function(){UM.variables.isPincodeScreen?(FM(a).addClass("d-none").removeClass("d-flex"),FM(s).removeClass("d-none"),UM.variables.isPincodeScreen=!1,UM.variables.isFeatureScreen=!0,FM(t).find(o).text(FM(t).data("book-now-label")),FM(t).find(l).attr("title",FM(t).data("book-now-label"))):UM.variables.isPersonalDetailScreen&&(FM(n).addClass("d-none"),FM(r).removeClass("d-none"),UM.variables.isPersonalDetailScreen=!1,UM.variables.isPincodeScreen=!0,FM(t).find(o).text(FM(t).data("continue-label")),FM(t).find(l).attr("title",FM(t).data("continue-label"))),FM(c).animate({scrollTop:0},500),FM("html, body").animate({scrollTop:0},500)}))},handleChangeDealer(){const{eBookingDealership:e}=this.variables;FM(e).on(i.eventsListeners.CHANGE,(async function(){FM(`${e} option:selected`).val()}))},handleDisableOtpFields(){const{eBookingMobile:e,eBookingOtpInputs:t}=this.variables;FM(e).on(i.eventsListeners.INPUT,(function(){"false"==FM(`${e}:visible`).attr("aria-valid")&&FM(t).attr("disabled",!0)}))},changeVariation(){const{eBookingVariationTab:e,eBookingVariationSection:t,eBookingAmount:n}=this.variables,{CLICK:r}=i.eventsListeners;FM(e).each((function(i){FM(this).on(r,(function(){const r=UM.variables.activeTab;if(i!=r){FM(this).attr("aria-selected","true"),FM(e).eq(r).attr("aria-selected","false");const a=ks.methods.formatIndianAmount(FM(e).eq(r).data("booking-amount"));FM(n).text(a),FM(t).eq(r).addClass("opacity-0 z-n1 pe-none").removeClass("opacity-100").attr("aria-hidden","true"),FM(t).eq(i).removeClass("opacity-0 z-n1 pe-none").addClass("opacity-100").attr("aria-hidden","false"),UM.variables.activeTab=i}}))}))},setControlsPosition(){const{eBookingSwiper:e,eBookingColorText:t,eBookingSwiperControls:n}=this.variables;FM(e).each((function(){let e=FM(this).find(t).height();FM(this).find(t).each((function(){e=FM(this).height()>e?FM(this).height():e})),e-=32,FM(this).find(n).css("bottom",e)}))},createPaginationBullets(e,t,n,i){const r=s();return`<div class="${e} ebooking__variation--pagination__bullet rounded-circle overflow-hidden opacity-100 position-relative">\n                        <label for=${r} style="background-color: ${t};" class="d-inline-block w-100 h-100 cursor-pointer" />\n                        <input id=${r} type="radio" name="ExtColor" value="${n}" class="ebooking__variation--pagination__input position-absolute top-0 start-0 z-n1" \n                            ${0===i?"checked":""}/>\n                    </div>`},initModal(){const{eBookingModal:e}=this.variables;UM.variables.modal=Cs.methods.initModal(FM(e))},showModal(e){const{modal:t,eBookingModal:n}=this.variables,i=FM(n).find(Cs.variables.modalTitle),r=FM(n).find(Cs.variables.modalMessage),a=FM(n).data(`${e}-title`)??"",s=FM(n).data(`${e}-subtitle`)??"";FM(i).text(a),FM(r).text(s),t.show()},initSwiperVariations(){const{eBookingVariationOptions:e,eBookingVariationPrev:t,eBookingVariationNext:n}=this.variables;new Dp(FM(e).get(0),{modules:[Rp],slidesPerView:"auto",navigation:{nextEl:n,prevEl:t,disabledClass:"opacity-0"}})},initSwiper(){const{eBookingSwiper:e,eBookingSwiperNext:t,eBookingSwiperPrev:n,eBookingSwiperPagination:i,eBookingSwiperInput:r}=this.variables,{createPaginationBullets:a}=this.methods;FM(e).each((function(){const e=FM(this),s=[];FM(this).find(".swiper-slide").each((function(){s.push({name:FM(this).data("color-name"),rgbCode:FM(this).data("color-code")})}));const o=FM(this).find(t).get(0),l=FM(this).find(n).get(0),c=FM(this).find(i).get(0);new Dp(this,{modules:[Vp,Rp,Np],effect:"fade",slidesPerView:1,fadeEffect:{crossFade:!0},navigation:{nextEl:o,prevEl:l,disabledClass:"opacity-0"},pagination:{el:c,clickable:!0,renderBullet:function(e,t){return a(t,s[e].rgbCode,s[e].name,e)}},breakpoints:{1024:{noSwiping:!0}},on:{slideChange(){const t=e.find(r);FM(t).length&&(FM(t).each((function(){this.checked=!1})),FM(t)[this.activeIndex].checked=!0)}}})}))},resendOtpTimer(){const{eBookingResendText:e,eBookingOtpBtn:t,ctaLabel:n}=this.variables;let r=i.timeIntervals.OTP_RESEND_TIME;const a=FM(e).data("message"),s=FM(t).data("resend-otp");if(a.length>0){const t=a.replace("{time}s",`<span class='text-brown-50'>00:${r}S</span>`);FM(e).html(t)}FM(e).removeClass("opacity-0"),Os.variables.isResendTimerActive=!0,FM(t).addClass("pe-none opacity-80"),FM(t).find(n).text(s);const o=setInterval((function(){const n=a.replace("{time}s",`<span class='text-brown-50'>00:${r<10?"0":""}${r}S</span>`);FM(e).html(n),r--,r<0&&(Os.variables.isResendTimerActive=!1,clearInterval(o),FM(t).removeClass("pe-none opacity-80"),FM(e).addClass("opacity-0"))}),1e3)},generateOtp(){const e=this,{eBookingOtpBtn:t,eBookingOtpInputs:n,eBookingMobile:r,eBookingForm:a}=this.variables,{resendOtpTimer:s,showModal:o}=this.methods,l=FM(n).data("otp-generate-url"),c=FM(n).data("otp-generate-apikey"),d=i.validationLimits.MAX_OTP_ATTEMPTS;FM(t).on(i.eventsListeners.CLICK,(async function(){if("true"==FM(`${r}:visible`).attr("aria-valid"))if(i.eventsListeners.ADOBE_DATA_LAYER.push(Ot.methods.createDatalayer("request otp",{webInteraction:Ot.methods.createWebInteraction(FM(t).find(".cta-section__label").text().trim(),"ebooking form"),form:Ot.methods.formDatalayer("step1.1 - request otp",0,1),userDetails:{phoneNumber:FM(".ebooking__form--mobile[name='mobilePhone']").val()}})),Bt.method.showLoader(),e.variables.otpAttempts<d){e.variables.otpAttempts++,FM(n).attr("disabled",!1),1==e.variables.otpAttempts&&setTimeout((function(){e.variables.otpAttempts=0}),1e3*i.timeIntervals.OTP_RESET_TIME);let a={numbers:FM(`${r}:visible`).val(),otpsource:"ebook",email:""};a=JSON.stringify(a);kt.ajaxHit(l,"POST",a,c).done((e=>{if(Bt.method.hideLoader(),"error"==e.status)return void o.call(UM,"api-failure");const t=e.TransactionId;"limitReached"!=t?(sessionStorage.setItem("otpTransactionId",t),FM(n).eq(0).focus(),s.call(UM)):o.call(UM,"max-attempts")})).fail((e=>{Bt.method.hideLoader(),o.call(UM,"api-failure"),i.eventsListeners.ADOBE_DATA_LAYER.push(Ot.methods.createDatalayer("form error",{webInteraction:Ot.methods.createWebInteraction(FM(t).data("resend-otp")),form:Ot.methods.formDatalayer(),errorDetails:Ot.methods.createErrorDatalayer("Generate OTP API Failure","API_FAILURE")})),console.error(e)}))}else Bt.method.hideLoader(),o.call(UM,"max-attempts");else Os.methods.validateField(FM(`${r}:visible`),a,"submit"),i.eventsListeners.ADOBE_DATA_LAYER.push(Ot.methods.createDatalayer("form error",{webInteraction:Ot.methods.createWebInteraction(FM(t).find(".cta-section__main").attr("title"),"ebooking form"),form:Ot.methods.formDatalayer(),errorDetails:{errorType:"submission errors",errorMessage:"Please enter the mobile number!"}}))}))},async fetchCityByPincode(){const{eBookingForm:e,eBookingAddress:t,eBookingError:n,eBookingInputs:r}=this.variables,{showModal:a}=this.methods,s=FM(e).data("fetch-by-pincode-url"),o=FM(e).data("fetch-by-pincode-apikey"),l={pincode:FM(`${r}[name="pincode"]`).val()};try{const e=await kt.ajaxHit(s,"GET",l,o);if(e[0]){let n=e[0].City;return UM.variables.city=n,localStorage.setItem("bookingCity",n),UM.variables.stateCode=e[0].StateCode,e[0].StateName.length&&(n+=", "+e[0].StateName),FM(t).text(n).removeClass("opacity-0"),!0}return FM(`${r}[name="pincode"]`).siblings(n).removeClass("opacity-0").text(FM(`${r}[name="pincode"]`).data("invalid-error")),FM(`${r}[name="pincode"]`).addClass("input-error"),Bt.method.hideLoader(),!1}catch(e){Bt.method.hideLoader(),console.error(e),a.call(UM,"api-failure"),i.eventsListeners.ADOBE_DATA_LAYER.push(Ot.methods.createDatalayer("form error",{webInteraction:Ot.methods.createWebInteraction("CONTINUE"),form:Ot.methods.formDatalayer(),errorDetails:Ot.methods.createErrorDatalayer("Fetch city by pincode API failure","API_FAILURE")}))}},async fetchLatLngByPincode(){const{eBookingInputs:e}=this.variables,{showModal:t}=this.methods;try{return await Ut.methods.getLatLngFromPincode(FM(`${e}[name="pincode"]`).val())}catch(e){Bt.method.hideLoader(),console.error(e),t.call(UM,"api-failure")}},async getDealerData(e,t){const{eBookingForm:n,eBookingDealership:r}=this.variables,{showModal:a}=this.methods,s=FM(n).data("dealer-url"),o=FM(n).data("dealer-apikey"),l=FM(n).find('[name="site"]').val(),c=FM(n).find('[name="model"]').val(),d=FM(n).find('[name="dealerRequestType"]').val(),u=FM(n).find('[name="noOfDealers"]').val()||3,h={latitude:e,longitude:t,Source:l,modelLine:c,type:d};try{const e=await kt.ajaxHit(s,"GET",h,o);if(Bt.method.hideLoader(),FM(r).html(`\n                    <option disabled selected hidden value="" >${FM(r).data("placeholder")}</option>\n                `),FM(r).attr("disabled",!0),e.DealerList){FM.each(e.DealerList.slice(0,u),(function(e,t){const n=`\n                            <option class="ebooking__form--dealership__option" \n                                data-sales-manager-email="${t.Sales_Manager_Email}" \n                                data-merchant-id="${t.MerchantID}" \n                                data-dealer-name="${t.DealerName}"\n                                value="${t.DealerCode}"\n                                ${0==e?"selected":""}>\n                                ${t.DealerName}\n                            </option>`;FM(r).append(n),FM(r).attr("disabled",!1)})),Os.methods.validateField(FM(r),n,"submit");FM(`${r} option:selected`).val();return!0}return a.call(UM,"dealer-not-found"),!1}catch(e){Bt.method.hideLoader(),console.error(e),a.call(UM,"api-failure"),i.eventsListeners.ADOBE_DATA_LAYER.push(Ot.methods.createDatalayer("form error",{webInteraction:Ot.methods.createWebInteraction("CONTINUE"),form:Ot.methods.formDatalayer(),errorDetails:Ot.methods.createErrorDatalayer("Dealer API Failure","API_FAILURE")}))}},createConfetti(e){const{eBookingConfetti:t}=this.variables,n=FM("<div>").addClass("confetti"),r=i.confettiColors,a=r[Math.floor(Math.random()*r.length)],s=6*Math.random()+4;n.css({width:`${s}px`,height:`${s}px`,backgroundColor:a,left:e?"0px":"100%",bottom:"0px",transform:e?"translateX(0)":"translateX(-100%)"});const o=e?Math.random()*(.7*FM(window).width()):-Math.random()*(.7*FM(window).width()),l=-Math.random()*FM(window).height()-200;n.css("--x",`${o}px`),n.css("--y",`${l}px`);const c=2+1.5*Math.random();n.css("animation",`fly ${c}s ease-out forwards`),FM(t).append(n),setTimeout((()=>n.remove()),1e3*c)},launchConfetti(){const{createConfetti:e}=this.methods,{eBookingConfetti:t}=this.variables,n=1e3*FM(t).data("confetti-duration"),i=setInterval((()=>{for(let t=0;t<10;t++)e.call(UM,!0),e.call(UM,!1)}),300);setTimeout((()=>clearInterval(i)),n)},async getBookingDetails(){const{eBookingForm:e,eBookingPostPaymentSuccess:t,eBookingPostPaymentFailure:n,eBookingOrderID:r,eBookingTxnID:a,eBookingDMSNoResponse:s,eBookingDMSSucess:o,eBookingDealership:l,eBookingOtpBtn:c,eBookingVariationSection:d,eBookingDealerOption:u}=this.variables,{launchConfetti:h}=this.methods,p=FM(e).data("booking-details-url"),m=FM(e).data("booking-details-apikey"),f={txnid:new URLSearchParams(window.location.search).get("txnid")};Bt.method.showLoader();try{const e=await kt.ajaxHit(p,"GET",f,m);return Bt.method.hideLoader(),void("DMS_LEAD_EXISTS"===e.Status||"DMS_SUCCESS"===e.Status?(FM(t).find(r).text(e.BookingID),FM(t).removeClass("d-none").addClass("d-flex"),FM(o).removeClass("d-none").addClass("d-flex"),i.eventsListeners.ADOBE_DATA_LAYER.push(Ot.methods.createDatalayer("form success",{webInteraction:Ot.methods.createWebInteraction("proceed to pay","ebooking form",localStorage.getItem("bookingVariation")),form:Ot.methods.createFormDatalayer(1,localStorage.getItem("bookingDealership"),e.BookingID,e.TxnID,"successful submission",200),userDetails:Ot.methods.userDetails()})),h.call(UM)):"DMS_MANL_BOOKING"===e.Status||"DMS_NO_RESPONSE"===e.Status||e.TxnID?(FM(t).find(a).text(e.TxnID),FM(t).removeClass("d-none").addClass("d-flex"),FM(s).removeClass("d-none").addClass("d-flex"),i.eventsListeners.ADOBE_DATA_LAYER.push(Ot.methods.createDatalayer("form success",{webInteraction:Ot.methods.createWebInteraction("proceed to pay","ebooking form",localStorage.getItem("bookingVariation")),form:Ot.methods.createFormDatalayer(1,localStorage.getItem("bookingDealership"),e.BookingID,e.TxnID,e.Status,200),userDetails:Ot.methods.userDetails()})),h.call(UM)):(FM(n).removeClass("d-none").addClass("d-flex"),i.eventsListeners.ADOBE_DATA_LAYER.push(Ot.methods.createDatalayer("form failure",{webInteraction:Ot.methods.createWebInteraction("proceed to pay","ebooking form",localStorage.getItem("bookingVariation")),form:Ot.methods.createFormDatalayer(0,localStorage.getItem("bookingDealership"),"","",e.msg,200),userDetails:Ot.methods.userDetails()}))))}catch(e){return i.eventsListeners.ADOBE_DATA_LAYER.push(Ot.methods.createDatalayer("form failure",{webInteraction:Ot.methods.createWebInteraction("proceed to pay","ebooking form",localStorage.getItem("bookingVariation")),form:Ot.methods.createFormDatalayer(0,localStorage.getItem("bookingDealership"),"","","API_FAILURE",""),userDetails:Ot.methods.userDetails()})),void FM(n).removeClass("d-none").addClass("d-flex")}},async getInitbookingResponse(){const{eBookingForm:e,eBookingDealerOption:t,eBookingInputs:n,eBookingVariationTab:r,eBookingPayu:a,eBookingVariationSection:s}=this.variables,{submitPayuForm:o,showModal:l}=this.methods,c=FM(e).data("initbooking-url"),d=FM(e).data("initbooking-apikey"),u=FM(`${s}[aria-hidden='false']`).find(".swiper-slide-active"),h=FM(u).data("material"),p=FM(u).data("feature-category"),m=FM(u).data("feature-class"),f=FM(u).data("feature-key"),g=_satellite?.getVar("MCID")||FM(e).find('[name="mid"]').val(),v=FM(`${t}:selected`).data("sales-manager-email"),_=FM(`${t}:selected`).data("merchant-id"),b=FM(`${t}:selected`).data("dealer-name").trim()+" summary",y=FM(`${t}:selected`).val(),x=FM(e).find('[name="model"]').val(),w=FM(e).find('[name="firstName"]').val(),S=FM(e).find('[name="lastName"]').val(),T=FM(e).find('[name="mobilePhone"]').val(),E=FM(e).find('[name="email"]').val(),M=FM(e).find('[name="pan"]').val(),C=ks.methods.formatDateToISO(FM(e).find('[name="dob"]').val()),A=FM(`${n}[name="pincode"]`).val(),k=FM(e).find('[name="address1"]').val(),D=FM(e).find('[name="address2"]').val(),L=UM.variables.stateCode,I=UM.variables.city,P=(FM(e).find("[name='service_provider']").val(),FM(a).find("[name='country']").val()),R=FM(e).find("[name='commission']").val(),O=gaGlobal?.vid||FM(e).find("[name='cid']").val(),N=FM(e).find("[name='payuflow']").val(),B=FM(e).find("[name='Itemqty']").val(),F=FM(e).find("[name='Itemqtyunit']").val(),U=FM(e).find("[name='Bookingitem1']").val(),z=FM(e).find("[name='Bookingitem2']").val(),V=FM(e).data("initbooking-surl"),H=FM(e).data("initbooking-furl"),$=FM(`${r}[aria-selected="true"]`).data("model-sales-code"),W=FM(`${r}[aria-selected="true"]`).data("booking-amount"),G=window.location.origin+window.location.pathname;localStorage.setItem("bookingMobilePhone",T),localStorage.setItem("bookingEmail",E),localStorage.setItem("bookingPincode",A),localStorage.setItem("bookingVariation",`${FM(`${s}[aria-hidden='false']`).find("h2").text().trim()} : ${FM(`${s}[aria-hidden='false']`).find(".ebooking__variation--pagination input:checked").val()}`.toLowerCase()),localStorage.setItem("bookingDealership",FM(`${t}:selected`).data("dealer-name").trim()),localStorage.setItem("bookingPrice",W),localStorage.setItem("bookingFirstName",FM(e).find('[name="firstName"]').val()),localStorage.setItem("bookingLastName",FM(e).find('[name="lastName"]').val());let j={mid:g,txnid:"",amount:parseInt(W),Sales_Manager_Email:v,productinfo:{paymentParts:[{name:"",merchantId:_,value:W,commission:R,description:b}]},splitRequest:{type:"percentage",splitInfo:{[_]:{aggregatorSubTxnId:"0",aggregatorSubAmt:"100.0",aggregatorCharges:"0.0"}}},modelLine:x,firstname:w,lastname:S,city:I,state:L,country:P,zipcode:A,address1:k,address2:D,email:E,phone:T,surl:V,furl:H,TelNumber:T,Pan:M,ZEBOOKING_ITEMSet:{ZEBOOKING_ITEM:[{Bookingnumber:"",Bookingitem:U,Itemcode:$,Itemcolor:"",Itemqty:B,Itemqtyunit:F,Opclass:"",Optyp:"",Opkey:""},{Bookingnumber:"",Bookingitem:z,Itemcode:h,Itemcolor:"",Itemqty:B,Itemqtyunit:F,Opclass:m,Optyp:p,Opkey:f}]},Branch:y,gclid:"",cid:O,DOB:C,payuflow:N,pageURL:G};j=JSON.stringify(j);try{const e=await kt.ajaxHit(c,"POST",j,d);e.hasOwnProperty("hash")?o.call(UM,e,W):(l.call(UM,"api-failure"),Bt.method.hideLoader())}catch(e){Bt.method.hideLoader(),l.call(UM,"api-failure"),i.eventsListeners.ADOBE_DATA_LAYER.push(Ot.methods.createDatalayer("form error",{webInteraction:Ot.methods.createWebInteraction("PROCEED TO PAY"),form:Ot.methods.formDatalayer(),errorDetails:Ot.methods.createErrorDatalayer("Init Booking API Failure","API_FAILURE")}))}},async isOtpValid(){const{eBookingForm:e}=this.variables;try{Bt.method.showLoader();if("c3VjY2Vzcw=="==(await Os.methods.isOtpValid(e)).status)return!0;{const{eBookingError:e,eBookingOtpGroup:t,eBookingOtpInputs:n}=this.variables,r=FM(t).siblings(e),a=FM(n).data("otp-failure-error");return FM(r).text(a).removeClass("opacity-0"),Bt.method.hideLoader(),i.eventsListeners.ADOBE_DATA_LAYER.push(Ot.methods.createDatalayer("form error",{webInteraction:Ot.methods.createWebInteraction("VERIFY ACCOUNT"),form:Ot.methods.formDatalayer(),errorDetails:Ot.methods.createErrorDatalayer(a,"OTP Error",200)})),!1}}catch(e){const{showModal:t}=this.methods;return t.call(UM,"api-failure"),console.error("An error occured: ",e),Bt.method.hideLoader(),i.eventsListeners.ADOBE_DATA_LAYER.push(Ot.methods.createDatalayer("form error",{webInteraction:Ot.methods.createWebInteraction("VERIFY ACCOUNT"),form:Ot.methods.formDatalayer(),errorDetails:Ot.methods.createErrorDatalayer("API Failure","API_FAILURE")})),!1}},async isEmailValid(){try{const{eBookingInputs:e}=this.variables,t=FM(`${e}[name="email"]`);Bt.method.showLoader();return"clean"==(await Os.methods.isEmailValid(t)).email_status||(Bt.method.hideLoader(),Os.methods.showEmailError(t),!1)}catch(e){const{showModal:t}=this.methods;return t.call(UM,"api-failure"),console.error("An error occured: ",e),Bt.method.hideLoader(),i.eventsListeners.ADOBE_DATA_LAYER.push(Ot.methods.createDatalayer("form error",{webInteraction:Ot.methods.createWebInteraction("PROCEED TO PAY"),form:Ot.methods.formDatalayer(),errorDetails:Ot.methods.createErrorDatalayer("Email API Failure","API_FAILURE")})),!1}},async getKmiData(){const{eBookingForm:e,eBookingMobile:t}=this.variables,{showModal:n}=this.methods,i=FM(e).data("kmiapi"),r=FM(e).data("kmikey"),a=FM(e).find("[name='model']").val(),s=FM(t).eq(0).val();if(i.length>0)try{return await kt.ajaxHit(`${i}?mobilenumber=${s}&model=${a}`,"GET",null,r)}catch(e){console.error(e),Bt.method.hideLoader()}},async getVehicleDetails(){const{eBookingForm:e,eBookingFormDetails:t,eBookingConsent:n,eBookingAmountSection:r,eBookingOtpScreen:a}=this.variables,{showModal:s,addVariations:o,initSwiperVariations:l,changeVariation:c,initSwiper:d,setControlsPosition:u}=this.methods,h=FM(e).data("vehicle-details-url"),p=FM(e).data("vehicle-details-apikey"),m=FM(e).find("[name='model']").val();let f={model:m,site:FM(e).find("[name='site']").val(),fuelType:FM(e).find("[name='fuelType']").val()};f=JSON.stringify(f);try{const e=await kt.ajaxHit(h,"POST",f,p);return 200==e?.statusCode?(FM(a).addClass("d-none").removeClass("d-flex"),FM(t).removeClass("d-none").addClass("d-grid"),FM(n).addClass("d-none").removeClass("d-flex"),FM(r).removeClass("d-none").addClass("d-flex"),o.call(UM,e[`${m}`].AT),l.call(UM),d.call(UM),c.call(UM),u.call(UM),FM(window).on(i.eventsListeners.RESIZE,u.call(UM)),!0):(Bt.method.hideLoader(),s.call(UM,"vehicle-not-found"),!1)}catch(e){return Bt.method.hideLoader(),console.error(e),s.call(UM,"api-failure"),i.eventsListeners.ADOBE_DATA_LAYER.push(Ot.methods.createDatalayer("form error",{webInteraction:Ot.methods.createWebInteraction("VERIFY ACCOUNT"),form:Ot.methods.formDatalayer(),errorDetails:Ot.methods.createErrorDatalayer("Vehicle Details API Failure","API_FAILURE")})),!1}},createVariationOptions(e,t,n){return`\n                    <li class="swiper-slide ebooking__variation--item cursor-pointer mx-3 mx-md-5 flex-shrink-0 d-flex align-items-center" \n                        data-model-sales-code="${e.Model_sale_code}" \n                        data-booking-amount="${e.BookingAmountB1}"\n                        role="tab" id="${n}" aria-controls="tabpanel${t}" ${0==t?'aria-selected="true"':""}>\n                        <div class="ebooking__variation--radio border border-2 border-black rounded-circle flex-shrink-0 d-flex align-items-center justify-content-center">\n                            <div class="ebooking__variation--radio__checked rounded-circle"></div>\n                        </div>\n                        <span class="ebooking__variation--text ff-roboto fs-12 lh-16 text-uppercase text-dark-gray-400">\n                            ${e.Model_name}\n                        </span>\n                    </li>\n                `},addVariations(e){const{eBookingVariationList:t,eBookingVariationContainer:n,eBookingAmount:i,eBookingForm:r}=this.variables,{createVariationOptions:a}=this.methods,o=FM(n).data("showroom-price-label"),l=FM(n).data("variant-colors"),c=FM(n).data("fallback-image"),d=FM(n).data("fallback-alt-text"),u=FM(n).data("top-features-title"),h=ks.methods.formatIndianAmount(e[0].BookingAmountB1);FM(i).text(h);let p="",m="";FM.each(e,((e,t)=>{const n=s();p+=a(t,e,n),m+=`\n                    <div class="ebooking__variation--section ${0==e?"opacity-100":"opacity-0 z-n1 pe-none"}" role="tabpanel" id="tabpanel${e}" \n                        data-showroom-price="${t.Exshowroom_price}"\n                        aria-labelledby="${n}" ${0==e?'aria-hidden="false"':'aria-hidden="true"'}>\n                        ${t.Model_Description.length>0?`\n                            <h2 class="ff-sequel text-black fs-14 lh-16 fvs-light">\n                                ${t.Model_Description}\n                            </h2>\n                        `:""}\n                        <p class="text-black opacity-50 fs-14 lh-16 mt-2">\n                            ${o} â¹ ${ks.methods.formatIndianAmount(t.Exshowroom_price)}\n                        </p>\n                        <div class="swiper ebooking__variation--swiper">\n                            <div class="swiper-wrapper">\n                                ${Object.keys(t.Color_stock_values).map(((e,n)=>{const i=t.Color_stock_values[e],r=i.RGB_Code[0].split(","),a=l[`${t.Model_sale_code}_${e}`]||c,s=l[`${t.Model_sale_code}_${e}`]?i.Color_DESC:d;return`<div class="swiper-slide d-flex flex-column align-items-center justify-content-between h-auto"\n                                            data-feature-category="${t.color[n].Feature_Category}"\n                                            data-feature-class="${t.color[n].Feature_Class}"\n                                            data-feature-key="${t.color[n].Feature_Key}"\n                                            data-material="${e}"\n                                            data-color-name="${i.Color_DESC}"\n                                            data-color-code="rgb(${r[0]}, ${r[1]}, ${r[2]})">\n                                            <div\n                                                class="ebooking__variation--image py-8 pb-lg-4 pt-lg-8 d-flex">\n                                                <picture>\n                                                    <source \n                                                        media="(min-width:650px)" \n                                                        srcset="\n                                                            ${a}&wid=1920\n                                                        " />\n                                                    <img class="w-100 h-100 object-fit-contain" \n                                                        src="${a}&wid=1080"\n                                                        alt="${s}" \n                                                        title="${s}">\n                                                </picture>\n                                            </div>\n                                            <div class="ebooking__variation--color mt-6 mt-lg-0">\n                                                <h4\n                                                    class="ebooking__variation--color-name text-center fs-16 lh-20 text-black ff-sequel fvs-light text-uppercase">\n                                                    ${i.Color_DESC}\n                                                </h4>\n                                            </div>\n                                        </div>`})).join("")}\n                            </div>\n                            <div\n                                class="ebooking__variation--controls d-flex align-items-center justify-content-center mx-auto z-1 position-absolute start-50 translate-middle-x">\n                                <button\n                                    class="ebooking__variation--navigation ebooking__variation--navigation__prev d-flex align-items-center justify-content-center flex-shrink-0 position-relative bg-transparent cursor-pointer"\n                                    type="button"></button>\n                                <div\n                                    class="ebooking__variation--pagination d-flex align-items-center justify-content-center"></div>\n                                <button\n                                    class="ebooking__variation--navigation ebooking__variation--navigation__next d-flex align-items-center justify-content-center flex-shrink-0 position-relative bg-transparent cursor-pointer"\n                                    type="button"></button>\n                            </div>\n                        </div>\n\n                        ${t.topFeature?.length>0&&""!==t.topFeature[0].featureText.trim()?`\n                            <div class="ebooking__variation--features mt-6">\n                                <h4\n                                    class="ebooking__variation--feature-title fs-16 lh-20 text-black ff-sequel fvs-light">\n                                    ${u}\n                                </h4>\n                                <ul class="ebooking__variation--features-list list-style-none d-flex flex-column row-gap-4 mt-4">\n                                    ${t.topFeature.map((e=>`\n                                        <li class="ebooking__variation--features-item d-flex align-items-start column-gap-4">\n                                            ${e.featureIcon?`<div class="ebooking__variation--features-icon d-flex flex-shrink-0">\n                                                <img src="${e.featureIcon}" alt="${e.featureText}" title="${e.featureText}" class="w-100 h-100 object-fit-contain object-position-center">\n                                            </div>`:""}\n                                            <p class="fs-14 lh-20 lh-md-24 text-black">${e.featureText}</p>\n                                        </li>\n                                        `)).join("")}\n                                </ul>\n                            </div>\n                        `:""}\n                    </div>\n                `})),FM(t).html(p),FM(n).html(m)},submitPayuForm(e,t){const{eBookingPayu:n,eBookingForm:i,eBookingInputs:r,eBookingDealerOption:a}=this.variables,{key:s,txnid:o,hash:l,udf1:c,productinfo:d}=e,u={type:"percentage",splitInfo:{[FM(`${a}:selected`).data("merchant-id")]:{aggregatorSubTxnId:o,aggregatorSubAmt:"100.0",aggregatorCharges:"0.0"}}};FM(n).find("[name='key']").val(s),FM(n).find("[name='txnid']").val(o),FM(n).find("[name='hash']").val(l),FM(n).find("[name='udf1']").val(c),FM(n).find("[name='productinfo']").val(JSON.stringify(d)),FM(n).find("[name='splitRequest']").val(JSON.stringify(u)),FM(n).find("[name='amount']").val(t),FM(n).find("[name='email']").val(FM(i).find("[name='email']").val()),FM(n).find("[name='phone']").val(FM(i).find("[name='mobilePhone']").val()),FM(n).find("[name='firstname']").val(FM(i).find("[name='firstName']").val()),FM(n).find("[name='lastname']").val(FM(i).find("[name='lastName']").val()),FM(n).find("[name='zipcode']").val(FM(`${r}[name="pincode"]`).val()),FM(n).find("[name='city']").val(UM.variables.city),FM(n).find("[name='state']").val(UM.variables.stateCode),FM(n).find("[name='udf4']").val(`${window.location.origin}${window.location.pathname}?error.html`),FM(n).find("[name='udf5']").val(`${window.location.origin}${window.location.pathname}?success.html`),FM(n).submit()},handleSubmit:function(){const{eBookingForm:e,eBookingOtpScreen:t,eBookingDetailScreen:n,eBookingPincodeScreen:r,eBookingFeatureScreen:a,eBookingSecondScreen:s,eBookingFormScroll:o,eBookingSubmit:l,eBookingMobile:c,eBookingInputs:d,ctaSection:u,ctaLabel:h,eBookingShowroomPrice:p,eBookingVariationSection:m,eBookingOtpBtn:f,eBookingDealership:g,eBookingDealerOption:v}=this.variables,{isOtpValid:_,isEmailValid:b,getKmiData:y,getInitbookingResponse:x,getVehicleDetails:w}=this.methods;FM(e).on(i.eventsListeners.SUBMIT,(async function(f){f.preventDefault();let g=Os.methods.handleSubmitValidation(this,e,FM(this).find(".ebooking__form--submit .cta-section__main").attr("title"));if(!g){let t=[];FM(`${d}:visible`).each((function(){if(""!==FM(this).val()||FM(this).prop("required")){let n=FM(this).val();const i=Ct.variables.zodSchemas[e].shape[FM(this).attr("name")];"consent"===FM(this).attr("name")&&(n=!!FM(this).is(":checked")),null==n&&(n="");try{i.parse(n)}catch(e){e instanceof Et.ZodError&&t.push(e.errors[0].message)}}else;}));const n=t.join(" | ");i.eventsListeners.ADOBE_DATA_LAYER.push(Ot.methods.createDatalayer("form error",{webInteraction:Ot.methods.createWebInteraction(FM(l).find(".cta-section__label").text().trim(),"ebooking form",[FM(`${m}[aria-hidden='false']`).find("h2").text().trim(),FM(`${m}[aria-hidden='false']`).find(".ebooking__variation--pagination input:checked").val()].filter(Boolean).join(" : ").toLowerCase()),form:Ot.methods.formDatalayer(),errorDetails:{errorType:"submission errors",errorMessage:n}}))}if(g){if(FM(`${t}:visible`).length>0){if(await _.call(UM)){Ot.methods.verifyAccount(f);if(await w.call(UM)){UM.variables.isFeatureScreen=!0;const e=FM(c).eq(0).val();FM(c).eq(1).val(e);const t=await y.call(UM);console.log(t),t.hasOwnProperty("firstName")&&FM.each(t,(function(e,t){FM(`${d}[name="${e}"]`).val(t)})),FM(l).find(h).text(FM(l).data("book-now-label")),FM(l).find(u).attr("title",FM(l).data("book-now-label")),Bt.method.hideLoader()}}}else if(UM.variables.isFeatureScreen){FM(s).removeClass("d-none").addClass("d-flex"),FM(a).addClass("d-none"),i.eventsListeners.ADOBE_DATA_LAYER.push(Ot.methods.createDatalayer("form journey tracking",{webInteraction:Ot.methods.createWebInteraction(FM(l).find(".cta-section__label").text().trim(),"ebooking form",`${FM(`${m}[aria-hidden='false']`).find("h2").text().trim()} : ${FM(`${m}[aria-hidden='false']`).find(".ebooking__variation--pagination input:checked").val()}`.toLowerCase()),form:Ot.methods.formDatalayer("step2.0 - choose your car",0,0,0,1),userDetails:{phoneNumber:FM(".ebooking__form--mobile[name='mobilePhone']").val()}})),UM.variables.isPincodeScreen=!0,UM.variables.isFeatureScreen=!1,FM(`${d}[name="pincode"]`).focus(),FM(l).find(h).text(FM(l).data("continue-label")),FM(l).find(u).attr("title",FM(l).data("continue-label"));const e=ks.methods.formatIndianAmount(FM(`${m}[aria-hidden='false']`).data("showroom-price"));FM(p).text(e)}else if(UM.variables.isPincodeScreen)FM(n).removeClass("d-none"),FM(r).addClass("d-none"),i.eventsListeners.ADOBE_DATA_LAYER.push(Ot.methods.createDatalayer("form journey tracking",{webInteraction:Ot.methods.createWebInteraction(FM(l).find(".cta-section__label").text().trim(),"ebooking form",`${FM(`${m}[aria-hidden='false']`).find("h2").text().trim()} : ${FM(`${m}[aria-hidden='false']`).find(".ebooking__variation--pagination input:checked").val()}`.toLowerCase()),form:Ot.methods.formDatalayer("step2.1 - experience mg select : dealership",0,0,0,1,FM(`${v}:selected`).data("dealer-name").trim()),userDetails:{phoneNumber:FM(".ebooking__form--mobile[name='mobilePhone']").val(),pincode:FM(`${d}[name="pincode"]`).val()}})),UM.variables.isPincodeScreen=!1,UM.variables.isPersonalDetailScreen=!0,FM(l).find(h).text(FM(l).data("pay-now-label")),FM(l).find(u).attr("title",FM(l).data("pay-now-label"));else if(UM.variables.isPersonalDetailScreen){await b.call(UM)&&(i.eventsListeners.ADOBE_DATA_LAYER.push(Ot.methods.createDatalayer("form journey tracking",{webInteraction:Ot.methods.createWebInteraction(FM(l).find(".cta-section__label").text().trim(),"ebooking form",`${FM(`${m}[aria-hidden='false']`).find("h2").text().trim()} : ${FM(`${m}[aria-hidden='false']`).find(".ebooking__variation--pagination input:checked").val()}`.toLowerCase()),form:Ot.methods.formDatalayer("step2.2 - experience mg select : customer details",0,0,0,1),userDetails:Ot.methods.userDetails()})),await x.call(UM))}FM(o).animate({scrollTop:0},500),FM("body, html").animate({scrollTop:0},500)}}))},initGeocoderScript(){const{eBookingForm:e}=this.variables,t=FM(e).data("geocoder-url");null!=Ut.variables.googleGeocoder||FM("main").data("iseditmode")||Ut.methods.loadScript(t)},async handlePostPayment(){const{eBookingForm:e,eBookingPostPayment:t,eBookingPostPaymentFailure:n,eBookingDealerOption:r,eBookingVariationSection:a,eBookingSubmit:s}=this.variables,{getBookingDetails:o}=this.methods;FM(e).addClass("d-none"),FM(t).removeClass("d-none").addClass("d-flex");window.location.href.includes("?success.html")?(await o.call(UM),Bt.method.hideLoader()):(i.eventsListeners.ADOBE_DATA_LAYER.push(Ot.methods.createDatalayer("form failure",{webInteraction:Ot.methods.createWebInteraction("proceed to pay","ebooking form",localStorage.getItem("bookingVariation")),form:Ot.methods.createFormDatalayer(0,localStorage.getItem("bookingDealership"),"","","PAYU_FAILURE",""),userDetails:Ot.methods.userDetails()})),FM(n).removeClass("d-none").addClass("d-flex"))},checkPostPayment(){const e=window.location.href;return!(!e.includes("?success.html")&&!e.includes("?error.html"))},init(){const{eBookingForm:e}=UM.variables;if(FM(e).length){this.checkPostPayment()?this.handlePostPayment.call(UM):(this.initGeocoderScript.call(UM),this.generateValidationSchema.call(UM),Os.methods.handleBlurValidation(FM(e),e),Os.methods.handleInputValidation(FM(e),e),this.handleDisableOtpFields.call(UM),this.generateOtp.call(UM),this.handleNumberField.call(UM),this.handleOtpFields.call(UM),this.handlePincodeFields.call(UM),this.handleSubmit.call(UM),this.handleBackBtn.call(UM),this.handlePanInput.call(UM),this.handleDobField.call(UM),this.initModal.call(UM))}}}};var zM=n(9755);const VM={variables:{linkElement:".quick-action__link",quickLinkSection:".quick-action__section"},methods:{init:function(){const{quickLinkSection:e,linkElement:t}=VM.variables;zM(e).each(((e,n)=>{const i=zM(n).find(t).length,r=window.innerWidth;let a="1fr",s=1;if(r>=768&&r<=1199)s=i%2==0?2:i,r>=800&&s<3&&(a="300px");else if(r>=1200){if(s=Math.min(i,4),r>=1728)a="368px";else if(s<4&&r<1768){let e=parseInt(getComputedStyle(n).columnGap);a=`${e?(innerWidth-160-3*e)/4:300}px`}}else s=1;zM(n).get(0)&&(zM(n).get(0).style.gridTemplateColumns=`repeat(${s}, ${a})`)}))}}},{DOMLOADED:HM}=i.eventsListeners;document.addEventListener(HM,(()=>{Qp.methods.init(),l.methods.init(),Ct.methods.init(),tm.methods.init(),tm.methods.initOnLoad(),Th.methods.init(),Bs.methods.init(),Vs.methods.init(),$s?.methods?.init(),im?.methods?.init(),am.methods.init(),dm.methods.init(),om.methods.init(),wh.methods.init(),pm.methods.init(),bm.methods.init(),Gp.methods.init(),vm.methods.init(),km.methods.init(),UM.methods.init(),Pm.methods.init(),$m.methods.init(),qm.methods.init(),Xm.methods.init(),Zm.methods.init(),BM.methods.init(),tf.methods.init(),Qm.methods.init(),Gm.methods.init(),qp.methods.init(),rf.methods.init(),sf.methods.init(),Df.methods.init(),Xp.methods.init(),mf.methods.init(),Nf.methods.init(),If.methods.init(),Rf.methods.init(),Ff.methods.init(),Vf.methods.initSwiper(),$f.methods.init(),Gf.methods.init(),Zp.methods.init(),VM.methods.init(),Ls.methods.init(),Ps.methods.init(),OM.methods.init(),Pt.methods.init(),Us.methods.init(),Lt.methods.init(),xm.methods.init(),Sm.methods.init(),Om.methods.init(),Bm.methods.init(),Um.methods.init(),Em.methods.init(),Cm.methods.init(),Ot.methods.init(),Lm.methods.init(),Vm.methods.init(),lf.methods.init(),df.methods.init(),hf.methods.init(),wf.methods.init(),gf.methods.init(),_f.methods.init(),yf.methods.init(),Tf.methods.init(),Mf.methods.init(),Af.methods.init(),zf.methods.init()}))}()}();