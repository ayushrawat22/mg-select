@use '../abstracts/functions' as *;
@use '../abstracts/variables' as *;
@use '../abstracts/colors' as *;
@use '../abstracts/mixins' as *;
@use '../abstracts/media-queries' as *;

.history {
  @include scroll-snap-section;
  background-color: $white;
  padding: px_to_rem(80px) 0;
  overflow: hidden;
  min-height: 100vh;
  @include flex-column;
  justify-content: center;

  &__heading {
    text-align: center;
    margin-bottom: px_to_rem(40px);

    &--main {
      margin-top: px_to_rem(20px);
      font-family: $font-family-primary;
      font-size: px_to_rem(14px);
      @include uppercase-text;
      color: $dark-100;
      position: relative;
      display: inline-block;

      &::after {
        content: '';
        position: absolute;
        bottom: px_to_rem(-10px);
        left: 50%;
        transform: translateX(-50%);
        width: px_to_rem(60px);
        height: 1px;
        background-color: $dark-100;
      }
    }
  }

  &__wrapper {
    &--heading {
      padding: 0 px_to_rem(80px);
      margin-bottom: px_to_rem(60px);
      font-family: $font-family-display;

      &-main {
        font-family: $font-family-display;
        font-size: px_to_rem(30px);
        color: $dark-100;
        font-weight: 300;
        letter-spacing: -0.02em;
        line-height: 1.1;
      }
    }

    &--content {
      position: relative;
    }
  }

  &__image {
    width: 100%;
    height: auto;
    object-fit: cover;
    display: block;
    box-shadow: 0 10px 30px $shadow-light;
    transform: translateY(0);
  }

  &__title {
    position: absolute;
    top: 20%;
    left: px_to_rem(15px);
    right: px_to_rem(15px);
    color: $white;
    font-family: $font-family-primary;
    font-size: px_to_rem(10px);
    font-weight: 500;
    @include uppercase-text;
    z-index: 2;
    text-shadow: 0 2px 4px $shadow-dark;
  }

  &__year {
    font-family: $font-family-display;
    font-size: px_to_rem(14px);
    color: $dark-100;
    margin: 0;
    display: block;
    text-align: right;
    font-weight: 500;
    position: absolute;
    top: px_to_rem(-25px);
    right: 0;
    width: 100%;
    z-index: 10;
    transition: font-size 0.25s ease, top 0.25s ease, color 0.25s ease;

    @media (max-width: $mobile) {
      font-size: px_to_rem(18px);
      top: px_to_rem(-35px);
    }
  }

  &__timeline {
    @media (max-width: $mobile) {
      margin-top: px_to_rem(20px);
    }
  }


  .history-swiper {
    width: 100%;
    padding: px_to_rem(100px) 0 px_to_rem(40px);
    overflow: visible;
    cursor: url('../../media/icons/drag.svg'), grab !important;

    &:active {
      cursor: url('../../media/icons/drag.svg'), grabbing !important;
    }

    .swiper-wrapper {
      align-items: center;
    }

    .swiper-slide {
      width: px_to_rem(220px);
      height: auto;
      @include flex-column(px_to_rem(8px));
      justify-content: flex-end;
      position: relative;
      transform-origin: bottom center;
      transform: scale(0.88);
      opacity: 0.6;
      transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.5s ease;

      .history__image {
        width: 100%;
        height: auto;
      }

      &.swiper-slide-active {
        opacity: 1;
        z-index: 40;
        transform: scale(1.1);

        .history__year {
          color: $black;
          font-size: px_to_rem(24px);
          top: px_to_rem(-60px);
          opacity: 1;
          z-index: 50;
        }

        .history__image {
          box-shadow: 0 20px 50px rgba($black, 0.2);
        }
      }

      @media (max-width: $mobile) {
        width: calc(100% - #{px_to_rem(40px)});
        height: px_to_rem(250px);
        transform: scale(0.95);
      }
    }
  }

  &__scale {
    position: relative;
    width: 100%;
    max-width: 100%;
    height: px_to_rem(40px);
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    padding: 0 px_to_rem(20px);
    margin-top: px_to_rem(20px);
    opacity: 1;

    &-tick {
      width: 1px;
      height: px_to_rem(10px);
      background-color: $grey-600;
      opacity: 0.4;

      &.large {
        height: px_to_rem(30px);
        opacity: 1;
        width: 1px;
        background-color: $grey-600;
      }
    }
  }
}